var Ev=Object.defineProperty;var Tv=(r,n,o)=>n in r?Ev(r,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[n]=o;var Yf=(r,n,o)=>Tv(r,typeof n!="symbol"?n+"":n,o);function Mv(r,n){for(var o=0;o<n.length;o++){const t=n[o];if(typeof t!="string"&&!Array.isArray(t)){for(const m in t)if(m!=="default"&&!(m in r)){const u=Object.getOwnPropertyDescriptor(t,m);u&&Object.defineProperty(r,m,u.get?u:{enumerable:!0,get:()=>t[m]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))t(m);new MutationObserver(m=>{for(const u of m)if(u.type==="childList")for(const a of u.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function o(m){const u={};return m.integrity&&(u.integrity=m.integrity),m.referrerPolicy&&(u.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?u.credentials="include":m.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function t(m){if(m.ep)return;m.ep=!0;const u=o(m);fetch(m.href,u)}})();var ni=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function od(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var nm={exports:{}},Sl={},om={exports:{}},pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Va=Symbol.for("react.element"),Cv=Symbol.for("react.portal"),Ov=Symbol.for("react.fragment"),Pv=Symbol.for("react.strict_mode"),Lv=Symbol.for("react.profiler"),Nv=Symbol.for("react.provider"),Rv=Symbol.for("react.context"),Av=Symbol.for("react.forward_ref"),Iv=Symbol.for("react.suspense"),Dv=Symbol.for("react.memo"),Fv=Symbol.for("react.lazy"),Xf=Symbol.iterator;function Uv(r){return r===null||typeof r!="object"?null:(r=Xf&&r[Xf]||r["@@iterator"],typeof r=="function"?r:null)}var sm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},am=Object.assign,im={};function Cs(r,n,o){this.props=r,this.context=n,this.refs=im,this.updater=o||sm}Cs.prototype.isReactComponent={};Cs.prototype.setState=function(r,n){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,n,"setState")};Cs.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function lm(){}lm.prototype=Cs.prototype;function sd(r,n,o){this.props=r,this.context=n,this.refs=im,this.updater=o||sm}var ad=sd.prototype=new lm;ad.constructor=sd;am(ad,Cs.prototype);ad.isPureReactComponent=!0;var Kf=Array.isArray,um=Object.prototype.hasOwnProperty,id={current:null},cm={key:!0,ref:!0,__self:!0,__source:!0};function dm(r,n,o){var t,m={},u=null,a=null;if(n!=null)for(t in n.ref!==void 0&&(a=n.ref),n.key!==void 0&&(u=""+n.key),n)um.call(n,t)&&!cm.hasOwnProperty(t)&&(m[t]=n[t]);var p=arguments.length-2;if(p===1)m.children=o;else if(1<p){for(var s=Array(p),h=0;h<p;h++)s[h]=arguments[h+2];m.children=s}if(r&&r.defaultProps)for(t in p=r.defaultProps,p)m[t]===void 0&&(m[t]=p[t]);return{$$typeof:Va,type:r,key:u,ref:a,props:m,_owner:id.current}}function Bv(r,n){return{$$typeof:Va,type:r.type,key:n,ref:r.ref,props:r.props,_owner:r._owner}}function ld(r){return typeof r=="object"&&r!==null&&r.$$typeof===Va}function zv(r){var n={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(o){return n[o]})}var Qf=/\/+/g;function nu(r,n){return typeof r=="object"&&r!==null&&r.key!=null?zv(""+r.key):n.toString(36)}function Ci(r,n,o,t,m){var u=typeof r;(u==="undefined"||u==="boolean")&&(r=null);var a=!1;if(r===null)a=!0;else switch(u){case"string":case"number":a=!0;break;case"object":switch(r.$$typeof){case Va:case Cv:a=!0}}if(a)return a=r,m=m(a),r=t===""?"."+nu(a,0):t,Kf(m)?(o="",r!=null&&(o=r.replace(Qf,"$&/")+"/"),Ci(m,n,o,"",function(h){return h})):m!=null&&(ld(m)&&(m=Bv(m,o+(!m.key||a&&a.key===m.key?"":(""+m.key).replace(Qf,"$&/")+"/")+r)),n.push(m)),1;if(a=0,t=t===""?".":t+":",Kf(r))for(var p=0;p<r.length;p++){u=r[p];var s=t+nu(u,p);a+=Ci(u,n,o,s,m)}else if(s=Uv(r),typeof s=="function")for(r=s.call(r),p=0;!(u=r.next()).done;)u=u.value,s=t+nu(u,p++),a+=Ci(u,n,o,s,m);else if(u==="object")throw n=String(r),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return a}function oi(r,n,o){if(r==null)return r;var t=[],m=0;return Ci(r,t,"","",function(u){return n.call(o,u,m++)}),t}function Gv(r){if(r._status===-1){var n=r._result;n=n(),n.then(function(o){(r._status===0||r._status===-1)&&(r._status=1,r._result=o)},function(o){(r._status===0||r._status===-1)&&(r._status=2,r._result=o)}),r._status===-1&&(r._status=0,r._result=n)}if(r._status===1)return r._result.default;throw r._result}var wr={current:null},Oi={transition:null},Vv={ReactCurrentDispatcher:wr,ReactCurrentBatchConfig:Oi,ReactCurrentOwner:id};function fm(){throw Error("act(...) is not supported in production builds of React.")}pt.Children={map:oi,forEach:function(r,n,o){oi(r,function(){n.apply(this,arguments)},o)},count:function(r){var n=0;return oi(r,function(){n++}),n},toArray:function(r){return oi(r,function(n){return n})||[]},only:function(r){if(!ld(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};pt.Component=Cs;pt.Fragment=Ov;pt.Profiler=Lv;pt.PureComponent=sd;pt.StrictMode=Pv;pt.Suspense=Iv;pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vv;pt.act=fm;pt.cloneElement=function(r,n,o){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var t=am({},r.props),m=r.key,u=r.ref,a=r._owner;if(n!=null){if(n.ref!==void 0&&(u=n.ref,a=id.current),n.key!==void 0&&(m=""+n.key),r.type&&r.type.defaultProps)var p=r.type.defaultProps;for(s in n)um.call(n,s)&&!cm.hasOwnProperty(s)&&(t[s]=n[s]===void 0&&p!==void 0?p[s]:n[s])}var s=arguments.length-2;if(s===1)t.children=o;else if(1<s){p=Array(s);for(var h=0;h<s;h++)p[h]=arguments[h+2];t.children=p}return{$$typeof:Va,type:r.type,key:m,ref:u,props:t,_owner:a}};pt.createContext=function(r){return r={$$typeof:Rv,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:Nv,_context:r},r.Consumer=r};pt.createElement=dm;pt.createFactory=function(r){var n=dm.bind(null,r);return n.type=r,n};pt.createRef=function(){return{current:null}};pt.forwardRef=function(r){return{$$typeof:Av,render:r}};pt.isValidElement=ld;pt.lazy=function(r){return{$$typeof:Fv,_payload:{_status:-1,_result:r},_init:Gv}};pt.memo=function(r,n){return{$$typeof:Dv,type:r,compare:n===void 0?null:n}};pt.startTransition=function(r){var n=Oi.transition;Oi.transition={};try{r()}finally{Oi.transition=n}};pt.unstable_act=fm;pt.useCallback=function(r,n){return wr.current.useCallback(r,n)};pt.useContext=function(r){return wr.current.useContext(r)};pt.useDebugValue=function(){};pt.useDeferredValue=function(r){return wr.current.useDeferredValue(r)};pt.useEffect=function(r,n){return wr.current.useEffect(r,n)};pt.useId=function(){return wr.current.useId()};pt.useImperativeHandle=function(r,n,o){return wr.current.useImperativeHandle(r,n,o)};pt.useInsertionEffect=function(r,n){return wr.current.useInsertionEffect(r,n)};pt.useLayoutEffect=function(r,n){return wr.current.useLayoutEffect(r,n)};pt.useMemo=function(r,n){return wr.current.useMemo(r,n)};pt.useReducer=function(r,n,o){return wr.current.useReducer(r,n,o)};pt.useRef=function(r){return wr.current.useRef(r)};pt.useState=function(r){return wr.current.useState(r)};pt.useSyncExternalStore=function(r,n,o){return wr.current.useSyncExternalStore(r,n,o)};pt.useTransition=function(){return wr.current.useTransition()};pt.version="18.3.1";om.exports=pt;var Re=om.exports;const ud=od(Re),Hv=Mv({__proto__:null,default:ud},[Re]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wv=Re,qv=Symbol.for("react.element"),$v=Symbol.for("react.fragment"),Yv=Object.prototype.hasOwnProperty,Xv=Wv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kv={key:!0,ref:!0,__self:!0,__source:!0};function hm(r,n,o){var t,m={},u=null,a=null;o!==void 0&&(u=""+o),n.key!==void 0&&(u=""+n.key),n.ref!==void 0&&(a=n.ref);for(t in n)Yv.call(n,t)&&!Kv.hasOwnProperty(t)&&(m[t]=n[t]);if(r&&r.defaultProps)for(t in n=r.defaultProps,n)m[t]===void 0&&(m[t]=n[t]);return{$$typeof:qv,type:r,key:u,ref:a,props:m,_owner:Xv.current}}Sl.Fragment=$v;Sl.jsx=hm;Sl.jsxs=hm;nm.exports=Sl;var H=nm.exports,Vu={},pm={exports:{}},Dr={},mm={exports:{}},ym={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function n(G,V){var X=G.length;G.push(V);e:for(;0<X;){var Q=X-1>>>1,se=G[Q];if(0<m(se,V))G[Q]=V,G[X]=se,X=Q;else break e}}function o(G){return G.length===0?null:G[0]}function t(G){if(G.length===0)return null;var V=G[0],X=G.pop();if(X!==V){G[0]=X;e:for(var Q=0,se=G.length,M=se>>>1;Q<M;){var A=2*(Q+1)-1,z=G[A],$=A+1,Z=G[$];if(0>m(z,X))$<se&&0>m(Z,z)?(G[Q]=Z,G[$]=X,Q=$):(G[Q]=z,G[A]=X,Q=A);else if($<se&&0>m(Z,X))G[Q]=Z,G[$]=X,Q=$;else break e}}return V}function m(G,V){var X=G.sortIndex-V.sortIndex;return X!==0?X:G.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var a=Date,p=a.now();r.unstable_now=function(){return a.now()-p}}var s=[],h=[],b=1,v=null,i=3,d=!1,f=!1,y=!1,g=typeof setTimeout=="function"?setTimeout:null,c=typeof clearTimeout=="function"?clearTimeout:null,l=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(G){for(var V=o(h);V!==null;){if(V.callback===null)t(h);else if(V.startTime<=G)t(h),V.sortIndex=V.expirationTime,n(s,V);else break;V=o(h)}}function x(G){if(y=!1,w(G),!f)if(o(s)!==null)f=!0,B(_);else{var V=o(h);V!==null&&W(x,V.startTime-G)}}function _(G,V){f=!1,y&&(y=!1,c(S),S=-1),d=!0;var X=i;try{for(w(V),v=o(s);v!==null&&(!(v.expirationTime>V)||G&&!C());){var Q=v.callback;if(typeof Q=="function"){v.callback=null,i=v.priorityLevel;var se=Q(v.expirationTime<=V);V=r.unstable_now(),typeof se=="function"?v.callback=se:v===o(s)&&t(s),w(V)}else t(s);v=o(s)}if(v!==null)var M=!0;else{var A=o(h);A!==null&&W(x,A.startTime-V),M=!1}return M}finally{v=null,i=X,d=!1}}var T=!1,E=null,S=-1,P=5,N=-1;function C(){return!(r.unstable_now()-N<P)}function D(){if(E!==null){var G=r.unstable_now();N=G;var V=!0;try{V=E(!0,G)}finally{V?L():(T=!1,E=null)}}else T=!1}var L;if(typeof l=="function")L=function(){l(D)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,I=F.port2;F.port1.onmessage=D,L=function(){I.postMessage(null)}}else L=function(){g(D,0)};function B(G){E=G,T||(T=!0,L())}function W(G,V){S=g(function(){G(r.unstable_now())},V)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_continueExecution=function(){f||d||(f=!0,B(_))},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return i},r.unstable_getFirstCallbackNode=function(){return o(s)},r.unstable_next=function(G){switch(i){case 1:case 2:case 3:var V=3;break;default:V=i}var X=i;i=V;try{return G()}finally{i=X}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(G,V){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var X=i;i=G;try{return V()}finally{i=X}},r.unstable_scheduleCallback=function(G,V,X){var Q=r.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Q+X:Q):X=Q,G){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=X+se,G={id:b++,callback:V,priorityLevel:G,startTime:X,expirationTime:se,sortIndex:-1},X>Q?(G.sortIndex=X,n(h,G),o(s)===null&&G===o(h)&&(y?(c(S),S=-1):y=!0,W(x,X-Q))):(G.sortIndex=se,n(s,G),f||d||(f=!0,B(_))),G},r.unstable_shouldYield=C,r.unstable_wrapCallback=function(G){var V=i;return function(){var X=i;i=V;try{return G.apply(this,arguments)}finally{i=X}}}})(ym);mm.exports=ym;var Qv=mm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv=Re,Ar=Qv;function Ge(r){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+r,o=1;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+r+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gm=new Set,xa={};function Uo(r,n){vs(r,n),vs(r+"Capture",n)}function vs(r,n){for(xa[r]=n,r=0;r<n.length;r++)gm.add(n[r])}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hu=Object.prototype.hasOwnProperty,Jv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zf={},Jf={};function e0(r){return Hu.call(Jf,r)?!0:Hu.call(Zf,r)?!1:Jv.test(r)?Jf[r]=!0:(Zf[r]=!0,!1)}function t0(r,n,o,t){if(o!==null&&o.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return t?!1:o!==null?!o.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function r0(r,n,o,t){if(n===null||typeof n>"u"||t0(r,n,o,t))return!0;if(t)return!1;if(o!==null)switch(o.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function jr(r,n,o,t,m,u,a){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=t,this.attributeNamespace=m,this.mustUseProperty=o,this.propertyName=r,this.type=n,this.sanitizeURL=u,this.removeEmptyString=a}var ur={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){ur[r]=new jr(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var n=r[0];ur[n]=new jr(n,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){ur[r]=new jr(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){ur[r]=new jr(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){ur[r]=new jr(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){ur[r]=new jr(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){ur[r]=new jr(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){ur[r]=new jr(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){ur[r]=new jr(r,5,!1,r.toLowerCase(),null,!1,!1)});var cd=/[\-:]([a-z])/g;function dd(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var n=r.replace(cd,dd);ur[n]=new jr(n,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var n=r.replace(cd,dd);ur[n]=new jr(n,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var n=r.replace(cd,dd);ur[n]=new jr(n,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){ur[r]=new jr(r,1,!1,r.toLowerCase(),null,!1,!1)});ur.xlinkHref=new jr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){ur[r]=new jr(r,1,!1,r.toLowerCase(),null,!0,!0)});function fd(r,n,o,t){var m=ur.hasOwnProperty(n)?ur[n]:null;(m!==null?m.type!==0:t||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(r0(n,o,m,t)&&(o=null),t||m===null?e0(n)&&(o===null?r.removeAttribute(n):r.setAttribute(n,""+o)):m.mustUseProperty?r[m.propertyName]=o===null?m.type===3?!1:"":o:(n=m.attributeName,t=m.attributeNamespace,o===null?r.removeAttribute(n):(m=m.type,o=m===3||m===4&&o===!0?"":""+o,t?r.setAttributeNS(t,n,o):r.setAttribute(n,o))))}var Nn=Zv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,si=Symbol.for("react.element"),Qo=Symbol.for("react.portal"),Zo=Symbol.for("react.fragment"),hd=Symbol.for("react.strict_mode"),Wu=Symbol.for("react.profiler"),vm=Symbol.for("react.provider"),bm=Symbol.for("react.context"),pd=Symbol.for("react.forward_ref"),qu=Symbol.for("react.suspense"),$u=Symbol.for("react.suspense_list"),md=Symbol.for("react.memo"),zn=Symbol.for("react.lazy"),xm=Symbol.for("react.offscreen"),eh=Symbol.iterator;function Hs(r){return r===null||typeof r!="object"?null:(r=eh&&r[eh]||r["@@iterator"],typeof r=="function"?r:null)}var Ft=Object.assign,ou;function ta(r){if(ou===void 0)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);ou=n&&n[1]||""}return`
`+ou+r}var su=!1;function au(r,n){if(!r||su)return"";su=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(h){var t=h}Reflect.construct(r,[],n)}else{try{n.call()}catch(h){t=h}r.call(n.prototype)}else{try{throw Error()}catch(h){t=h}r()}}catch(h){if(h&&t&&typeof h.stack=="string"){for(var m=h.stack.split(`
`),u=t.stack.split(`
`),a=m.length-1,p=u.length-1;1<=a&&0<=p&&m[a]!==u[p];)p--;for(;1<=a&&0<=p;a--,p--)if(m[a]!==u[p]){if(a!==1||p!==1)do if(a--,p--,0>p||m[a]!==u[p]){var s=`
`+m[a].replace(" at new "," at ");return r.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",r.displayName)),s}while(1<=a&&0<=p);break}}}finally{su=!1,Error.prepareStackTrace=o}return(r=r?r.displayName||r.name:"")?ta(r):""}function n0(r){switch(r.tag){case 5:return ta(r.type);case 16:return ta("Lazy");case 13:return ta("Suspense");case 19:return ta("SuspenseList");case 0:case 2:case 15:return r=au(r.type,!1),r;case 11:return r=au(r.type.render,!1),r;case 1:return r=au(r.type,!0),r;default:return""}}function Yu(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case Zo:return"Fragment";case Qo:return"Portal";case Wu:return"Profiler";case hd:return"StrictMode";case qu:return"Suspense";case $u:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case bm:return(r.displayName||"Context")+".Consumer";case vm:return(r._context.displayName||"Context")+".Provider";case pd:var n=r.render;return r=r.displayName,r||(r=n.displayName||n.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case md:return n=r.displayName||null,n!==null?n:Yu(r.type)||"Memo";case zn:n=r._payload,r=r._init;try{return Yu(r(n))}catch{}}return null}function o0(r){var n=r.type;switch(r.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=n.render,r=r.displayName||r.name||"",n.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yu(n);case 8:return n===hd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function ao(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function wm(r){var n=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function s0(r){var n=wm(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,n),t=""+r[n];if(!r.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,u=o.set;return Object.defineProperty(r,n,{configurable:!0,get:function(){return m.call(this)},set:function(a){t=""+a,u.call(this,a)}}),Object.defineProperty(r,n,{enumerable:o.enumerable}),{getValue:function(){return t},setValue:function(a){t=""+a},stopTracking:function(){r._valueTracker=null,delete r[n]}}}}function ai(r){r._valueTracker||(r._valueTracker=s0(r))}function jm(r){if(!r)return!1;var n=r._valueTracker;if(!n)return!0;var o=n.getValue(),t="";return r&&(t=wm(r)?r.checked?"true":"false":r.value),r=t,r!==o?(n.setValue(r),!0):!1}function Gi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Xu(r,n){var o=n.checked;return Ft({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??r._wrapperState.initialChecked})}function th(r,n){var o=n.defaultValue==null?"":n.defaultValue,t=n.checked!=null?n.checked:n.defaultChecked;o=ao(n.value!=null?n.value:o),r._wrapperState={initialChecked:t,initialValue:o,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function _m(r,n){n=n.checked,n!=null&&fd(r,"checked",n,!1)}function Ku(r,n){_m(r,n);var o=ao(n.value),t=n.type;if(o!=null)t==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+o):r.value!==""+o&&(r.value=""+o);else if(t==="submit"||t==="reset"){r.removeAttribute("value");return}n.hasOwnProperty("value")?Qu(r,n.type,o):n.hasOwnProperty("defaultValue")&&Qu(r,n.type,ao(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(r.defaultChecked=!!n.defaultChecked)}function rh(r,n,o){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var t=n.type;if(!(t!=="submit"&&t!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+r._wrapperState.initialValue,o||n===r.value||(r.value=n),r.defaultValue=n}o=r.name,o!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,o!==""&&(r.name=o)}function Qu(r,n,o){(n!=="number"||Gi(r.ownerDocument)!==r)&&(o==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+o&&(r.defaultValue=""+o))}var ra=Array.isArray;function cs(r,n,o,t){if(r=r.options,n){n={};for(var m=0;m<o.length;m++)n["$"+o[m]]=!0;for(o=0;o<r.length;o++)m=n.hasOwnProperty("$"+r[o].value),r[o].selected!==m&&(r[o].selected=m),m&&t&&(r[o].defaultSelected=!0)}else{for(o=""+ao(o),n=null,m=0;m<r.length;m++){if(r[m].value===o){r[m].selected=!0,t&&(r[m].defaultSelected=!0);return}n!==null||r[m].disabled||(n=r[m])}n!==null&&(n.selected=!0)}}function Zu(r,n){if(n.dangerouslySetInnerHTML!=null)throw Error(Ge(91));return Ft({},n,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function nh(r,n){var o=n.value;if(o==null){if(o=n.children,n=n.defaultValue,o!=null){if(n!=null)throw Error(Ge(92));if(ra(o)){if(1<o.length)throw Error(Ge(93));o=o[0]}n=o}n==null&&(n=""),o=n}r._wrapperState={initialValue:ao(o)}}function Sm(r,n){var o=ao(n.value),t=ao(n.defaultValue);o!=null&&(o=""+o,o!==r.value&&(r.value=o),n.defaultValue==null&&r.defaultValue!==o&&(r.defaultValue=o)),t!=null&&(r.defaultValue=""+t)}function oh(r){var n=r.textContent;n===r._wrapperState.initialValue&&n!==""&&n!==null&&(r.value=n)}function km(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ju(r,n){return r==null||r==="http://www.w3.org/1999/xhtml"?km(n):r==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var ii,Em=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,o,t,m){MSApp.execUnsafeLocalFunction(function(){return r(n,o,t,m)})}:r}(function(r,n){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=n;else{for(ii=ii||document.createElement("div"),ii.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=ii.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;n.firstChild;)r.appendChild(n.firstChild)}});function wa(r,n){if(n){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=n;return}}r.textContent=n}var ia={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},a0=["Webkit","ms","Moz","O"];Object.keys(ia).forEach(function(r){a0.forEach(function(n){n=n+r.charAt(0).toUpperCase()+r.substring(1),ia[n]=ia[r]})});function Tm(r,n,o){return n==null||typeof n=="boolean"||n===""?"":o||typeof n!="number"||n===0||ia.hasOwnProperty(r)&&ia[r]?(""+n).trim():n+"px"}function Mm(r,n){r=r.style;for(var o in n)if(n.hasOwnProperty(o)){var t=o.indexOf("--")===0,m=Tm(o,n[o],t);o==="float"&&(o="cssFloat"),t?r.setProperty(o,m):r[o]=m}}var i0=Ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ec(r,n){if(n){if(i0[r]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(Ge(137,r));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(Ge(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(Ge(61))}if(n.style!=null&&typeof n.style!="object")throw Error(Ge(62))}}function tc(r,n){if(r.indexOf("-")===-1)return typeof n.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rc=null;function yd(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var nc=null,ds=null,fs=null;function sh(r){if(r=qa(r)){if(typeof nc!="function")throw Error(Ge(280));var n=r.stateNode;n&&(n=Cl(n),nc(r.stateNode,r.type,n))}}function Cm(r){ds?fs?fs.push(r):fs=[r]:ds=r}function Om(){if(ds){var r=ds,n=fs;if(fs=ds=null,sh(r),n)for(r=0;r<n.length;r++)sh(n[r])}}function Pm(r,n){return r(n)}function Lm(){}var iu=!1;function Nm(r,n,o){if(iu)return r(n,o);iu=!0;try{return Pm(r,n,o)}finally{iu=!1,(ds!==null||fs!==null)&&(Lm(),Om())}}function ja(r,n){var o=r.stateNode;if(o===null)return null;var t=Cl(o);if(t===null)return null;o=t[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(t=!t.disabled)||(r=r.type,t=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!t;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(Ge(231,n,typeof o));return o}var oc=!1;if(Cn)try{var Ws={};Object.defineProperty(Ws,"passive",{get:function(){oc=!0}}),window.addEventListener("test",Ws,Ws),window.removeEventListener("test",Ws,Ws)}catch{oc=!1}function l0(r,n,o,t,m,u,a,p,s){var h=Array.prototype.slice.call(arguments,3);try{n.apply(o,h)}catch(b){this.onError(b)}}var la=!1,Vi=null,Hi=!1,sc=null,u0={onError:function(r){la=!0,Vi=r}};function c0(r,n,o,t,m,u,a,p,s){la=!1,Vi=null,l0.apply(u0,arguments)}function d0(r,n,o,t,m,u,a,p,s){if(c0.apply(this,arguments),la){if(la){var h=Vi;la=!1,Vi=null}else throw Error(Ge(198));Hi||(Hi=!0,sc=h)}}function Bo(r){var n=r,o=r;if(r.alternate)for(;n.return;)n=n.return;else{r=n;do n=r,n.flags&4098&&(o=n.return),r=n.return;while(r)}return n.tag===3?o:null}function Rm(r){if(r.tag===13){var n=r.memoizedState;if(n===null&&(r=r.alternate,r!==null&&(n=r.memoizedState)),n!==null)return n.dehydrated}return null}function ah(r){if(Bo(r)!==r)throw Error(Ge(188))}function f0(r){var n=r.alternate;if(!n){if(n=Bo(r),n===null)throw Error(Ge(188));return n!==r?null:r}for(var o=r,t=n;;){var m=o.return;if(m===null)break;var u=m.alternate;if(u===null){if(t=m.return,t!==null){o=t;continue}break}if(m.child===u.child){for(u=m.child;u;){if(u===o)return ah(m),r;if(u===t)return ah(m),n;u=u.sibling}throw Error(Ge(188))}if(o.return!==t.return)o=m,t=u;else{for(var a=!1,p=m.child;p;){if(p===o){a=!0,o=m,t=u;break}if(p===t){a=!0,t=m,o=u;break}p=p.sibling}if(!a){for(p=u.child;p;){if(p===o){a=!0,o=u,t=m;break}if(p===t){a=!0,t=u,o=m;break}p=p.sibling}if(!a)throw Error(Ge(189))}}if(o.alternate!==t)throw Error(Ge(190))}if(o.tag!==3)throw Error(Ge(188));return o.stateNode.current===o?r:n}function Am(r){return r=f0(r),r!==null?Im(r):null}function Im(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var n=Im(r);if(n!==null)return n;r=r.sibling}return null}var Dm=Ar.unstable_scheduleCallback,ih=Ar.unstable_cancelCallback,h0=Ar.unstable_shouldYield,p0=Ar.unstable_requestPaint,Vt=Ar.unstable_now,m0=Ar.unstable_getCurrentPriorityLevel,gd=Ar.unstable_ImmediatePriority,Fm=Ar.unstable_UserBlockingPriority,Wi=Ar.unstable_NormalPriority,y0=Ar.unstable_LowPriority,Um=Ar.unstable_IdlePriority,kl=null,gn=null;function g0(r){if(gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(kl,r,void 0,(r.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:x0,v0=Math.log,b0=Math.LN2;function x0(r){return r>>>=0,r===0?32:31-(v0(r)/b0|0)|0}var li=64,ui=4194304;function na(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function qi(r,n){var o=r.pendingLanes;if(o===0)return 0;var t=0,m=r.suspendedLanes,u=r.pingedLanes,a=o&268435455;if(a!==0){var p=a&~m;p!==0?t=na(p):(u&=a,u!==0&&(t=na(u)))}else a=o&~m,a!==0?t=na(a):u!==0&&(t=na(u));if(t===0)return 0;if(n!==0&&n!==t&&!(n&m)&&(m=t&-t,u=n&-n,m>=u||m===16&&(u&4194240)!==0))return n;if(t&4&&(t|=o&16),n=r.entangledLanes,n!==0)for(r=r.entanglements,n&=t;0<n;)o=31-tn(n),m=1<<o,t|=r[o],n&=~m;return t}function w0(r,n){switch(r){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function j0(r,n){for(var o=r.suspendedLanes,t=r.pingedLanes,m=r.expirationTimes,u=r.pendingLanes;0<u;){var a=31-tn(u),p=1<<a,s=m[a];s===-1?(!(p&o)||p&t)&&(m[a]=w0(p,n)):s<=n&&(r.expiredLanes|=p),u&=~p}}function ac(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Bm(){var r=li;return li<<=1,!(li&4194240)&&(li=64),r}function lu(r){for(var n=[],o=0;31>o;o++)n.push(r);return n}function Ha(r,n,o){r.pendingLanes|=n,n!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,n=31-tn(n),r[n]=o}function _0(r,n){var o=r.pendingLanes&~n;r.pendingLanes=n,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=n,r.mutableReadLanes&=n,r.entangledLanes&=n,n=r.entanglements;var t=r.eventTimes;for(r=r.expirationTimes;0<o;){var m=31-tn(o),u=1<<m;n[m]=0,t[m]=-1,r[m]=-1,o&=~u}}function vd(r,n){var o=r.entangledLanes|=n;for(r=r.entanglements;o;){var t=31-tn(o),m=1<<t;m&n|r[t]&n&&(r[t]|=n),o&=~m}}var jt=0;function zm(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var Gm,bd,Vm,Hm,Wm,ic=!1,ci=[],Qn=null,Zn=null,Jn=null,_a=new Map,Sa=new Map,qn=[],S0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lh(r,n){switch(r){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":_a.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sa.delete(n.pointerId)}}function qs(r,n,o,t,m,u){return r===null||r.nativeEvent!==u?(r={blockedOn:n,domEventName:o,eventSystemFlags:t,nativeEvent:u,targetContainers:[m]},n!==null&&(n=qa(n),n!==null&&bd(n)),r):(r.eventSystemFlags|=t,n=r.targetContainers,m!==null&&n.indexOf(m)===-1&&n.push(m),r)}function k0(r,n,o,t,m){switch(n){case"focusin":return Qn=qs(Qn,r,n,o,t,m),!0;case"dragenter":return Zn=qs(Zn,r,n,o,t,m),!0;case"mouseover":return Jn=qs(Jn,r,n,o,t,m),!0;case"pointerover":var u=m.pointerId;return _a.set(u,qs(_a.get(u)||null,r,n,o,t,m)),!0;case"gotpointercapture":return u=m.pointerId,Sa.set(u,qs(Sa.get(u)||null,r,n,o,t,m)),!0}return!1}function qm(r){var n=wo(r.target);if(n!==null){var o=Bo(n);if(o!==null){if(n=o.tag,n===13){if(n=Rm(o),n!==null){r.blockedOn=n,Wm(r.priority,function(){Vm(o)});return}}else if(n===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Pi(r){if(r.blockedOn!==null)return!1;for(var n=r.targetContainers;0<n.length;){var o=lc(r.domEventName,r.eventSystemFlags,n[0],r.nativeEvent);if(o===null){o=r.nativeEvent;var t=new o.constructor(o.type,o);rc=t,o.target.dispatchEvent(t),rc=null}else return n=qa(o),n!==null&&bd(n),r.blockedOn=o,!1;n.shift()}return!0}function uh(r,n,o){Pi(r)&&o.delete(n)}function E0(){ic=!1,Qn!==null&&Pi(Qn)&&(Qn=null),Zn!==null&&Pi(Zn)&&(Zn=null),Jn!==null&&Pi(Jn)&&(Jn=null),_a.forEach(uh),Sa.forEach(uh)}function $s(r,n){r.blockedOn===n&&(r.blockedOn=null,ic||(ic=!0,Ar.unstable_scheduleCallback(Ar.unstable_NormalPriority,E0)))}function ka(r){function n(m){return $s(m,r)}if(0<ci.length){$s(ci[0],r);for(var o=1;o<ci.length;o++){var t=ci[o];t.blockedOn===r&&(t.blockedOn=null)}}for(Qn!==null&&$s(Qn,r),Zn!==null&&$s(Zn,r),Jn!==null&&$s(Jn,r),_a.forEach(n),Sa.forEach(n),o=0;o<qn.length;o++)t=qn[o],t.blockedOn===r&&(t.blockedOn=null);for(;0<qn.length&&(o=qn[0],o.blockedOn===null);)qm(o),o.blockedOn===null&&qn.shift()}var hs=Nn.ReactCurrentBatchConfig,$i=!0;function T0(r,n,o,t){var m=jt,u=hs.transition;hs.transition=null;try{jt=1,xd(r,n,o,t)}finally{jt=m,hs.transition=u}}function M0(r,n,o,t){var m=jt,u=hs.transition;hs.transition=null;try{jt=4,xd(r,n,o,t)}finally{jt=m,hs.transition=u}}function xd(r,n,o,t){if($i){var m=lc(r,n,o,t);if(m===null)vu(r,n,t,Yi,o),lh(r,t);else if(k0(m,r,n,o,t))t.stopPropagation();else if(lh(r,t),n&4&&-1<S0.indexOf(r)){for(;m!==null;){var u=qa(m);if(u!==null&&Gm(u),u=lc(r,n,o,t),u===null&&vu(r,n,t,Yi,o),u===m)break;m=u}m!==null&&t.stopPropagation()}else vu(r,n,t,null,o)}}var Yi=null;function lc(r,n,o,t){if(Yi=null,r=yd(t),r=wo(r),r!==null)if(n=Bo(r),n===null)r=null;else if(o=n.tag,o===13){if(r=Rm(n),r!==null)return r;r=null}else if(o===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;r=null}else n!==r&&(r=null);return Yi=r,null}function $m(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(m0()){case gd:return 1;case Fm:return 4;case Wi:case y0:return 16;case Um:return 536870912;default:return 16}default:return 16}}var Yn=null,wd=null,Li=null;function Ym(){if(Li)return Li;var r,n=wd,o=n.length,t,m="value"in Yn?Yn.value:Yn.textContent,u=m.length;for(r=0;r<o&&n[r]===m[r];r++);var a=o-r;for(t=1;t<=a&&n[o-t]===m[u-t];t++);return Li=m.slice(r,1<t?1-t:void 0)}function Ni(r){var n=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&n===13&&(r=13)):r=n,r===10&&(r=13),32<=r||r===13?r:0}function di(){return!0}function ch(){return!1}function Fr(r){function n(o,t,m,u,a){this._reactName=o,this._targetInst=m,this.type=t,this.nativeEvent=u,this.target=a,this.currentTarget=null;for(var p in r)r.hasOwnProperty(p)&&(o=r[p],this[p]=o?o(u):u[p]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?di:ch,this.isPropagationStopped=ch,this}return Ft(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=di)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=di)},persist:function(){},isPersistent:di}),n}var Os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jd=Fr(Os),Wa=Ft({},Os,{view:0,detail:0}),C0=Fr(Wa),uu,cu,Ys,El=Ft({},Wa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_d,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ys&&(Ys&&r.type==="mousemove"?(uu=r.screenX-Ys.screenX,cu=r.screenY-Ys.screenY):cu=uu=0,Ys=r),uu)},movementY:function(r){return"movementY"in r?r.movementY:cu}}),dh=Fr(El),O0=Ft({},El,{dataTransfer:0}),P0=Fr(O0),L0=Ft({},Wa,{relatedTarget:0}),du=Fr(L0),N0=Ft({},Os,{animationName:0,elapsedTime:0,pseudoElement:0}),R0=Fr(N0),A0=Ft({},Os,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),I0=Fr(A0),D0=Ft({},Os,{data:0}),fh=Fr(D0),F0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function z0(r){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(r):(r=B0[r])?!!n[r]:!1}function _d(){return z0}var G0=Ft({},Wa,{key:function(r){if(r.key){var n=F0[r.key]||r.key;if(n!=="Unidentified")return n}return r.type==="keypress"?(r=Ni(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?U0[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_d,charCode:function(r){return r.type==="keypress"?Ni(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ni(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),V0=Fr(G0),H0=Ft({},El,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hh=Fr(H0),W0=Ft({},Wa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_d}),q0=Fr(W0),$0=Ft({},Os,{propertyName:0,elapsedTime:0,pseudoElement:0}),Y0=Fr($0),X0=Ft({},El,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),K0=Fr(X0),Q0=[9,13,27,32],Sd=Cn&&"CompositionEvent"in window,ua=null;Cn&&"documentMode"in document&&(ua=document.documentMode);var Z0=Cn&&"TextEvent"in window&&!ua,Xm=Cn&&(!Sd||ua&&8<ua&&11>=ua),ph=" ",mh=!1;function Km(r,n){switch(r){case"keyup":return Q0.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Jo=!1;function J0(r,n){switch(r){case"compositionend":return Qm(n);case"keypress":return n.which!==32?null:(mh=!0,ph);case"textInput":return r=n.data,r===ph&&mh?null:r;default:return null}}function eb(r,n){if(Jo)return r==="compositionend"||!Sd&&Km(r,n)?(r=Ym(),Li=wd=Yn=null,Jo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Xm&&n.locale!=="ko"?null:n.data;default:return null}}var tb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yh(r){var n=r&&r.nodeName&&r.nodeName.toLowerCase();return n==="input"?!!tb[r.type]:n==="textarea"}function Zm(r,n,o,t){Cm(t),n=Xi(n,"onChange"),0<n.length&&(o=new jd("onChange","change",null,o,t),r.push({event:o,listeners:n}))}var ca=null,Ea=null;function rb(r){uy(r,0)}function Tl(r){var n=rs(r);if(jm(n))return r}function nb(r,n){if(r==="change")return n}var Jm=!1;if(Cn){var fu;if(Cn){var hu="oninput"in document;if(!hu){var gh=document.createElement("div");gh.setAttribute("oninput","return;"),hu=typeof gh.oninput=="function"}fu=hu}else fu=!1;Jm=fu&&(!document.documentMode||9<document.documentMode)}function vh(){ca&&(ca.detachEvent("onpropertychange",ey),Ea=ca=null)}function ey(r){if(r.propertyName==="value"&&Tl(Ea)){var n=[];Zm(n,Ea,r,yd(r)),Nm(rb,n)}}function ob(r,n,o){r==="focusin"?(vh(),ca=n,Ea=o,ca.attachEvent("onpropertychange",ey)):r==="focusout"&&vh()}function sb(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Tl(Ea)}function ab(r,n){if(r==="click")return Tl(n)}function ib(r,n){if(r==="input"||r==="change")return Tl(n)}function lb(r,n){return r===n&&(r!==0||1/r===1/n)||r!==r&&n!==n}var nn=typeof Object.is=="function"?Object.is:lb;function Ta(r,n){if(nn(r,n))return!0;if(typeof r!="object"||r===null||typeof n!="object"||n===null)return!1;var o=Object.keys(r),t=Object.keys(n);if(o.length!==t.length)return!1;for(t=0;t<o.length;t++){var m=o[t];if(!Hu.call(n,m)||!nn(r[m],n[m]))return!1}return!0}function bh(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function xh(r,n){var o=bh(r);r=0;for(var t;o;){if(o.nodeType===3){if(t=r+o.textContent.length,r<=n&&t>=n)return{node:o,offset:n-r};r=t}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=bh(o)}}function ty(r,n){return r&&n?r===n?!0:r&&r.nodeType===3?!1:n&&n.nodeType===3?ty(r,n.parentNode):"contains"in r?r.contains(n):r.compareDocumentPosition?!!(r.compareDocumentPosition(n)&16):!1:!1}function ry(){for(var r=window,n=Gi();n instanceof r.HTMLIFrameElement;){try{var o=typeof n.contentWindow.location.href=="string"}catch{o=!1}if(o)r=n.contentWindow;else break;n=Gi(r.document)}return n}function kd(r){var n=r&&r.nodeName&&r.nodeName.toLowerCase();return n&&(n==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||n==="textarea"||r.contentEditable==="true")}function ub(r){var n=ry(),o=r.focusedElem,t=r.selectionRange;if(n!==o&&o&&o.ownerDocument&&ty(o.ownerDocument.documentElement,o)){if(t!==null&&kd(o)){if(n=t.start,r=t.end,r===void 0&&(r=n),"selectionStart"in o)o.selectionStart=n,o.selectionEnd=Math.min(r,o.value.length);else if(r=(n=o.ownerDocument||document)&&n.defaultView||window,r.getSelection){r=r.getSelection();var m=o.textContent.length,u=Math.min(t.start,m);t=t.end===void 0?u:Math.min(t.end,m),!r.extend&&u>t&&(m=t,t=u,u=m),m=xh(o,u);var a=xh(o,t);m&&a&&(r.rangeCount!==1||r.anchorNode!==m.node||r.anchorOffset!==m.offset||r.focusNode!==a.node||r.focusOffset!==a.offset)&&(n=n.createRange(),n.setStart(m.node,m.offset),r.removeAllRanges(),u>t?(r.addRange(n),r.extend(a.node,a.offset)):(n.setEnd(a.node,a.offset),r.addRange(n)))}}for(n=[],r=o;r=r.parentNode;)r.nodeType===1&&n.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<n.length;o++)r=n[o],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var cb=Cn&&"documentMode"in document&&11>=document.documentMode,es=null,uc=null,da=null,cc=!1;function wh(r,n,o){var t=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;cc||es==null||es!==Gi(t)||(t=es,"selectionStart"in t&&kd(t)?t={start:t.selectionStart,end:t.selectionEnd}:(t=(t.ownerDocument&&t.ownerDocument.defaultView||window).getSelection(),t={anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}),da&&Ta(da,t)||(da=t,t=Xi(uc,"onSelect"),0<t.length&&(n=new jd("onSelect","select",null,n,o),r.push({event:n,listeners:t}),n.target=es)))}function fi(r,n){var o={};return o[r.toLowerCase()]=n.toLowerCase(),o["Webkit"+r]="webkit"+n,o["Moz"+r]="moz"+n,o}var ts={animationend:fi("Animation","AnimationEnd"),animationiteration:fi("Animation","AnimationIteration"),animationstart:fi("Animation","AnimationStart"),transitionend:fi("Transition","TransitionEnd")},pu={},ny={};Cn&&(ny=document.createElement("div").style,"AnimationEvent"in window||(delete ts.animationend.animation,delete ts.animationiteration.animation,delete ts.animationstart.animation),"TransitionEvent"in window||delete ts.transitionend.transition);function Ml(r){if(pu[r])return pu[r];if(!ts[r])return r;var n=ts[r],o;for(o in n)if(n.hasOwnProperty(o)&&o in ny)return pu[r]=n[o];return r}var oy=Ml("animationend"),sy=Ml("animationiteration"),ay=Ml("animationstart"),iy=Ml("transitionend"),ly=new Map,jh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function co(r,n){ly.set(r,n),Uo(n,[r])}for(var mu=0;mu<jh.length;mu++){var yu=jh[mu],db=yu.toLowerCase(),fb=yu[0].toUpperCase()+yu.slice(1);co(db,"on"+fb)}co(oy,"onAnimationEnd");co(sy,"onAnimationIteration");co(ay,"onAnimationStart");co("dblclick","onDoubleClick");co("focusin","onFocus");co("focusout","onBlur");co(iy,"onTransitionEnd");vs("onMouseEnter",["mouseout","mouseover"]);vs("onMouseLeave",["mouseout","mouseover"]);vs("onPointerEnter",["pointerout","pointerover"]);vs("onPointerLeave",["pointerout","pointerover"]);Uo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Uo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Uo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Uo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Uo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Uo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hb=new Set("cancel close invalid load scroll toggle".split(" ").concat(oa));function _h(r,n,o){var t=r.type||"unknown-event";r.currentTarget=o,d0(t,n,void 0,r),r.currentTarget=null}function uy(r,n){n=(n&4)!==0;for(var o=0;o<r.length;o++){var t=r[o],m=t.event;t=t.listeners;e:{var u=void 0;if(n)for(var a=t.length-1;0<=a;a--){var p=t[a],s=p.instance,h=p.currentTarget;if(p=p.listener,s!==u&&m.isPropagationStopped())break e;_h(m,p,h),u=s}else for(a=0;a<t.length;a++){if(p=t[a],s=p.instance,h=p.currentTarget,p=p.listener,s!==u&&m.isPropagationStopped())break e;_h(m,p,h),u=s}}}if(Hi)throw r=sc,Hi=!1,sc=null,r}function Lt(r,n){var o=n[mc];o===void 0&&(o=n[mc]=new Set);var t=r+"__bubble";o.has(t)||(cy(n,r,2,!1),o.add(t))}function gu(r,n,o){var t=0;n&&(t|=4),cy(o,r,t,n)}var hi="_reactListening"+Math.random().toString(36).slice(2);function Ma(r){if(!r[hi]){r[hi]=!0,gm.forEach(function(o){o!=="selectionchange"&&(hb.has(o)||gu(o,!1,r),gu(o,!0,r))});var n=r.nodeType===9?r:r.ownerDocument;n===null||n[hi]||(n[hi]=!0,gu("selectionchange",!1,n))}}function cy(r,n,o,t){switch($m(n)){case 1:var m=T0;break;case 4:m=M0;break;default:m=xd}o=m.bind(null,n,o,r),m=void 0,!oc||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(m=!0),t?m!==void 0?r.addEventListener(n,o,{capture:!0,passive:m}):r.addEventListener(n,o,!0):m!==void 0?r.addEventListener(n,o,{passive:m}):r.addEventListener(n,o,!1)}function vu(r,n,o,t,m){var u=t;if(!(n&1)&&!(n&2)&&t!==null)e:for(;;){if(t===null)return;var a=t.tag;if(a===3||a===4){var p=t.stateNode.containerInfo;if(p===m||p.nodeType===8&&p.parentNode===m)break;if(a===4)for(a=t.return;a!==null;){var s=a.tag;if((s===3||s===4)&&(s=a.stateNode.containerInfo,s===m||s.nodeType===8&&s.parentNode===m))return;a=a.return}for(;p!==null;){if(a=wo(p),a===null)return;if(s=a.tag,s===5||s===6){t=u=a;continue e}p=p.parentNode}}t=t.return}Nm(function(){var h=u,b=yd(o),v=[];e:{var i=ly.get(r);if(i!==void 0){var d=jd,f=r;switch(r){case"keypress":if(Ni(o)===0)break e;case"keydown":case"keyup":d=V0;break;case"focusin":f="focus",d=du;break;case"focusout":f="blur",d=du;break;case"beforeblur":case"afterblur":d=du;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=dh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=P0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=q0;break;case oy:case sy:case ay:d=R0;break;case iy:d=Y0;break;case"scroll":d=C0;break;case"wheel":d=K0;break;case"copy":case"cut":case"paste":d=I0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=hh}var y=(n&4)!==0,g=!y&&r==="scroll",c=y?i!==null?i+"Capture":null:i;y=[];for(var l=h,w;l!==null;){w=l;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,c!==null&&(x=ja(l,c),x!=null&&y.push(Ca(l,x,w)))),g)break;l=l.return}0<y.length&&(i=new d(i,f,null,o,b),v.push({event:i,listeners:y}))}}if(!(n&7)){e:{if(i=r==="mouseover"||r==="pointerover",d=r==="mouseout"||r==="pointerout",i&&o!==rc&&(f=o.relatedTarget||o.fromElement)&&(wo(f)||f[On]))break e;if((d||i)&&(i=b.window===b?b:(i=b.ownerDocument)?i.defaultView||i.parentWindow:window,d?(f=o.relatedTarget||o.toElement,d=h,f=f?wo(f):null,f!==null&&(g=Bo(f),f!==g||f.tag!==5&&f.tag!==6)&&(f=null)):(d=null,f=h),d!==f)){if(y=dh,x="onMouseLeave",c="onMouseEnter",l="mouse",(r==="pointerout"||r==="pointerover")&&(y=hh,x="onPointerLeave",c="onPointerEnter",l="pointer"),g=d==null?i:rs(d),w=f==null?i:rs(f),i=new y(x,l+"leave",d,o,b),i.target=g,i.relatedTarget=w,x=null,wo(b)===h&&(y=new y(c,l+"enter",f,o,b),y.target=w,y.relatedTarget=g,x=y),g=x,d&&f)t:{for(y=d,c=f,l=0,w=y;w;w=Wo(w))l++;for(w=0,x=c;x;x=Wo(x))w++;for(;0<l-w;)y=Wo(y),l--;for(;0<w-l;)c=Wo(c),w--;for(;l--;){if(y===c||c!==null&&y===c.alternate)break t;y=Wo(y),c=Wo(c)}y=null}else y=null;d!==null&&Sh(v,i,d,y,!1),f!==null&&g!==null&&Sh(v,g,f,y,!0)}}e:{if(i=h?rs(h):window,d=i.nodeName&&i.nodeName.toLowerCase(),d==="select"||d==="input"&&i.type==="file")var _=nb;else if(yh(i))if(Jm)_=ib;else{_=sb;var T=ob}else(d=i.nodeName)&&d.toLowerCase()==="input"&&(i.type==="checkbox"||i.type==="radio")&&(_=ab);if(_&&(_=_(r,h))){Zm(v,_,o,b);break e}T&&T(r,i,h),r==="focusout"&&(T=i._wrapperState)&&T.controlled&&i.type==="number"&&Qu(i,"number",i.value)}switch(T=h?rs(h):window,r){case"focusin":(yh(T)||T.contentEditable==="true")&&(es=T,uc=h,da=null);break;case"focusout":da=uc=es=null;break;case"mousedown":cc=!0;break;case"contextmenu":case"mouseup":case"dragend":cc=!1,wh(v,o,b);break;case"selectionchange":if(cb)break;case"keydown":case"keyup":wh(v,o,b)}var E;if(Sd)e:{switch(r){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Jo?Km(r,o)&&(S="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(S="onCompositionStart");S&&(Xm&&o.locale!=="ko"&&(Jo||S!=="onCompositionStart"?S==="onCompositionEnd"&&Jo&&(E=Ym()):(Yn=b,wd="value"in Yn?Yn.value:Yn.textContent,Jo=!0)),T=Xi(h,S),0<T.length&&(S=new fh(S,r,null,o,b),v.push({event:S,listeners:T}),E?S.data=E:(E=Qm(o),E!==null&&(S.data=E)))),(E=Z0?J0(r,o):eb(r,o))&&(h=Xi(h,"onBeforeInput"),0<h.length&&(b=new fh("onBeforeInput","beforeinput",null,o,b),v.push({event:b,listeners:h}),b.data=E))}uy(v,n)})}function Ca(r,n,o){return{instance:r,listener:n,currentTarget:o}}function Xi(r,n){for(var o=n+"Capture",t=[];r!==null;){var m=r,u=m.stateNode;m.tag===5&&u!==null&&(m=u,u=ja(r,o),u!=null&&t.unshift(Ca(r,u,m)),u=ja(r,n),u!=null&&t.push(Ca(r,u,m))),r=r.return}return t}function Wo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Sh(r,n,o,t,m){for(var u=n._reactName,a=[];o!==null&&o!==t;){var p=o,s=p.alternate,h=p.stateNode;if(s!==null&&s===t)break;p.tag===5&&h!==null&&(p=h,m?(s=ja(o,u),s!=null&&a.unshift(Ca(o,s,p))):m||(s=ja(o,u),s!=null&&a.push(Ca(o,s,p)))),o=o.return}a.length!==0&&r.push({event:n,listeners:a})}var pb=/\r\n?/g,mb=/\u0000|\uFFFD/g;function kh(r){return(typeof r=="string"?r:""+r).replace(pb,`
`).replace(mb,"")}function pi(r,n,o){if(n=kh(n),kh(r)!==n&&o)throw Error(Ge(425))}function Ki(){}var dc=null,fc=null;function hc(r,n){return r==="textarea"||r==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var pc=typeof setTimeout=="function"?setTimeout:void 0,yb=typeof clearTimeout=="function"?clearTimeout:void 0,Eh=typeof Promise=="function"?Promise:void 0,gb=typeof queueMicrotask=="function"?queueMicrotask:typeof Eh<"u"?function(r){return Eh.resolve(null).then(r).catch(vb)}:pc;function vb(r){setTimeout(function(){throw r})}function bu(r,n){var o=n,t=0;do{var m=o.nextSibling;if(r.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(t===0){r.removeChild(m),ka(n);return}t--}else o!=="$"&&o!=="$?"&&o!=="$!"||t++;o=m}while(o);ka(n)}function eo(r){for(;r!=null;r=r.nextSibling){var n=r.nodeType;if(n===1||n===3)break;if(n===8){if(n=r.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return r}function Th(r){r=r.previousSibling;for(var n=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(n===0)return r;n--}else o==="/$"&&n++}r=r.previousSibling}return null}var Ps=Math.random().toString(36).slice(2),hn="__reactFiber$"+Ps,Oa="__reactProps$"+Ps,On="__reactContainer$"+Ps,mc="__reactEvents$"+Ps,bb="__reactListeners$"+Ps,xb="__reactHandles$"+Ps;function wo(r){var n=r[hn];if(n)return n;for(var o=r.parentNode;o;){if(n=o[On]||o[hn]){if(o=n.alternate,n.child!==null||o!==null&&o.child!==null)for(r=Th(r);r!==null;){if(o=r[hn])return o;r=Th(r)}return n}r=o,o=r.parentNode}return null}function qa(r){return r=r[hn]||r[On],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function rs(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(Ge(33))}function Cl(r){return r[Oa]||null}var yc=[],ns=-1;function fo(r){return{current:r}}function Nt(r){0>ns||(r.current=yc[ns],yc[ns]=null,ns--)}function Mt(r,n){ns++,yc[ns]=r.current,r.current=n}var io={},gr=fo(io),kr=fo(!1),Oo=io;function bs(r,n){var o=r.type.contextTypes;if(!o)return io;var t=r.stateNode;if(t&&t.__reactInternalMemoizedUnmaskedChildContext===n)return t.__reactInternalMemoizedMaskedChildContext;var m={},u;for(u in o)m[u]=n[u];return t&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=n,r.__reactInternalMemoizedMaskedChildContext=m),m}function Er(r){return r=r.childContextTypes,r!=null}function Qi(){Nt(kr),Nt(gr)}function Mh(r,n,o){if(gr.current!==io)throw Error(Ge(168));Mt(gr,n),Mt(kr,o)}function dy(r,n,o){var t=r.stateNode;if(n=n.childContextTypes,typeof t.getChildContext!="function")return o;t=t.getChildContext();for(var m in t)if(!(m in n))throw Error(Ge(108,o0(r)||"Unknown",m));return Ft({},o,t)}function Zi(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||io,Oo=gr.current,Mt(gr,r),Mt(kr,kr.current),!0}function Ch(r,n,o){var t=r.stateNode;if(!t)throw Error(Ge(169));o?(r=dy(r,n,Oo),t.__reactInternalMemoizedMergedChildContext=r,Nt(kr),Nt(gr),Mt(gr,r)):Nt(kr),Mt(kr,o)}var _n=null,Ol=!1,xu=!1;function fy(r){_n===null?_n=[r]:_n.push(r)}function wb(r){Ol=!0,fy(r)}function ho(){if(!xu&&_n!==null){xu=!0;var r=0,n=jt;try{var o=_n;for(jt=1;r<o.length;r++){var t=o[r];do t=t(!0);while(t!==null)}_n=null,Ol=!1}catch(m){throw _n!==null&&(_n=_n.slice(r+1)),Dm(gd,ho),m}finally{jt=n,xu=!1}}return null}var os=[],ss=0,Ji=null,el=0,Br=[],zr=0,Po=null,kn=1,En="";function go(r,n){os[ss++]=el,os[ss++]=Ji,Ji=r,el=n}function hy(r,n,o){Br[zr++]=kn,Br[zr++]=En,Br[zr++]=Po,Po=r;var t=kn;r=En;var m=32-tn(t)-1;t&=~(1<<m),o+=1;var u=32-tn(n)+m;if(30<u){var a=m-m%5;u=(t&(1<<a)-1).toString(32),t>>=a,m-=a,kn=1<<32-tn(n)+m|o<<m|t,En=u+r}else kn=1<<u|o<<m|t,En=r}function Ed(r){r.return!==null&&(go(r,1),hy(r,1,0))}function Td(r){for(;r===Ji;)Ji=os[--ss],os[ss]=null,el=os[--ss],os[ss]=null;for(;r===Po;)Po=Br[--zr],Br[zr]=null,En=Br[--zr],Br[zr]=null,kn=Br[--zr],Br[zr]=null}var Rr=null,Nr=null,Rt=!1,Jr=null;function py(r,n){var o=Gr(5,null,null,0);o.elementType="DELETED",o.stateNode=n,o.return=r,n=r.deletions,n===null?(r.deletions=[o],r.flags|=16):n.push(o)}function Oh(r,n){switch(r.tag){case 5:var o=r.type;return n=n.nodeType!==1||o.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(r.stateNode=n,Rr=r,Nr=eo(n.firstChild),!0):!1;case 6:return n=r.pendingProps===""||n.nodeType!==3?null:n,n!==null?(r.stateNode=n,Rr=r,Nr=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(o=Po!==null?{id:kn,overflow:En}:null,r.memoizedState={dehydrated:n,treeContext:o,retryLane:1073741824},o=Gr(18,null,null,0),o.stateNode=n,o.return=r,r.child=o,Rr=r,Nr=null,!0):!1;default:return!1}}function gc(r){return(r.mode&1)!==0&&(r.flags&128)===0}function vc(r){if(Rt){var n=Nr;if(n){var o=n;if(!Oh(r,n)){if(gc(r))throw Error(Ge(418));n=eo(o.nextSibling);var t=Rr;n&&Oh(r,n)?py(t,o):(r.flags=r.flags&-4097|2,Rt=!1,Rr=r)}}else{if(gc(r))throw Error(Ge(418));r.flags=r.flags&-4097|2,Rt=!1,Rr=r}}}function Ph(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Rr=r}function mi(r){if(r!==Rr)return!1;if(!Rt)return Ph(r),Rt=!0,!1;var n;if((n=r.tag!==3)&&!(n=r.tag!==5)&&(n=r.type,n=n!=="head"&&n!=="body"&&!hc(r.type,r.memoizedProps)),n&&(n=Nr)){if(gc(r))throw my(),Error(Ge(418));for(;n;)py(r,n),n=eo(n.nextSibling)}if(Ph(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Ge(317));e:{for(r=r.nextSibling,n=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"){if(n===0){Nr=eo(r.nextSibling);break e}n--}else o!=="$"&&o!=="$!"&&o!=="$?"||n++}r=r.nextSibling}Nr=null}}else Nr=Rr?eo(r.stateNode.nextSibling):null;return!0}function my(){for(var r=Nr;r;)r=eo(r.nextSibling)}function xs(){Nr=Rr=null,Rt=!1}function Md(r){Jr===null?Jr=[r]:Jr.push(r)}var jb=Nn.ReactCurrentBatchConfig;function Xs(r,n,o){if(r=o.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(Ge(309));var t=o.stateNode}if(!t)throw Error(Ge(147,r));var m=t,u=""+r;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===u?n.ref:(n=function(a){var p=m.refs;a===null?delete p[u]:p[u]=a},n._stringRef=u,n)}if(typeof r!="string")throw Error(Ge(284));if(!o._owner)throw Error(Ge(290,r))}return r}function yi(r,n){throw r=Object.prototype.toString.call(n),Error(Ge(31,r==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":r))}function Lh(r){var n=r._init;return n(r._payload)}function yy(r){function n(c,l){if(r){var w=c.deletions;w===null?(c.deletions=[l],c.flags|=16):w.push(l)}}function o(c,l){if(!r)return null;for(;l!==null;)n(c,l),l=l.sibling;return null}function t(c,l){for(c=new Map;l!==null;)l.key!==null?c.set(l.key,l):c.set(l.index,l),l=l.sibling;return c}function m(c,l){return c=oo(c,l),c.index=0,c.sibling=null,c}function u(c,l,w){return c.index=w,r?(w=c.alternate,w!==null?(w=w.index,w<l?(c.flags|=2,l):w):(c.flags|=2,l)):(c.flags|=1048576,l)}function a(c){return r&&c.alternate===null&&(c.flags|=2),c}function p(c,l,w,x){return l===null||l.tag!==6?(l=Tu(w,c.mode,x),l.return=c,l):(l=m(l,w),l.return=c,l)}function s(c,l,w,x){var _=w.type;return _===Zo?b(c,l,w.props.children,x,w.key):l!==null&&(l.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===zn&&Lh(_)===l.type)?(x=m(l,w.props),x.ref=Xs(c,l,w),x.return=c,x):(x=Bi(w.type,w.key,w.props,null,c.mode,x),x.ref=Xs(c,l,w),x.return=c,x)}function h(c,l,w,x){return l===null||l.tag!==4||l.stateNode.containerInfo!==w.containerInfo||l.stateNode.implementation!==w.implementation?(l=Mu(w,c.mode,x),l.return=c,l):(l=m(l,w.children||[]),l.return=c,l)}function b(c,l,w,x,_){return l===null||l.tag!==7?(l=To(w,c.mode,x,_),l.return=c,l):(l=m(l,w),l.return=c,l)}function v(c,l,w){if(typeof l=="string"&&l!==""||typeof l=="number")return l=Tu(""+l,c.mode,w),l.return=c,l;if(typeof l=="object"&&l!==null){switch(l.$$typeof){case si:return w=Bi(l.type,l.key,l.props,null,c.mode,w),w.ref=Xs(c,null,l),w.return=c,w;case Qo:return l=Mu(l,c.mode,w),l.return=c,l;case zn:var x=l._init;return v(c,x(l._payload),w)}if(ra(l)||Hs(l))return l=To(l,c.mode,w,null),l.return=c,l;yi(c,l)}return null}function i(c,l,w,x){var _=l!==null?l.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:p(c,l,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case si:return w.key===_?s(c,l,w,x):null;case Qo:return w.key===_?h(c,l,w,x):null;case zn:return _=w._init,i(c,l,_(w._payload),x)}if(ra(w)||Hs(w))return _!==null?null:b(c,l,w,x,null);yi(c,w)}return null}function d(c,l,w,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return c=c.get(w)||null,p(l,c,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case si:return c=c.get(x.key===null?w:x.key)||null,s(l,c,x,_);case Qo:return c=c.get(x.key===null?w:x.key)||null,h(l,c,x,_);case zn:var T=x._init;return d(c,l,w,T(x._payload),_)}if(ra(x)||Hs(x))return c=c.get(w)||null,b(l,c,x,_,null);yi(l,x)}return null}function f(c,l,w,x){for(var _=null,T=null,E=l,S=l=0,P=null;E!==null&&S<w.length;S++){E.index>S?(P=E,E=null):P=E.sibling;var N=i(c,E,w[S],x);if(N===null){E===null&&(E=P);break}r&&E&&N.alternate===null&&n(c,E),l=u(N,l,S),T===null?_=N:T.sibling=N,T=N,E=P}if(S===w.length)return o(c,E),Rt&&go(c,S),_;if(E===null){for(;S<w.length;S++)E=v(c,w[S],x),E!==null&&(l=u(E,l,S),T===null?_=E:T.sibling=E,T=E);return Rt&&go(c,S),_}for(E=t(c,E);S<w.length;S++)P=d(E,c,S,w[S],x),P!==null&&(r&&P.alternate!==null&&E.delete(P.key===null?S:P.key),l=u(P,l,S),T===null?_=P:T.sibling=P,T=P);return r&&E.forEach(function(C){return n(c,C)}),Rt&&go(c,S),_}function y(c,l,w,x){var _=Hs(w);if(typeof _!="function")throw Error(Ge(150));if(w=_.call(w),w==null)throw Error(Ge(151));for(var T=_=null,E=l,S=l=0,P=null,N=w.next();E!==null&&!N.done;S++,N=w.next()){E.index>S?(P=E,E=null):P=E.sibling;var C=i(c,E,N.value,x);if(C===null){E===null&&(E=P);break}r&&E&&C.alternate===null&&n(c,E),l=u(C,l,S),T===null?_=C:T.sibling=C,T=C,E=P}if(N.done)return o(c,E),Rt&&go(c,S),_;if(E===null){for(;!N.done;S++,N=w.next())N=v(c,N.value,x),N!==null&&(l=u(N,l,S),T===null?_=N:T.sibling=N,T=N);return Rt&&go(c,S),_}for(E=t(c,E);!N.done;S++,N=w.next())N=d(E,c,S,N.value,x),N!==null&&(r&&N.alternate!==null&&E.delete(N.key===null?S:N.key),l=u(N,l,S),T===null?_=N:T.sibling=N,T=N);return r&&E.forEach(function(D){return n(c,D)}),Rt&&go(c,S),_}function g(c,l,w,x){if(typeof w=="object"&&w!==null&&w.type===Zo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case si:e:{for(var _=w.key,T=l;T!==null;){if(T.key===_){if(_=w.type,_===Zo){if(T.tag===7){o(c,T.sibling),l=m(T,w.props.children),l.return=c,c=l;break e}}else if(T.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===zn&&Lh(_)===T.type){o(c,T.sibling),l=m(T,w.props),l.ref=Xs(c,T,w),l.return=c,c=l;break e}o(c,T);break}else n(c,T);T=T.sibling}w.type===Zo?(l=To(w.props.children,c.mode,x,w.key),l.return=c,c=l):(x=Bi(w.type,w.key,w.props,null,c.mode,x),x.ref=Xs(c,l,w),x.return=c,c=x)}return a(c);case Qo:e:{for(T=w.key;l!==null;){if(l.key===T)if(l.tag===4&&l.stateNode.containerInfo===w.containerInfo&&l.stateNode.implementation===w.implementation){o(c,l.sibling),l=m(l,w.children||[]),l.return=c,c=l;break e}else{o(c,l);break}else n(c,l);l=l.sibling}l=Mu(w,c.mode,x),l.return=c,c=l}return a(c);case zn:return T=w._init,g(c,l,T(w._payload),x)}if(ra(w))return f(c,l,w,x);if(Hs(w))return y(c,l,w,x);yi(c,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,l!==null&&l.tag===6?(o(c,l.sibling),l=m(l,w),l.return=c,c=l):(o(c,l),l=Tu(w,c.mode,x),l.return=c,c=l),a(c)):o(c,l)}return g}var ws=yy(!0),gy=yy(!1),tl=fo(null),rl=null,as=null,Cd=null;function Od(){Cd=as=rl=null}function Pd(r){var n=tl.current;Nt(tl),r._currentValue=n}function bc(r,n,o){for(;r!==null;){var t=r.alternate;if((r.childLanes&n)!==n?(r.childLanes|=n,t!==null&&(t.childLanes|=n)):t!==null&&(t.childLanes&n)!==n&&(t.childLanes|=n),r===o)break;r=r.return}}function ps(r,n){rl=r,Cd=as=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&n&&(Sr=!0),r.firstContext=null)}function Wr(r){var n=r._currentValue;if(Cd!==r)if(r={context:r,memoizedValue:n,next:null},as===null){if(rl===null)throw Error(Ge(308));as=r,rl.dependencies={lanes:0,firstContext:r}}else as=as.next=r;return n}var jo=null;function Ld(r){jo===null?jo=[r]:jo.push(r)}function vy(r,n,o,t){var m=n.interleaved;return m===null?(o.next=o,Ld(n)):(o.next=m.next,m.next=o),n.interleaved=o,Pn(r,t)}function Pn(r,n){r.lanes|=n;var o=r.alternate;for(o!==null&&(o.lanes|=n),o=r,r=r.return;r!==null;)r.childLanes|=n,o=r.alternate,o!==null&&(o.childLanes|=n),o=r,r=r.return;return o.tag===3?o.stateNode:null}var Gn=!1;function Nd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function by(r,n){r=r.updateQueue,n.updateQueue===r&&(n.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Mn(r,n){return{eventTime:r,lane:n,tag:0,payload:null,callback:null,next:null}}function to(r,n,o){var t=r.updateQueue;if(t===null)return null;if(t=t.shared,vt&2){var m=t.pending;return m===null?n.next=n:(n.next=m.next,m.next=n),t.pending=n,Pn(r,o)}return m=t.interleaved,m===null?(n.next=n,Ld(t)):(n.next=m.next,m.next=n),t.interleaved=n,Pn(r,o)}function Ri(r,n,o){if(n=n.updateQueue,n!==null&&(n=n.shared,(o&4194240)!==0)){var t=n.lanes;t&=r.pendingLanes,o|=t,n.lanes=o,vd(r,o)}}function Nh(r,n){var o=r.updateQueue,t=r.alternate;if(t!==null&&(t=t.updateQueue,o===t)){var m=null,u=null;if(o=o.firstBaseUpdate,o!==null){do{var a={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};u===null?m=u=a:u=u.next=a,o=o.next}while(o!==null);u===null?m=u=n:u=u.next=n}else m=u=n;o={baseState:t.baseState,firstBaseUpdate:m,lastBaseUpdate:u,shared:t.shared,effects:t.effects},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=n:r.next=n,o.lastBaseUpdate=n}function nl(r,n,o,t){var m=r.updateQueue;Gn=!1;var u=m.firstBaseUpdate,a=m.lastBaseUpdate,p=m.shared.pending;if(p!==null){m.shared.pending=null;var s=p,h=s.next;s.next=null,a===null?u=h:a.next=h,a=s;var b=r.alternate;b!==null&&(b=b.updateQueue,p=b.lastBaseUpdate,p!==a&&(p===null?b.firstBaseUpdate=h:p.next=h,b.lastBaseUpdate=s))}if(u!==null){var v=m.baseState;a=0,b=h=s=null,p=u;do{var i=p.lane,d=p.eventTime;if((t&i)===i){b!==null&&(b=b.next={eventTime:d,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var f=r,y=p;switch(i=n,d=o,y.tag){case 1:if(f=y.payload,typeof f=="function"){v=f.call(d,v,i);break e}v=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=y.payload,i=typeof f=="function"?f.call(d,v,i):f,i==null)break e;v=Ft({},v,i);break e;case 2:Gn=!0}}p.callback!==null&&p.lane!==0&&(r.flags|=64,i=m.effects,i===null?m.effects=[p]:i.push(p))}else d={eventTime:d,lane:i,tag:p.tag,payload:p.payload,callback:p.callback,next:null},b===null?(h=b=d,s=v):b=b.next=d,a|=i;if(p=p.next,p===null){if(p=m.shared.pending,p===null)break;i=p,p=i.next,i.next=null,m.lastBaseUpdate=i,m.shared.pending=null}}while(!0);if(b===null&&(s=v),m.baseState=s,m.firstBaseUpdate=h,m.lastBaseUpdate=b,n=m.shared.interleaved,n!==null){m=n;do a|=m.lane,m=m.next;while(m!==n)}else u===null&&(m.shared.lanes=0);No|=a,r.lanes=a,r.memoizedState=v}}function Rh(r,n,o){if(r=n.effects,n.effects=null,r!==null)for(n=0;n<r.length;n++){var t=r[n],m=t.callback;if(m!==null){if(t.callback=null,t=o,typeof m!="function")throw Error(Ge(191,m));m.call(t)}}}var $a={},vn=fo($a),Pa=fo($a),La=fo($a);function _o(r){if(r===$a)throw Error(Ge(174));return r}function Rd(r,n){switch(Mt(La,n),Mt(Pa,r),Mt(vn,$a),r=n.nodeType,r){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Ju(null,"");break;default:r=r===8?n.parentNode:n,n=r.namespaceURI||null,r=r.tagName,n=Ju(n,r)}Nt(vn),Mt(vn,n)}function js(){Nt(vn),Nt(Pa),Nt(La)}function xy(r){_o(La.current);var n=_o(vn.current),o=Ju(n,r.type);n!==o&&(Mt(Pa,r),Mt(vn,o))}function Ad(r){Pa.current===r&&(Nt(vn),Nt(Pa))}var It=fo(0);function ol(r){for(var n=r;n!==null;){if(n.tag===13){var o=n.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break;for(;n.sibling===null;){if(n.return===null||n.return===r)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var wu=[];function Id(){for(var r=0;r<wu.length;r++)wu[r]._workInProgressVersionPrimary=null;wu.length=0}var Ai=Nn.ReactCurrentDispatcher,ju=Nn.ReactCurrentBatchConfig,Lo=0,Dt=null,Kt=null,rr=null,sl=!1,fa=!1,Na=0,_b=0;function pr(){throw Error(Ge(321))}function Dd(r,n){if(n===null)return!1;for(var o=0;o<n.length&&o<r.length;o++)if(!nn(r[o],n[o]))return!1;return!0}function Fd(r,n,o,t,m,u){if(Lo=u,Dt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Ai.current=r===null||r.memoizedState===null?Tb:Mb,r=o(t,m),fa){u=0;do{if(fa=!1,Na=0,25<=u)throw Error(Ge(301));u+=1,rr=Kt=null,n.updateQueue=null,Ai.current=Cb,r=o(t,m)}while(fa)}if(Ai.current=al,n=Kt!==null&&Kt.next!==null,Lo=0,rr=Kt=Dt=null,sl=!1,n)throw Error(Ge(300));return r}function Ud(){var r=Na!==0;return Na=0,r}function fn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rr===null?Dt.memoizedState=rr=r:rr=rr.next=r,rr}function qr(){if(Kt===null){var r=Dt.alternate;r=r!==null?r.memoizedState:null}else r=Kt.next;var n=rr===null?Dt.memoizedState:rr.next;if(n!==null)rr=n,Kt=r;else{if(r===null)throw Error(Ge(310));Kt=r,r={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},rr===null?Dt.memoizedState=rr=r:rr=rr.next=r}return rr}function Ra(r,n){return typeof n=="function"?n(r):n}function _u(r){var n=qr(),o=n.queue;if(o===null)throw Error(Ge(311));o.lastRenderedReducer=r;var t=Kt,m=t.baseQueue,u=o.pending;if(u!==null){if(m!==null){var a=m.next;m.next=u.next,u.next=a}t.baseQueue=m=u,o.pending=null}if(m!==null){u=m.next,t=t.baseState;var p=a=null,s=null,h=u;do{var b=h.lane;if((Lo&b)===b)s!==null&&(s=s.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),t=h.hasEagerState?h.eagerState:r(t,h.action);else{var v={lane:b,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};s===null?(p=s=v,a=t):s=s.next=v,Dt.lanes|=b,No|=b}h=h.next}while(h!==null&&h!==u);s===null?a=t:s.next=p,nn(t,n.memoizedState)||(Sr=!0),n.memoizedState=t,n.baseState=a,n.baseQueue=s,o.lastRenderedState=t}if(r=o.interleaved,r!==null){m=r;do u=m.lane,Dt.lanes|=u,No|=u,m=m.next;while(m!==r)}else m===null&&(o.lanes=0);return[n.memoizedState,o.dispatch]}function Su(r){var n=qr(),o=n.queue;if(o===null)throw Error(Ge(311));o.lastRenderedReducer=r;var t=o.dispatch,m=o.pending,u=n.memoizedState;if(m!==null){o.pending=null;var a=m=m.next;do u=r(u,a.action),a=a.next;while(a!==m);nn(u,n.memoizedState)||(Sr=!0),n.memoizedState=u,n.baseQueue===null&&(n.baseState=u),o.lastRenderedState=u}return[u,t]}function wy(){}function jy(r,n){var o=Dt,t=qr(),m=n(),u=!nn(t.memoizedState,m);if(u&&(t.memoizedState=m,Sr=!0),t=t.queue,Bd(ky.bind(null,o,t,r),[r]),t.getSnapshot!==n||u||rr!==null&&rr.memoizedState.tag&1){if(o.flags|=2048,Aa(9,Sy.bind(null,o,t,m,n),void 0,null),nr===null)throw Error(Ge(349));Lo&30||_y(o,n,m)}return m}function _y(r,n,o){r.flags|=16384,r={getSnapshot:n,value:o},n=Dt.updateQueue,n===null?(n={lastEffect:null,stores:null},Dt.updateQueue=n,n.stores=[r]):(o=n.stores,o===null?n.stores=[r]:o.push(r))}function Sy(r,n,o,t){n.value=o,n.getSnapshot=t,Ey(n)&&Ty(r)}function ky(r,n,o){return o(function(){Ey(n)&&Ty(r)})}function Ey(r){var n=r.getSnapshot;r=r.value;try{var o=n();return!nn(r,o)}catch{return!0}}function Ty(r){var n=Pn(r,1);n!==null&&rn(n,r,1,-1)}function Ah(r){var n=fn();return typeof r=="function"&&(r=r()),n.memoizedState=n.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:r},n.queue=r,r=r.dispatch=Eb.bind(null,Dt,r),[n.memoizedState,r]}function Aa(r,n,o,t){return r={tag:r,create:n,destroy:o,deps:t,next:null},n=Dt.updateQueue,n===null?(n={lastEffect:null,stores:null},Dt.updateQueue=n,n.lastEffect=r.next=r):(o=n.lastEffect,o===null?n.lastEffect=r.next=r:(t=o.next,o.next=r,r.next=t,n.lastEffect=r)),r}function My(){return qr().memoizedState}function Ii(r,n,o,t){var m=fn();Dt.flags|=r,m.memoizedState=Aa(1|n,o,void 0,t===void 0?null:t)}function Pl(r,n,o,t){var m=qr();t=t===void 0?null:t;var u=void 0;if(Kt!==null){var a=Kt.memoizedState;if(u=a.destroy,t!==null&&Dd(t,a.deps)){m.memoizedState=Aa(n,o,u,t);return}}Dt.flags|=r,m.memoizedState=Aa(1|n,o,u,t)}function Ih(r,n){return Ii(8390656,8,r,n)}function Bd(r,n){return Pl(2048,8,r,n)}function Cy(r,n){return Pl(4,2,r,n)}function Oy(r,n){return Pl(4,4,r,n)}function Py(r,n){if(typeof n=="function")return r=r(),n(r),function(){n(null)};if(n!=null)return r=r(),n.current=r,function(){n.current=null}}function Ly(r,n,o){return o=o!=null?o.concat([r]):null,Pl(4,4,Py.bind(null,n,r),o)}function zd(){}function Ny(r,n){var o=qr();n=n===void 0?null:n;var t=o.memoizedState;return t!==null&&n!==null&&Dd(n,t[1])?t[0]:(o.memoizedState=[r,n],r)}function Ry(r,n){var o=qr();n=n===void 0?null:n;var t=o.memoizedState;return t!==null&&n!==null&&Dd(n,t[1])?t[0]:(r=r(),o.memoizedState=[r,n],r)}function Ay(r,n,o){return Lo&21?(nn(o,n)||(o=Bm(),Dt.lanes|=o,No|=o,r.baseState=!0),n):(r.baseState&&(r.baseState=!1,Sr=!0),r.memoizedState=o)}function Sb(r,n){var o=jt;jt=o!==0&&4>o?o:4,r(!0);var t=ju.transition;ju.transition={};try{r(!1),n()}finally{jt=o,ju.transition=t}}function Iy(){return qr().memoizedState}function kb(r,n,o){var t=no(r);if(o={lane:t,action:o,hasEagerState:!1,eagerState:null,next:null},Dy(r))Fy(n,o);else if(o=vy(r,n,o,t),o!==null){var m=xr();rn(o,r,t,m),Uy(o,n,t)}}function Eb(r,n,o){var t=no(r),m={lane:t,action:o,hasEagerState:!1,eagerState:null,next:null};if(Dy(r))Fy(n,m);else{var u=r.alternate;if(r.lanes===0&&(u===null||u.lanes===0)&&(u=n.lastRenderedReducer,u!==null))try{var a=n.lastRenderedState,p=u(a,o);if(m.hasEagerState=!0,m.eagerState=p,nn(p,a)){var s=n.interleaved;s===null?(m.next=m,Ld(n)):(m.next=s.next,s.next=m),n.interleaved=m;return}}catch{}finally{}o=vy(r,n,m,t),o!==null&&(m=xr(),rn(o,r,t,m),Uy(o,n,t))}}function Dy(r){var n=r.alternate;return r===Dt||n!==null&&n===Dt}function Fy(r,n){fa=sl=!0;var o=r.pending;o===null?n.next=n:(n.next=o.next,o.next=n),r.pending=n}function Uy(r,n,o){if(o&4194240){var t=n.lanes;t&=r.pendingLanes,o|=t,n.lanes=o,vd(r,o)}}var al={readContext:Wr,useCallback:pr,useContext:pr,useEffect:pr,useImperativeHandle:pr,useInsertionEffect:pr,useLayoutEffect:pr,useMemo:pr,useReducer:pr,useRef:pr,useState:pr,useDebugValue:pr,useDeferredValue:pr,useTransition:pr,useMutableSource:pr,useSyncExternalStore:pr,useId:pr,unstable_isNewReconciler:!1},Tb={readContext:Wr,useCallback:function(r,n){return fn().memoizedState=[r,n===void 0?null:n],r},useContext:Wr,useEffect:Ih,useImperativeHandle:function(r,n,o){return o=o!=null?o.concat([r]):null,Ii(4194308,4,Py.bind(null,n,r),o)},useLayoutEffect:function(r,n){return Ii(4194308,4,r,n)},useInsertionEffect:function(r,n){return Ii(4,2,r,n)},useMemo:function(r,n){var o=fn();return n=n===void 0?null:n,r=r(),o.memoizedState=[r,n],r},useReducer:function(r,n,o){var t=fn();return n=o!==void 0?o(n):n,t.memoizedState=t.baseState=n,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:n},t.queue=r,r=r.dispatch=kb.bind(null,Dt,r),[t.memoizedState,r]},useRef:function(r){var n=fn();return r={current:r},n.memoizedState=r},useState:Ah,useDebugValue:zd,useDeferredValue:function(r){return fn().memoizedState=r},useTransition:function(){var r=Ah(!1),n=r[0];return r=Sb.bind(null,r[1]),fn().memoizedState=r,[n,r]},useMutableSource:function(){},useSyncExternalStore:function(r,n,o){var t=Dt,m=fn();if(Rt){if(o===void 0)throw Error(Ge(407));o=o()}else{if(o=n(),nr===null)throw Error(Ge(349));Lo&30||_y(t,n,o)}m.memoizedState=o;var u={value:o,getSnapshot:n};return m.queue=u,Ih(ky.bind(null,t,u,r),[r]),t.flags|=2048,Aa(9,Sy.bind(null,t,u,o,n),void 0,null),o},useId:function(){var r=fn(),n=nr.identifierPrefix;if(Rt){var o=En,t=kn;o=(t&~(1<<32-tn(t)-1)).toString(32)+o,n=":"+n+"R"+o,o=Na++,0<o&&(n+="H"+o.toString(32)),n+=":"}else o=_b++,n=":"+n+"r"+o.toString(32)+":";return r.memoizedState=n},unstable_isNewReconciler:!1},Mb={readContext:Wr,useCallback:Ny,useContext:Wr,useEffect:Bd,useImperativeHandle:Ly,useInsertionEffect:Cy,useLayoutEffect:Oy,useMemo:Ry,useReducer:_u,useRef:My,useState:function(){return _u(Ra)},useDebugValue:zd,useDeferredValue:function(r){var n=qr();return Ay(n,Kt.memoizedState,r)},useTransition:function(){var r=_u(Ra)[0],n=qr().memoizedState;return[r,n]},useMutableSource:wy,useSyncExternalStore:jy,useId:Iy,unstable_isNewReconciler:!1},Cb={readContext:Wr,useCallback:Ny,useContext:Wr,useEffect:Bd,useImperativeHandle:Ly,useInsertionEffect:Cy,useLayoutEffect:Oy,useMemo:Ry,useReducer:Su,useRef:My,useState:function(){return Su(Ra)},useDebugValue:zd,useDeferredValue:function(r){var n=qr();return Kt===null?n.memoizedState=r:Ay(n,Kt.memoizedState,r)},useTransition:function(){var r=Su(Ra)[0],n=qr().memoizedState;return[r,n]},useMutableSource:wy,useSyncExternalStore:jy,useId:Iy,unstable_isNewReconciler:!1};function Qr(r,n){if(r&&r.defaultProps){n=Ft({},n),r=r.defaultProps;for(var o in r)n[o]===void 0&&(n[o]=r[o]);return n}return n}function xc(r,n,o,t){n=r.memoizedState,o=o(t,n),o=o==null?n:Ft({},n,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Ll={isMounted:function(r){return(r=r._reactInternals)?Bo(r)===r:!1},enqueueSetState:function(r,n,o){r=r._reactInternals;var t=xr(),m=no(r),u=Mn(t,m);u.payload=n,o!=null&&(u.callback=o),n=to(r,u,m),n!==null&&(rn(n,r,m,t),Ri(n,r,m))},enqueueReplaceState:function(r,n,o){r=r._reactInternals;var t=xr(),m=no(r),u=Mn(t,m);u.tag=1,u.payload=n,o!=null&&(u.callback=o),n=to(r,u,m),n!==null&&(rn(n,r,m,t),Ri(n,r,m))},enqueueForceUpdate:function(r,n){r=r._reactInternals;var o=xr(),t=no(r),m=Mn(o,t);m.tag=2,n!=null&&(m.callback=n),n=to(r,m,t),n!==null&&(rn(n,r,t,o),Ri(n,r,t))}};function Dh(r,n,o,t,m,u,a){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(t,u,a):n.prototype&&n.prototype.isPureReactComponent?!Ta(o,t)||!Ta(m,u):!0}function By(r,n,o){var t=!1,m=io,u=n.contextType;return typeof u=="object"&&u!==null?u=Wr(u):(m=Er(n)?Oo:gr.current,t=n.contextTypes,u=(t=t!=null)?bs(r,m):io),n=new n(o,u),r.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Ll,r.stateNode=n,n._reactInternals=r,t&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=m,r.__reactInternalMemoizedMaskedChildContext=u),n}function Fh(r,n,o,t){r=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(o,t),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(o,t),n.state!==r&&Ll.enqueueReplaceState(n,n.state,null)}function wc(r,n,o,t){var m=r.stateNode;m.props=o,m.state=r.memoizedState,m.refs={},Nd(r);var u=n.contextType;typeof u=="object"&&u!==null?m.context=Wr(u):(u=Er(n)?Oo:gr.current,m.context=bs(r,u)),m.state=r.memoizedState,u=n.getDerivedStateFromProps,typeof u=="function"&&(xc(r,n,u,o),m.state=r.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(n=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),n!==m.state&&Ll.enqueueReplaceState(m,m.state,null),nl(r,o,m,t),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308)}function _s(r,n){try{var o="",t=n;do o+=n0(t),t=t.return;while(t);var m=o}catch(u){m=`
Error generating stack: `+u.message+`
`+u.stack}return{value:r,source:n,stack:m,digest:null}}function ku(r,n,o){return{value:r,source:null,stack:o??null,digest:n??null}}function jc(r,n){try{console.error(n.value)}catch(o){setTimeout(function(){throw o})}}var Ob=typeof WeakMap=="function"?WeakMap:Map;function zy(r,n,o){o=Mn(-1,o),o.tag=3,o.payload={element:null};var t=n.value;return o.callback=function(){ll||(ll=!0,Lc=t),jc(r,n)},o}function Gy(r,n,o){o=Mn(-1,o),o.tag=3;var t=r.type.getDerivedStateFromError;if(typeof t=="function"){var m=n.value;o.payload=function(){return t(m)},o.callback=function(){jc(r,n)}}var u=r.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(o.callback=function(){jc(r,n),typeof t!="function"&&(ro===null?ro=new Set([this]):ro.add(this));var a=n.stack;this.componentDidCatch(n.value,{componentStack:a!==null?a:""})}),o}function Uh(r,n,o){var t=r.pingCache;if(t===null){t=r.pingCache=new Ob;var m=new Set;t.set(n,m)}else m=t.get(n),m===void 0&&(m=new Set,t.set(n,m));m.has(o)||(m.add(o),r=Hb.bind(null,r,n,o),n.then(r,r))}function Bh(r){do{var n;if((n=r.tag===13)&&(n=r.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return r;r=r.return}while(r!==null);return null}function zh(r,n,o,t,m){return r.mode&1?(r.flags|=65536,r.lanes=m,r):(r===n?r.flags|=65536:(r.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(n=Mn(-1,1),n.tag=2,to(o,n,1))),o.lanes|=1),r)}var Pb=Nn.ReactCurrentOwner,Sr=!1;function br(r,n,o,t){n.child=r===null?gy(n,null,o,t):ws(n,r.child,o,t)}function Gh(r,n,o,t,m){o=o.render;var u=n.ref;return ps(n,m),t=Fd(r,n,o,t,u,m),o=Ud(),r!==null&&!Sr?(n.updateQueue=r.updateQueue,n.flags&=-2053,r.lanes&=~m,Ln(r,n,m)):(Rt&&o&&Ed(n),n.flags|=1,br(r,n,t,m),n.child)}function Vh(r,n,o,t,m){if(r===null){var u=o.type;return typeof u=="function"&&!Xd(u)&&u.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(n.tag=15,n.type=u,Vy(r,n,u,t,m)):(r=Bi(o.type,null,t,n,n.mode,m),r.ref=n.ref,r.return=n,n.child=r)}if(u=r.child,!(r.lanes&m)){var a=u.memoizedProps;if(o=o.compare,o=o!==null?o:Ta,o(a,t)&&r.ref===n.ref)return Ln(r,n,m)}return n.flags|=1,r=oo(u,t),r.ref=n.ref,r.return=n,n.child=r}function Vy(r,n,o,t,m){if(r!==null){var u=r.memoizedProps;if(Ta(u,t)&&r.ref===n.ref)if(Sr=!1,n.pendingProps=t=u,(r.lanes&m)!==0)r.flags&131072&&(Sr=!0);else return n.lanes=r.lanes,Ln(r,n,m)}return _c(r,n,o,t,m)}function Hy(r,n,o){var t=n.pendingProps,m=t.children,u=r!==null?r.memoizedState:null;if(t.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mt(ls,Lr),Lr|=o;else{if(!(o&1073741824))return r=u!==null?u.baseLanes|o:o,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:r,cachePool:null,transitions:null},n.updateQueue=null,Mt(ls,Lr),Lr|=r,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},t=u!==null?u.baseLanes:o,Mt(ls,Lr),Lr|=t}else u!==null?(t=u.baseLanes|o,n.memoizedState=null):t=o,Mt(ls,Lr),Lr|=t;return br(r,n,m,o),n.child}function Wy(r,n){var o=n.ref;(r===null&&o!==null||r!==null&&r.ref!==o)&&(n.flags|=512,n.flags|=2097152)}function _c(r,n,o,t,m){var u=Er(o)?Oo:gr.current;return u=bs(n,u),ps(n,m),o=Fd(r,n,o,t,u,m),t=Ud(),r!==null&&!Sr?(n.updateQueue=r.updateQueue,n.flags&=-2053,r.lanes&=~m,Ln(r,n,m)):(Rt&&t&&Ed(n),n.flags|=1,br(r,n,o,m),n.child)}function Hh(r,n,o,t,m){if(Er(o)){var u=!0;Zi(n)}else u=!1;if(ps(n,m),n.stateNode===null)Di(r,n),By(n,o,t),wc(n,o,t,m),t=!0;else if(r===null){var a=n.stateNode,p=n.memoizedProps;a.props=p;var s=a.context,h=o.contextType;typeof h=="object"&&h!==null?h=Wr(h):(h=Er(o)?Oo:gr.current,h=bs(n,h));var b=o.getDerivedStateFromProps,v=typeof b=="function"||typeof a.getSnapshotBeforeUpdate=="function";v||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(p!==t||s!==h)&&Fh(n,a,t,h),Gn=!1;var i=n.memoizedState;a.state=i,nl(n,t,a,m),s=n.memoizedState,p!==t||i!==s||kr.current||Gn?(typeof b=="function"&&(xc(n,o,b,t),s=n.memoizedState),(p=Gn||Dh(n,o,p,t,i,s,h))?(v||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(n.flags|=4194308)):(typeof a.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=t,n.memoizedState=s),a.props=t,a.state=s,a.context=h,t=p):(typeof a.componentDidMount=="function"&&(n.flags|=4194308),t=!1)}else{a=n.stateNode,by(r,n),p=n.memoizedProps,h=n.type===n.elementType?p:Qr(n.type,p),a.props=h,v=n.pendingProps,i=a.context,s=o.contextType,typeof s=="object"&&s!==null?s=Wr(s):(s=Er(o)?Oo:gr.current,s=bs(n,s));var d=o.getDerivedStateFromProps;(b=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(p!==v||i!==s)&&Fh(n,a,t,s),Gn=!1,i=n.memoizedState,a.state=i,nl(n,t,a,m);var f=n.memoizedState;p!==v||i!==f||kr.current||Gn?(typeof d=="function"&&(xc(n,o,d,t),f=n.memoizedState),(h=Gn||Dh(n,o,h,t,i,f,s)||!1)?(b||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(t,f,s),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(t,f,s)),typeof a.componentDidUpdate=="function"&&(n.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof a.componentDidUpdate!="function"||p===r.memoizedProps&&i===r.memoizedState||(n.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||p===r.memoizedProps&&i===r.memoizedState||(n.flags|=1024),n.memoizedProps=t,n.memoizedState=f),a.props=t,a.state=f,a.context=s,t=h):(typeof a.componentDidUpdate!="function"||p===r.memoizedProps&&i===r.memoizedState||(n.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||p===r.memoizedProps&&i===r.memoizedState||(n.flags|=1024),t=!1)}return Sc(r,n,o,t,u,m)}function Sc(r,n,o,t,m,u){Wy(r,n);var a=(n.flags&128)!==0;if(!t&&!a)return m&&Ch(n,o,!1),Ln(r,n,u);t=n.stateNode,Pb.current=n;var p=a&&typeof o.getDerivedStateFromError!="function"?null:t.render();return n.flags|=1,r!==null&&a?(n.child=ws(n,r.child,null,u),n.child=ws(n,null,p,u)):br(r,n,p,u),n.memoizedState=t.state,m&&Ch(n,o,!0),n.child}function qy(r){var n=r.stateNode;n.pendingContext?Mh(r,n.pendingContext,n.pendingContext!==n.context):n.context&&Mh(r,n.context,!1),Rd(r,n.containerInfo)}function Wh(r,n,o,t,m){return xs(),Md(m),n.flags|=256,br(r,n,o,t),n.child}var kc={dehydrated:null,treeContext:null,retryLane:0};function Ec(r){return{baseLanes:r,cachePool:null,transitions:null}}function $y(r,n,o){var t=n.pendingProps,m=It.current,u=!1,a=(n.flags&128)!==0,p;if((p=a)||(p=r!==null&&r.memoizedState===null?!1:(m&2)!==0),p?(u=!0,n.flags&=-129):(r===null||r.memoizedState!==null)&&(m|=1),Mt(It,m&1),r===null)return vc(n),r=n.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(n.mode&1?r.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(a=t.children,r=t.fallback,u?(t=n.mode,u=n.child,a={mode:"hidden",children:a},!(t&1)&&u!==null?(u.childLanes=0,u.pendingProps=a):u=Al(a,t,0,null),r=To(r,t,o,null),u.return=n,r.return=n,u.sibling=r,n.child=u,n.child.memoizedState=Ec(o),n.memoizedState=kc,r):Gd(n,a));if(m=r.memoizedState,m!==null&&(p=m.dehydrated,p!==null))return Lb(r,n,a,t,p,m,o);if(u){u=t.fallback,a=n.mode,m=r.child,p=m.sibling;var s={mode:"hidden",children:t.children};return!(a&1)&&n.child!==m?(t=n.child,t.childLanes=0,t.pendingProps=s,n.deletions=null):(t=oo(m,s),t.subtreeFlags=m.subtreeFlags&14680064),p!==null?u=oo(p,u):(u=To(u,a,o,null),u.flags|=2),u.return=n,t.return=n,t.sibling=u,n.child=t,t=u,u=n.child,a=r.child.memoizedState,a=a===null?Ec(o):{baseLanes:a.baseLanes|o,cachePool:null,transitions:a.transitions},u.memoizedState=a,u.childLanes=r.childLanes&~o,n.memoizedState=kc,t}return u=r.child,r=u.sibling,t=oo(u,{mode:"visible",children:t.children}),!(n.mode&1)&&(t.lanes=o),t.return=n,t.sibling=null,r!==null&&(o=n.deletions,o===null?(n.deletions=[r],n.flags|=16):o.push(r)),n.child=t,n.memoizedState=null,t}function Gd(r,n){return n=Al({mode:"visible",children:n},r.mode,0,null),n.return=r,r.child=n}function gi(r,n,o,t){return t!==null&&Md(t),ws(n,r.child,null,o),r=Gd(n,n.pendingProps.children),r.flags|=2,n.memoizedState=null,r}function Lb(r,n,o,t,m,u,a){if(o)return n.flags&256?(n.flags&=-257,t=ku(Error(Ge(422))),gi(r,n,a,t)):n.memoizedState!==null?(n.child=r.child,n.flags|=128,null):(u=t.fallback,m=n.mode,t=Al({mode:"visible",children:t.children},m,0,null),u=To(u,m,a,null),u.flags|=2,t.return=n,u.return=n,t.sibling=u,n.child=t,n.mode&1&&ws(n,r.child,null,a),n.child.memoizedState=Ec(a),n.memoizedState=kc,u);if(!(n.mode&1))return gi(r,n,a,null);if(m.data==="$!"){if(t=m.nextSibling&&m.nextSibling.dataset,t)var p=t.dgst;return t=p,u=Error(Ge(419)),t=ku(u,t,void 0),gi(r,n,a,t)}if(p=(a&r.childLanes)!==0,Sr||p){if(t=nr,t!==null){switch(a&-a){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=m&(t.suspendedLanes|a)?0:m,m!==0&&m!==u.retryLane&&(u.retryLane=m,Pn(r,m),rn(t,r,m,-1))}return Yd(),t=ku(Error(Ge(421))),gi(r,n,a,t)}return m.data==="$?"?(n.flags|=128,n.child=r.child,n=Wb.bind(null,r),m._reactRetry=n,null):(r=u.treeContext,Nr=eo(m.nextSibling),Rr=n,Rt=!0,Jr=null,r!==null&&(Br[zr++]=kn,Br[zr++]=En,Br[zr++]=Po,kn=r.id,En=r.overflow,Po=n),n=Gd(n,t.children),n.flags|=4096,n)}function qh(r,n,o){r.lanes|=n;var t=r.alternate;t!==null&&(t.lanes|=n),bc(r.return,n,o)}function Eu(r,n,o,t,m){var u=r.memoizedState;u===null?r.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:t,tail:o,tailMode:m}:(u.isBackwards=n,u.rendering=null,u.renderingStartTime=0,u.last=t,u.tail=o,u.tailMode=m)}function Yy(r,n,o){var t=n.pendingProps,m=t.revealOrder,u=t.tail;if(br(r,n,t.children,o),t=It.current,t&2)t=t&1|2,n.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=n.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&qh(r,o,n);else if(r.tag===19)qh(r,o,n);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t&=1}if(Mt(It,t),!(n.mode&1))n.memoizedState=null;else switch(m){case"forwards":for(o=n.child,m=null;o!==null;)r=o.alternate,r!==null&&ol(r)===null&&(m=o),o=o.sibling;o=m,o===null?(m=n.child,n.child=null):(m=o.sibling,o.sibling=null),Eu(n,!1,m,o,u);break;case"backwards":for(o=null,m=n.child,n.child=null;m!==null;){if(r=m.alternate,r!==null&&ol(r)===null){n.child=m;break}r=m.sibling,m.sibling=o,o=m,m=r}Eu(n,!0,o,null,u);break;case"together":Eu(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Di(r,n){!(n.mode&1)&&r!==null&&(r.alternate=null,n.alternate=null,n.flags|=2)}function Ln(r,n,o){if(r!==null&&(n.dependencies=r.dependencies),No|=n.lanes,!(o&n.childLanes))return null;if(r!==null&&n.child!==r.child)throw Error(Ge(153));if(n.child!==null){for(r=n.child,o=oo(r,r.pendingProps),n.child=o,o.return=n;r.sibling!==null;)r=r.sibling,o=o.sibling=oo(r,r.pendingProps),o.return=n;o.sibling=null}return n.child}function Nb(r,n,o){switch(n.tag){case 3:qy(n),xs();break;case 5:xy(n);break;case 1:Er(n.type)&&Zi(n);break;case 4:Rd(n,n.stateNode.containerInfo);break;case 10:var t=n.type._context,m=n.memoizedProps.value;Mt(tl,t._currentValue),t._currentValue=m;break;case 13:if(t=n.memoizedState,t!==null)return t.dehydrated!==null?(Mt(It,It.current&1),n.flags|=128,null):o&n.child.childLanes?$y(r,n,o):(Mt(It,It.current&1),r=Ln(r,n,o),r!==null?r.sibling:null);Mt(It,It.current&1);break;case 19:if(t=(o&n.childLanes)!==0,r.flags&128){if(t)return Yy(r,n,o);n.flags|=128}if(m=n.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Mt(It,It.current),t)break;return null;case 22:case 23:return n.lanes=0,Hy(r,n,o)}return Ln(r,n,o)}var Xy,Tc,Ky,Qy;Xy=function(r,n){for(var o=n.child;o!==null;){if(o.tag===5||o.tag===6)r.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};Tc=function(){};Ky=function(r,n,o,t){var m=r.memoizedProps;if(m!==t){r=n.stateNode,_o(vn.current);var u=null;switch(o){case"input":m=Xu(r,m),t=Xu(r,t),u=[];break;case"select":m=Ft({},m,{value:void 0}),t=Ft({},t,{value:void 0}),u=[];break;case"textarea":m=Zu(r,m),t=Zu(r,t),u=[];break;default:typeof m.onClick!="function"&&typeof t.onClick=="function"&&(r.onclick=Ki)}ec(o,t);var a;o=null;for(h in m)if(!t.hasOwnProperty(h)&&m.hasOwnProperty(h)&&m[h]!=null)if(h==="style"){var p=m[h];for(a in p)p.hasOwnProperty(a)&&(o||(o={}),o[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(xa.hasOwnProperty(h)?u||(u=[]):(u=u||[]).push(h,null));for(h in t){var s=t[h];if(p=m!=null?m[h]:void 0,t.hasOwnProperty(h)&&s!==p&&(s!=null||p!=null))if(h==="style")if(p){for(a in p)!p.hasOwnProperty(a)||s&&s.hasOwnProperty(a)||(o||(o={}),o[a]="");for(a in s)s.hasOwnProperty(a)&&p[a]!==s[a]&&(o||(o={}),o[a]=s[a])}else o||(u||(u=[]),u.push(h,o)),o=s;else h==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,p=p?p.__html:void 0,s!=null&&p!==s&&(u=u||[]).push(h,s)):h==="children"?typeof s!="string"&&typeof s!="number"||(u=u||[]).push(h,""+s):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(xa.hasOwnProperty(h)?(s!=null&&h==="onScroll"&&Lt("scroll",r),u||p===s||(u=[])):(u=u||[]).push(h,s))}o&&(u=u||[]).push("style",o);var h=u;(n.updateQueue=h)&&(n.flags|=4)}};Qy=function(r,n,o,t){o!==t&&(n.flags|=4)};function Ks(r,n){if(!Rt)switch(r.tailMode){case"hidden":n=r.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var t=null;o!==null;)o.alternate!==null&&(t=o),o=o.sibling;t===null?n||r.tail===null?r.tail=null:r.tail.sibling=null:t.sibling=null}}function mr(r){var n=r.alternate!==null&&r.alternate.child===r.child,o=0,t=0;if(n)for(var m=r.child;m!==null;)o|=m.lanes|m.childLanes,t|=m.subtreeFlags&14680064,t|=m.flags&14680064,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)o|=m.lanes|m.childLanes,t|=m.subtreeFlags,t|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=t,r.childLanes=o,n}function Rb(r,n,o){var t=n.pendingProps;switch(Td(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mr(n),null;case 1:return Er(n.type)&&Qi(),mr(n),null;case 3:return t=n.stateNode,js(),Nt(kr),Nt(gr),Id(),t.pendingContext&&(t.context=t.pendingContext,t.pendingContext=null),(r===null||r.child===null)&&(mi(n)?n.flags|=4:r===null||r.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Jr!==null&&(Ac(Jr),Jr=null))),Tc(r,n),mr(n),null;case 5:Ad(n);var m=_o(La.current);if(o=n.type,r!==null&&n.stateNode!=null)Ky(r,n,o,t,m),r.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!t){if(n.stateNode===null)throw Error(Ge(166));return mr(n),null}if(r=_o(vn.current),mi(n)){t=n.stateNode,o=n.type;var u=n.memoizedProps;switch(t[hn]=n,t[Oa]=u,r=(n.mode&1)!==0,o){case"dialog":Lt("cancel",t),Lt("close",t);break;case"iframe":case"object":case"embed":Lt("load",t);break;case"video":case"audio":for(m=0;m<oa.length;m++)Lt(oa[m],t);break;case"source":Lt("error",t);break;case"img":case"image":case"link":Lt("error",t),Lt("load",t);break;case"details":Lt("toggle",t);break;case"input":th(t,u),Lt("invalid",t);break;case"select":t._wrapperState={wasMultiple:!!u.multiple},Lt("invalid",t);break;case"textarea":nh(t,u),Lt("invalid",t)}ec(o,u),m=null;for(var a in u)if(u.hasOwnProperty(a)){var p=u[a];a==="children"?typeof p=="string"?t.textContent!==p&&(u.suppressHydrationWarning!==!0&&pi(t.textContent,p,r),m=["children",p]):typeof p=="number"&&t.textContent!==""+p&&(u.suppressHydrationWarning!==!0&&pi(t.textContent,p,r),m=["children",""+p]):xa.hasOwnProperty(a)&&p!=null&&a==="onScroll"&&Lt("scroll",t)}switch(o){case"input":ai(t),rh(t,u,!0);break;case"textarea":ai(t),oh(t);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(t.onclick=Ki)}t=m,n.updateQueue=t,t!==null&&(n.flags|=4)}else{a=m.nodeType===9?m:m.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=km(o)),r==="http://www.w3.org/1999/xhtml"?o==="script"?(r=a.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof t.is=="string"?r=a.createElement(o,{is:t.is}):(r=a.createElement(o),o==="select"&&(a=r,t.multiple?a.multiple=!0:t.size&&(a.size=t.size))):r=a.createElementNS(r,o),r[hn]=n,r[Oa]=t,Xy(r,n,!1,!1),n.stateNode=r;e:{switch(a=tc(o,t),o){case"dialog":Lt("cancel",r),Lt("close",r),m=t;break;case"iframe":case"object":case"embed":Lt("load",r),m=t;break;case"video":case"audio":for(m=0;m<oa.length;m++)Lt(oa[m],r);m=t;break;case"source":Lt("error",r),m=t;break;case"img":case"image":case"link":Lt("error",r),Lt("load",r),m=t;break;case"details":Lt("toggle",r),m=t;break;case"input":th(r,t),m=Xu(r,t),Lt("invalid",r);break;case"option":m=t;break;case"select":r._wrapperState={wasMultiple:!!t.multiple},m=Ft({},t,{value:void 0}),Lt("invalid",r);break;case"textarea":nh(r,t),m=Zu(r,t),Lt("invalid",r);break;default:m=t}ec(o,m),p=m;for(u in p)if(p.hasOwnProperty(u)){var s=p[u];u==="style"?Mm(r,s):u==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,s!=null&&Em(r,s)):u==="children"?typeof s=="string"?(o!=="textarea"||s!=="")&&wa(r,s):typeof s=="number"&&wa(r,""+s):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(xa.hasOwnProperty(u)?s!=null&&u==="onScroll"&&Lt("scroll",r):s!=null&&fd(r,u,s,a))}switch(o){case"input":ai(r),rh(r,t,!1);break;case"textarea":ai(r),oh(r);break;case"option":t.value!=null&&r.setAttribute("value",""+ao(t.value));break;case"select":r.multiple=!!t.multiple,u=t.value,u!=null?cs(r,!!t.multiple,u,!1):t.defaultValue!=null&&cs(r,!!t.multiple,t.defaultValue,!0);break;default:typeof m.onClick=="function"&&(r.onclick=Ki)}switch(o){case"button":case"input":case"select":case"textarea":t=!!t.autoFocus;break e;case"img":t=!0;break e;default:t=!1}}t&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return mr(n),null;case 6:if(r&&n.stateNode!=null)Qy(r,n,r.memoizedProps,t);else{if(typeof t!="string"&&n.stateNode===null)throw Error(Ge(166));if(o=_o(La.current),_o(vn.current),mi(n)){if(t=n.stateNode,o=n.memoizedProps,t[hn]=n,(u=t.nodeValue!==o)&&(r=Rr,r!==null))switch(r.tag){case 3:pi(t.nodeValue,o,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&pi(t.nodeValue,o,(r.mode&1)!==0)}u&&(n.flags|=4)}else t=(o.nodeType===9?o:o.ownerDocument).createTextNode(t),t[hn]=n,n.stateNode=t}return mr(n),null;case 13:if(Nt(It),t=n.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Rt&&Nr!==null&&n.mode&1&&!(n.flags&128))my(),xs(),n.flags|=98560,u=!1;else if(u=mi(n),t!==null&&t.dehydrated!==null){if(r===null){if(!u)throw Error(Ge(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(Ge(317));u[hn]=n}else xs(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;mr(n),u=!1}else Jr!==null&&(Ac(Jr),Jr=null),u=!0;if(!u)return n.flags&65536?n:null}return n.flags&128?(n.lanes=o,n):(t=t!==null,t!==(r!==null&&r.memoizedState!==null)&&t&&(n.child.flags|=8192,n.mode&1&&(r===null||It.current&1?Qt===0&&(Qt=3):Yd())),n.updateQueue!==null&&(n.flags|=4),mr(n),null);case 4:return js(),Tc(r,n),r===null&&Ma(n.stateNode.containerInfo),mr(n),null;case 10:return Pd(n.type._context),mr(n),null;case 17:return Er(n.type)&&Qi(),mr(n),null;case 19:if(Nt(It),u=n.memoizedState,u===null)return mr(n),null;if(t=(n.flags&128)!==0,a=u.rendering,a===null)if(t)Ks(u,!1);else{if(Qt!==0||r!==null&&r.flags&128)for(r=n.child;r!==null;){if(a=ol(r),a!==null){for(n.flags|=128,Ks(u,!1),t=a.updateQueue,t!==null&&(n.updateQueue=t,n.flags|=4),n.subtreeFlags=0,t=o,o=n.child;o!==null;)u=o,r=t,u.flags&=14680066,a=u.alternate,a===null?(u.childLanes=0,u.lanes=r,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,u.type=a.type,r=a.dependencies,u.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),o=o.sibling;return Mt(It,It.current&1|2),n.child}r=r.sibling}u.tail!==null&&Vt()>Ss&&(n.flags|=128,t=!0,Ks(u,!1),n.lanes=4194304)}else{if(!t)if(r=ol(a),r!==null){if(n.flags|=128,t=!0,o=r.updateQueue,o!==null&&(n.updateQueue=o,n.flags|=4),Ks(u,!0),u.tail===null&&u.tailMode==="hidden"&&!a.alternate&&!Rt)return mr(n),null}else 2*Vt()-u.renderingStartTime>Ss&&o!==1073741824&&(n.flags|=128,t=!0,Ks(u,!1),n.lanes=4194304);u.isBackwards?(a.sibling=n.child,n.child=a):(o=u.last,o!==null?o.sibling=a:n.child=a,u.last=a)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Vt(),n.sibling=null,o=It.current,Mt(It,t?o&1|2:o&1),n):(mr(n),null);case 22:case 23:return $d(),t=n.memoizedState!==null,r!==null&&r.memoizedState!==null!==t&&(n.flags|=8192),t&&n.mode&1?Lr&1073741824&&(mr(n),n.subtreeFlags&6&&(n.flags|=8192)):mr(n),null;case 24:return null;case 25:return null}throw Error(Ge(156,n.tag))}function Ab(r,n){switch(Td(n),n.tag){case 1:return Er(n.type)&&Qi(),r=n.flags,r&65536?(n.flags=r&-65537|128,n):null;case 3:return js(),Nt(kr),Nt(gr),Id(),r=n.flags,r&65536&&!(r&128)?(n.flags=r&-65537|128,n):null;case 5:return Ad(n),null;case 13:if(Nt(It),r=n.memoizedState,r!==null&&r.dehydrated!==null){if(n.alternate===null)throw Error(Ge(340));xs()}return r=n.flags,r&65536?(n.flags=r&-65537|128,n):null;case 19:return Nt(It),null;case 4:return js(),null;case 10:return Pd(n.type._context),null;case 22:case 23:return $d(),null;case 24:return null;default:return null}}var vi=!1,yr=!1,Ib=typeof WeakSet=="function"?WeakSet:Set,et=null;function is(r,n){var o=r.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(t){zt(r,n,t)}else o.current=null}function Mc(r,n,o){try{o()}catch(t){zt(r,n,t)}}var $h=!1;function Db(r,n){if(dc=$i,r=ry(),kd(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var t=o.getSelection&&o.getSelection();if(t&&t.rangeCount!==0){o=t.anchorNode;var m=t.anchorOffset,u=t.focusNode;t=t.focusOffset;try{o.nodeType,u.nodeType}catch{o=null;break e}var a=0,p=-1,s=-1,h=0,b=0,v=r,i=null;t:for(;;){for(var d;v!==o||m!==0&&v.nodeType!==3||(p=a+m),v!==u||t!==0&&v.nodeType!==3||(s=a+t),v.nodeType===3&&(a+=v.nodeValue.length),(d=v.firstChild)!==null;)i=v,v=d;for(;;){if(v===r)break t;if(i===o&&++h===m&&(p=a),i===u&&++b===t&&(s=a),(d=v.nextSibling)!==null)break;v=i,i=v.parentNode}v=d}o=p===-1||s===-1?null:{start:p,end:s}}else o=null}o=o||{start:0,end:0}}else o=null;for(fc={focusedElem:r,selectionRange:o},$i=!1,et=n;et!==null;)if(n=et,r=n.child,(n.subtreeFlags&1028)!==0&&r!==null)r.return=n,et=r;else for(;et!==null;){n=et;try{var f=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var y=f.memoizedProps,g=f.memoizedState,c=n.stateNode,l=c.getSnapshotBeforeUpdate(n.elementType===n.type?y:Qr(n.type,y),g);c.__reactInternalSnapshotBeforeUpdate=l}break;case 3:var w=n.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ge(163))}}catch(x){zt(n,n.return,x)}if(r=n.sibling,r!==null){r.return=n.return,et=r;break}et=n.return}return f=$h,$h=!1,f}function ha(r,n,o){var t=n.updateQueue;if(t=t!==null?t.lastEffect:null,t!==null){var m=t=t.next;do{if((m.tag&r)===r){var u=m.destroy;m.destroy=void 0,u!==void 0&&Mc(n,o,u)}m=m.next}while(m!==t)}}function Nl(r,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&r)===r){var t=o.create;o.destroy=t()}o=o.next}while(o!==n)}}function Cc(r){var n=r.ref;if(n!==null){var o=r.stateNode;switch(r.tag){case 5:r=o;break;default:r=o}typeof n=="function"?n(r):n.current=r}}function Zy(r){var n=r.alternate;n!==null&&(r.alternate=null,Zy(n)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(n=r.stateNode,n!==null&&(delete n[hn],delete n[Oa],delete n[mc],delete n[bb],delete n[xb])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Jy(r){return r.tag===5||r.tag===3||r.tag===4}function Yh(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Jy(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Oc(r,n,o){var t=r.tag;if(t===5||t===6)r=r.stateNode,n?o.nodeType===8?o.parentNode.insertBefore(r,n):o.insertBefore(r,n):(o.nodeType===8?(n=o.parentNode,n.insertBefore(r,o)):(n=o,n.appendChild(r)),o=o._reactRootContainer,o!=null||n.onclick!==null||(n.onclick=Ki));else if(t!==4&&(r=r.child,r!==null))for(Oc(r,n,o),r=r.sibling;r!==null;)Oc(r,n,o),r=r.sibling}function Pc(r,n,o){var t=r.tag;if(t===5||t===6)r=r.stateNode,n?o.insertBefore(r,n):o.appendChild(r);else if(t!==4&&(r=r.child,r!==null))for(Pc(r,n,o),r=r.sibling;r!==null;)Pc(r,n,o),r=r.sibling}var ir=null,Zr=!1;function Dn(r,n,o){for(o=o.child;o!==null;)eg(r,n,o),o=o.sibling}function eg(r,n,o){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(kl,o)}catch{}switch(o.tag){case 5:yr||is(o,n);case 6:var t=ir,m=Zr;ir=null,Dn(r,n,o),ir=t,Zr=m,ir!==null&&(Zr?(r=ir,o=o.stateNode,r.nodeType===8?r.parentNode.removeChild(o):r.removeChild(o)):ir.removeChild(o.stateNode));break;case 18:ir!==null&&(Zr?(r=ir,o=o.stateNode,r.nodeType===8?bu(r.parentNode,o):r.nodeType===1&&bu(r,o),ka(r)):bu(ir,o.stateNode));break;case 4:t=ir,m=Zr,ir=o.stateNode.containerInfo,Zr=!0,Dn(r,n,o),ir=t,Zr=m;break;case 0:case 11:case 14:case 15:if(!yr&&(t=o.updateQueue,t!==null&&(t=t.lastEffect,t!==null))){m=t=t.next;do{var u=m,a=u.destroy;u=u.tag,a!==void 0&&(u&2||u&4)&&Mc(o,n,a),m=m.next}while(m!==t)}Dn(r,n,o);break;case 1:if(!yr&&(is(o,n),t=o.stateNode,typeof t.componentWillUnmount=="function"))try{t.props=o.memoizedProps,t.state=o.memoizedState,t.componentWillUnmount()}catch(p){zt(o,n,p)}Dn(r,n,o);break;case 21:Dn(r,n,o);break;case 22:o.mode&1?(yr=(t=yr)||o.memoizedState!==null,Dn(r,n,o),yr=t):Dn(r,n,o);break;default:Dn(r,n,o)}}function Xh(r){var n=r.updateQueue;if(n!==null){r.updateQueue=null;var o=r.stateNode;o===null&&(o=r.stateNode=new Ib),n.forEach(function(t){var m=qb.bind(null,r,t);o.has(t)||(o.add(t),t.then(m,m))})}}function Kr(r,n){var o=n.deletions;if(o!==null)for(var t=0;t<o.length;t++){var m=o[t];try{var u=r,a=n,p=a;e:for(;p!==null;){switch(p.tag){case 5:ir=p.stateNode,Zr=!1;break e;case 3:ir=p.stateNode.containerInfo,Zr=!0;break e;case 4:ir=p.stateNode.containerInfo,Zr=!0;break e}p=p.return}if(ir===null)throw Error(Ge(160));eg(u,a,m),ir=null,Zr=!1;var s=m.alternate;s!==null&&(s.return=null),m.return=null}catch(h){zt(m,n,h)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)tg(n,r),n=n.sibling}function tg(r,n){var o=r.alternate,t=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Kr(n,r),dn(r),t&4){try{ha(3,r,r.return),Nl(3,r)}catch(y){zt(r,r.return,y)}try{ha(5,r,r.return)}catch(y){zt(r,r.return,y)}}break;case 1:Kr(n,r),dn(r),t&512&&o!==null&&is(o,o.return);break;case 5:if(Kr(n,r),dn(r),t&512&&o!==null&&is(o,o.return),r.flags&32){var m=r.stateNode;try{wa(m,"")}catch(y){zt(r,r.return,y)}}if(t&4&&(m=r.stateNode,m!=null)){var u=r.memoizedProps,a=o!==null?o.memoizedProps:u,p=r.type,s=r.updateQueue;if(r.updateQueue=null,s!==null)try{p==="input"&&u.type==="radio"&&u.name!=null&&_m(m,u),tc(p,a);var h=tc(p,u);for(a=0;a<s.length;a+=2){var b=s[a],v=s[a+1];b==="style"?Mm(m,v):b==="dangerouslySetInnerHTML"?Em(m,v):b==="children"?wa(m,v):fd(m,b,v,h)}switch(p){case"input":Ku(m,u);break;case"textarea":Sm(m,u);break;case"select":var i=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!u.multiple;var d=u.value;d!=null?cs(m,!!u.multiple,d,!1):i!==!!u.multiple&&(u.defaultValue!=null?cs(m,!!u.multiple,u.defaultValue,!0):cs(m,!!u.multiple,u.multiple?[]:"",!1))}m[Oa]=u}catch(y){zt(r,r.return,y)}}break;case 6:if(Kr(n,r),dn(r),t&4){if(r.stateNode===null)throw Error(Ge(162));m=r.stateNode,u=r.memoizedProps;try{m.nodeValue=u}catch(y){zt(r,r.return,y)}}break;case 3:if(Kr(n,r),dn(r),t&4&&o!==null&&o.memoizedState.isDehydrated)try{ka(n.containerInfo)}catch(y){zt(r,r.return,y)}break;case 4:Kr(n,r),dn(r);break;case 13:Kr(n,r),dn(r),m=r.child,m.flags&8192&&(u=m.memoizedState!==null,m.stateNode.isHidden=u,!u||m.alternate!==null&&m.alternate.memoizedState!==null||(Wd=Vt())),t&4&&Xh(r);break;case 22:if(b=o!==null&&o.memoizedState!==null,r.mode&1?(yr=(h=yr)||b,Kr(n,r),yr=h):Kr(n,r),dn(r),t&8192){if(h=r.memoizedState!==null,(r.stateNode.isHidden=h)&&!b&&r.mode&1)for(et=r,b=r.child;b!==null;){for(v=et=b;et!==null;){switch(i=et,d=i.child,i.tag){case 0:case 11:case 14:case 15:ha(4,i,i.return);break;case 1:is(i,i.return);var f=i.stateNode;if(typeof f.componentWillUnmount=="function"){t=i,o=i.return;try{n=t,f.props=n.memoizedProps,f.state=n.memoizedState,f.componentWillUnmount()}catch(y){zt(t,o,y)}}break;case 5:is(i,i.return);break;case 22:if(i.memoizedState!==null){Qh(v);continue}}d!==null?(d.return=i,et=d):Qh(v)}b=b.sibling}e:for(b=null,v=r;;){if(v.tag===5){if(b===null){b=v;try{m=v.stateNode,h?(u=m.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(p=v.stateNode,s=v.memoizedProps.style,a=s!=null&&s.hasOwnProperty("display")?s.display:null,p.style.display=Tm("display",a))}catch(y){zt(r,r.return,y)}}}else if(v.tag===6){if(b===null)try{v.stateNode.nodeValue=h?"":v.memoizedProps}catch(y){zt(r,r.return,y)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===r)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===r)break e;for(;v.sibling===null;){if(v.return===null||v.return===r)break e;b===v&&(b=null),v=v.return}b===v&&(b=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Kr(n,r),dn(r),t&4&&Xh(r);break;case 21:break;default:Kr(n,r),dn(r)}}function dn(r){var n=r.flags;if(n&2){try{e:{for(var o=r.return;o!==null;){if(Jy(o)){var t=o;break e}o=o.return}throw Error(Ge(160))}switch(t.tag){case 5:var m=t.stateNode;t.flags&32&&(wa(m,""),t.flags&=-33);var u=Yh(r);Pc(r,u,m);break;case 3:case 4:var a=t.stateNode.containerInfo,p=Yh(r);Oc(r,p,a);break;default:throw Error(Ge(161))}}catch(s){zt(r,r.return,s)}r.flags&=-3}n&4096&&(r.flags&=-4097)}function Fb(r,n,o){et=r,rg(r)}function rg(r,n,o){for(var t=(r.mode&1)!==0;et!==null;){var m=et,u=m.child;if(m.tag===22&&t){var a=m.memoizedState!==null||vi;if(!a){var p=m.alternate,s=p!==null&&p.memoizedState!==null||yr;p=vi;var h=yr;if(vi=a,(yr=s)&&!h)for(et=m;et!==null;)a=et,s=a.child,a.tag===22&&a.memoizedState!==null?Zh(m):s!==null?(s.return=a,et=s):Zh(m);for(;u!==null;)et=u,rg(u),u=u.sibling;et=m,vi=p,yr=h}Kh(r)}else m.subtreeFlags&8772&&u!==null?(u.return=m,et=u):Kh(r)}}function Kh(r){for(;et!==null;){var n=et;if(n.flags&8772){var o=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:yr||Nl(5,n);break;case 1:var t=n.stateNode;if(n.flags&4&&!yr)if(o===null)t.componentDidMount();else{var m=n.elementType===n.type?o.memoizedProps:Qr(n.type,o.memoizedProps);t.componentDidUpdate(m,o.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}var u=n.updateQueue;u!==null&&Rh(n,u,t);break;case 3:var a=n.updateQueue;if(a!==null){if(o=null,n.child!==null)switch(n.child.tag){case 5:o=n.child.stateNode;break;case 1:o=n.child.stateNode}Rh(n,a,o)}break;case 5:var p=n.stateNode;if(o===null&&n.flags&4){o=p;var s=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&o.focus();break;case"img":s.src&&(o.src=s.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var h=n.alternate;if(h!==null){var b=h.memoizedState;if(b!==null){var v=b.dehydrated;v!==null&&ka(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ge(163))}yr||n.flags&512&&Cc(n)}catch(i){zt(n,n.return,i)}}if(n===r){et=null;break}if(o=n.sibling,o!==null){o.return=n.return,et=o;break}et=n.return}}function Qh(r){for(;et!==null;){var n=et;if(n===r){et=null;break}var o=n.sibling;if(o!==null){o.return=n.return,et=o;break}et=n.return}}function Zh(r){for(;et!==null;){var n=et;try{switch(n.tag){case 0:case 11:case 15:var o=n.return;try{Nl(4,n)}catch(s){zt(n,o,s)}break;case 1:var t=n.stateNode;if(typeof t.componentDidMount=="function"){var m=n.return;try{t.componentDidMount()}catch(s){zt(n,m,s)}}var u=n.return;try{Cc(n)}catch(s){zt(n,u,s)}break;case 5:var a=n.return;try{Cc(n)}catch(s){zt(n,a,s)}}}catch(s){zt(n,n.return,s)}if(n===r){et=null;break}var p=n.sibling;if(p!==null){p.return=n.return,et=p;break}et=n.return}}var Ub=Math.ceil,il=Nn.ReactCurrentDispatcher,Vd=Nn.ReactCurrentOwner,Hr=Nn.ReactCurrentBatchConfig,vt=0,nr=null,Yt=null,lr=0,Lr=0,ls=fo(0),Qt=0,Ia=null,No=0,Rl=0,Hd=0,pa=null,_r=null,Wd=0,Ss=1/0,jn=null,ll=!1,Lc=null,ro=null,bi=!1,Xn=null,ul=0,ma=0,Nc=null,Fi=-1,Ui=0;function xr(){return vt&6?Vt():Fi!==-1?Fi:Fi=Vt()}function no(r){return r.mode&1?vt&2&&lr!==0?lr&-lr:jb.transition!==null?(Ui===0&&(Ui=Bm()),Ui):(r=jt,r!==0||(r=window.event,r=r===void 0?16:$m(r.type)),r):1}function rn(r,n,o,t){if(50<ma)throw ma=0,Nc=null,Error(Ge(185));Ha(r,o,t),(!(vt&2)||r!==nr)&&(r===nr&&(!(vt&2)&&(Rl|=o),Qt===4&&$n(r,lr)),Tr(r,t),o===1&&vt===0&&!(n.mode&1)&&(Ss=Vt()+500,Ol&&ho()))}function Tr(r,n){var o=r.callbackNode;j0(r,n);var t=qi(r,r===nr?lr:0);if(t===0)o!==null&&ih(o),r.callbackNode=null,r.callbackPriority=0;else if(n=t&-t,r.callbackPriority!==n){if(o!=null&&ih(o),n===1)r.tag===0?wb(Jh.bind(null,r)):fy(Jh.bind(null,r)),gb(function(){!(vt&6)&&ho()}),o=null;else{switch(zm(t)){case 1:o=gd;break;case 4:o=Fm;break;case 16:o=Wi;break;case 536870912:o=Um;break;default:o=Wi}o=cg(o,ng.bind(null,r))}r.callbackPriority=n,r.callbackNode=o}}function ng(r,n){if(Fi=-1,Ui=0,vt&6)throw Error(Ge(327));var o=r.callbackNode;if(ms()&&r.callbackNode!==o)return null;var t=qi(r,r===nr?lr:0);if(t===0)return null;if(t&30||t&r.expiredLanes||n)n=cl(r,t);else{n=t;var m=vt;vt|=2;var u=sg();(nr!==r||lr!==n)&&(jn=null,Ss=Vt()+500,Eo(r,n));do try{Gb();break}catch(p){og(r,p)}while(!0);Od(),il.current=u,vt=m,Yt!==null?n=0:(nr=null,lr=0,n=Qt)}if(n!==0){if(n===2&&(m=ac(r),m!==0&&(t=m,n=Rc(r,m))),n===1)throw o=Ia,Eo(r,0),$n(r,t),Tr(r,Vt()),o;if(n===6)$n(r,t);else{if(m=r.current.alternate,!(t&30)&&!Bb(m)&&(n=cl(r,t),n===2&&(u=ac(r),u!==0&&(t=u,n=Rc(r,u))),n===1))throw o=Ia,Eo(r,0),$n(r,t),Tr(r,Vt()),o;switch(r.finishedWork=m,r.finishedLanes=t,n){case 0:case 1:throw Error(Ge(345));case 2:vo(r,_r,jn);break;case 3:if($n(r,t),(t&130023424)===t&&(n=Wd+500-Vt(),10<n)){if(qi(r,0)!==0)break;if(m=r.suspendedLanes,(m&t)!==t){xr(),r.pingedLanes|=r.suspendedLanes&m;break}r.timeoutHandle=pc(vo.bind(null,r,_r,jn),n);break}vo(r,_r,jn);break;case 4:if($n(r,t),(t&4194240)===t)break;for(n=r.eventTimes,m=-1;0<t;){var a=31-tn(t);u=1<<a,a=n[a],a>m&&(m=a),t&=~u}if(t=m,t=Vt()-t,t=(120>t?120:480>t?480:1080>t?1080:1920>t?1920:3e3>t?3e3:4320>t?4320:1960*Ub(t/1960))-t,10<t){r.timeoutHandle=pc(vo.bind(null,r,_r,jn),t);break}vo(r,_r,jn);break;case 5:vo(r,_r,jn);break;default:throw Error(Ge(329))}}}return Tr(r,Vt()),r.callbackNode===o?ng.bind(null,r):null}function Rc(r,n){var o=pa;return r.current.memoizedState.isDehydrated&&(Eo(r,n).flags|=256),r=cl(r,n),r!==2&&(n=_r,_r=o,n!==null&&Ac(n)),r}function Ac(r){_r===null?_r=r:_r.push.apply(_r,r)}function Bb(r){for(var n=r;;){if(n.flags&16384){var o=n.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var t=0;t<o.length;t++){var m=o[t],u=m.getSnapshot;m=m.value;try{if(!nn(u(),m))return!1}catch{return!1}}}if(o=n.child,n.subtreeFlags&16384&&o!==null)o.return=n,n=o;else{if(n===r)break;for(;n.sibling===null;){if(n.return===null||n.return===r)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function $n(r,n){for(n&=~Hd,n&=~Rl,r.suspendedLanes|=n,r.pingedLanes&=~n,r=r.expirationTimes;0<n;){var o=31-tn(n),t=1<<o;r[o]=-1,n&=~t}}function Jh(r){if(vt&6)throw Error(Ge(327));ms();var n=qi(r,0);if(!(n&1))return Tr(r,Vt()),null;var o=cl(r,n);if(r.tag!==0&&o===2){var t=ac(r);t!==0&&(n=t,o=Rc(r,t))}if(o===1)throw o=Ia,Eo(r,0),$n(r,n),Tr(r,Vt()),o;if(o===6)throw Error(Ge(345));return r.finishedWork=r.current.alternate,r.finishedLanes=n,vo(r,_r,jn),Tr(r,Vt()),null}function qd(r,n){var o=vt;vt|=1;try{return r(n)}finally{vt=o,vt===0&&(Ss=Vt()+500,Ol&&ho())}}function Ro(r){Xn!==null&&Xn.tag===0&&!(vt&6)&&ms();var n=vt;vt|=1;var o=Hr.transition,t=jt;try{if(Hr.transition=null,jt=1,r)return r()}finally{jt=t,Hr.transition=o,vt=n,!(vt&6)&&ho()}}function $d(){Lr=ls.current,Nt(ls)}function Eo(r,n){r.finishedWork=null,r.finishedLanes=0;var o=r.timeoutHandle;if(o!==-1&&(r.timeoutHandle=-1,yb(o)),Yt!==null)for(o=Yt.return;o!==null;){var t=o;switch(Td(t),t.tag){case 1:t=t.type.childContextTypes,t!=null&&Qi();break;case 3:js(),Nt(kr),Nt(gr),Id();break;case 5:Ad(t);break;case 4:js();break;case 13:Nt(It);break;case 19:Nt(It);break;case 10:Pd(t.type._context);break;case 22:case 23:$d()}o=o.return}if(nr=r,Yt=r=oo(r.current,null),lr=Lr=n,Qt=0,Ia=null,Hd=Rl=No=0,_r=pa=null,jo!==null){for(n=0;n<jo.length;n++)if(o=jo[n],t=o.interleaved,t!==null){o.interleaved=null;var m=t.next,u=o.pending;if(u!==null){var a=u.next;u.next=m,t.next=a}o.pending=t}jo=null}return r}function og(r,n){do{var o=Yt;try{if(Od(),Ai.current=al,sl){for(var t=Dt.memoizedState;t!==null;){var m=t.queue;m!==null&&(m.pending=null),t=t.next}sl=!1}if(Lo=0,rr=Kt=Dt=null,fa=!1,Na=0,Vd.current=null,o===null||o.return===null){Qt=1,Ia=n,Yt=null;break}e:{var u=r,a=o.return,p=o,s=n;if(n=lr,p.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){var h=s,b=p,v=b.tag;if(!(b.mode&1)&&(v===0||v===11||v===15)){var i=b.alternate;i?(b.updateQueue=i.updateQueue,b.memoizedState=i.memoizedState,b.lanes=i.lanes):(b.updateQueue=null,b.memoizedState=null)}var d=Bh(a);if(d!==null){d.flags&=-257,zh(d,a,p,u,n),d.mode&1&&Uh(u,h,n),n=d,s=h;var f=n.updateQueue;if(f===null){var y=new Set;y.add(s),n.updateQueue=y}else f.add(s);break e}else{if(!(n&1)){Uh(u,h,n),Yd();break e}s=Error(Ge(426))}}else if(Rt&&p.mode&1){var g=Bh(a);if(g!==null){!(g.flags&65536)&&(g.flags|=256),zh(g,a,p,u,n),Md(_s(s,p));break e}}u=s=_s(s,p),Qt!==4&&(Qt=2),pa===null?pa=[u]:pa.push(u),u=a;do{switch(u.tag){case 3:u.flags|=65536,n&=-n,u.lanes|=n;var c=zy(u,s,n);Nh(u,c);break e;case 1:p=s;var l=u.type,w=u.stateNode;if(!(u.flags&128)&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ro===null||!ro.has(w)))){u.flags|=65536,n&=-n,u.lanes|=n;var x=Gy(u,p,n);Nh(u,x);break e}}u=u.return}while(u!==null)}ig(o)}catch(_){n=_,Yt===o&&o!==null&&(Yt=o=o.return);continue}break}while(!0)}function sg(){var r=il.current;return il.current=al,r===null?al:r}function Yd(){(Qt===0||Qt===3||Qt===2)&&(Qt=4),nr===null||!(No&268435455)&&!(Rl&268435455)||$n(nr,lr)}function cl(r,n){var o=vt;vt|=2;var t=sg();(nr!==r||lr!==n)&&(jn=null,Eo(r,n));do try{zb();break}catch(m){og(r,m)}while(!0);if(Od(),vt=o,il.current=t,Yt!==null)throw Error(Ge(261));return nr=null,lr=0,Qt}function zb(){for(;Yt!==null;)ag(Yt)}function Gb(){for(;Yt!==null&&!h0();)ag(Yt)}function ag(r){var n=ug(r.alternate,r,Lr);r.memoizedProps=r.pendingProps,n===null?ig(r):Yt=n,Vd.current=null}function ig(r){var n=r;do{var o=n.alternate;if(r=n.return,n.flags&32768){if(o=Ab(o,n),o!==null){o.flags&=32767,Yt=o;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Qt=6,Yt=null;return}}else if(o=Rb(o,n,Lr),o!==null){Yt=o;return}if(n=n.sibling,n!==null){Yt=n;return}Yt=n=r}while(n!==null);Qt===0&&(Qt=5)}function vo(r,n,o){var t=jt,m=Hr.transition;try{Hr.transition=null,jt=1,Vb(r,n,o,t)}finally{Hr.transition=m,jt=t}return null}function Vb(r,n,o,t){do ms();while(Xn!==null);if(vt&6)throw Error(Ge(327));o=r.finishedWork;var m=r.finishedLanes;if(o===null)return null;if(r.finishedWork=null,r.finishedLanes=0,o===r.current)throw Error(Ge(177));r.callbackNode=null,r.callbackPriority=0;var u=o.lanes|o.childLanes;if(_0(r,u),r===nr&&(Yt=nr=null,lr=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||bi||(bi=!0,cg(Wi,function(){return ms(),null})),u=(o.flags&15990)!==0,o.subtreeFlags&15990||u){u=Hr.transition,Hr.transition=null;var a=jt;jt=1;var p=vt;vt|=4,Vd.current=null,Db(r,o),tg(o,r),ub(fc),$i=!!dc,fc=dc=null,r.current=o,Fb(o),p0(),vt=p,jt=a,Hr.transition=u}else r.current=o;if(bi&&(bi=!1,Xn=r,ul=m),u=r.pendingLanes,u===0&&(ro=null),g0(o.stateNode),Tr(r,Vt()),n!==null)for(t=r.onRecoverableError,o=0;o<n.length;o++)m=n[o],t(m.value,{componentStack:m.stack,digest:m.digest});if(ll)throw ll=!1,r=Lc,Lc=null,r;return ul&1&&r.tag!==0&&ms(),u=r.pendingLanes,u&1?r===Nc?ma++:(ma=0,Nc=r):ma=0,ho(),null}function ms(){if(Xn!==null){var r=zm(ul),n=Hr.transition,o=jt;try{if(Hr.transition=null,jt=16>r?16:r,Xn===null)var t=!1;else{if(r=Xn,Xn=null,ul=0,vt&6)throw Error(Ge(331));var m=vt;for(vt|=4,et=r.current;et!==null;){var u=et,a=u.child;if(et.flags&16){var p=u.deletions;if(p!==null){for(var s=0;s<p.length;s++){var h=p[s];for(et=h;et!==null;){var b=et;switch(b.tag){case 0:case 11:case 15:ha(8,b,u)}var v=b.child;if(v!==null)v.return=b,et=v;else for(;et!==null;){b=et;var i=b.sibling,d=b.return;if(Zy(b),b===h){et=null;break}if(i!==null){i.return=d,et=i;break}et=d}}}var f=u.alternate;if(f!==null){var y=f.child;if(y!==null){f.child=null;do{var g=y.sibling;y.sibling=null,y=g}while(y!==null)}}et=u}}if(u.subtreeFlags&2064&&a!==null)a.return=u,et=a;else e:for(;et!==null;){if(u=et,u.flags&2048)switch(u.tag){case 0:case 11:case 15:ha(9,u,u.return)}var c=u.sibling;if(c!==null){c.return=u.return,et=c;break e}et=u.return}}var l=r.current;for(et=l;et!==null;){a=et;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,et=w;else e:for(a=l;et!==null;){if(p=et,p.flags&2048)try{switch(p.tag){case 0:case 11:case 15:Nl(9,p)}}catch(_){zt(p,p.return,_)}if(p===a){et=null;break e}var x=p.sibling;if(x!==null){x.return=p.return,et=x;break e}et=p.return}}if(vt=m,ho(),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(kl,r)}catch{}t=!0}return t}finally{jt=o,Hr.transition=n}}return!1}function ep(r,n,o){n=_s(o,n),n=zy(r,n,1),r=to(r,n,1),n=xr(),r!==null&&(Ha(r,1,n),Tr(r,n))}function zt(r,n,o){if(r.tag===3)ep(r,r,o);else for(;n!==null;){if(n.tag===3){ep(n,r,o);break}else if(n.tag===1){var t=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof t.componentDidCatch=="function"&&(ro===null||!ro.has(t))){r=_s(o,r),r=Gy(n,r,1),n=to(n,r,1),r=xr(),n!==null&&(Ha(n,1,r),Tr(n,r));break}}n=n.return}}function Hb(r,n,o){var t=r.pingCache;t!==null&&t.delete(n),n=xr(),r.pingedLanes|=r.suspendedLanes&o,nr===r&&(lr&o)===o&&(Qt===4||Qt===3&&(lr&130023424)===lr&&500>Vt()-Wd?Eo(r,0):Hd|=o),Tr(r,n)}function lg(r,n){n===0&&(r.mode&1?(n=ui,ui<<=1,!(ui&130023424)&&(ui=4194304)):n=1);var o=xr();r=Pn(r,n),r!==null&&(Ha(r,n,o),Tr(r,o))}function Wb(r){var n=r.memoizedState,o=0;n!==null&&(o=n.retryLane),lg(r,o)}function qb(r,n){var o=0;switch(r.tag){case 13:var t=r.stateNode,m=r.memoizedState;m!==null&&(o=m.retryLane);break;case 19:t=r.stateNode;break;default:throw Error(Ge(314))}t!==null&&t.delete(n),lg(r,o)}var ug;ug=function(r,n,o){if(r!==null)if(r.memoizedProps!==n.pendingProps||kr.current)Sr=!0;else{if(!(r.lanes&o)&&!(n.flags&128))return Sr=!1,Nb(r,n,o);Sr=!!(r.flags&131072)}else Sr=!1,Rt&&n.flags&1048576&&hy(n,el,n.index);switch(n.lanes=0,n.tag){case 2:var t=n.type;Di(r,n),r=n.pendingProps;var m=bs(n,gr.current);ps(n,o),m=Fd(null,n,t,r,m,o);var u=Ud();return n.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Er(t)?(u=!0,Zi(n)):u=!1,n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Nd(n),m.updater=Ll,n.stateNode=m,m._reactInternals=n,wc(n,t,r,o),n=Sc(null,n,t,!0,u,o)):(n.tag=0,Rt&&u&&Ed(n),br(null,n,m,o),n=n.child),n;case 16:t=n.elementType;e:{switch(Di(r,n),r=n.pendingProps,m=t._init,t=m(t._payload),n.type=t,m=n.tag=Yb(t),r=Qr(t,r),m){case 0:n=_c(null,n,t,r,o);break e;case 1:n=Hh(null,n,t,r,o);break e;case 11:n=Gh(null,n,t,r,o);break e;case 14:n=Vh(null,n,t,Qr(t.type,r),o);break e}throw Error(Ge(306,t,""))}return n;case 0:return t=n.type,m=n.pendingProps,m=n.elementType===t?m:Qr(t,m),_c(r,n,t,m,o);case 1:return t=n.type,m=n.pendingProps,m=n.elementType===t?m:Qr(t,m),Hh(r,n,t,m,o);case 3:e:{if(qy(n),r===null)throw Error(Ge(387));t=n.pendingProps,u=n.memoizedState,m=u.element,by(r,n),nl(n,t,null,o);var a=n.memoizedState;if(t=a.element,u.isDehydrated)if(u={element:t,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},n.updateQueue.baseState=u,n.memoizedState=u,n.flags&256){m=_s(Error(Ge(423)),n),n=Wh(r,n,t,o,m);break e}else if(t!==m){m=_s(Error(Ge(424)),n),n=Wh(r,n,t,o,m);break e}else for(Nr=eo(n.stateNode.containerInfo.firstChild),Rr=n,Rt=!0,Jr=null,o=gy(n,null,t,o),n.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(xs(),t===m){n=Ln(r,n,o);break e}br(r,n,t,o)}n=n.child}return n;case 5:return xy(n),r===null&&vc(n),t=n.type,m=n.pendingProps,u=r!==null?r.memoizedProps:null,a=m.children,hc(t,m)?a=null:u!==null&&hc(t,u)&&(n.flags|=32),Wy(r,n),br(r,n,a,o),n.child;case 6:return r===null&&vc(n),null;case 13:return $y(r,n,o);case 4:return Rd(n,n.stateNode.containerInfo),t=n.pendingProps,r===null?n.child=ws(n,null,t,o):br(r,n,t,o),n.child;case 11:return t=n.type,m=n.pendingProps,m=n.elementType===t?m:Qr(t,m),Gh(r,n,t,m,o);case 7:return br(r,n,n.pendingProps,o),n.child;case 8:return br(r,n,n.pendingProps.children,o),n.child;case 12:return br(r,n,n.pendingProps.children,o),n.child;case 10:e:{if(t=n.type._context,m=n.pendingProps,u=n.memoizedProps,a=m.value,Mt(tl,t._currentValue),t._currentValue=a,u!==null)if(nn(u.value,a)){if(u.children===m.children&&!kr.current){n=Ln(r,n,o);break e}}else for(u=n.child,u!==null&&(u.return=n);u!==null;){var p=u.dependencies;if(p!==null){a=u.child;for(var s=p.firstContext;s!==null;){if(s.context===t){if(u.tag===1){s=Mn(-1,o&-o),s.tag=2;var h=u.updateQueue;if(h!==null){h=h.shared;var b=h.pending;b===null?s.next=s:(s.next=b.next,b.next=s),h.pending=s}}u.lanes|=o,s=u.alternate,s!==null&&(s.lanes|=o),bc(u.return,o,n),p.lanes|=o;break}s=s.next}}else if(u.tag===10)a=u.type===n.type?null:u.child;else if(u.tag===18){if(a=u.return,a===null)throw Error(Ge(341));a.lanes|=o,p=a.alternate,p!==null&&(p.lanes|=o),bc(a,o,n),a=u.sibling}else a=u.child;if(a!==null)a.return=u;else for(a=u;a!==null;){if(a===n){a=null;break}if(u=a.sibling,u!==null){u.return=a.return,a=u;break}a=a.return}u=a}br(r,n,m.children,o),n=n.child}return n;case 9:return m=n.type,t=n.pendingProps.children,ps(n,o),m=Wr(m),t=t(m),n.flags|=1,br(r,n,t,o),n.child;case 14:return t=n.type,m=Qr(t,n.pendingProps),m=Qr(t.type,m),Vh(r,n,t,m,o);case 15:return Vy(r,n,n.type,n.pendingProps,o);case 17:return t=n.type,m=n.pendingProps,m=n.elementType===t?m:Qr(t,m),Di(r,n),n.tag=1,Er(t)?(r=!0,Zi(n)):r=!1,ps(n,o),By(n,t,m),wc(n,t,m,o),Sc(null,n,t,!0,r,o);case 19:return Yy(r,n,o);case 22:return Hy(r,n,o)}throw Error(Ge(156,n.tag))};function cg(r,n){return Dm(r,n)}function $b(r,n,o,t){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=t,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(r,n,o,t){return new $b(r,n,o,t)}function Xd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Yb(r){if(typeof r=="function")return Xd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===pd)return 11;if(r===md)return 14}return 2}function oo(r,n){var o=r.alternate;return o===null?(o=Gr(r.tag,n,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=n,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&14680064,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,n=r.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o}function Bi(r,n,o,t,m,u){var a=2;if(t=r,typeof r=="function")Xd(r)&&(a=1);else if(typeof r=="string")a=5;else e:switch(r){case Zo:return To(o.children,m,u,n);case hd:a=8,m|=8;break;case Wu:return r=Gr(12,o,n,m|2),r.elementType=Wu,r.lanes=u,r;case qu:return r=Gr(13,o,n,m),r.elementType=qu,r.lanes=u,r;case $u:return r=Gr(19,o,n,m),r.elementType=$u,r.lanes=u,r;case xm:return Al(o,m,u,n);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case vm:a=10;break e;case bm:a=9;break e;case pd:a=11;break e;case md:a=14;break e;case zn:a=16,t=null;break e}throw Error(Ge(130,r==null?r:typeof r,""))}return n=Gr(a,o,n,m),n.elementType=r,n.type=t,n.lanes=u,n}function To(r,n,o,t){return r=Gr(7,r,t,n),r.lanes=o,r}function Al(r,n,o,t){return r=Gr(22,r,t,n),r.elementType=xm,r.lanes=o,r.stateNode={isHidden:!1},r}function Tu(r,n,o){return r=Gr(6,r,null,n),r.lanes=o,r}function Mu(r,n,o){return n=Gr(4,r.children!==null?r.children:[],r.key,n),n.lanes=o,n.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},n}function Xb(r,n,o,t,m){this.tag=n,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lu(0),this.expirationTimes=lu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lu(0),this.identifierPrefix=t,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Kd(r,n,o,t,m,u,a,p,s){return r=new Xb(r,n,o,p,s),n===1?(n=1,u===!0&&(n|=8)):n=0,u=Gr(3,null,null,n),r.current=u,u.stateNode=r,u.memoizedState={element:t,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nd(u),r}function Kb(r,n,o){var t=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qo,key:t==null?null:""+t,children:r,containerInfo:n,implementation:o}}function dg(r){if(!r)return io;r=r._reactInternals;e:{if(Bo(r)!==r||r.tag!==1)throw Error(Ge(170));var n=r;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Er(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(Ge(171))}if(r.tag===1){var o=r.type;if(Er(o))return dy(r,o,n)}return n}function fg(r,n,o,t,m,u,a,p,s){return r=Kd(o,t,!0,r,m,u,a,p,s),r.context=dg(null),o=r.current,t=xr(),m=no(o),u=Mn(t,m),u.callback=n??null,to(o,u,m),r.current.lanes=m,Ha(r,m,t),Tr(r,t),r}function Il(r,n,o,t){var m=n.current,u=xr(),a=no(m);return o=dg(o),n.context===null?n.context=o:n.pendingContext=o,n=Mn(u,a),n.payload={element:r},t=t===void 0?null:t,t!==null&&(n.callback=t),r=to(m,n,a),r!==null&&(rn(r,m,a,u),Ri(r,m,a)),a}function dl(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function tp(r,n){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<n?o:n}}function Qd(r,n){tp(r,n),(r=r.alternate)&&tp(r,n)}function Qb(){return null}var hg=typeof reportError=="function"?reportError:function(r){console.error(r)};function Zd(r){this._internalRoot=r}Dl.prototype.render=Zd.prototype.render=function(r){var n=this._internalRoot;if(n===null)throw Error(Ge(409));Il(r,n,null,null)};Dl.prototype.unmount=Zd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var n=r.containerInfo;Ro(function(){Il(null,r,null,null)}),n[On]=null}};function Dl(r){this._internalRoot=r}Dl.prototype.unstable_scheduleHydration=function(r){if(r){var n=Hm();r={blockedOn:null,target:r,priority:n};for(var o=0;o<qn.length&&n!==0&&n<qn[o].priority;o++);qn.splice(o,0,r),o===0&&qm(r)}};function Jd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Fl(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function rp(){}function Zb(r,n,o,t,m){if(m){if(typeof t=="function"){var u=t;t=function(){var h=dl(a);u.call(h)}}var a=fg(n,t,r,0,null,!1,!1,"",rp);return r._reactRootContainer=a,r[On]=a.current,Ma(r.nodeType===8?r.parentNode:r),Ro(),a}for(;m=r.lastChild;)r.removeChild(m);if(typeof t=="function"){var p=t;t=function(){var h=dl(s);p.call(h)}}var s=Kd(r,0,!1,null,null,!1,!1,"",rp);return r._reactRootContainer=s,r[On]=s.current,Ma(r.nodeType===8?r.parentNode:r),Ro(function(){Il(n,s,o,t)}),s}function Ul(r,n,o,t,m){var u=o._reactRootContainer;if(u){var a=u;if(typeof m=="function"){var p=m;m=function(){var s=dl(a);p.call(s)}}Il(n,a,r,m)}else a=Zb(o,n,r,m,t);return dl(a)}Gm=function(r){switch(r.tag){case 3:var n=r.stateNode;if(n.current.memoizedState.isDehydrated){var o=na(n.pendingLanes);o!==0&&(vd(n,o|1),Tr(n,Vt()),!(vt&6)&&(Ss=Vt()+500,ho()))}break;case 13:Ro(function(){var t=Pn(r,1);if(t!==null){var m=xr();rn(t,r,1,m)}}),Qd(r,1)}};bd=function(r){if(r.tag===13){var n=Pn(r,134217728);if(n!==null){var o=xr();rn(n,r,134217728,o)}Qd(r,134217728)}};Vm=function(r){if(r.tag===13){var n=no(r),o=Pn(r,n);if(o!==null){var t=xr();rn(o,r,n,t)}Qd(r,n)}};Hm=function(){return jt};Wm=function(r,n){var o=jt;try{return jt=r,n()}finally{jt=o}};nc=function(r,n,o){switch(n){case"input":if(Ku(r,o),n=o.name,o.type==="radio"&&n!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<o.length;n++){var t=o[n];if(t!==r&&t.form===r.form){var m=Cl(t);if(!m)throw Error(Ge(90));jm(t),Ku(t,m)}}}break;case"textarea":Sm(r,o);break;case"select":n=o.value,n!=null&&cs(r,!!o.multiple,n,!1)}};Pm=qd;Lm=Ro;var Jb={usingClientEntryPoint:!1,Events:[qa,rs,Cl,Cm,Om,qd]},Qs={findFiberByHostInstance:wo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},e1={bundleType:Qs.bundleType,version:Qs.version,rendererPackageName:Qs.rendererPackageName,rendererConfig:Qs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nn.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Am(r),r===null?null:r.stateNode},findFiberByHostInstance:Qs.findFiberByHostInstance||Qb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xi.isDisabled&&xi.supportsFiber)try{kl=xi.inject(e1),gn=xi}catch{}}Dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jb;Dr.createPortal=function(r,n){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jd(n))throw Error(Ge(200));return Kb(r,n,null,o)};Dr.createRoot=function(r,n){if(!Jd(r))throw Error(Ge(299));var o=!1,t="",m=hg;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(t=n.identifierPrefix),n.onRecoverableError!==void 0&&(m=n.onRecoverableError)),n=Kd(r,1,!1,null,null,o,!1,t,m),r[On]=n.current,Ma(r.nodeType===8?r.parentNode:r),new Zd(n)};Dr.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var n=r._reactInternals;if(n===void 0)throw typeof r.render=="function"?Error(Ge(188)):(r=Object.keys(r).join(","),Error(Ge(268,r)));return r=Am(n),r=r===null?null:r.stateNode,r};Dr.flushSync=function(r){return Ro(r)};Dr.hydrate=function(r,n,o){if(!Fl(n))throw Error(Ge(200));return Ul(null,r,n,!0,o)};Dr.hydrateRoot=function(r,n,o){if(!Jd(r))throw Error(Ge(405));var t=o!=null&&o.hydratedSources||null,m=!1,u="",a=hg;if(o!=null&&(o.unstable_strictMode===!0&&(m=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onRecoverableError!==void 0&&(a=o.onRecoverableError)),n=fg(n,null,r,1,o??null,m,!1,u,a),r[On]=n.current,Ma(r),t)for(r=0;r<t.length;r++)o=t[r],m=o._getVersion,m=m(o._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[o,m]:n.mutableSourceEagerHydrationData.push(o,m);return new Dl(n)};Dr.render=function(r,n,o){if(!Fl(n))throw Error(Ge(200));return Ul(null,r,n,!1,o)};Dr.unmountComponentAtNode=function(r){if(!Fl(r))throw Error(Ge(40));return r._reactRootContainer?(Ro(function(){Ul(null,null,r,!1,function(){r._reactRootContainer=null,r[On]=null})}),!0):!1};Dr.unstable_batchedUpdates=qd;Dr.unstable_renderSubtreeIntoContainer=function(r,n,o,t){if(!Fl(o))throw Error(Ge(200));if(r==null||r._reactInternals===void 0)throw Error(Ge(38));return Ul(r,n,o,!1,t)};Dr.version="18.3.1-next-f1338f8080-20240426";function pg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pg)}catch(r){console.error(r)}}pg(),pm.exports=Dr;var t1=pm.exports,np=t1;Vu.createRoot=np.createRoot,Vu.hydrateRoot=np.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Da(){return Da=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(r[t]=o[t])}return r},Da.apply(this,arguments)}var Kn;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Kn||(Kn={}));const op="popstate";function r1(r){r===void 0&&(r={});function n(t,m){let{pathname:u,search:a,hash:p}=t.location;return Ic("",{pathname:u,search:a,hash:p},m.state&&m.state.usr||null,m.state&&m.state.key||"default")}function o(t,m){return typeof m=="string"?m:fl(m)}return o1(n,o,null,r)}function Ht(r,n){if(r===!1||r===null||typeof r>"u")throw new Error(n)}function mg(r,n){if(!r){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function n1(){return Math.random().toString(36).substr(2,8)}function sp(r,n){return{usr:r.state,key:r.key,idx:n}}function Ic(r,n,o,t){return o===void 0&&(o=null),Da({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof n=="string"?Ls(n):n,{state:o,key:n&&n.key||t||n1()})}function fl(r){let{pathname:n="/",search:o="",hash:t=""}=r;return o&&o!=="?"&&(n+=o.charAt(0)==="?"?o:"?"+o),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ls(r){let n={};if(r){let o=r.indexOf("#");o>=0&&(n.hash=r.substr(o),r=r.substr(0,o));let t=r.indexOf("?");t>=0&&(n.search=r.substr(t),r=r.substr(0,t)),r&&(n.pathname=r)}return n}function o1(r,n,o,t){t===void 0&&(t={});let{window:m=document.defaultView,v5Compat:u=!1}=t,a=m.history,p=Kn.Pop,s=null,h=b();h==null&&(h=0,a.replaceState(Da({},a.state,{idx:h}),""));function b(){return(a.state||{idx:null}).idx}function v(){p=Kn.Pop;let g=b(),c=g==null?null:g-h;h=g,s&&s({action:p,location:y.location,delta:c})}function i(g,c){p=Kn.Push;let l=Ic(y.location,g,c);h=b()+1;let w=sp(l,h),x=y.createHref(l);try{a.pushState(w,"",x)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;m.location.assign(x)}u&&s&&s({action:p,location:y.location,delta:1})}function d(g,c){p=Kn.Replace;let l=Ic(y.location,g,c);h=b();let w=sp(l,h),x=y.createHref(l);a.replaceState(w,"",x),u&&s&&s({action:p,location:y.location,delta:0})}function f(g){let c=m.location.origin!=="null"?m.location.origin:m.location.href,l=typeof g=="string"?g:fl(g);return l=l.replace(/ $/,"%20"),Ht(c,"No window.location.(origin|href) available to create URL for href: "+l),new URL(l,c)}let y={get action(){return p},get location(){return r(m,a)},listen(g){if(s)throw new Error("A history only accepts one active listener");return m.addEventListener(op,v),s=g,()=>{m.removeEventListener(op,v),s=null}},createHref(g){return n(m,g)},createURL:f,encodeLocation(g){let c=f(g);return{pathname:c.pathname,search:c.search,hash:c.hash}},push:i,replace:d,go(g){return a.go(g)}};return y}var ap;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(ap||(ap={}));function s1(r,n,o){return o===void 0&&(o="/"),a1(r,n,o)}function a1(r,n,o,t){let m=typeof n=="string"?Ls(n):n,u=ef(m.pathname||"/",o);if(u==null)return null;let a=yg(r);i1(a);let p=null;for(let s=0;p==null&&s<a.length;++s){let h=b1(u);p=y1(a[s],h)}return p}function yg(r,n,o,t){n===void 0&&(n=[]),o===void 0&&(o=[]),t===void 0&&(t="");let m=(u,a,p)=>{let s={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:a,route:u};s.relativePath.startsWith("/")&&(Ht(s.relativePath.startsWith(t),'Absolute route path "'+s.relativePath+'" nested under path '+('"'+t+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),s.relativePath=s.relativePath.slice(t.length));let h=so([t,s.relativePath]),b=o.concat(s);u.children&&u.children.length>0&&(Ht(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),yg(u.children,n,b,h)),!(u.path==null&&!u.index)&&n.push({path:h,score:p1(h,u.index),routesMeta:b})};return r.forEach((u,a)=>{var p;if(u.path===""||!((p=u.path)!=null&&p.includes("?")))m(u,a);else for(let s of gg(u.path))m(u,a,s)}),n}function gg(r){let n=r.split("/");if(n.length===0)return[];let[o,...t]=n,m=o.endsWith("?"),u=o.replace(/\?$/,"");if(t.length===0)return m?[u,""]:[u];let a=gg(t.join("/")),p=[];return p.push(...a.map(s=>s===""?u:[u,s].join("/"))),m&&p.push(...a),p.map(s=>r.startsWith("/")&&s===""?"/":s)}function i1(r){r.sort((n,o)=>n.score!==o.score?o.score-n.score:m1(n.routesMeta.map(t=>t.childrenIndex),o.routesMeta.map(t=>t.childrenIndex)))}const l1=/^:[\w-]+$/,u1=3,c1=2,d1=1,f1=10,h1=-2,ip=r=>r==="*";function p1(r,n){let o=r.split("/"),t=o.length;return o.some(ip)&&(t+=h1),n&&(t+=c1),o.filter(m=>!ip(m)).reduce((m,u)=>m+(l1.test(u)?u1:u===""?d1:f1),t)}function m1(r,n){return r.length===n.length&&r.slice(0,-1).every((t,m)=>t===n[m])?r[r.length-1]-n[n.length-1]:0}function y1(r,n,o){let{routesMeta:t}=r,m={},u="/",a=[];for(let p=0;p<t.length;++p){let s=t[p],h=p===t.length-1,b=u==="/"?n:n.slice(u.length)||"/",v=g1({path:s.relativePath,caseSensitive:s.caseSensitive,end:h},b),i=s.route;if(!v)return null;Object.assign(m,v.params),a.push({params:m,pathname:so([u,v.pathname]),pathnameBase:_1(so([u,v.pathnameBase])),route:i}),v.pathnameBase!=="/"&&(u=so([u,v.pathnameBase]))}return a}function g1(r,n){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[o,t]=v1(r.path,r.caseSensitive,r.end),m=n.match(o);if(!m)return null;let u=m[0],a=u.replace(/(.)\/+$/,"$1"),p=m.slice(1);return{params:t.reduce((h,b,v)=>{let{paramName:i,isOptional:d}=b;if(i==="*"){let y=p[v]||"";a=u.slice(0,u.length-y.length).replace(/(.)\/+$/,"$1")}const f=p[v];return d&&!f?h[i]=void 0:h[i]=(f||"").replace(/%2F/g,"/"),h},{}),pathname:u,pathnameBase:a,pattern:r}}function v1(r,n,o){n===void 0&&(n=!1),o===void 0&&(o=!0),mg(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let t=[],m="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,p,s)=>(t.push({paramName:p,isOptional:s!=null}),s?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(t.push({paramName:"*"}),m+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?m+="\\/*$":r!==""&&r!=="/"&&(m+="(?:(?=\\/|$))"),[new RegExp(m,n?void 0:"i"),t]}function b1(r){try{return r.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return mg(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),r}}function ef(r,n){if(n==="/")return r;if(!r.toLowerCase().startsWith(n.toLowerCase()))return null;let o=n.endsWith("/")?n.length-1:n.length,t=r.charAt(o);return t&&t!=="/"?null:r.slice(o)||"/"}function x1(r,n){n===void 0&&(n="/");let{pathname:o,search:t="",hash:m=""}=typeof r=="string"?Ls(r):r;return{pathname:o?o.startsWith("/")?o:w1(o,n):n,search:S1(t),hash:k1(m)}}function w1(r,n){let o=n.replace(/\/+$/,"").split("/");return r.split("/").forEach(m=>{m===".."?o.length>1&&o.pop():m!=="."&&o.push(m)}),o.length>1?o.join("/"):"/"}function Cu(r,n,o,t){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(t)+"].  Please separate it out to the ")+("`to."+o+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function j1(r){return r.filter((n,o)=>o===0||n.route.path&&n.route.path.length>0)}function tf(r,n){let o=j1(r);return n?o.map((t,m)=>m===o.length-1?t.pathname:t.pathnameBase):o.map(t=>t.pathnameBase)}function rf(r,n,o,t){t===void 0&&(t=!1);let m;typeof r=="string"?m=Ls(r):(m=Da({},r),Ht(!m.pathname||!m.pathname.includes("?"),Cu("?","pathname","search",m)),Ht(!m.pathname||!m.pathname.includes("#"),Cu("#","pathname","hash",m)),Ht(!m.search||!m.search.includes("#"),Cu("#","search","hash",m)));let u=r===""||m.pathname==="",a=u?"/":m.pathname,p;if(a==null)p=o;else{let v=n.length-1;if(!t&&a.startsWith("..")){let i=a.split("/");for(;i[0]==="..";)i.shift(),v-=1;m.pathname=i.join("/")}p=v>=0?n[v]:"/"}let s=x1(m,p),h=a&&a!=="/"&&a.endsWith("/"),b=(u||a===".")&&o.endsWith("/");return!s.pathname.endsWith("/")&&(h||b)&&(s.pathname+="/"),s}const so=r=>r.join("/").replace(/\/\/+/g,"/"),_1=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),S1=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,k1=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function E1(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const vg=["post","put","patch","delete"];new Set(vg);const T1=["get",...vg];new Set(T1);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fa(){return Fa=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(r[t]=o[t])}return r},Fa.apply(this,arguments)}const nf=Re.createContext(null),M1=Re.createContext(null),po=Re.createContext(null),Bl=Re.createContext(null),mo=Re.createContext({outlet:null,matches:[],isDataRoute:!1}),bg=Re.createContext(null);function C1(r,n){let{relative:o}=n===void 0?{}:n;Ns()||Ht(!1);let{basename:t,navigator:m}=Re.useContext(po),{hash:u,pathname:a,search:p}=wg(r,{relative:o}),s=a;return t!=="/"&&(s=a==="/"?t:so([t,a])),m.createHref({pathname:s,search:p,hash:u})}function Ns(){return Re.useContext(Bl)!=null}function Ya(){return Ns()||Ht(!1),Re.useContext(Bl).location}function xg(r){Re.useContext(po).static||Re.useLayoutEffect(r)}function Rs(){let{isDataRoute:r}=Re.useContext(mo);return r?G1():O1()}function O1(){Ns()||Ht(!1);let r=Re.useContext(nf),{basename:n,future:o,navigator:t}=Re.useContext(po),{matches:m}=Re.useContext(mo),{pathname:u}=Ya(),a=JSON.stringify(tf(m,o.v7_relativeSplatPath)),p=Re.useRef(!1);return xg(()=>{p.current=!0}),Re.useCallback(function(h,b){if(b===void 0&&(b={}),!p.current)return;if(typeof h=="number"){t.go(h);return}let v=rf(h,JSON.parse(a),u,b.relative==="path");r==null&&n!=="/"&&(v.pathname=v.pathname==="/"?n:so([n,v.pathname])),(b.replace?t.replace:t.push)(v,b.state,b)},[n,t,a,u,r])}function wg(r,n){let{relative:o}=n===void 0?{}:n,{future:t}=Re.useContext(po),{matches:m}=Re.useContext(mo),{pathname:u}=Ya(),a=JSON.stringify(tf(m,t.v7_relativeSplatPath));return Re.useMemo(()=>rf(r,JSON.parse(a),u,o==="path"),[r,a,u,o])}function P1(r,n){return L1(r,n)}function L1(r,n,o,t){Ns()||Ht(!1);let{navigator:m}=Re.useContext(po),{matches:u}=Re.useContext(mo),a=u[u.length-1],p=a?a.params:{};a&&a.pathname;let s=a?a.pathnameBase:"/";a&&a.route;let h=Ya(),b;if(n){var v;let g=typeof n=="string"?Ls(n):n;s==="/"||(v=g.pathname)!=null&&v.startsWith(s)||Ht(!1),b=g}else b=h;let i=b.pathname||"/",d=i;if(s!=="/"){let g=s.replace(/^\//,"").split("/");d="/"+i.replace(/^\//,"").split("/").slice(g.length).join("/")}let f=s1(r,{pathname:d}),y=D1(f&&f.map(g=>Object.assign({},g,{params:Object.assign({},p,g.params),pathname:so([s,m.encodeLocation?m.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?s:so([s,m.encodeLocation?m.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),u,o,t);return n&&y?Re.createElement(Bl.Provider,{value:{location:Fa({pathname:"/",search:"",hash:"",state:null,key:"default"},b),navigationType:Kn.Pop}},y):y}function N1(){let r=z1(),n=E1(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),o=r instanceof Error?r.stack:null,m={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Re.createElement(Re.Fragment,null,Re.createElement("h2",null,"Unexpected Application Error!"),Re.createElement("h3",{style:{fontStyle:"italic"}},n),o?Re.createElement("pre",{style:m},o):null,null)}const R1=Re.createElement(N1,null);class A1 extends Re.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,o){return o.location!==n.location||o.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:o.error,location:o.location,revalidation:n.revalidation||o.revalidation}}componentDidCatch(n,o){console.error("React Router caught the following error during render",n,o)}render(){return this.state.error!==void 0?Re.createElement(mo.Provider,{value:this.props.routeContext},Re.createElement(bg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function I1(r){let{routeContext:n,match:o,children:t}=r,m=Re.useContext(nf);return m&&m.static&&m.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(m.staticContext._deepestRenderedBoundaryId=o.route.id),Re.createElement(mo.Provider,{value:n},t)}function D1(r,n,o,t){var m;if(n===void 0&&(n=[]),o===void 0&&(o=null),t===void 0&&(t=null),r==null){var u;if(!o)return null;if(o.errors)r=o.matches;else if((u=t)!=null&&u.v7_partialHydration&&n.length===0&&!o.initialized&&o.matches.length>0)r=o.matches;else return null}let a=r,p=(m=o)==null?void 0:m.errors;if(p!=null){let b=a.findIndex(v=>v.route.id&&(p==null?void 0:p[v.route.id])!==void 0);b>=0||Ht(!1),a=a.slice(0,Math.min(a.length,b+1))}let s=!1,h=-1;if(o&&t&&t.v7_partialHydration)for(let b=0;b<a.length;b++){let v=a[b];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(h=b),v.route.id){let{loaderData:i,errors:d}=o,f=v.route.loader&&i[v.route.id]===void 0&&(!d||d[v.route.id]===void 0);if(v.route.lazy||f){s=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((b,v,i)=>{let d,f=!1,y=null,g=null;o&&(d=p&&v.route.id?p[v.route.id]:void 0,y=v.route.errorElement||R1,s&&(h<0&&i===0?(V1("route-fallback"),f=!0,g=null):h===i&&(f=!0,g=v.route.hydrateFallbackElement||null)));let c=n.concat(a.slice(0,i+1)),l=()=>{let w;return d?w=y:f?w=g:v.route.Component?w=Re.createElement(v.route.Component,null):v.route.element?w=v.route.element:w=b,Re.createElement(I1,{match:v,routeContext:{outlet:b,matches:c,isDataRoute:o!=null},children:w})};return o&&(v.route.ErrorBoundary||v.route.errorElement||i===0)?Re.createElement(A1,{location:o.location,revalidation:o.revalidation,component:y,error:d,children:l(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):l()},null)}var jg=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(jg||{}),_g=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(_g||{});function F1(r){let n=Re.useContext(nf);return n||Ht(!1),n}function U1(r){let n=Re.useContext(M1);return n||Ht(!1),n}function B1(r){let n=Re.useContext(mo);return n||Ht(!1),n}function Sg(r){let n=B1(),o=n.matches[n.matches.length-1];return o.route.id||Ht(!1),o.route.id}function z1(){var r;let n=Re.useContext(bg),o=U1(),t=Sg();return n!==void 0?n:(r=o.errors)==null?void 0:r[t]}function G1(){let{router:r}=F1(jg.UseNavigateStable),n=Sg(_g.UseNavigateStable),o=Re.useRef(!1);return xg(()=>{o.current=!0}),Re.useCallback(function(m,u){u===void 0&&(u={}),o.current&&(typeof m=="number"?r.navigate(m):r.navigate(m,Fa({fromRouteId:n},u)))},[r,n])}const lp={};function V1(r,n,o){lp[r]||(lp[r]=!0)}function H1(r,n){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function W1(r){let{to:n,replace:o,state:t,relative:m}=r;Ns()||Ht(!1);let{future:u,static:a}=Re.useContext(po),{matches:p}=Re.useContext(mo),{pathname:s}=Ya(),h=Rs(),b=rf(n,tf(p,u.v7_relativeSplatPath),s,m==="path"),v=JSON.stringify(b);return Re.useEffect(()=>h(JSON.parse(v),{replace:o,state:t,relative:m}),[h,v,m,o,t]),null}function Pr(r){Ht(!1)}function q1(r){let{basename:n="/",children:o=null,location:t,navigationType:m=Kn.Pop,navigator:u,static:a=!1,future:p}=r;Ns()&&Ht(!1);let s=n.replace(/^\/*/,"/"),h=Re.useMemo(()=>({basename:s,navigator:u,static:a,future:Fa({v7_relativeSplatPath:!1},p)}),[s,p,u,a]);typeof t=="string"&&(t=Ls(t));let{pathname:b="/",search:v="",hash:i="",state:d=null,key:f="default"}=t,y=Re.useMemo(()=>{let g=ef(b,s);return g==null?null:{location:{pathname:g,search:v,hash:i,state:d,key:f},navigationType:m}},[s,b,v,i,d,f,m]);return y==null?null:Re.createElement(po.Provider,{value:h},Re.createElement(Bl.Provider,{children:o,value:y}))}function $1(r){let{children:n,location:o}=r;return P1(Dc(n),o)}new Promise(()=>{});function Dc(r,n){n===void 0&&(n=[]);let o=[];return Re.Children.forEach(r,(t,m)=>{if(!Re.isValidElement(t))return;let u=[...n,m];if(t.type===Re.Fragment){o.push.apply(o,Dc(t.props.children,u));return}t.type!==Pr&&Ht(!1),!t.props.index||!t.props.children||Ht(!1);let a={id:t.props.id||u.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:t.props.ErrorBoundary!=null||t.props.errorElement!=null,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(a.children=Dc(t.props.children,u)),o.push(a)}),o}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fc(){return Fc=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(r[t]=o[t])}return r},Fc.apply(this,arguments)}function Y1(r,n){if(r==null)return{};var o={},t=Object.keys(r),m,u;for(u=0;u<t.length;u++)m=t[u],!(n.indexOf(m)>=0)&&(o[m]=r[m]);return o}function X1(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function K1(r,n){return r.button===0&&(!n||n==="_self")&&!X1(r)}const Q1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Z1="6";try{window.__reactRouterVersion=Z1}catch{}const J1="startTransition",up=Hv[J1];function ex(r){let{basename:n,children:o,future:t,window:m}=r,u=Re.useRef();u.current==null&&(u.current=r1({window:m,v5Compat:!0}));let a=u.current,[p,s]=Re.useState({action:a.action,location:a.location}),{v7_startTransition:h}=t||{},b=Re.useCallback(v=>{h&&up?up(()=>s(v)):s(v)},[s,h]);return Re.useLayoutEffect(()=>a.listen(b),[a,b]),Re.useEffect(()=>H1(t),[t]),Re.createElement(q1,{basename:n,children:o,location:p.location,navigationType:p.action,navigator:a,future:t})}const tx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vr=Re.forwardRef(function(n,o){let{onClick:t,relative:m,reloadDocument:u,replace:a,state:p,target:s,to:h,preventScrollReset:b,viewTransition:v}=n,i=Y1(n,Q1),{basename:d}=Re.useContext(po),f,y=!1;if(typeof h=="string"&&rx.test(h)&&(f=h,tx))try{let w=new URL(window.location.href),x=h.startsWith("//")?new URL(w.protocol+h):new URL(h),_=ef(x.pathname,d);x.origin===w.origin&&_!=null?h=_+x.search+x.hash:y=!0}catch{}let g=C1(h,{relative:m}),c=nx(h,{replace:a,state:p,target:s,preventScrollReset:b,relative:m,viewTransition:v});function l(w){t&&t(w),w.defaultPrevented||c(w)}return Re.createElement("a",Fc({},i,{href:f||g,onClick:y||u?t:l,ref:o,target:s}))});var cp;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(cp||(cp={}));var dp;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(dp||(dp={}));function nx(r,n){let{target:o,replace:t,state:m,preventScrollReset:u,relative:a,viewTransition:p}=n===void 0?{}:n,s=Rs(),h=Ya(),b=wg(r,{relative:a});return Re.useCallback(v=>{if(K1(v,o)){v.preventDefault();let i=t!==void 0?t:fl(h)===fl(b);s(r,{replace:i,state:m,preventScrollReset:u,relative:a,viewTransition:p})}},[h,s,b,t,m,o,r,u,a,p])}const ox={},fp=r=>{let n;const o=new Set,t=(b,v)=>{const i=typeof b=="function"?b(n):b;if(!Object.is(i,n)){const d=n;n=v??(typeof i!="object"||i===null)?i:Object.assign({},n,i),o.forEach(f=>f(n,d))}},m=()=>n,s={setState:t,getState:m,getInitialState:()=>h,subscribe:b=>(o.add(b),()=>o.delete(b)),destroy:()=>{(ox?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}},h=n=r(t,m,s);return s},sx=r=>r?fp(r):fp;var kg={exports:{}},Eg={},Tg={exports:{}},Mg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ks=Re;function ax(r,n){return r===n&&(r!==0||1/r===1/n)||r!==r&&n!==n}var ix=typeof Object.is=="function"?Object.is:ax,lx=ks.useState,ux=ks.useEffect,cx=ks.useLayoutEffect,dx=ks.useDebugValue;function fx(r,n){var o=n(),t=lx({inst:{value:o,getSnapshot:n}}),m=t[0].inst,u=t[1];return cx(function(){m.value=o,m.getSnapshot=n,Ou(m)&&u({inst:m})},[r,o,n]),ux(function(){return Ou(m)&&u({inst:m}),r(function(){Ou(m)&&u({inst:m})})},[r]),dx(o),o}function Ou(r){var n=r.getSnapshot;r=r.value;try{var o=n();return!ix(r,o)}catch{return!0}}function hx(r,n){return n()}var px=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?hx:fx;Mg.useSyncExternalStore=ks.useSyncExternalStore!==void 0?ks.useSyncExternalStore:px;Tg.exports=Mg;var mx=Tg.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zl=Re,yx=mx;function gx(r,n){return r===n&&(r!==0||1/r===1/n)||r!==r&&n!==n}var vx=typeof Object.is=="function"?Object.is:gx,bx=yx.useSyncExternalStore,xx=zl.useRef,wx=zl.useEffect,jx=zl.useMemo,_x=zl.useDebugValue;Eg.useSyncExternalStoreWithSelector=function(r,n,o,t,m){var u=xx(null);if(u.current===null){var a={hasValue:!1,value:null};u.current=a}else a=u.current;u=jx(function(){function s(d){if(!h){if(h=!0,b=d,d=t(d),m!==void 0&&a.hasValue){var f=a.value;if(m(f,d))return v=f}return v=d}if(f=v,vx(b,d))return f;var y=t(d);return m!==void 0&&m(f,y)?(b=d,f):(b=d,v=y)}var h=!1,b,v,i=o===void 0?null:o;return[function(){return s(n())},i===null?void 0:function(){return s(i())}]},[n,o,t,m]);var p=bx(r,u[0],u[1]);return wx(function(){a.hasValue=!0,a.value=p},[p]),_x(p),p};kg.exports=Eg;var Sx=kg.exports;const kx=od(Sx),Cg={},{useDebugValue:Ex}=ud,{useSyncExternalStoreWithSelector:Tx}=kx;let hp=!1;const Mx=r=>r;function Cx(r,n=Mx,o){(Cg?"production":void 0)!=="production"&&o&&!hp&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),hp=!0);const t=Tx(r.subscribe,r.getState,r.getServerState||r.getInitialState,n,o);return Ex(t),t}const Ox=r=>{(Cg?"production":void 0)!=="production"&&typeof r!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const n=typeof r=="function"?sx(r):r,o=(t,m)=>Cx(n,t,m);return Object.assign(o,n),o},Og=r=>Ox;var Pg=Symbol.for("immer-nothing"),pp=Symbol.for("immer-draftable"),Ir=Symbol.for("immer-state");function en(r,...n){throw new Error(`[Immer] minified error nr: ${r}. Full error at: https://bit.ly/3cXEKWf`)}var Es=Object.getPrototypeOf;function Ts(r){return!!r&&!!r[Ir]}function Ao(r){var n;return r?Lg(r)||Array.isArray(r)||!!r[pp]||!!((n=r.constructor)!=null&&n[pp])||Xa(r)||Vl(r):!1}var Px=Object.prototype.constructor.toString();function Lg(r){if(!r||typeof r!="object")return!1;const n=Es(r);if(n===null)return!0;const o=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return o===Object?!0:typeof o=="function"&&Function.toString.call(o)===Px}function hl(r,n){Gl(r)===0?Reflect.ownKeys(r).forEach(o=>{n(o,r[o],r)}):r.forEach((o,t)=>n(t,o,r))}function Gl(r){const n=r[Ir];return n?n.type_:Array.isArray(r)?1:Xa(r)?2:Vl(r)?3:0}function Uc(r,n){return Gl(r)===2?r.has(n):Object.prototype.hasOwnProperty.call(r,n)}function Ng(r,n,o){const t=Gl(r);t===2?r.set(n,o):t===3?r.add(o):r[n]=o}function Lx(r,n){return r===n?r!==0||1/r===1/n:r!==r&&n!==n}function Xa(r){return r instanceof Map}function Vl(r){return r instanceof Set}function bo(r){return r.copy_||r.base_}function Bc(r,n){if(Xa(r))return new Map(r);if(Vl(r))return new Set(r);if(Array.isArray(r))return Array.prototype.slice.call(r);const o=Lg(r);if(n===!0||n==="class_only"&&!o){const t=Object.getOwnPropertyDescriptors(r);delete t[Ir];let m=Reflect.ownKeys(t);for(let u=0;u<m.length;u++){const a=m[u],p=t[a];p.writable===!1&&(p.writable=!0,p.configurable=!0),(p.get||p.set)&&(t[a]={configurable:!0,writable:!0,enumerable:p.enumerable,value:r[a]})}return Object.create(Es(r),t)}else{const t=Es(r);if(t!==null&&o)return{...r};const m=Object.create(t);return Object.assign(m,r)}}function of(r,n=!1){return Hl(r)||Ts(r)||!Ao(r)||(Gl(r)>1&&Object.defineProperties(r,{set:{value:wi},add:{value:wi},clear:{value:wi},delete:{value:wi}}),Object.freeze(r),n&&Object.values(r).forEach(o=>of(o,!0))),r}function wi(){en(2)}function Hl(r){return Object.isFrozen(r)}var Nx={};function Io(r){const n=Nx[r];return n||en(0,r),n}var Ua;function Rg(){return Ua}function Rx(r,n){return{drafts_:[],parent_:r,immer_:n,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function mp(r,n){n&&(Io("Patches"),r.patches_=[],r.inversePatches_=[],r.patchListener_=n)}function zc(r){Gc(r),r.drafts_.forEach(Ax),r.drafts_=null}function Gc(r){r===Ua&&(Ua=r.parent_)}function yp(r){return Ua=Rx(Ua,r)}function Ax(r){const n=r[Ir];n.type_===0||n.type_===1?n.revoke_():n.revoked_=!0}function gp(r,n){n.unfinalizedDrafts_=n.drafts_.length;const o=n.drafts_[0];return r!==void 0&&r!==o?(o[Ir].modified_&&(zc(n),en(4)),Ao(r)&&(r=pl(n,r),n.parent_||ml(n,r)),n.patches_&&Io("Patches").generateReplacementPatches_(o[Ir].base_,r,n.patches_,n.inversePatches_)):r=pl(n,o,[]),zc(n),n.patches_&&n.patchListener_(n.patches_,n.inversePatches_),r!==Pg?r:void 0}function pl(r,n,o){if(Hl(n))return n;const t=n[Ir];if(!t)return hl(n,(m,u)=>vp(r,t,n,m,u,o)),n;if(t.scope_!==r)return n;if(!t.modified_)return ml(r,t.base_,!0),t.base_;if(!t.finalized_){t.finalized_=!0,t.scope_.unfinalizedDrafts_--;const m=t.copy_;let u=m,a=!1;t.type_===3&&(u=new Set(m),m.clear(),a=!0),hl(u,(p,s)=>vp(r,t,m,p,s,o,a)),ml(r,m,!1),o&&r.patches_&&Io("Patches").generatePatches_(t,o,r.patches_,r.inversePatches_)}return t.copy_}function vp(r,n,o,t,m,u,a){if(Ts(m)){const p=u&&n&&n.type_!==3&&!Uc(n.assigned_,t)?u.concat(t):void 0,s=pl(r,m,p);if(Ng(o,t,s),Ts(s))r.canAutoFreeze_=!1;else return}else a&&o.add(m);if(Ao(m)&&!Hl(m)){if(!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1)return;pl(r,m),(!n||!n.scope_.parent_)&&typeof t!="symbol"&&(Xa(o)?o.has(t):Object.prototype.propertyIsEnumerable.call(o,t))&&ml(r,m)}}function ml(r,n,o=!1){!r.parent_&&r.immer_.autoFreeze_&&r.canAutoFreeze_&&of(n,o)}function Ix(r,n){const o=Array.isArray(r),t={type_:o?1:0,scope_:n?n.scope_:Rg(),modified_:!1,finalized_:!1,assigned_:{},parent_:n,base_:r,draft_:null,copy_:null,revoke_:null,isManual_:!1};let m=t,u=sf;o&&(m=[t],u=Ba);const{revoke:a,proxy:p}=Proxy.revocable(m,u);return t.draft_=p,t.revoke_=a,p}var sf={get(r,n){if(n===Ir)return r;const o=bo(r);if(!Uc(o,n))return Dx(r,o,n);const t=o[n];return r.finalized_||!Ao(t)?t:t===Pu(r.base_,n)?(Lu(r),r.copy_[n]=Hc(t,r)):t},has(r,n){return n in bo(r)},ownKeys(r){return Reflect.ownKeys(bo(r))},set(r,n,o){const t=Ag(bo(r),n);if(t!=null&&t.set)return t.set.call(r.draft_,o),!0;if(!r.modified_){const m=Pu(bo(r),n),u=m==null?void 0:m[Ir];if(u&&u.base_===o)return r.copy_[n]=o,r.assigned_[n]=!1,!0;if(Lx(o,m)&&(o!==void 0||Uc(r.base_,n)))return!0;Lu(r),Vc(r)}return r.copy_[n]===o&&(o!==void 0||n in r.copy_)||Number.isNaN(o)&&Number.isNaN(r.copy_[n])||(r.copy_[n]=o,r.assigned_[n]=!0),!0},deleteProperty(r,n){return Pu(r.base_,n)!==void 0||n in r.base_?(r.assigned_[n]=!1,Lu(r),Vc(r)):delete r.assigned_[n],r.copy_&&delete r.copy_[n],!0},getOwnPropertyDescriptor(r,n){const o=bo(r),t=Reflect.getOwnPropertyDescriptor(o,n);return t&&{writable:!0,configurable:r.type_!==1||n!=="length",enumerable:t.enumerable,value:o[n]}},defineProperty(){en(11)},getPrototypeOf(r){return Es(r.base_)},setPrototypeOf(){en(12)}},Ba={};hl(sf,(r,n)=>{Ba[r]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}});Ba.deleteProperty=function(r,n){return Ba.set.call(this,r,n,void 0)};Ba.set=function(r,n,o){return sf.set.call(this,r[0],n,o,r[0])};function Pu(r,n){const o=r[Ir];return(o?bo(o):r)[n]}function Dx(r,n,o){var m;const t=Ag(n,o);return t?"value"in t?t.value:(m=t.get)==null?void 0:m.call(r.draft_):void 0}function Ag(r,n){if(!(n in r))return;let o=Es(r);for(;o;){const t=Object.getOwnPropertyDescriptor(o,n);if(t)return t;o=Es(o)}}function Vc(r){r.modified_||(r.modified_=!0,r.parent_&&Vc(r.parent_))}function Lu(r){r.copy_||(r.copy_=Bc(r.base_,r.scope_.immer_.useStrictShallowCopy_))}var Fx=class{constructor(r){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(n,o,t)=>{if(typeof n=="function"&&typeof o!="function"){const u=o;o=n;const a=this;return function(s=u,...h){return a.produce(s,b=>o.call(this,b,...h))}}typeof o!="function"&&en(6),t!==void 0&&typeof t!="function"&&en(7);let m;if(Ao(n)){const u=yp(this),a=Hc(n,void 0);let p=!0;try{m=o(a),p=!1}finally{p?zc(u):Gc(u)}return mp(u,t),gp(m,u)}else if(!n||typeof n!="object"){if(m=o(n),m===void 0&&(m=n),m===Pg&&(m=void 0),this.autoFreeze_&&of(m,!0),t){const u=[],a=[];Io("Patches").generateReplacementPatches_(n,m,u,a),t(u,a)}return m}else en(1,n)},this.produceWithPatches=(n,o)=>{if(typeof n=="function")return(a,...p)=>this.produceWithPatches(a,s=>n(s,...p));let t,m;return[this.produce(n,o,(a,p)=>{t=a,m=p}),t,m]},typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze),typeof(r==null?void 0:r.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(r.useStrictShallowCopy)}createDraft(r){Ao(r)||en(8),Ts(r)&&(r=Ux(r));const n=yp(this),o=Hc(r,void 0);return o[Ir].isManual_=!0,Gc(n),o}finishDraft(r,n){const o=r&&r[Ir];(!o||!o.isManual_)&&en(9);const{scope_:t}=o;return mp(t,n),gp(void 0,t)}setAutoFreeze(r){this.autoFreeze_=r}setUseStrictShallowCopy(r){this.useStrictShallowCopy_=r}applyPatches(r,n){let o;for(o=n.length-1;o>=0;o--){const m=n[o];if(m.path.length===0&&m.op==="replace"){r=m.value;break}}o>-1&&(n=n.slice(o+1));const t=Io("Patches").applyPatches_;return Ts(r)?t(r,n):this.produce(r,m=>t(m,n))}};function Hc(r,n){const o=Xa(r)?Io("MapSet").proxyMap_(r,n):Vl(r)?Io("MapSet").proxySet_(r,n):Ix(r,n);return(n?n.scope_:Rg()).drafts_.push(o),o}function Ux(r){return Ts(r)||en(10,r),Ig(r)}function Ig(r){if(!Ao(r)||Hl(r))return r;const n=r[Ir];let o;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,o=Bc(r,n.scope_.immer_.useStrictShallowCopy_)}else o=Bc(r,!0);return hl(o,(t,m)=>{Ng(o,t,Ig(m))}),n&&(n.finalized_=!1),o}var Bx=new Fx,zx=Bx.produce;const Gx=r=>(n,o,t)=>(t.setState=(m,u,...a)=>{const p=typeof m=="function"?zx(m):m;return n(p,u,...a)},r(t.setState,o,t)),Vx=Gx,bn=r=>r.toLowerCase().trim().replace(/\s+/g," "),Wc=r=>r.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z0-9]+/g,""),Hx=[{id:1,names:["poltrona","poltrone"]},{id:2,names:["mensola","mensole"]},{id:3,names:["tavolino","tavolini"]},{id:4,names:["sedia","sedie"]}],bp=(()=>{const r=new Map;for(const{id:n,names:o}of Hx)for(const t of o){const m=Wc(t);m.length>0&&!r.has(m)&&r.set(m,n)}return r})(),Wx=["pezzi arredamento","pezzi di arredamento","pezzo arredamento","pezzo di arredamento","pezzi arredamento della casa","pezzo arredamento della casa","arredamento"],qx=r=>r.replace(/^(di|del|della|dell'|dei|degli|delle|la|il|lo|le|gli|i)\s+/u,""),$x=r=>{const n=bn(r),o=m=>{const u=m.trim().replace(/^[-:]+/,"").trim();if(!u)return"";const a=qx(u);return Wc(a)};for(const m of Wx)if(n.startsWith(m)){const u=o(n.slice(m.length));if(!u)return"housePiece:any";const a=bp.get(u);return typeof a=="number"?`housePiece:${a}`:"housePiece:any"}const t=bp.get(Wc(r));return typeof t=="number"?`housePiece:${t}`:null},Yx=[[" bianca","white"],["bianca","white"],["white","white"],[" nera","black"],["nera","black"],["black","black"],[" rossa","red"],["rossa","red"],["red","red"],[" arancione","orange"],["arancione","orange"],["orange","orange"],[" gialla","yellow"],["gialla","yellow"],["yellow","yellow"],[" rosa","purple"],["viola","purple"],["rosa","purple"],["purple","purple"],[" blu","blue"],["blu","blue"],["blue","blue"],[" azzurra","lightBlue"],["azzurra","lightBlue"],["lightblue","lightBlue"],[" marrone","brown"],["marrone","brown"],["brown","brown"],[" lime","lime"],["lime","lime"],[" verde scuro","green"],["verde","green"],["verde scuro","green"],["green","green"],[" neutra","neutral"],["neutra","neutral"],["neutral","neutral"]],Xx=new Map(Yx.map(([r,n])=>[bn(r),n])),Kx=[["monete","coins"],[" monete","coins"],["coins","coins"],["cibo","food"],[" cibo","food"],["food","food"],["armatura","armor"],["armature","armor"],["armor","armor"],["proiettili","bullets"],["pallottole","bullets"],["bullets","bullets"],["cartucce","shells"],["shells","shells"],["frecce","arrows"],["arrows","arrows"],["dardi","darts"],["darts","darts"],["granata","grenades"],["granate","grenades"],["grenades","grenades"],["oggetto speciale","specialItem"],["speciale","specialItem"],["special item","specialItem"],["pezzi arredamento","housePiece:any"],["pezzi di arredamento","housePiece:any"],["pezzo arredamento","housePiece:any"],["pezzo di arredamento","housePiece:any"],["arredamento","housePiece:any"],["nessuno","none"],["null","none"],["nessuna ricompensa","none"],["medaglietta bianca","medal_white"],["medaglia bianca","medal_white"],["badge bianca","medal_white"],["medaglietta nera","medal_black"],["medaglietta rossa","medal_red"],["medaglietta arancione","medal_orange"],["medaglietta gialla","medal_yellow"],["medaglietta viola","medal_purple"],["medaglietta blu","medal_blue"],["medaglietta azzurra","medal_lightBlue"],["medaglietta marrone","medal_brown"],["medaglietta lime","medal_lime"],["medaglietta verde","medal_green"],["medaglietta verde scuro","medal_green"],["medaglietta neutra","medal_neutral"]],Qx=new Map(Kx.map(([r,n])=>[bn(r),n])),Zx=[["fucile a pompa","shotgun"],["shotgun","shotgun"],["cerbottana","blowgun"],["blowgun","blowgun"],["lanciagranate","grenadeLauncher"],["grenade launcher","grenadeLauncher"],["arco","Bow"],["arco","Bow"],["bow","Bow"],["pistola","pistol"],["pistol","pistol"]],Jx=new Map(Zx.map(([r,n])=>[bn(r),n])),ew=new Map([["shotgun","shells"],["blowgun","darts"],["grenadeLauncher","grenades"],["Bow","arrows"],["pistol","bullets"]]),tw=new Set(["true","si","s","yes","1"]),rw=r=>typeof r=="boolean"?r:typeof r=="number"?r!==0:typeof r=="string"?tw.has(bn(r)):!1,qo=r=>{if(typeof r=="number")return r;if(typeof r=="string"&&r.trim().length>0){const n=Number(r.replace(",","."));if(Number.isFinite(n))return n}throw new Error(`Unable to convert value "${r}" to number`)},nw=r=>{const n=bn(String(r??""));if(n.includes("piccol")||n.includes("small"))return"Small";if(n.includes("grand")||n.includes("large"))return"Adult";throw new Error(`Unknown size: ${r}`)},ow=r=>{const n=Xx.get(bn(r));if(!n)throw new Error(`Unknown door type alias: ${r}`);return n},af=r=>{const n=$x(r);if(n)return n;const o=Qx.get(bn(r));if(!o)throw new Error(`Unknown loot alias: ${r}`);return o},sw=r=>{const n=Jx.get(bn(r));if(!n)throw new Error(`Unknown weapon alias: ${r}`);return n},us=r=>{const n=ew.get(r);if(!n)throw new Error(`Ammo type missing for weapon ${r}`);return n},aw=r=>{const n=af(r);if(n==="bullets"||n==="shells"||n==="arrows"||n==="darts"||n==="grenades")return n;throw new Error(`Value "${r}" is not a valid ammo kind`)},iw=new Map([["coins","Coins"],["monete","Coins"],["credits","Coins"],["food","Food"],["cibo","Food"],["ammo","Ammo"],["munizioni","Ammo"],["mixed","Mixed"],["misto","Mixed"]]),lw=r=>{const n=iw.get(bn(r));if(!n)throw new Error(`Unknown bonus type alias: ${r}`);return n},uw=r=>{const n=r;return{id:qo(n.id??n.ID??0),kind:String(n.animale??n.name??"Sconosciuto"),life:qo(n.vita??n.life??0),damage:qo(n.danno??n.damage??0),attackSpeed:qo(n.velocita_di_attacco??n.attackSpeed??1),size:nw(n.eta??"Small"),staminaMax:qo(n.stamina_max??n.staminaMax??0),upgradableArmor:rw(n.upgradable_armature??n.upgradableArmor??!1),growthFoodCost:qo(n.costo_crescita_cibo??n.growthFoodCost??0)}},cw=r=>r.map(({porta:n,ricompense:o})=>({type:ow(n),rewards:o})),dw={cache:"no-store",headers:{"Cache-Control":"no-store"}},Ka=async r=>{const n=await fetch(r,dw);if(!n.ok)throw new Error(`Failed to fetch ${r}: ${n.status}`);return await n.json()},fw=async()=>(await Ka("/assets/config_animali.json")).animali.map(n=>uw(n)),hw=async()=>(await Ka("/assets/config_armi.json")).armi.map(n=>({name:sw(n.nome),displayName:n.nome,ammoType:aw(n.munizioni),damagePerShot:n.danno_per_colpo,maxAmmo:n.capacita_massima})),pw=()=>Ka("/assets/config_bauli.json"),mw=()=>Ka("/assets/config_arredamento.json"),yw=async()=>{const r=await Ka("/assets/door_loot_tables.json");return cw(r.loottables)},gw=(r,n)=>{if(!r)return 1;const o=r.trim();if(o.includes("-")){const[m,u]=o.split("-").map(s=>Number(s));if(!Number.isFinite(m)||!Number.isFinite(u))return 1;const a=Math.min(m,u),p=Math.max(m,u);return n.nextInt(a,p)}const t=Number(o);return Number.isFinite(t)?t:1},vw=(r,n)=>{if(!r.loot)return null;const o=af(r.loot);return o==="none"?null:{type:o,qty:gw(r.quantita,n)}},bw=r=>r.reduce((n,o)=>(n[o.type]=o.rewards,n),{}),xw=r=>r.reduce((n,o)=>n+(o.peso??0),0),ww=(r,n)=>{const o=xw(r);if(o<=0)return null;const t=n.nextFloat()*o;let m=0;for(const u of r)if(m+=u.peso??0,t<=m)return u;return r.at(-1)??null},Nu=(r,n,o)=>{const t=n[r];if(!t||t.length===0)return null;const m=ww(t,o);return m?vw(m,o):null},jw={white:[{type:"yellow",durationRange:[1,2]}],black:[{type:"orange",durationRange:[3,5]},{type:"*",count:2,durationRange:[3,5]}],red:[{type:"blue",durationRange:[2,4]},{type:"lime",durationRange:[2,4]}],orange:[{type:"lime",durationRange:[3,5]},{type:"green",durationRange:[3,5]}],yellow:[{type:"white",durationRange:[1,3]},{type:"yellow",durationRange:[1,1]}],purple:[{type:"green",durationRange:[2,3]},{type:"brown",durationRange:[2,3]}],blue:[{type:"red",durationRange:[3,4]},{type:"orange",durationRange:[3,4]}],lightBlue:[{type:"green",durationRange:[2,3]}],brown:[{type:"orange",durationRange:[3,4]},{type:"lime",durationRange:[3,4]}],lime:[{type:"red",durationRange:[2,4]},{type:"blue",durationRange:[2,4]},{type:"lightBlue",durationRange:[2,4]}],green:[{type:"lightBlue",durationRange:[2,3]},{type:"red",durationRange:[2,3]}],neutral:[{type:"black",durationRange:[1,1]}]},Tn=["white","black","red","orange","yellow","purple","blue","lightBlue","brown","lime","green","neutral"],_w=r=>{const[n,o]=r;return o<n?[o,n]:[n,o]},xp=(r,n,o,t)=>{if(r==="neutral")return;const[m,u]=_w(n),a=o.nextInt(m,u),p=t.get(r);(p===void 0||a>p)&&t.set(r,a)},Ru=(r,n,o)=>{const t=new Map(n.map(({type:a,turnsLeft:p})=>[a,Math.max(p,0)])),m=jw[r]??[],u=new Set;for(const a of m)if(a.type==="*"){const p=Tn.filter(h=>h!==r&&h!=="neutral"&&!u.has(h)),s=Math.min(a.count??0,p.length);for(let h=0;h<s;h+=1){const b=o.pickOne(p);u.add(b),p.splice(p.indexOf(b),1),xp(b,a.durationRange,o,t)}}else u.add(a.type),xp(a.type,a.durationRange,o,t);return t.delete("neutral"),Array.from(t.entries()).map(([a,p])=>({type:a,turnsLeft:p}))},ji=r=>r.map(({type:n,turnsLeft:o})=>({type:n,turnsLeft:o-1})).filter(n=>n.turnsLeft>0),sa=(r,n)=>{const o=new Set(n.map(t=>t.type));return r.filter(t=>t==="neutral"||!o.has(t))};class qc{constructor(n){Yf(this,"seed");if(!Number.isInteger(n))throw new Error("Seed must be an integer");this.seed=n>>>0}next(){let n=this.seed;return n^=n<<13,n^=n>>>17,n^=n<<5,this.seed=n>>>0,this.seed}nextFloat(){return(this.next()&268435455)/268435456}nextInt(n,o){if(o<n)throw new Error("max must be >= min");const t=o-n+1;return n+Math.floor(this.nextFloat()*t)}pickOne(n){if(n.length===0)throw new Error("Cannot pick from empty array");const o=this.nextInt(0,n.length-1);return n[o]}}const $c=(r,n)=>r+n*9973>>>0,Au=r=>{const n=[],o=[];for(const t of r){const m={...t};if(m.turnsToNextBonus===null){n.push(m);continue}const u=m.turnsToNextBonus-1;u<=0?(o.push({objectId:m.id,bonus:m.bonus}),m.turnsToNextBonus=m.bonus.turnsCooldown>0?m.bonus.turnsCooldown:null):m.turnsToNextBonus=u,n.push(m)}return{objects:n,triggers:o}},Sw=.002,wp={white:"Porta Bianca",black:"Porta Nera",red:"Porta Rossa",orange:"Porta Arancione",yellow:"Porta Gialla",purple:"Porta Viola",blue:"Porta Blu",lightBlue:"Porta Azzurra",brown:"Porta Marrone",lime:"Porta Lime",green:"Porta Verde",neutral:"Porta Neutra"},kw={white:"Ricompense bilanciate, ottima per iniziare a collezionare risorse.",black:"Ricompense rare con alta probabilit di armature.",red:"Elevato rischio ma ottime ricompense offensive.",orange:"Garantisce loot legati ai potenziamenti tattici.",yellow:"Concentrata su risorse economiche e pacchetti cibo.",purple:"Medaglione collegato a drop magici e speciali.",blue:"Ricompense dedicate alle risorse energetiche.",lightBlue:"Favorisce loot supporto e acceleratori di progressione.",brown:"Specializzata in risorse difensive e costruzione.",lime:"Ricompense ibride tra supporto e potenziamenti rari.",green:"Focus su equipaggiamento animale e potenziamenti.",neutral:"Loot generico utile per completare collezioni mancanti."},Ew={white:"#e5e5e5",black:"#1f2937",red:"#ef4444",orange:"#f97316",yellow:"#facc15",purple:"#a855f7",blue:"#3b82f6",lightBlue:"#22d3ee",brown:"#92400e",lime:"#84cc16",green:"#059669",neutral:"#9ca3af"},ya=Object.keys(wp).map(r=>({type:r,name:`Medaglietta ${wp[r]}`,color:Ew[r]??"#9ca3af",description:kw[r],dropRate:Sw})),yl=r=>typeof r=="string"&&r.startsWith("medal_"),gl=r=>r.replace("medal_",""),Yc=[{id:"common",name:"Baule Comune",image:"/assets/bauli/legno.png",accent:"#f59e0b",description:"Contiene risorse di base utili a rinforzare l'equipaggiamento."},{id:"uncommon",name:"Baule Non Comune",image:"/assets/bauli/bronzo.png",accent:"#ec4899",description:"Ricompense migliorate con possibilit di trovare potenziamenti rari."},{id:"rare",name:"Baule Raro",image:"/assets/bauli/argento.png",accent:"#38bdf8",description:"Loot prezioso concentrato su risorse avanzate e armature."},{id:"epic",name:"Baule Epico",image:"/assets/bauli/oro.png",accent:"#f97316",description:"Ricompense di alto livello con possibilit di oggetti speciali."},{id:"legendary",name:"Baule Leggendario",image:"/assets/bauli/diamante.png",accent:"#c084fc",description:"Contiene le ricompense pi rare, inclusi oggetti unici."}],Tw=r=>Yc.find(o=>o.id===r)??{id:r,name:`Baule ${r}`,image:"/assets/bauli/legno.png",accent:"#a67c52",description:"Contiene una selezione casuale di ricompense."},Mw=.7,Cw=.75,Ow=.6,Pw=2,Wl=(r,n)=>n==="Small"?Math.max(1,Math.round(r.life*Cw)):r.life,lo=(r,n)=>n==="Small"?Math.max(5,Math.round(r.staminaMax*Ow)):r.staminaMax,Lw=(r,n)=>n==="Small"?Math.max(1,Math.round(r.damage*Mw)):r.damage,Nw=(r,n)=>n==="Small"?Math.max(1,r.attackSpeed+Pw):r.attackSpeed,ql=(r,n)=>{const o=Wl(r,n.size),t=lo(r,n.size);return{life:Math.min(n.life,o),damage:Lw(r,n.size),attackSpeed:Nw(r,n.size),staminaCap:t,lifeCap:o}},Rw=(r,n)=>{const o=Wl(n,"Adult"),t=lo(n,"Adult");return{...r,size:"Adult",life:o,stamina:t}},Dg=(r,n)=>{if(!n.alive)return"fallen";if(!r)return n.stamina>0?"ready":"recovering";const{staminaCap:o}=ql(r,n);return n.stamina>=o?"ready":"recovering"},Fg=(r,n)=>{if(!n.alive||!r)return 0;const{staminaCap:o}=ql(r,n);return Math.max(0,o-n.stamina)},Xc=(r,n)=>{if(r)return ql(r,n);const o=Math.max(0,Math.round(n.life)),t=Math.max(0,Math.round(n.stamina));return{life:o,damage:0,attackSpeed:0,staminaCap:Math.max(1,t),lifeCap:Math.max(1,o)}},on={version:"gc:version",activeSlot:"gc:activeSlot",slots:"gc:slots",savePrefix:"gc:save:",migratorLastRun:"gc:migrator:lastRun"},uo="1.0.0",ys=r=>`${on.savePrefix}${r}`,Aw=(r,n)=>{const o=localStorage.getItem(r);if(!o)return n;try{return JSON.parse(o)}catch{return n}},Iw=(r,n)=>{localStorage.setItem(r,JSON.stringify(n))},Ur=()=>Aw(on.slots,{slots:[]}).slots,Mo=r=>{Iw(on.slots,{slots:r})},ga=()=>localStorage.getItem(on.activeSlot),aa=r=>{localStorage.setItem(on.activeSlot,r)},Dw=()=>({bullets:0,shells:0,arrows:0,darts:8,grenades:0}),Fw=["common","uncommon","rare","epic","legendary"],Uw=()=>Fw.reduce((r,n)=>(r[n]=0,r),{}),Bw=()=>Tn.reduce((r,n)=>(r[n]={unlocked:!1,unlockedAt:null,highlightUntil:null},r),{}),$l=()=>new Date().toISOString(),jp=(r,n,o)=>{const t=$l();return{meta:{slotId:r,createdAt:t,updatedAt:t,gameVersion:uo,rngSeed:Math.floor(Math.random()*4294967295)},progress:{doorsOpened:0,blockedDoors:[],availablePool:Tn,lastLobbyDraw:[],turn:0},inventory:{coins:0,food:0,ammo:Dw(),armors:[],specialItems:[]},weapons:n,animals:{owned:[],bestiarySeen:[]},house:{objects:o},chests:{unlockedHistory:[],inventory:Uw()},doorHistory:[],battleState:{active:!1,door:null,usedWeapons:[],fallenAnimals:[],weaponsLocked:!1},medals:{entries:Bw(),dropRate:.002,highlighted:null}}},Ko=r=>{const n=localStorage.getItem(ys(r));if(!n)return null;try{return JSON.parse(n)}catch(o){return console.error("Invalid save data",o),null}},Or=r=>{const n=$l(),o={...r,meta:{...r.meta,updatedAt:n,gameVersion:uo}};localStorage.setItem(ys(r.meta.slotId),JSON.stringify(o));const m=Ur().map(u=>u.id===r.meta.slotId?{...u,updatedAt:n}:u);Mo(m)},zw=r=>{localStorage.removeItem(ys(r));const n=Ur().filter(t=>t.id!==r);Mo(n),ga()===r&&localStorage.removeItem(on.activeSlot)},Gw=(r,n)=>{const o=Ur().map(t=>t.id===r?{...t,name:n}:t);Mo(o)},Vw=()=>{localStorage.getItem(on.version)!==uo&&localStorage.setItem(on.version,uo)},va=r=>typeof r=="object"&&r!==null,Hw=r=>va(r)?typeof r.id=="string"&&typeof r.name=="string"&&typeof r.createdAt=="string"&&typeof r.updatedAt=="string":!1,Ww=(r,n)=>{if(!va(n))throw new Error("Invalid saves map");const o={};for(const t of r){const m=n[t.id];if(m==null){o[t.id]=null;continue}if(!va(m))throw new Error(`Invalid save payload for slot ${t.id}`);if(!va(m.meta)||m.meta.slotId!==t.id)throw new Error(`Mismatched slot id for save ${t.id}`);o[t.id]=m}return o},qw=()=>{const r=Ur(),n=ga(),o=r.reduce((t,m)=>(t[m.id]=Ko(m.id),t),{});return{version:uo,generatedAt:$l(),activeSlotId:n,slots:r,saves:o}},$w=r=>{let n;try{n=JSON.parse(r)}catch{throw new Error("Invalid JSON")}if(!va(n))throw new Error("Invalid export payload");const o=n.slots;if(!Array.isArray(o))throw new Error("Slots list missing");const t=o.map(h=>{if(!Hw(h))throw new Error("Invalid slot metadata");return h}),m=new Set;for(const h of t){if(m.has(h.id))throw new Error(`Duplicate slot id "${h.id}" in export`);m.add(h.id)}const u=Ww(t,n.saves),a=typeof n.activeSlotId=="string"&&t.some(h=>h.id===n.activeSlotId)?n.activeSlotId:null,p=typeof n.version=="string"&&n.version.trim()?n.version:uo,s=typeof n.generatedAt=="string"&&n.generatedAt.trim()?n.generatedAt:$l();return{version:p,generatedAt:s,activeSlotId:a,slots:t,saves:u}},Yw=r=>{const n=Ur();for(const t of n)localStorage.removeItem(ys(t.id));Mo(r.slots);for(const t of r.slots){const m=r.saves[t.id];m?localStorage.setItem(ys(t.id),JSON.stringify(m)):localStorage.removeItem(ys(t.id))}r.activeSlotId&&r.slots.some(t=>t.id===r.activeSlotId)?aa(r.activeSlotId):localStorage.removeItem(on.activeSlot);const o=r.version.trim()?r.version:uo;localStorage.setItem(on.version,o)},Xw=r=>({...r,meta:{...r.meta,gameVersion:"1.0.0"}}),Kw=[{version:"1.0.0",migrate:Xw}],Qw=(r,n)=>{const o=r.split(".").map(Number),t=n.split(".").map(Number);for(let m=0;m<Math.max(o.length,t.length);m+=1){const u=(o[m]??0)-(t[m]??0);if(u!==0)return u}return 0},Zs=r=>{const n=Kw.filter(o=>Qw(o.version,r.meta.gameVersion)>0).reduce((o,t)=>t.migrate(o),r);return localStorage.setItem(on.migratorLastRun,uo),n},Zw=(r,n,o)=>{const t=Math.max(0,Math.floor(o)),m=n.damagePerShot*t,u=Math.max(0,r.life-m);return{enemyLifeLeft:u,ammoSpent:t,defeated:u===0}},_i=(r,n,o)=>{const t=Math.max(1,n-o);return Math.max(0,r-t)},Jw=(r,n)=>{let o=r.life,t=n.life;const m=Math.max(0,r.armor??0),u=0;let a=0;const p=r.attackSpeed>=n.attackSpeed,s=100;for(let b=0;b<s;b+=1)if(a+=1,p){if(t=_i(t,r.damage,u),t<=0||(o=_i(o,n.damage,m),o<=0))break}else if(o=_i(o,n.damage,m),o<=0||(t=_i(t,r.damage,u),t<=0))break;let h;return t<=0&&o<=0||t<=0?h="player":h="enemy",{winner:h,turns:a,playerLifeLeft:Math.max(0,o),enemyLifeLeft:Math.max(0,t)}},e2=r=>new Promise(n=>{setTimeout(n,r)}),Si=(...r)=>{},t2=async(r,n=120,o=100)=>{let t=r().configs;if(t)return t;for(let m=0;m<n;m+=1){if(await e2(o),t=r().configs,t)return t;if(r().status==="error")break}return null},Bn={active:!1,door:null,usedWeapons:[],fallenAnimals:[],weaponsLocked:!1},zi=["bullets","shells","arrows","darts","grenades"],r2=["common","uncommon","rare","epic","legendary"],n2=r=>r2.reduce((n,o)=>{const t=r==null?void 0:r[o];return n[o]=typeof t=="number"&&Number.isFinite(t)?Math.max(0,t):0,n},{}),o2=r=>Tn.reduce((n,o)=>{const t=r==null?void 0:r[o];return n[o]={unlocked:(t==null?void 0:t.unlocked)??!1,unlockedAt:(t==null?void 0:t.unlockedAt)??null,highlightUntil:(t==null?void 0:t.highlightUntil)??null},n},{}),s2={common:"common",uncommon:"common",rare:"rare",epic:"epic",legendary:"epic"},a2=(r,n)=>{if(!r)return 1;const o=r.trim();if(o.includes("-")){const[m,u]=o.split("-").map(s=>Number(s));if(!Number.isFinite(m)||!Number.isFinite(u))return 1;const a=Math.min(m,u),p=Math.max(m,u);return n.nextInt(a,p)}const t=Number(o);return Number.isFinite(t)?t:1},i2=(r,n)=>{const o=r.reduce((u,a)=>u+(a.peso??0),0);if(o<=0)return null;const t=n.nextFloat()*o;let m=0;for(const u of r)if(m+=u.peso??0,t<=m)return u;return r.at(-1)??null},l2=(r,n,o)=>{const t=s2[n]??n,m=r.bauli.find(s=>s.id===t);if(!m)return null;const u=i2(m.loot,o);if(!u||!u.loot)return null;const a=af(u.loot);if(a==="none")return null;const p=a2(u.quantita,o);return{type:a,qty:p}},u2=r=>{const n={bullets:0,shells:0,arrows:0,darts:0,grenades:0};for(const o of zi)typeof r[o]=="number"&&Number.isFinite(r[o])&&(n[o]=Math.max(0,Math.floor(r[o])));return n},_p=new Set(["blowgun"]),Kc=(r,n)=>r.map(o=>{const t=n==null?void 0:n.find(m=>m.name===o.name);return t?{name:o.name,unlocked:t.unlocked??_p.has(o.name)}:{name:o.name,unlocked:_p.has(o.name)}}),c2=r=>r.arredamento.map(n=>({id:n.id,name:n.nome,piecesNeeded:n.pezzi,bonus:{type:lw(n.bonus.tipo),amount:n.bonus.quantita,turnsCooldown:n.bonus.cooldown}})),Qc=(r,n)=>r.map(o=>{const t=n==null?void 0:n.find(m=>m.id===o.id);return{id:o.id,name:o.name,piecesNeeded:o.piecesNeeded,piecesOwned:(t==null?void 0:t.piecesOwned)??0,unlocked:(t==null?void 0:t.unlocked)??!1,bonus:{type:o.bonus.type,amount:o.bonus.amount,turnsCooldown:o.bonus.turnsCooldown},turnsToNextBonus:(t==null?void 0:t.turnsToNextBonus)??null}}),Sp=(r,n=2)=>{const o=r.slice(0,n);return{owned:o.map(m=>({configId:m.id,life:Wl(m,"Adult"),stamina:lo(m,"Adult"),size:"Adult",armor:0,alive:!0})),bestiarySeen:o.map(m=>m.id)}},yo=(r,n)=>{var m,u,a,p,s,h;const t={...u2(r.inventory.ammo)};for(const b of r.weapons??[]){const v=typeof b.ammo=="number"?Math.max(0,Math.floor(b.ammo??0)):0;if(v>0){const i=us(b.name);t[i]+=v}}return{...r,weapons:Kc(n.weapons,r.weapons),house:{objects:Qc(n.house,r.house.objects)},inventory:{...r.inventory,ammo:t},animals:{owned:d2(r.animals.owned,n.animals),bestiarySeen:r.animals.bestiarySeen},chests:{unlockedHistory:((m=r.chests)==null?void 0:m.unlockedHistory)??[],inventory:n2((u=r.chests)==null?void 0:u.inventory)},progress:{...r.progress,availablePool:sa(r.progress.availablePool.length?r.progress.availablePool:Tn,r.progress.blockedDoors)},battleState:r.battleState??Bn,medals:{entries:o2((a=r.medals)==null?void 0:a.entries),dropRate:((p=r.medals)==null?void 0:p.dropRate)??((s=ya[0])==null?void 0:s.dropRate)??.002,highlighted:((h=r.medals)==null?void 0:h.highlighted)??null}}},Iu=(r,n,o)=>r.map(t=>{const m=n.find(p=>p.id===t.configId);if(!m||!t.alive)return t;const u=lo(m,t.size),a=Math.min(u,t.stamina+o);return{...t,stamina:a}}),d2=(r,n)=>r.map(o=>{const t=n.find(s=>s.id===o.configId);if(!t)return o;const m=Wl(t,o.size),u=lo(t,o.size),a=Math.min(Math.max(0,o.life),m),p=Math.min(Math.max(0,o.stamina),u);return{...o,life:a,stamina:p}}),Du=(r,n)=>{if(!n.length)return r;const o={...r.inventory,ammo:{...r.inventory.ammo}};for(const t of n){const m=t.bonus.amount;switch(t.bonus.type){case"Coins":case"Monete":{const u=Array.isArray(m)?m.reduce((a,p)=>a+(typeof p=="number"?p:0),0):m;o.coins+=u;break}case"Food":case"Cibo":{const u=Array.isArray(m)?m.reduce((a,p)=>a+(typeof p=="number"?p:0),0):m;o.food+=u;break}case"Ammo":case"Munizioni":{Array.isArray(m)?m.forEach((u,a)=>{const p=zi[a];p&&typeof u=="number"&&(o.ammo[p]+=u)}):zi.forEach(u=>{o.ammo[u]+=m});break}case"Mixed":{if(Array.isArray(m)){const[u=0,a=0,p=0]=m;o.coins+=typeof u=="number"?u:0,o.food+=typeof a=="number"?a:0,zi.forEach(s=>{typeof p=="number"&&(o.ammo[s]+=p)})}else o.coins+=m,o.food+=m;break}}}return{...r,inventory:o}},Vn=(r,n,o=0)=>{const t=Array.from(n).reduce((u,a)=>u+a.charCodeAt(0),0),m=$c(r.meta.rngSeed,r.progress.turn+1+o*13+t);return new qc(m)},f2=(r,n,o)=>{if(!o.length)return[];const t=Vn(r,n);if(t.nextFloat()<.35)return[];const u=t.nextInt(1,Math.min(3,o.length)),a=[],p=[...o];for(let s=0;s<u;s+=1){const h=t.nextInt(0,p.length-1),b=p.splice(h,1)[0];a.push({configId:b.id,life:b.life,damage:b.damage,attackSpeed:b.attackSpeed,size:b.size})}return a},Js=(r,n=50)=>r.length<=n?r:r.slice(r.length-n),h2=(r,n)=>{const o=r.animals.owned.some(m=>{if(!m.alive)return!1;const u=n.find(p=>p.id===m.configId);if(!u)return!1;const a=lo(u,m.size);return m.stamina>=a}),t=Object.values(r.inventory.ammo).some(m=>m>0);return o||t},Fu=(r,n,o,t=13)=>{var h;const m=o.chests.bauli;if(!Array.isArray(m)||m.length===0)return null;const u=m.reduce((b,v)=>b+(typeof v.peso_baule=="number"?v.peso_baule:0),0);if(u<=0)return null;const p=Vn(r,n,t).nextFloat()*u;let s=0;for(const b of m)if(s+=b.peso_baule??0,p<=s)return b.id??null;return((h=m.at(-1))==null?void 0:h.id)??null},Mr=Og()(Vx((r,n)=>({status:"idle",onlineStatus:"unknown",error:null,configs:null,slots:[],activeSlotId:null,save:null,pendingReward:null,battleResult:null,weaponsPhaseLocked:!1,setOnlineStatus:o=>{r({onlineStatus:o})},resetBattleResult:()=>{r({battleResult:null})},bootstrap:async()=>{if(n().status!=="loading"){r(o=>{o.status="loading",o.error=null});try{Vw();const[o,t,m,u,a]=await Promise.all([fw(),hw(),yw(),pw(),mw()]),p={animals:o,weapons:t,lootTables:bw(m),chests:u,house:c2(a),medals:ya};let s=Ur(),h=ga(),b=h?Ko(h):null;if(!b||!h){const v=`slot-${Date.now()}`,i=Kc(p.weapons),d=Qc(p.house);b=jp(v,i,d),b.animals=Sp(p.animals),b=yo(b,p);const f={id:v,name:"Nuovo salvataggio",createdAt:b.meta.createdAt,updatedAt:b.meta.updatedAt};s=[...s,f],Mo(s),aa(v),Or(b),h=v}else{const v=Zs(b);b=yo(v,p)}r({status:"ready",configs:p,slots:s,activeSlotId:h,save:b,pendingReward:null,battleResult:null,weaponsPhaseLocked:!1})}catch(o){r({status:"error",error:o instanceof Error?o.message:String(o)})}}},refreshSlots:()=>{r({slots:Ur()})},createSlot:async o=>{const t=n().configs,m=t??await t2(n);if(!m){console.warn("Cannot create save slot: configs not ready");return}try{t||Si("createSlot waited for configs");const u=`slot-${Date.now()}`,a=o!=null&&o.trim()?o.trim():"Salvataggio";Si("createSlot generating template",{slotId:u,slotName:a});const p=Kc(m.weapons),s=Qc(m.house);let h=jp(u,p,s);h.animals=Sp(m.animals),h=yo(h,m),Or(h);const b=[...Ur(),{id:u,name:a,createdAt:h.meta.createdAt,updatedAt:h.meta.updatedAt}];Mo(b),aa(u),r({slots:b,activeSlotId:u,save:h,error:null}),Si("createSlot completed",{slotId:u,slotName:a})}catch(u){console.error("Failed to create save slot",u),r(a=>{a.error=u instanceof Error?u.message:String(u)})}},duplicateSlot:o=>{const{configs:t}=n();if(!t)return;const m=Ko(o);if(!m)return;const u=Zs(m),a=yo(u,t),p=`slot-${Date.now()}`,s=new Date().toISOString(),h=Ur(),b=h.find(g=>g.id===o),v=b?`${b.name} (Copia)`:"Salvataggio (Copia)";let i=v,d=2;for(;h.some(g=>g.name.toLowerCase()===i.toLowerCase());)i=`${v} ${d}`,d+=1;const f={...a,meta:{...a.meta,slotId:p,createdAt:s,updatedAt:s,rngSeed:Math.floor(Math.random()*4294967295)}},y=[...h,{id:p,name:i,createdAt:s,updatedAt:s}];Mo(y),Or(f),aa(p),r({slots:y,activeSlotId:p,save:f})},loadSlot:async o=>{const{configs:t}=n();if(!t)return;const m=Ko(o);if(!m)return;const u=Zs(m),a=yo(u,t);aa(o),r({activeSlotId:o,save:a,pendingReward:null,weaponsPhaseLocked:!1,battleResult:null})},renameSlot:(o,t)=>{Gw(o,t),r({slots:Ur()})},deleteSlot:o=>{const{configs:t}=n();zw(o);const m=ga(),u=Ur();let a=null;if(m&&t){const p=Ko(m);if(p){const s=Zs(p);a=yo(s,t)}}r({slots:u,activeSlotId:m,save:a})},exportSavesSnapshot:()=>qw(),importSavesFromJson:o=>{const t=$w(o);Yw(t);const m=Ur(),u=ga(),{configs:a}=n();let p=null;if(a&&u){const s=Ko(u);if(s){const h=Zs(s);p=yo(h,a)}}r({slots:m,activeSlotId:u,save:p}),Si("importSavesFromJson completed",{slotCount:m.length,activeSlotId:u})},drawLobbyDoors:()=>{const{save:o}=n();if(!o)return[];const t=ji(o.progress.blockedDoors),m=sa(Tn,t),u=new qc($c(o.meta.rngSeed,o.progress.turn+1)),a=[...m],p=[],s=Math.min(3,a.length);for(let b=0;b<s;b+=1){const v=u.nextInt(0,a.length-1);p.push(a.splice(v,1)[0])}const h={...o,progress:{...o.progress,blockedDoors:t,availablePool:m,lastLobbyDraw:p},battleState:Bn};return Or(h),r({save:h,pendingReward:null,weaponsPhaseLocked:!1}),p},openDoor:o=>{const{save:t,configs:m}=n();if(!t||!m)return null;const u=f2(t,o,m.animals);if(u.length>0&&!h2(t,m.animals)){const h=Iu(t.animals.owned,m.animals,5),b={...t,animals:{...t.animals,owned:h},battleState:Bn,doorHistory:Js([...t.doorHistory,{type:o,result:"defeat",timestamp:new Date().toISOString()}])};return Or(b),r({save:b,pendingReward:null,weaponsPhaseLocked:!1,battleResult:"defeat"}),null}const a=u.length?{active:!0,door:{type:o,enemies:u,index:0},usedWeapons:[],fallenAnimals:[],weaponsLocked:!1}:Bn;let p={...t,battleState:a},s=null;if(u.length)p={...p,animals:{...p.animals,bestiarySeen:Array.from(new Set([...p.animals.bestiarySeen,...u.map(h=>h.configId)]))}},Or(p);else{const h=Vn(t,o,7),b=Nu(o,m.lootTables,h),v={...t.inventory,ammo:{...t.inventory.ammo}};if(b)if(b.type in v.ammo){const w=b.type;v.ammo[w]+=b.qty}else b.type==="coins"?v.coins+=b.qty:b.type==="food"?v.food+=b.qty:b.type==="armor"?v.armors=[...v.armors,{id:`armor-${Date.now()}`,tier:1,durability:Math.max(5,b.qty*5)}]:b.type==="specialItem"&&(v.specialItems=[...v.specialItems,`item-${Date.now()}`]);const i=ji(t.progress.blockedDoors),d=Vn(t,o,11),f=Ru(o,i,d),y=sa(Tn,f),{objects:g,triggers:c}=Au(t.house.objects);p=Du({...p,progress:{doorsOpened:t.progress.doorsOpened+1,turn:t.progress.turn+1,blockedDoors:f,availablePool:y,lastLobbyDraw:[]},inventory:v,house:{objects:g},doorHistory:Js([...t.doorHistory,{type:o,result:"reward",loot:b,timestamp:new Date().toISOString()}])},c);const l=Fu(t,o,m,13);if(l&&l!=="none"){const w=l;p={...p,chests:{...p.chests,inventory:{...p.chests.inventory,[w]:(p.chests.inventory[w]??0)+1}}},s={doorType:o,loot:b,weaponsUsed:[],fallenAnimals:[],chestRarity:w}}else s={doorType:o,loot:b,weaponsUsed:[],fallenAnimals:[]};Or(p)}return r({save:p,pendingReward:s,weaponsPhaseLocked:!1,battleResult:u.length?null:"victory"}),u.length?{enemies:u,type:o}:null},resolveWeaponAttack:(o,t)=>{const{save:m,configs:u}=n();if(!m||!u||!m.battleState.active||!m.battleState.door)return;const a=u.weapons.find(l=>l.name===o);if(!a)return;const p=us(o),s=m.inventory.ammo[p],h=Math.max(0,Math.min(t,s,a.maxAmmo));if(h<=0)return;const b=m.battleState.door.enemies[m.battleState.door.index],v=Zw(b,{damagePerShot:a.damagePerShot},h),i={...b,life:v.enemyLifeLeft},d=[...m.battleState.door.enemies];d[m.battleState.door.index]=i;const f={...m.inventory,ammo:{...m.inventory.ammo,[p]:s-v.ammoSpent}};let y=null,g=m.battleState,c=m;if(v.defeated){const l=m.battleState.door.index+1;if(l>=d.length){const w=m.battleState.door.type,x=Vn(m,w,17),_=Nu(w,u.lootTables,x);let T={...f};if(_)if(_.type in T.ammo){const B=_.type;T.ammo[B]+=_.qty}else _.type==="coins"?T.coins+=_.qty:_.type==="food"&&(T.food+=_.qty);const E=ji(m.progress.blockedDoors),S=Vn(m,w,23),P=Ru(w,E,S),N=sa(Tn,P),{objects:C,triggers:D}=Au(m.house.objects);c=Du({...m,inventory:T,progress:{doorsOpened:m.progress.doorsOpened+1,turn:m.progress.turn+1,blockedDoors:P,availablePool:N,lastLobbyDraw:[]},house:{objects:C},battleState:Bn,doorHistory:Js([...m.doorHistory,{type:w,result:"victory",loot:_,timestamp:new Date().toISOString()}])},D),y="victory";const L=Fu(m,w,u,21);let F=null;L&&L!=="none"&&(F=L,c={...c,chests:{...c.chests,inventory:{...c.chests.inventory,[F]:(c.chests.inventory[F]??0)+1}}});const I=[...m.battleState.usedWeapons,{name:o,shots:v.ammoSpent}];r({pendingReward:{doorType:w,loot:_,weaponsUsed:I,fallenAnimals:m.battleState.fallenAnimals,chestRarity:F}})}else g={...m.battleState,door:{...m.battleState.door,enemies:d,index:l},usedWeapons:[...m.battleState.usedWeapons,{name:o,shots:v.ammoSpent}]}}else g={...m.battleState,door:{...m.battleState.door,enemies:d},usedWeapons:[...m.battleState.usedWeapons,{name:o,shots:v.ammoSpent}],weaponsLocked:!1},c={...m,inventory:f};c===m?c={...m,inventory:f,battleState:g}:c={...c,battleState:y?Bn:g},Or(c),r({save:c,weaponsPhaseLocked:!1,battleResult:y})},resolveAnimalDuel:o=>{const{save:t,configs:m}=n();if(!t||!m||!t.battleState.active||!t.battleState.door)return;const u=t.animals.owned[o];if(!u||!u.alive)return;const a=m.animals.find(w=>w.id===u.configId);if(!a)return;const p=lo(a,u.size);if(u.stamina<p)return;const s=t.battleState.door.enemies[t.battleState.door.index],h=ql(a,u),b=Jw({life:h.life,damage:h.damage,attackSpeed:h.attackSpeed,armor:u.armor},s),v=[...t.animals.owned];v[o]={...u,life:Math.min(h.lifeCap,b.playerLifeLeft),alive:b.playerLifeLeft>0,stamina:0};const i=[...t.battleState.door.enemies];i[t.battleState.door.index]={...s,life:b.enemyLifeLeft};const f=b.playerLifeLeft<=0?[...t.battleState.fallenAnimals,{configId:u.configId}]:t.battleState.fallenAnimals;let y=t,g=null,c=null,l=t.battleState;if(b.enemyLifeLeft<=0){const w=t.battleState.door.index+1;if(w>=i.length){const x=t.battleState.door.type,_=Vn(t,x,29),T=Nu(x,m.lootTables,_),E={...t.inventory,ammo:{...t.inventory.ammo}};let S=T,P=null,N={...t.medals,entries:{...t.medals.entries}};if(T&&yl(T.type)){const Q=gl(T.type);if(N.entries[Q].unlocked)S=null;else{const M=new Date().toISOString();N={...N,entries:{...N.entries,[Q]:{unlocked:!0,unlockedAt:M,highlightUntil:M}},highlighted:Q},P=Q}}else if(T)if(T.type in E.ammo){const Q=T.type;E.ammo[Q]+=T.qty}else T.type==="coins"?E.coins+=T.qty:T.type==="food"&&(E.food+=T.qty);const C=ji(t.progress.blockedDoors),D=Vn(t,x,31),L=Ru(x,C,D),F=sa(Tn,L),{objects:I,triggers:B}=Au(t.house.objects),W=Iu(v,m.animals,5),G={...t,inventory:E,animals:{...t.animals,owned:W},progress:{doorsOpened:t.progress.doorsOpened+1,turn:t.progress.turn+1,blockedDoors:L,availablePool:F,lastLobbyDraw:[]},house:{objects:I},battleState:Bn,doorHistory:Js([...t.doorHistory,{type:x,result:"victory",loot:S,timestamp:new Date().toISOString()}]),medals:N};y=Du(G,B);const V=Fu(t,x,m,33);let X=null;V&&V!=="none"&&(X=V,y={...y,chests:{...y.chests,inventory:{...y.chests.inventory,[X]:(y.chests.inventory[X]??0)+1}}}),c={doorType:x,loot:S,weaponsUsed:t.battleState.usedWeapons,fallenAnimals:f,medalUnlocked:P,chestRarity:X},g="victory"}else l={...t.battleState,door:{...t.battleState.door,enemies:i,index:w},fallenAnimals:f},y={...t,animals:{...t.animals,owned:v},battleState:l}}else{const w=v.filter(_=>_.alive),x=Object.values(t.inventory.ammo).some(_=>_>0);if(!w.length&&!x){const _=Iu(v,m.animals,5);y={...t,animals:{...t.animals,owned:_},battleState:Bn,doorHistory:Js([...t.doorHistory,{type:t.battleState.door.type,result:"defeat",timestamp:new Date().toISOString()}])},g="defeat"}else l={...t.battleState,door:{...t.battleState.door,enemies:i},fallenAnimals:f},y={...t,animals:{...t.animals,owned:v},battleState:l}}Or(y),r({save:y,battleResult:g,pendingReward:c??n().pendingReward})},feedAnimal:o=>{const{save:t,configs:m}=n();if(!t||!m)return;const u=t.animals.owned[o];if(!u||!u.alive)return;const a=m.animals.find(d=>d.id===u.configId);if(!a)return;const p=lo(a,u.size),s=Math.max(0,p-u.stamina);if(s<=0)return;const h=t.inventory.food;if(h<=0)return;const b=Math.min(s,h);if(b<=0)return;const v=[...t.animals.owned];v[o]={...u,stamina:Math.min(p,u.stamina+b)};const i={...t,inventory:{...t.inventory,food:h-b},animals:{...t.animals,owned:v}};Or(i),r({save:i})},growAnimal:o=>{const{save:t,configs:m}=n();if(!t||!m)return;const u=t.animals.owned[o];if(!u||!u.alive||u.size==="Adult")return;const a=m.animals.find(v=>v.id===u.configId);if(!a)return;const p=Math.max(0,Math.round(a.growthFoodCost));if(t.inventory.food<p)return;const s=Rw(u,a),h=[...t.animals.owned];h[o]=s;const b={...t,inventory:{...t.inventory,food:t.inventory.food-p},animals:{...t.animals,owned:h}};Or(b),r({save:b})},openChest:o=>{const{save:t,configs:m}=n();if(!t||!m)return null;const u=t.chests.inventory[o]??0;if(u<=0)return null;const a=$c(t.meta.rngSeed,Date.now()),p=new qc(a);let s=l2(m.chests,o,p),h={...t.medals,entries:{...t.medals.entries}},b=null;const v={...t.inventory,ammo:{...t.inventory.ammo},armors:[...t.inventory.armors],specialItems:[...t.inventory.specialItems]};if(s&&yl(s.type)){const f=gl(s.type);if(h.entries[f].unlocked)s=null;else{const g=new Date().toISOString();h={...h,entries:{...h.entries,[f]:{unlocked:!0,unlockedAt:g,highlightUntil:g}},highlighted:f},b=f}}if(s)if(s.type in v.ammo){const f=s.type;v.ammo[f]+=s.qty}else s.type==="coins"?v.coins+=s.qty:s.type==="food"?v.food+=s.qty:s.type==="armor"?v.armors=[...v.armors,{id:`armor-${Date.now()}`,tier:1,durability:100}]:s.type==="specialItem"&&(v.specialItems=[...v.specialItems,"Ricompensa Baule"]);const i={rarity:Tw(o).name,time:new Date().toISOString(),loot:s},d={...t,inventory:v,chests:{unlockedHistory:[...t.chests.unlockedHistory,i],inventory:{...t.chests.inventory,[o]:Math.max(u-1,0)}},medals:h};return Or(d),r({save:d}),{loot:s,medalUnlocked:b}},acknowledgeMedalHighlight:()=>{const{save:o}=n();if(!o||!o.medals.highlighted)return;const t={...o,medals:{...o.medals,highlighted:null}};Or(t),r({save:t})},collectReward:()=>{const{pendingReward:o}=n();o&&r({pendingReward:null,battleResult:null})}}))),p2=(r,n,o,t)=>{var u,a,p,s;const m=[o,{code:n,...t||{}}];if((a=(u=r==null?void 0:r.services)==null?void 0:u.logger)!=null&&a.forward)return r.services.logger.forward(m,"warn","react-i18next::",!0);Co(m[0])&&(m[0]=`react-i18next:: ${m[0]}`),(s=(p=r==null?void 0:r.services)==null?void 0:p.logger)!=null&&s.warn?r.services.logger.warn(...m):console!=null&&console.warn&&console.warn(...m)},kp={},Zc=(r,n,o,t)=>{Co(o)&&kp[o]||(Co(o)&&(kp[o]=new Date),p2(r,n,o,t))},Ug=(r,n)=>()=>{if(r.isInitialized)n();else{const o=()=>{setTimeout(()=>{r.off("initialized",o)},0),n()};r.on("initialized",o)}},Jc=(r,n,o)=>{r.loadNamespaces(n,Ug(r,o))},Ep=(r,n,o,t)=>{if(Co(o)&&(o=[o]),r.options.preload&&r.options.preload.indexOf(n)>-1)return Jc(r,o,t);o.forEach(m=>{r.options.ns.indexOf(m)<0&&r.options.ns.push(m)}),r.loadLanguages(n,Ug(r,t))},m2=(r,n,o={})=>!n.languages||!n.languages.length?(Zc(n,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:n.languages}),!0):n.hasLoadedNamespace(r,{lng:o.lng,precheck:(t,m)=>{if(o.bindI18n&&o.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!m(t.isLanguageChangingTo,r))return!1}}),Co=r=>typeof r=="string",y2=r=>typeof r=="object"&&r!==null,g2=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,v2={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},b2=r=>v2[r],x2=r=>r.replace(g2,b2);let ed={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:x2};const w2=(r={})=>{ed={...ed,...r}},j2=()=>ed;let Bg;const _2=r=>{Bg=r},S2=()=>Bg,k2={type:"3rdParty",init(r){w2(r.options.react),_2(r)}},E2=Re.createContext();class T2{constructor(){this.usedNamespaces={}}addUsedNamespaces(n){n.forEach(o=>{this.usedNamespaces[o]||(this.usedNamespaces[o]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const M2=(r,n)=>{const o=Re.useRef();return Re.useEffect(()=>{o.current=r},[r,n]),o.current},zg=(r,n,o,t)=>r.getFixedT(n,o,t),C2=(r,n,o,t)=>Re.useCallback(zg(r,n,o,t),[r,n,o,t]),lf=(r,n={})=>{var x,_,T,E;const{i18n:o}=n,{i18n:t,defaultNS:m}=Re.useContext(E2)||{},u=o||t||S2();if(u&&!u.reportNamespaces&&(u.reportNamespaces=new T2),!u){Zc(u,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const S=(N,C)=>Co(C)?C:y2(C)&&Co(C.defaultValue)?C.defaultValue:Array.isArray(N)?N[N.length-1]:N,P=[S,{},!1];return P.t=S,P.i18n={},P.ready=!1,P}(x=u.options.react)!=null&&x.wait&&Zc(u,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...j2(),...u.options.react,...n},{useSuspense:p,keyPrefix:s}=a;let h=m||((_=u.options)==null?void 0:_.defaultNS);h=Co(h)?[h]:h||["translation"],(E=(T=u.reportNamespaces).addUsedNamespaces)==null||E.call(T,h);const b=(u.isInitialized||u.initializedStoreOnce)&&h.every(S=>m2(S,u,a)),v=C2(u,n.lng||null,a.nsMode==="fallback"?h:h[0],s),i=()=>v,d=()=>zg(u,n.lng||null,a.nsMode==="fallback"?h:h[0],s),[f,y]=Re.useState(i);let g=h.join();n.lng&&(g=`${n.lng}${g}`);const c=M2(g),l=Re.useRef(!0);Re.useEffect(()=>{const{bindI18n:S,bindI18nStore:P}=a;l.current=!0,!b&&!p&&(n.lng?Ep(u,n.lng,h,()=>{l.current&&y(d)}):Jc(u,h,()=>{l.current&&y(d)})),b&&c&&c!==g&&l.current&&y(d);const N=()=>{l.current&&y(d)};return S&&(u==null||u.on(S,N)),P&&(u==null||u.store.on(P,N)),()=>{l.current=!1,u&&S&&(S==null||S.split(" ").forEach(C=>u.off(C,N))),P&&u&&P.split(" ").forEach(C=>u.store.off(C,N))}},[u,g]),Re.useEffect(()=>{l.current&&b&&y(i)},[u,s,b]);const w=[f,u,b];if(w.t=f,w.i18n=u,w.ready=b,b||!b&&!p)return w;throw new Promise(S=>{n.lng?Ep(u,n.lng,h,()=>S()):Jc(u,h,()=>S())})},O2=()=>{const{t:r}=lf(),n=Rs(),[o,t]=Re.useState(!1),{status:m,slots:u,createSlot:a}=Mr(s=>({status:s.status,slots:s.slots,createSlot:s.createSlot})),p=Re.useCallback(async s=>{if(s.preventDefault(),!o){t(!0);try{u.length||await a(),n("/lobby")}catch(h){console.error("Unable to start demo",h)}finally{t(!1)}}},[a,o,n,u.length]);return H.jsxs("div",{className:"relative min-h-screen overflow-hidden text-white",children:[H.jsxs("div",{className:"absolute inset-0 -z-10",children:[H.jsx("div",{className:"absolute inset-0 bg-[url('/assets/lobby/sfondo_lobby.png')] bg-cover bg-center blur"}),H.jsx("div",{className:"absolute inset-0 bg-black/70"})]}),H.jsxs("div",{className:"relative z-10 mx-auto flex min-h-screen w-full max-w-[960px] flex-col items-center justify-center gap-12 px-6 py-12 text-center",children:[H.jsxs("div",{children:[H.jsx("p",{className:"text-sm uppercase tracking-[0.4em] text-white/60",children:m==="loading"?"Caricamento dati...":"Benvenuto"}),H.jsx("h1",{className:"mt-2 text-6xl font-display uppercase tracking-[0.6em] text-white drop-shadow",children:r("menu.title")})]}),H.jsxs("nav",{className:"flex w-full max-w-xs flex-col gap-4",children:[H.jsx(Vr,{to:"/lobby",onClick:p,className:"rounded-full border border-[#a67c52] bg-[#a67c52] px-6 py-3 text-lg font-semibold uppercase tracking-widest text-white transition hover:-translate-y-1 hover:bg-[#8b5e34] hover:border-[#8b5e34]",children:r("menu.play")}),H.jsx(Vr,{to:"/saves",className:"rounded-full border border-white/30 px-6 py-3 text-lg font-semibold uppercase tracking-widest transition hover:-translate-y-1 hover:border-[#a67c52] hover:text-[#a67c52]",children:r("menu.saves")}),H.jsx("br",{}),H.jsx(Vr,{to:"/settings",className:"rounded-full border border-white/30 px-6 py-3 text-lg font-semibold uppercase tracking-widest transition hover:-translate-y-1 hover:border-[#a67c52] hover:text-[#a67c52]",children:r("menu.settings")}),H.jsx(Vr,{to:"/credits",className:"rounded-full border border-white/30 px-6 py-3 text-lg font-semibold uppercase tracking-widest transition hover:-translate-y-1 hover:border-[#a67c52] hover:text-[#a67c52]",children:r("menu.credits")})]})]})]})},P2={};function L2(r,n){let o;try{o=r()}catch{return}return{getItem:m=>{var u;const a=s=>s===null?null:JSON.parse(s,void 0),p=(u=o.getItem(m))!=null?u:null;return p instanceof Promise?p.then(a):a(p)},setItem:(m,u)=>o.setItem(m,JSON.stringify(u,void 0)),removeItem:m=>o.removeItem(m)}}const za=r=>n=>{try{const o=r(n);return o instanceof Promise?o:{then(t){return za(t)(o)},catch(t){return this}}}catch(o){return{then(t){return this},catch(t){return za(t)(o)}}}},N2=(r,n)=>(o,t,m)=>{let u={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:g=>g,version:0,merge:(g,c)=>({...c,...g}),...n},a=!1;const p=new Set,s=new Set;let h;try{h=u.getStorage()}catch{}if(!h)return r((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${u.name}', the given storage is currently unavailable.`),o(...g)},t,m);const b=za(u.serialize),v=()=>{const g=u.partialize({...t()});let c;const l=b({state:g,version:u.version}).then(w=>h.setItem(u.name,w)).catch(w=>{c=w});if(c)throw c;return l},i=m.setState;m.setState=(g,c)=>{i(g,c),v()};const d=r((...g)=>{o(...g),v()},t,m);let f;const y=()=>{var g;if(!h)return;a=!1,p.forEach(l=>l(t()));const c=((g=u.onRehydrateStorage)==null?void 0:g.call(u,t()))||void 0;return za(h.getItem.bind(h))(u.name).then(l=>{if(l)return u.deserialize(l)}).then(l=>{if(l)if(typeof l.version=="number"&&l.version!==u.version){if(u.migrate)return u.migrate(l.state,l.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return l.state}).then(l=>{var w;return f=u.merge(l,(w=t())!=null?w:d),o(f,!0),v()}).then(()=>{c==null||c(f,void 0),a=!0,s.forEach(l=>l(f))}).catch(l=>{c==null||c(void 0,l)})};return m.persist={setOptions:g=>{u={...u,...g},g.getStorage&&(h=g.getStorage())},clearStorage:()=>{h==null||h.removeItem(u.name)},getOptions:()=>u,rehydrate:()=>y(),hasHydrated:()=>a,onHydrate:g=>(p.add(g),()=>{p.delete(g)}),onFinishHydration:g=>(s.add(g),()=>{s.delete(g)})},y(),f||d},R2=(r,n)=>(o,t,m)=>{let u={storage:L2(()=>localStorage),partialize:y=>y,version:0,merge:(y,g)=>({...g,...y}),...n},a=!1;const p=new Set,s=new Set;let h=u.storage;if(!h)return r((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${u.name}', the given storage is currently unavailable.`),o(...y)},t,m);const b=()=>{const y=u.partialize({...t()});return h.setItem(u.name,{state:y,version:u.version})},v=m.setState;m.setState=(y,g)=>{v(y,g),b()};const i=r((...y)=>{o(...y),b()},t,m);m.getInitialState=()=>i;let d;const f=()=>{var y,g;if(!h)return;a=!1,p.forEach(l=>{var w;return l((w=t())!=null?w:i)});const c=((g=u.onRehydrateStorage)==null?void 0:g.call(u,(y=t())!=null?y:i))||void 0;return za(h.getItem.bind(h))(u.name).then(l=>{if(l)if(typeof l.version=="number"&&l.version!==u.version){if(u.migrate)return[!0,u.migrate(l.state,l.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,l.state];return[!1,void 0]}).then(l=>{var w;const[x,_]=l;if(d=u.merge(_,(w=t())!=null?w:i),o(d,!0),x)return b()}).then(()=>{c==null||c(d,void 0),d=t(),a=!0,s.forEach(l=>l(d))}).catch(l=>{c==null||c(void 0,l)})};return m.persist={setOptions:y=>{u={...u,...y},y.storage&&(h=y.storage)},clearStorage:()=>{h==null||h.removeItem(u.name)},getOptions:()=>u,rehydrate:()=>f(),hasHydrated:()=>a,onHydrate:y=>(p.add(y),()=>{p.delete(y)}),onFinishHydration:y=>(s.add(y),()=>{s.delete(y)})},u.skipHydration||f(),d||i},A2=(r,n)=>"getStorage"in n||"serialize"in n||"deserialize"in n?((P2?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),N2(r,n)):R2(r,n),I2=A2,D2={language:"it",audio:{sfx:70,music:60},ui:{reducedMotion:!1},setLanguage:()=>{},setAudio:()=>{},toggleReducedMotion:()=>{}},Gg=Og()(I2(r=>({...D2,setLanguage:n=>r(o=>({language:n,audio:o.audio,ui:o.ui})),setAudio:n=>r(o=>({audio:{...o.audio,...n}})),toggleReducedMotion:()=>r(n=>({ui:{...n.ui,reducedMotion:!n.ui.reducedMotion}}))}),{name:"gc:settings"})),F2=[{value:"it",label:"Italiano"},{value:"en",label:"English"}],U2=()=>{const{t:r,i18n:n}=lf(),{language:o,audio:t,ui:m,setLanguage:u,setAudio:a,toggleReducedMotion:p}=Gg(),s=h=>{const b=h.target.value;u(b),n.changeLanguage(b)};return H.jsxs("div",{className:"relative min-h-screen overflow-hidden text-white",children:[H.jsxs("div",{className:"absolute inset-0 -z-10",children:[H.jsx("div",{className:"absolute inset-0 bg-[url('/assets/lobby/sfondo_lobby.png')] bg-cover bg-center blur"}),H.jsx("div",{className:"absolute inset-0 bg-black/70"})]}),H.jsxs("div",{className:"relative z-10 mx-auto flex min-h-screen w-full max-w-3xl flex-col gap-8 px-6 py-12",children:[H.jsxs("header",{className:"flex items-center justify-between gap-4",children:[H.jsx("h2",{className:"text-3xl font-display uppercase tracking-[0.4em]",children:r("settings.title")}),H.jsx(Vr,{to:"/",className:"rounded-full border border-white/30 px-4 py-2 text-sm uppercase tracking-widest transition hover:border-[#a67c52] hover:text-[#a67c52]",children:r("settings.back")})]}),H.jsxs("section",{className:"rounded-2xl border border-white/10 bg-white/10 p-5 backdrop-blur-sm transition hover:bg-white/20",children:[H.jsx("h3",{className:"text-sm uppercase tracking-[0.4em] text-white/60",children:"Audio"}),H.jsxs("div",{className:"mt-4 space-y-3",children:[H.jsxs("label",{className:"flex items-center justify-between gap-4 text-sm text-white/80",children:[H.jsx("span",{children:"SFX"}),H.jsx("input",{type:"range",min:0,max:100,value:t.sfx,onChange:h=>a({sfx:Number(h.target.value)}),className:"w-64 accent-[#a67c52]"})]}),H.jsxs("label",{className:"flex items-center justify-between gap-4 text-sm text-white/80",children:[H.jsx("span",{children:"Musica"}),H.jsx("input",{type:"range",min:0,max:100,value:t.music,onChange:h=>a({music:Number(h.target.value)}),className:"w-64 accent-[#a67c52]"})]})]})]}),H.jsxs("section",{className:"rounded-2xl border border-white/10 bg-white/10 p-5 backdrop-blur-sm transition hover:bg-white/20",children:[H.jsx("h3",{className:"text-sm uppercase tracking-[0.4em] text-white/60",children:"Lingua"}),H.jsx("select",{value:o,onChange:s,className:"mt-4 w-full rounded-lg border border-white/20 bg-black/60 px-4 py-2 text-white focus:border-[#a67c52] focus:outline-none",children:F2.map(h=>H.jsx("option",{value:h.value,className:"bg-background text-white",children:h.label},h.value))})]}),H.jsxs("section",{className:"rounded-2xl border border-white/10 bg-white/10 p-5 backdrop-blur-sm transition hover:bg-white/20",children:[H.jsx("h3",{className:"text-sm uppercase tracking-[0.4em] text-white/60",children:"Accessibilit"}),H.jsxs("label",{className:"mt-3 flex items-center justify-between text-sm text-white/80",children:[H.jsx("span",{children:"Riduci animazioni"}),H.jsx("input",{type:"checkbox",checked:m.reducedMotion,onChange:p,className:"h-5 w-5 accent-[#a67c52]"})]})]})]})]})};function sn(r){const n=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&n==="[object Date]"?new r.constructor(+r):typeof r=="number"||n==="[object Number]"||typeof r=="string"||n==="[object String]"?new Date(r):new Date(NaN)}function Do(r,n){return r instanceof Date?new r.constructor(n):new Date(n)}const Vg=6048e5,B2=864e5;let z2={};function Yl(){return z2}function Fo(r,n){var p,s,h,b;const o=Yl(),t=(n==null?void 0:n.weekStartsOn)??((s=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:s.weekStartsOn)??o.weekStartsOn??((b=(h=o.locale)==null?void 0:h.options)==null?void 0:b.weekStartsOn)??0,m=sn(r),u=m.getDay(),a=(u<t?7:0)+u-t;return m.setDate(m.getDate()-a),m.setHours(0,0,0,0),m}function vl(r){return Fo(r,{weekStartsOn:1})}function Hg(r){const n=sn(r),o=n.getFullYear(),t=Do(r,0);t.setFullYear(o+1,0,4),t.setHours(0,0,0,0);const m=vl(t),u=Do(r,0);u.setFullYear(o,0,4),u.setHours(0,0,0,0);const a=vl(u);return n.getTime()>=m.getTime()?o+1:n.getTime()>=a.getTime()?o:o-1}function Tp(r){const n=sn(r);return n.setHours(0,0,0,0),n}function Mp(r){const n=sn(r),o=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return o.setUTCFullYear(n.getFullYear()),+r-+o}function G2(r,n){const o=Tp(r),t=Tp(n),m=+o-Mp(o),u=+t-Mp(t);return Math.round((m-u)/B2)}function V2(r){const n=Hg(r),o=Do(r,0);return o.setFullYear(n,0,4),o.setHours(0,0,0,0),vl(o)}function H2(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function W2(r){if(!H2(r)&&typeof r!="number")return!1;const n=sn(r);return!isNaN(Number(n))}function q2(r){const n=sn(r),o=Do(r,0);return o.setFullYear(n.getFullYear(),0,1),o.setHours(0,0,0,0),o}const $2={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Y2=(r,n,o)=>{let t;const m=$2[r];return typeof m=="string"?t=m:n===1?t=m.one:t=m.other.replace("{{count}}",n.toString()),o!=null&&o.addSuffix?o.comparison&&o.comparison>0?"in "+t:t+" ago":t};function gs(r){return(n={})=>{const o=n.width?String(n.width):r.defaultWidth;return r.formats[o]||r.formats[r.defaultWidth]}}const X2={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},K2={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Q2={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Z2={date:gs({formats:X2,defaultWidth:"full"}),time:gs({formats:K2,defaultWidth:"full"}),dateTime:gs({formats:Q2,defaultWidth:"full"})},J2={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ej=(r,n,o,t)=>J2[r];function pn(r){return(n,o)=>{const t=o!=null&&o.context?String(o.context):"standalone";let m;if(t==="formatting"&&r.formattingValues){const a=r.defaultFormattingWidth||r.defaultWidth,p=o!=null&&o.width?String(o.width):a;m=r.formattingValues[p]||r.formattingValues[a]}else{const a=r.defaultWidth,p=o!=null&&o.width?String(o.width):r.defaultWidth;m=r.values[p]||r.values[a]}const u=r.argumentCallback?r.argumentCallback(n):n;return m[u]}}const tj={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},rj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},nj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},oj={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},sj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},aj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ij=(r,n)=>{const o=Number(r),t=o%100;if(t>20||t<10)switch(t%10){case 1:return o+"st";case 2:return o+"nd";case 3:return o+"rd"}return o+"th"},lj={ordinalNumber:ij,era:pn({values:tj,defaultWidth:"wide"}),quarter:pn({values:rj,defaultWidth:"wide",argumentCallback:r=>r-1}),month:pn({values:nj,defaultWidth:"wide"}),day:pn({values:oj,defaultWidth:"wide"}),dayPeriod:pn({values:sj,defaultWidth:"wide",formattingValues:aj,defaultFormattingWidth:"wide"})};function mn(r){return(n,o={})=>{const t=o.width,m=t&&r.matchPatterns[t]||r.matchPatterns[r.defaultMatchWidth],u=n.match(m);if(!u)return null;const a=u[0],p=t&&r.parsePatterns[t]||r.parsePatterns[r.defaultParseWidth],s=Array.isArray(p)?cj(p,v=>v.test(a)):uj(p,v=>v.test(a));let h;h=r.valueCallback?r.valueCallback(s):s,h=o.valueCallback?o.valueCallback(h):h;const b=n.slice(a.length);return{value:h,rest:b}}}function uj(r,n){for(const o in r)if(Object.prototype.hasOwnProperty.call(r,o)&&n(r[o]))return o}function cj(r,n){for(let o=0;o<r.length;o++)if(n(r[o]))return o}function Wg(r){return(n,o={})=>{const t=n.match(r.matchPattern);if(!t)return null;const m=t[0],u=n.match(r.parsePattern);if(!u)return null;let a=r.valueCallback?r.valueCallback(u[0]):u[0];a=o.valueCallback?o.valueCallback(a):a;const p=n.slice(m.length);return{value:a,rest:p}}}const dj=/^(\d+)(th|st|nd|rd)?/i,fj=/\d+/i,hj={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},pj={any:[/^b/i,/^(a|c)/i]},mj={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},yj={any:[/1/i,/2/i,/3/i,/4/i]},gj={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},vj={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},bj={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},xj={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},wj={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},jj={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},_j={ordinalNumber:Wg({matchPattern:dj,parsePattern:fj,valueCallback:r=>parseInt(r,10)}),era:mn({matchPatterns:hj,defaultMatchWidth:"wide",parsePatterns:pj,defaultParseWidth:"any"}),quarter:mn({matchPatterns:mj,defaultMatchWidth:"wide",parsePatterns:yj,defaultParseWidth:"any",valueCallback:r=>r+1}),month:mn({matchPatterns:gj,defaultMatchWidth:"wide",parsePatterns:vj,defaultParseWidth:"any"}),day:mn({matchPatterns:bj,defaultMatchWidth:"wide",parsePatterns:xj,defaultParseWidth:"any"}),dayPeriod:mn({matchPatterns:wj,defaultMatchWidth:"any",parsePatterns:jj,defaultParseWidth:"any"})},qg={code:"en-US",formatDistance:Y2,formatLong:Z2,formatRelative:ej,localize:lj,match:_j,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Sj(r){const n=sn(r);return G2(n,q2(n))+1}function kj(r){const n=sn(r),o=+vl(n)-+V2(n);return Math.round(o/Vg)+1}function $g(r,n){var b,v,i,d;const o=sn(r),t=o.getFullYear(),m=Yl(),u=(n==null?void 0:n.firstWeekContainsDate)??((v=(b=n==null?void 0:n.locale)==null?void 0:b.options)==null?void 0:v.firstWeekContainsDate)??m.firstWeekContainsDate??((d=(i=m.locale)==null?void 0:i.options)==null?void 0:d.firstWeekContainsDate)??1,a=Do(r,0);a.setFullYear(t+1,0,u),a.setHours(0,0,0,0);const p=Fo(a,n),s=Do(r,0);s.setFullYear(t,0,u),s.setHours(0,0,0,0);const h=Fo(s,n);return o.getTime()>=p.getTime()?t+1:o.getTime()>=h.getTime()?t:t-1}function Ej(r,n){var p,s,h,b;const o=Yl(),t=(n==null?void 0:n.firstWeekContainsDate)??((s=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:s.firstWeekContainsDate)??o.firstWeekContainsDate??((b=(h=o.locale)==null?void 0:h.options)==null?void 0:b.firstWeekContainsDate)??1,m=$g(r,n),u=Do(r,0);return u.setFullYear(m,0,t),u.setHours(0,0,0,0),Fo(u,n)}function Tj(r,n){const o=sn(r),t=+Fo(o,n)-+Ej(o,n);return Math.round(t/Vg)+1}function wt(r,n){const o=r<0?"-":"",t=Math.abs(r).toString().padStart(n,"0");return o+t}const Fn={y(r,n){const o=r.getFullYear(),t=o>0?o:1-o;return wt(n==="yy"?t%100:t,n.length)},M(r,n){const o=r.getMonth();return n==="M"?String(o+1):wt(o+1,2)},d(r,n){return wt(r.getDate(),n.length)},a(r,n){const o=r.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return o.toUpperCase();case"aaa":return o;case"aaaaa":return o[0];case"aaaa":default:return o==="am"?"a.m.":"p.m."}},h(r,n){return wt(r.getHours()%12||12,n.length)},H(r,n){return wt(r.getHours(),n.length)},m(r,n){return wt(r.getMinutes(),n.length)},s(r,n){return wt(r.getSeconds(),n.length)},S(r,n){const o=n.length,t=r.getMilliseconds(),m=Math.trunc(t*Math.pow(10,o-3));return wt(m,n.length)}},$o={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Cp={G:function(r,n,o){const t=r.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return o.era(t,{width:"abbreviated"});case"GGGGG":return o.era(t,{width:"narrow"});case"GGGG":default:return o.era(t,{width:"wide"})}},y:function(r,n,o){if(n==="yo"){const t=r.getFullYear(),m=t>0?t:1-t;return o.ordinalNumber(m,{unit:"year"})}return Fn.y(r,n)},Y:function(r,n,o,t){const m=$g(r,t),u=m>0?m:1-m;if(n==="YY"){const a=u%100;return wt(a,2)}return n==="Yo"?o.ordinalNumber(u,{unit:"year"}):wt(u,n.length)},R:function(r,n){const o=Hg(r);return wt(o,n.length)},u:function(r,n){const o=r.getFullYear();return wt(o,n.length)},Q:function(r,n,o){const t=Math.ceil((r.getMonth()+1)/3);switch(n){case"Q":return String(t);case"QQ":return wt(t,2);case"Qo":return o.ordinalNumber(t,{unit:"quarter"});case"QQQ":return o.quarter(t,{width:"abbreviated",context:"formatting"});case"QQQQQ":return o.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(t,{width:"wide",context:"formatting"})}},q:function(r,n,o){const t=Math.ceil((r.getMonth()+1)/3);switch(n){case"q":return String(t);case"qq":return wt(t,2);case"qo":return o.ordinalNumber(t,{unit:"quarter"});case"qqq":return o.quarter(t,{width:"abbreviated",context:"standalone"});case"qqqqq":return o.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(t,{width:"wide",context:"standalone"})}},M:function(r,n,o){const t=r.getMonth();switch(n){case"M":case"MM":return Fn.M(r,n);case"Mo":return o.ordinalNumber(t+1,{unit:"month"});case"MMM":return o.month(t,{width:"abbreviated",context:"formatting"});case"MMMMM":return o.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(t,{width:"wide",context:"formatting"})}},L:function(r,n,o){const t=r.getMonth();switch(n){case"L":return String(t+1);case"LL":return wt(t+1,2);case"Lo":return o.ordinalNumber(t+1,{unit:"month"});case"LLL":return o.month(t,{width:"abbreviated",context:"standalone"});case"LLLLL":return o.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(t,{width:"wide",context:"standalone"})}},w:function(r,n,o,t){const m=Tj(r,t);return n==="wo"?o.ordinalNumber(m,{unit:"week"}):wt(m,n.length)},I:function(r,n,o){const t=kj(r);return n==="Io"?o.ordinalNumber(t,{unit:"week"}):wt(t,n.length)},d:function(r,n,o){return n==="do"?o.ordinalNumber(r.getDate(),{unit:"date"}):Fn.d(r,n)},D:function(r,n,o){const t=Sj(r);return n==="Do"?o.ordinalNumber(t,{unit:"dayOfYear"}):wt(t,n.length)},E:function(r,n,o){const t=r.getDay();switch(n){case"E":case"EE":case"EEE":return o.day(t,{width:"abbreviated",context:"formatting"});case"EEEEE":return o.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(t,{width:"short",context:"formatting"});case"EEEE":default:return o.day(t,{width:"wide",context:"formatting"})}},e:function(r,n,o,t){const m=r.getDay(),u=(m-t.weekStartsOn+8)%7||7;switch(n){case"e":return String(u);case"ee":return wt(u,2);case"eo":return o.ordinalNumber(u,{unit:"day"});case"eee":return o.day(m,{width:"abbreviated",context:"formatting"});case"eeeee":return o.day(m,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(m,{width:"short",context:"formatting"});case"eeee":default:return o.day(m,{width:"wide",context:"formatting"})}},c:function(r,n,o,t){const m=r.getDay(),u=(m-t.weekStartsOn+8)%7||7;switch(n){case"c":return String(u);case"cc":return wt(u,n.length);case"co":return o.ordinalNumber(u,{unit:"day"});case"ccc":return o.day(m,{width:"abbreviated",context:"standalone"});case"ccccc":return o.day(m,{width:"narrow",context:"standalone"});case"cccccc":return o.day(m,{width:"short",context:"standalone"});case"cccc":default:return o.day(m,{width:"wide",context:"standalone"})}},i:function(r,n,o){const t=r.getDay(),m=t===0?7:t;switch(n){case"i":return String(m);case"ii":return wt(m,n.length);case"io":return o.ordinalNumber(m,{unit:"day"});case"iii":return o.day(t,{width:"abbreviated",context:"formatting"});case"iiiii":return o.day(t,{width:"narrow",context:"formatting"});case"iiiiii":return o.day(t,{width:"short",context:"formatting"});case"iiii":default:return o.day(t,{width:"wide",context:"formatting"})}},a:function(r,n,o){const m=r.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return o.dayPeriod(m,{width:"abbreviated",context:"formatting"});case"aaa":return o.dayPeriod(m,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return o.dayPeriod(m,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(m,{width:"wide",context:"formatting"})}},b:function(r,n,o){const t=r.getHours();let m;switch(t===12?m=$o.noon:t===0?m=$o.midnight:m=t/12>=1?"pm":"am",n){case"b":case"bb":return o.dayPeriod(m,{width:"abbreviated",context:"formatting"});case"bbb":return o.dayPeriod(m,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return o.dayPeriod(m,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(m,{width:"wide",context:"formatting"})}},B:function(r,n,o){const t=r.getHours();let m;switch(t>=17?m=$o.evening:t>=12?m=$o.afternoon:t>=4?m=$o.morning:m=$o.night,n){case"B":case"BB":case"BBB":return o.dayPeriod(m,{width:"abbreviated",context:"formatting"});case"BBBBB":return o.dayPeriod(m,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(m,{width:"wide",context:"formatting"})}},h:function(r,n,o){if(n==="ho"){let t=r.getHours()%12;return t===0&&(t=12),o.ordinalNumber(t,{unit:"hour"})}return Fn.h(r,n)},H:function(r,n,o){return n==="Ho"?o.ordinalNumber(r.getHours(),{unit:"hour"}):Fn.H(r,n)},K:function(r,n,o){const t=r.getHours()%12;return n==="Ko"?o.ordinalNumber(t,{unit:"hour"}):wt(t,n.length)},k:function(r,n,o){let t=r.getHours();return t===0&&(t=24),n==="ko"?o.ordinalNumber(t,{unit:"hour"}):wt(t,n.length)},m:function(r,n,o){return n==="mo"?o.ordinalNumber(r.getMinutes(),{unit:"minute"}):Fn.m(r,n)},s:function(r,n,o){return n==="so"?o.ordinalNumber(r.getSeconds(),{unit:"second"}):Fn.s(r,n)},S:function(r,n){return Fn.S(r,n)},X:function(r,n,o){const t=r.getTimezoneOffset();if(t===0)return"Z";switch(n){case"X":return Pp(t);case"XXXX":case"XX":return xo(t);case"XXXXX":case"XXX":default:return xo(t,":")}},x:function(r,n,o){const t=r.getTimezoneOffset();switch(n){case"x":return Pp(t);case"xxxx":case"xx":return xo(t);case"xxxxx":case"xxx":default:return xo(t,":")}},O:function(r,n,o){const t=r.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Op(t,":");case"OOOO":default:return"GMT"+xo(t,":")}},z:function(r,n,o){const t=r.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Op(t,":");case"zzzz":default:return"GMT"+xo(t,":")}},t:function(r,n,o){const t=Math.trunc(r.getTime()/1e3);return wt(t,n.length)},T:function(r,n,o){const t=r.getTime();return wt(t,n.length)}};function Op(r,n=""){const o=r>0?"-":"+",t=Math.abs(r),m=Math.trunc(t/60),u=t%60;return u===0?o+String(m):o+String(m)+n+wt(u,2)}function Pp(r,n){return r%60===0?(r>0?"-":"+")+wt(Math.abs(r)/60,2):xo(r,n)}function xo(r,n=""){const o=r>0?"-":"+",t=Math.abs(r),m=wt(Math.trunc(t/60),2),u=wt(t%60,2);return o+m+n+u}const Lp=(r,n)=>{switch(r){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},Yg=(r,n)=>{switch(r){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},Mj=(r,n)=>{const o=r.match(/(P+)(p+)?/)||[],t=o[1],m=o[2];if(!m)return Lp(r,n);let u;switch(t){case"P":u=n.dateTime({width:"short"});break;case"PP":u=n.dateTime({width:"medium"});break;case"PPP":u=n.dateTime({width:"long"});break;case"PPPP":default:u=n.dateTime({width:"full"});break}return u.replace("{{date}}",Lp(t,n)).replace("{{time}}",Yg(m,n))},Cj={p:Yg,P:Mj},Oj=/^D+$/,Pj=/^Y+$/,Lj=["D","DD","YY","YYYY"];function Nj(r){return Oj.test(r)}function Rj(r){return Pj.test(r)}function Aj(r,n,o){const t=Ij(r,n,o);if(console.warn(t),Lj.includes(r))throw new RangeError(t)}function Ij(r,n,o){const t=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${n}\`) for formatting ${t} to the input \`${o}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Dj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Fj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Uj=/^'([^]*?)'?$/,Bj=/''/g,zj=/[a-zA-Z]/;function Gj(r,n,o){var b,v,i,d,f,y,g,c;const t=Yl(),m=(o==null?void 0:o.locale)??t.locale??qg,u=(o==null?void 0:o.firstWeekContainsDate)??((v=(b=o==null?void 0:o.locale)==null?void 0:b.options)==null?void 0:v.firstWeekContainsDate)??t.firstWeekContainsDate??((d=(i=t.locale)==null?void 0:i.options)==null?void 0:d.firstWeekContainsDate)??1,a=(o==null?void 0:o.weekStartsOn)??((y=(f=o==null?void 0:o.locale)==null?void 0:f.options)==null?void 0:y.weekStartsOn)??t.weekStartsOn??((c=(g=t.locale)==null?void 0:g.options)==null?void 0:c.weekStartsOn)??0,p=sn(r);if(!W2(p))throw new RangeError("Invalid time value");let s=n.match(Fj).map(l=>{const w=l[0];if(w==="p"||w==="P"){const x=Cj[w];return x(l,m.formatLong)}return l}).join("").match(Dj).map(l=>{if(l==="''")return{isToken:!1,value:"'"};const w=l[0];if(w==="'")return{isToken:!1,value:Vj(l)};if(Cp[w])return{isToken:!0,value:l};if(w.match(zj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:l}});m.localize.preprocessor&&(s=m.localize.preprocessor(p,s));const h={firstWeekContainsDate:u,weekStartsOn:a,locale:m};return s.map(l=>{if(!l.isToken)return l.value;const w=l.value;(!(o!=null&&o.useAdditionalWeekYearTokens)&&Rj(w)||!(o!=null&&o.useAdditionalDayOfYearTokens)&&Nj(w))&&Aj(w,n,String(r));const x=Cp[w[0]];return x(p,w,m.localize,h)}).join("")}function Vj(r){const n=r.match(Uj);return n?n[1].replace(Bj,"'"):r}function Np(r,n,o){const t=Fo(r,o),m=Fo(n,o);return+t==+m}const Hj={lessThanXSeconds:{one:"meno di un secondo",other:"meno di {{count}} secondi"},xSeconds:{one:"un secondo",other:"{{count}} secondi"},halfAMinute:"alcuni secondi",lessThanXMinutes:{one:"meno di un minuto",other:"meno di {{count}} minuti"},xMinutes:{one:"un minuto",other:"{{count}} minuti"},aboutXHours:{one:"circa un'ora",other:"circa {{count}} ore"},xHours:{one:"un'ora",other:"{{count}} ore"},xDays:{one:"un giorno",other:"{{count}} giorni"},aboutXWeeks:{one:"circa una settimana",other:"circa {{count}} settimane"},xWeeks:{one:"una settimana",other:"{{count}} settimane"},aboutXMonths:{one:"circa un mese",other:"circa {{count}} mesi"},xMonths:{one:"un mese",other:"{{count}} mesi"},aboutXYears:{one:"circa un anno",other:"circa {{count}} anni"},xYears:{one:"un anno",other:"{{count}} anni"},overXYears:{one:"pi di un anno",other:"pi di {{count}} anni"},almostXYears:{one:"quasi un anno",other:"quasi {{count}} anni"}},Wj=(r,n,o)=>{let t;const m=Hj[r];return typeof m=="string"?t=m:n===1?t=m.one:t=m.other.replace("{{count}}",n.toString()),o!=null&&o.addSuffix?o.comparison&&o.comparison>0?"tra "+t:t+" fa":t},qj={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},$j={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Yj={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Xj={date:gs({formats:qj,defaultWidth:"full"}),time:gs({formats:$j,defaultWidth:"full"}),dateTime:gs({formats:Yj,defaultWidth:"full"})},uf=["domenica","luned","marted","mercoled","gioved","venerd","sabato"];function Kj(r){switch(r){case 0:return"'domenica scorsa alle' p";default:return"'"+uf[r]+" scorso alle' p"}}function Rp(r){return"'"+uf[r]+" alle' p"}function Qj(r){switch(r){case 0:return"'domenica prossima alle' p";default:return"'"+uf[r]+" prossimo alle' p"}}const Zj={lastWeek:(r,n,o)=>{const t=r.getDay();return Np(r,n,o)?Rp(t):Kj(t)},yesterday:"'ieri alle' p",today:"'oggi alle' p",tomorrow:"'domani alle' p",nextWeek:(r,n,o)=>{const t=r.getDay();return Np(r,n,o)?Rp(t):Qj(t)},other:"P"},Jj=(r,n,o,t)=>{const m=Zj[r];return typeof m=="function"?m(n,o,t):m},e_={narrow:["aC","dC"],abbreviated:["a.C.","d.C."],wide:["avanti Cristo","dopo Cristo"]},t_={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},r_={narrow:["G","F","M","A","M","G","L","A","S","O","N","D"],abbreviated:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],wide:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]},n_={narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],abbreviated:["dom","lun","mar","mer","gio","ven","sab"],wide:["domenica","luned","marted","mercoled","gioved","venerd","sabato"]},o_={narrow:{am:"m.",pm:"p.",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"},abbreviated:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"},wide:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"}},s_={narrow:{am:"m.",pm:"p.",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"},abbreviated:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"},wide:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"}},a_=(r,n)=>{const o=Number(r);return String(o)},i_={ordinalNumber:a_,era:pn({values:e_,defaultWidth:"wide"}),quarter:pn({values:t_,defaultWidth:"wide",argumentCallback:r=>r-1}),month:pn({values:r_,defaultWidth:"wide"}),day:pn({values:n_,defaultWidth:"wide"}),dayPeriod:pn({values:o_,defaultWidth:"wide",formattingValues:s_,defaultFormattingWidth:"wide"})},l_=/^(\d+)()?/i,u_=/\d+/i,c_={narrow:/^(aC|dC)/i,abbreviated:/^(a\.?\s?C\.?|a\.?\s?e\.?\s?v\.?|d\.?\s?C\.?|e\.?\s?v\.?)/i,wide:/^(avanti Cristo|avanti Era Volgare|dopo Cristo|Era Volgare)/i},d_={any:[/^a/i,/^(d|e)/i]},f_={narrow:/^[1234]/i,abbreviated:/^t[1234]/i,wide:/^[1234]()? trimestre/i},h_={any:[/1/i,/2/i,/3/i,/4/i]},p_={narrow:/^[gfmalsond]/i,abbreviated:/^(gen|feb|mar|apr|mag|giu|lug|ago|set|ott|nov|dic)/i,wide:/^(gennaio|febbraio|marzo|aprile|maggio|giugno|luglio|agosto|settembre|ottobre|novembre|dicembre)/i},m_={narrow:[/^g/i,/^f/i,/^m/i,/^a/i,/^m/i,/^g/i,/^l/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ge/i,/^f/i,/^mar/i,/^ap/i,/^mag/i,/^gi/i,/^l/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},y_={narrow:/^[dlmgvs]/i,short:/^(do|lu|ma|me|gi|ve|sa)/i,abbreviated:/^(dom|lun|mar|mer|gio|ven|sab)/i,wide:/^(domenica|luned[i|]|marted[i|]|mercoled[i|]|gioved[i|]|venerd[i|]|sabato)/i},g_={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^g/i,/^v/i,/^s/i],any:[/^d/i,/^l/i,/^ma/i,/^me/i,/^g/i,/^v/i,/^s/i]},v_={narrow:/^(a|m\.|p|mezzanotte|mezzogiorno|(di|del) (mattina|pomeriggio|sera|notte))/i,any:/^([ap]\.?\s?m\.?|mezzanotte|mezzogiorno|(di|del) (mattina|pomeriggio|sera|notte))/i},b_={any:{am:/^a/i,pm:/^p/i,midnight:/^mezza/i,noon:/^mezzo/i,morning:/mattina/i,afternoon:/pomeriggio/i,evening:/sera/i,night:/notte/i}},x_={ordinalNumber:Wg({matchPattern:l_,parsePattern:u_,valueCallback:r=>parseInt(r,10)}),era:mn({matchPatterns:c_,defaultMatchWidth:"wide",parsePatterns:d_,defaultParseWidth:"any"}),quarter:mn({matchPatterns:f_,defaultMatchWidth:"wide",parsePatterns:h_,defaultParseWidth:"any",valueCallback:r=>r+1}),month:mn({matchPatterns:p_,defaultMatchWidth:"wide",parsePatterns:m_,defaultParseWidth:"any"}),day:mn({matchPatterns:y_,defaultMatchWidth:"wide",parsePatterns:g_,defaultParseWidth:"any"}),dayPeriod:mn({matchPatterns:v_,defaultMatchWidth:"any",parsePatterns:b_,defaultParseWidth:"any"})},Xg={code:"it",formatDistance:Wj,formatLong:Xj,formatRelative:Jj,localize:i_,match:x_,options:{weekStartsOn:1,firstWeekContainsDate:4}},w_={it:Xg,en:qg},j_=(r,n)=>{const o=new Date(r),t=w_[n]??Xg;return Gj(o,"dd MMM yyyy HH:mm",{locale:t})},__=()=>{const{t:r}=lf(),n=Gg(_=>_.language),{slots:o,activeSlotId:t,createSlot:m,duplicateSlot:u,loadSlot:a,renameSlot:p,deleteSlot:s,exportSavesSnapshot:h,importSavesFromJson:b}=Mr(_=>({slots:_.slots,activeSlotId:_.activeSlotId,createSlot:_.createSlot,duplicateSlot:_.duplicateSlot,loadSlot:_.loadSlot,renameSlot:_.renameSlot,deleteSlot:_.deleteSlot,exportSavesSnapshot:_.exportSavesSnapshot,importSavesFromJson:_.importSavesFromJson})),[v,i]=Re.useState(null),[d,f]=Re.useState(""),y=Re.useRef(null),g=(_,T)=>{i(_),f(T)},c=_=>{if(!d.trim()){i(null);return}p(_,d.trim()),i(null)},l=()=>{try{const _=h(),T=new Blob([JSON.stringify(_,null,2)],{type:"application/json"}),E=URL.createObjectURL(T),S=document.createElement("a"),P=new Date().toISOString().replace(/[:.]/g,"-");S.href=E,S.download=`door-saves-${P}.json`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(E)}catch(_){console.error("Failed to export saves",_),window.alert(r("saves.exportError","Impossibile esportare i salvataggi."))}},w=()=>{var _;(_=y.current)==null||_.click()},x=async _=>{var E;const T=(E=_.target.files)==null?void 0:E[0];if(T)try{const S=await T.text();b(S),window.alert(r("saves.importSuccess","Salvataggi importati con successo."))}catch(S){console.error("Failed to import saves",S),window.alert(r("saves.importError","File di salvataggio non valido."))}finally{_.target.value=""}};return H.jsxs("div",{className:"relative min-h-screen overflow-hidden text-white",children:[H.jsxs("div",{className:"absolute inset-0 -z-10",children:[H.jsx("div",{className:"absolute inset-0 bg-[url('/assets/lobby/sfondo_lobby.png')] bg-cover bg-center blur"}),H.jsx("div",{className:"absolute inset-0 bg-black/70"})]}),H.jsxs("div",{className:"relative z-10 mx-auto flex min-h-screen w-full max-w-4xl flex-col gap-6 px-6 py-12",children:[H.jsxs("header",{className:"flex items-center justify-between gap-4",children:[H.jsxs("div",{children:[H.jsx("h2",{className:"text-3xl font-display uppercase tracking-[0.4em]",children:r("saves.title","Salvataggi")}),H.jsx("p",{className:"text-sm text-white/60",children:r("saves.subtitle","Gestisci gli slot locali")})]}),H.jsx(Vr,{to:"/",className:"rounded-full border border-white/30 px-4 py-2 text-sm uppercase tracking-widest transition hover:border-[#a67c52] hover:text-[#a67c52]",children:r("settings.back")})]}),H.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[H.jsx("input",{ref:y,type:"file",accept:"application/json",className:"hidden",onChange:x}),H.jsx("button",{type:"button",onClick:l,className:"rounded-full border border-white/30 px-4 py-2 text-sm uppercase tracking-widest text-white transition hover:border-[#a67c52] hover:text-[#a67c52]",children:r("saves.export","Esporta")}),H.jsx("button",{type:"button",onClick:w,className:"rounded-full border border-white/30 px-4 py-2 text-sm uppercase tracking-widest text-white transition hover:border-[#a67c52] hover:text-[#a67c52]",children:r("saves.import","Importa")}),H.jsx("button",{type:"button",onClick:()=>{m()},className:"rounded-full border border-[#a67c52] bg-transparent px-4 py-2 text-sm uppercase tracking-widest text-[#a67c52] transition hover:bg-[#a67c52]/10",children:r("saves.new","Nuovo slot")})]}),H.jsx("ul",{className:"space-y-3",children:o.map(_=>{const T=t===_.id;return H.jsxs("li",{className:`flex items-center justify-between rounded-2xl border px-4 py-3 backdrop-blur-sm transition ${T?"border-[#a67c52] bg-[#a67c52]/15 shadow-lg shadow-[#a67c52]/30":"border-white/10 bg-white/10 hover:bg-white/20"}`,onDoubleClick:()=>g(_.id,_.name),children:[H.jsxs("div",{className:"flex flex-col gap-1 text-sm",children:[v===_.id?H.jsx("input",{value:d,autoFocus:!0,onChange:E=>f(E.target.value),onBlur:()=>c(_.id),onKeyDown:E=>{E.key==="Enter"?c(_.id):E.key==="Escape"&&i(null)},className:"w-56 rounded border border-white/30 bg-black/70 px-3 py-1 text-white focus:border-[#a67c52] focus:outline-none"}):H.jsx("span",{className:"text-base font-semibold text-white",children:_.name}),H.jsx("span",{className:"text-xs uppercase text-white/60",children:j_(_.updatedAt,n)})]}),H.jsxs("div",{className:"flex items-center gap-3",children:[H.jsx("button",{type:"button",onClick:()=>u(_.id),className:"rounded-full border border-white/25 px-3 py-1 text-xs uppercase tracking-widest text-white/80 transition hover:border-[#a67c52] hover:text-[#a67c52]",children:r("saves.duplicate","Duplica")}),T?H.jsx("span",{className:"rounded-full border border-[#a67c52] bg-[#a67c52]/20 px-4 py-1 text-xs uppercase tracking-widest text-[#a67c52]",children:r("saves.activeBadge","Attivo")}):H.jsx("button",{type:"button",onClick:()=>void a(_.id),className:"rounded-full border border-[#a67c52] px-4 py-1 text-xs uppercase tracking-widest text-[#a67c52] transition hover:bg-[#a67c52]/10",children:r("saves.load","Carica")}),H.jsx("button",{type:"button",onClick:()=>s(_.id),className:"rounded-full border border-red-500 px-3 py-1 text-xs uppercase tracking-widest text-red-400 transition hover:bg-red-500/10","aria-label":r("saves.delete","Elimina"),children:""})]})]},_.id)})}),o.length===0?H.jsx("p",{className:"text-center text-sm text-white/60",children:r("saves.empty","Nessun salvataggio disponibile. Creane uno nuovo!")}):null]})]})};function ki(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Kg={exports:{}};/*! p5.js v1.11.10 August 23, 2025 */(function(r,n){(function(o){r.exports=o()})(function(){var o;return function t(m,u,a){function p(b,v){if(!u[b]){if(!m[b]){var i=typeof ki=="function"&&ki;if(!v&&i)return i(b,!0);if(s)return s(b,!0);throw(v=new Error("Cannot find module '"+b+"'")).code="MODULE_NOT_FOUND",v}i=u[b]={exports:{}},m[b][0].call(i.exports,function(d){return p(m[b][1][d]||d)},i,i.exports,t,m,u,a)}return u[b].exports}for(var s=typeof ki=="function"&&ki,h=0;h<a.length;h++)p(a[h]);return p}({1:[function(t,m,u){u.byteLength=function(y){var y=i(y),f=y[0],y=y[1];return 3*(f+y)/4-y},u.toByteArray=function(d){var f,y,c=i(d),g=c[0],c=c[1],l=new s(function(_,T){return 3*(_+T)/4-T}(g,c)),w=0,x=0<c?g-4:g;for(y=0;y<x;y+=4)f=p[d.charCodeAt(y)]<<18|p[d.charCodeAt(y+1)]<<12|p[d.charCodeAt(y+2)]<<6|p[d.charCodeAt(y+3)],l[w++]=f>>16&255,l[w++]=f>>8&255,l[w++]=255&f;return c===2&&(f=p[d.charCodeAt(y)]<<2|p[d.charCodeAt(y+1)]>>4,l[w++]=255&f),c===1&&(f=p[d.charCodeAt(y)]<<10|p[d.charCodeAt(y+1)]<<4|p[d.charCodeAt(y+2)]>>2,l[w++]=f>>8&255,l[w++]=255&f),l},u.fromByteArray=function(d){for(var f,y=d.length,g=y%3,c=[],l=0,w=y-g;l<w;l+=16383)c.push(function(x,_,T){for(var E,S=[],P=_;P<T;P+=3)E=(x[P]<<16&16711680)+(x[P+1]<<8&65280)+(255&x[P+2]),S.push(function(N){return a[N>>18&63]+a[N>>12&63]+a[N>>6&63]+a[63&N]}(E));return S.join("")}(d,l,w<l+16383?w:l+16383));return g==1?(f=d[y-1],c.push(a[f>>2]+a[f<<4&63]+"==")):g==2&&(f=(d[y-2]<<8)+d[y-1],c.push(a[f>>10]+a[f>>4&63]+a[f<<2&63]+"=")),c.join("")};for(var a=[],p=[],s=typeof Uint8Array<"u"?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=0,v=h.length;b<v;++b)a[b]=h[b],p[h.charCodeAt(b)]=b;function i(d){var f=d.length;if(0<f%4)throw new Error("Invalid string. Length must be a multiple of 4");return d=d.indexOf("="),f=(d=d===-1?f:d)===f?0:4-d%4,[d,f]}p[45]=62,p[95]=63},{}],2:[function(t,m,u){},{}],3:[function(t,m,u){},{}],4:[function(t,m,u){(function(i){var p=t("base64-js"),s=t("ieee754"),h=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,b=(u.Buffer=i,u.SlowBuffer=function(M){return+M!=M&&(M=0),i.alloc(+M)},u.INSPECT_MAX_BYTES=50,2147483647);function v(M){if(b<M)throw new RangeError('The value "'+M+'" is invalid for option "size"');return M=new Uint8Array(M),Object.setPrototypeOf(M,i.prototype),M}function i(M,A,z){if(typeof M!="number")return d(M,A,z);if(typeof A=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(M)}function d(M,A,z){if(typeof M=="string"){var $=M,Z=A;if(i.isEncoding(Z=typeof Z=="string"&&Z!==""?Z:"utf8"))return te=0|l($,Z),ie=v(te),ie=($=ie.write($,Z))!==te?ie.slice(0,$):ie;throw new TypeError("Unknown encoding: "+Z)}if(ArrayBuffer.isView(M))return g(M);if(M!=null){if(X(M,ArrayBuffer)||M&&X(M.buffer,ArrayBuffer)){var te=M,$=A,ie=z;if($<0||te.byteLength<$)throw new RangeError('"offset" is outside of buffer bounds');if(te.byteLength<$+(ie||0))throw new RangeError('"length" is outside of buffer bounds');return te=$===void 0&&ie===void 0?new Uint8Array(te):ie===void 0?new Uint8Array(te,$):new Uint8Array(te,$,ie),Object.setPrototypeOf(te,i.prototype),te}if(typeof M=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(Z=M.valueOf&&M.valueOf(),Z!=null&&Z!==M)return i.from(Z,A,z);var he=function(oe){{var ce,fe;if(i.isBuffer(oe))return ce=0|c(oe.length),(fe=v(ce)).length!==0&&oe.copy(fe,0,0,ce),fe}if(oe.length!==void 0)return typeof oe.length!="number"||Q(oe.length)?v(0):g(oe);if(oe.type==="Buffer"&&Array.isArray(oe.data))return g(oe.data)}(M);if(he)return he;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof M[Symbol.toPrimitive]=="function")return i.from(M[Symbol.toPrimitive]("string"),A,z)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M)}function f(M){if(typeof M!="number")throw new TypeError('"size" argument must be of type number');if(M<0)throw new RangeError('The value "'+M+'" is invalid for option "size"')}function y(M){return f(M),v(M<0?0:0|c(M))}function g(M){for(var A=M.length<0?0:0|c(M.length),z=v(A),$=0;$<A;$+=1)z[$]=255&M[$];return z}function c(M){if(b<=M)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b.toString(16)+" bytes");return 0|M}function l(M,A){if(i.isBuffer(M))return M.length;if(ArrayBuffer.isView(M)||X(M,ArrayBuffer))return M.byteLength;if(typeof M!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof M);var z=M.length,$=2<arguments.length&&arguments[2]===!0;if(!$&&z===0)return 0;for(var Z=!1;;)switch(A){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return W(M).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*z;case"hex":return z>>>1;case"base64":return G(M).length;default:if(Z)return $?-1:W(M).length;A=(""+A).toLowerCase(),Z=!0}}function w(M,A,z){var $,Z=!1;if((A=A===void 0||A<0?0:A)>this.length||(z=z===void 0||z>this.length?this.length:z)<=0||(z>>>=0)<=(A>>>=0))return"";for(M=M||"utf8";;)switch(M){case"hex":var te=this,ge=A,ie=z,fe=te.length;(!ie||ie<0||fe<ie)&&(ie=fe);for(var he="",oe=ge=!ge||ge<0?0:ge;oe<ie;++oe)he+=se[te[oe]];return he;case"utf8":case"utf-8":return P(this,A,z);case"ascii":var ce=this,fe=A,ee=z,de="";ee=Math.min(ce.length,ee);for(var ye=fe;ye<ee;++ye)de+=String.fromCharCode(127&ce[ye]);return de;case"latin1":case"binary":var we=this,ge=A,xe=z,ke="";xe=Math.min(we.length,xe);for(var Fe=ge;Fe<xe;++Fe)ke+=String.fromCharCode(we[Fe]);return ke;case"base64":return Me=this,$=z,(Je=A)===0&&$===Me.length?p.fromByteArray(Me):p.fromByteArray(Me.slice(Je,$));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var Me=A,Je=z,We=this.slice(Me,Je),qe="",Xe=0;Xe<We.length;Xe+=2)qe+=String.fromCharCode(We[Xe]+256*We[Xe+1]);return qe;default:if(Z)throw new TypeError("Unknown encoding: "+M);M=(M+"").toLowerCase(),Z=!0}}function x(M,A,z){var $=M[A];M[A]=M[z],M[z]=$}function _(M,A,z,$,Z){if(M.length===0)return-1;if(typeof z=="string"?($=z,z=0):2147483647<z?z=2147483647:z<-2147483648&&(z=-2147483648),(z=(z=Q(z=+z)?Z?0:M.length-1:z)<0?M.length+z:z)>=M.length){if(Z)return-1;z=M.length-1}else if(z<0){if(!Z)return-1;z=0}if(typeof A=="string"&&(A=i.from(A,$)),i.isBuffer(A))return A.length===0?-1:T(M,A,z,$,Z);if(typeof A=="number")return A&=255,typeof Uint8Array.prototype.indexOf=="function"?(Z?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(M,A,z):T(M,[A],z,$,Z);throw new TypeError("val must be string, number or Buffer")}function T(M,A,z,$,Z){var te=1,ie=M.length,he=A.length;if($!==void 0&&(($=String($).toLowerCase())==="ucs2"||$==="ucs-2"||$==="utf16le"||$==="utf-16le")){if(M.length<2||A.length<2)return-1;ie/=te=2,he/=2,z/=2}function oe(ye,we){return te===1?ye[we]:ye.readUInt16BE(we*te)}if(Z)for(var ce=-1,fe=z;fe<ie;fe++)if(oe(M,fe)===oe(A,ce===-1?0:fe-ce)){if(fe-(ce=ce===-1?fe:ce)+1===he)return ce*te}else ce!==-1&&(fe-=fe-ce),ce=-1;else for(fe=z=ie<z+he?ie-he:z;0<=fe;fe--){for(var ee=!0,de=0;de<he;de++)if(oe(M,fe+de)!==oe(A,de)){ee=!1;break}if(ee)return fe}return-1}function E(M,A,z,$){return V(function(Z){for(var te=[],ie=0;ie<Z.length;++ie)te.push(255&Z.charCodeAt(ie));return te}(A),M,z,$)}function S(M,A,z,$){return V(function(Z,te){for(var ie,he,oe=[],ce=0;ce<Z.length&&!((te-=2)<0);++ce)he=Z.charCodeAt(ce),ie=he>>8,he=he%256,oe.push(he),oe.push(ie);return oe}(A,M.length-z),M,z,$)}function P(M,A,z){z=Math.min(M.length,z);for(var $=[],Z=A;Z<z;){var te,ie,he,oe,ce=M[Z],fe=null,ee=239<ce?4:223<ce?3:191<ce?2:1;if(Z+ee<=z)switch(ee){case 1:ce<128&&(fe=ce);break;case 2:(192&(te=M[Z+1]))==128&&127<(oe=(31&ce)<<6|63&te)&&(fe=oe);break;case 3:te=M[Z+1],ie=M[Z+2],(192&te)==128&&(192&ie)==128&&2047<(oe=(15&ce)<<12|(63&te)<<6|63&ie)&&(oe<55296||57343<oe)&&(fe=oe);break;case 4:te=M[Z+1],ie=M[Z+2],he=M[Z+3],(192&te)==128&&(192&ie)==128&&(192&he)==128&&65535<(oe=(15&ce)<<18|(63&te)<<12|(63&ie)<<6|63&he)&&oe<1114112&&(fe=oe)}fe===null?(fe=65533,ee=1):65535<fe&&(fe-=65536,$.push(fe>>>10&1023|55296),fe=56320|1023&fe),$.push(fe),Z+=ee}var de=$,ye=de.length;if(ye<=N)return String.fromCharCode.apply(String,de);for(var we="",ge=0;ge<ye;)we+=String.fromCharCode.apply(String,de.slice(ge,ge+=N));return we}u.kMaxLength=b,(i.TYPED_ARRAY_SUPPORT=function(){try{var M=new Uint8Array(1),A={foo:function(){return 42}};return Object.setPrototypeOf(A,Uint8Array.prototype),Object.setPrototypeOf(M,A),M.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=d,Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function(M,A,z){return A=A,z=z,f(M=M),!(M<=0)&&A!==void 0?typeof z=="string"?v(M).fill(A,z):v(M).fill(A):v(M)},i.allocUnsafe=y,i.allocUnsafeSlow=y,i.isBuffer=function(M){return M!=null&&M._isBuffer===!0&&M!==i.prototype},i.compare=function(M,A){if(X(M,Uint8Array)&&(M=i.from(M,M.offset,M.byteLength)),X(A,Uint8Array)&&(A=i.from(A,A.offset,A.byteLength)),!i.isBuffer(M)||!i.isBuffer(A))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(M===A)return 0;for(var z=M.length,$=A.length,Z=0,te=Math.min(z,$);Z<te;++Z)if(M[Z]!==A[Z]){z=M[Z],$=A[Z];break}return z<$?-1:$<z?1:0},i.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(M,A){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(M.length===0)return i.alloc(0);if(A===void 0)for(Z=A=0;Z<M.length;++Z)A+=M[Z].length;for(var z=i.allocUnsafe(A),$=0,Z=0;Z<M.length;++Z){var te=M[Z];if(X(te,Uint8Array)&&(te=i.from(te)),!i.isBuffer(te))throw new TypeError('"list" argument must be an Array of Buffers');te.copy(z,$),$+=te.length}return z},i.byteLength=l,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var M=this.length;if(M%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var A=0;A<M;A+=2)x(this,A,A+1);return this},i.prototype.swap32=function(){var M=this.length;if(M%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var A=0;A<M;A+=4)x(this,A,A+3),x(this,A+1,A+2);return this},i.prototype.swap64=function(){var M=this.length;if(M%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var A=0;A<M;A+=8)x(this,A,A+7),x(this,A+1,A+6),x(this,A+2,A+5),x(this,A+3,A+4);return this},i.prototype.toLocaleString=i.prototype.toString=function(){var M=this.length;return M===0?"":arguments.length===0?P(this,0,M):w.apply(this,arguments)},i.prototype.equals=function(M){if(i.isBuffer(M))return this===M||i.compare(this,M)===0;throw new TypeError("Argument must be a Buffer")},i.prototype.inspect=function(){var A="",M=u.INSPECT_MAX_BYTES,A=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim();return this.length>M&&(A+=" ... "),"<Buffer "+A+">"},h&&(i.prototype[h]=i.prototype.inspect),i.prototype.compare=function(M,A,z,$,Z){if(X(M,Uint8Array)&&(M=i.from(M,M.offset,M.byteLength)),!i.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof M);if(z===void 0&&(z=M?M.length:0),$===void 0&&($=0),Z===void 0&&(Z=this.length),(A=A===void 0?0:A)<0||z>M.length||$<0||Z>this.length)throw new RangeError("out of range index");if(Z<=$&&z<=A)return 0;if(Z<=$)return-1;if(z<=A)return 1;if(this===M)return 0;for(var te=(Z>>>=0)-($>>>=0),ie=(z>>>=0)-(A>>>=0),he=Math.min(te,ie),oe=this.slice($,Z),ce=M.slice(A,z),fe=0;fe<he;++fe)if(oe[fe]!==ce[fe]){te=oe[fe],ie=ce[fe];break}return te<ie?-1:ie<te?1:0},i.prototype.includes=function(M,A,z){return this.indexOf(M,A,z)!==-1},i.prototype.indexOf=function(M,A,z){return _(this,M,A,z,!0)},i.prototype.lastIndexOf=function(M,A,z){return _(this,M,A,z,!1)},i.prototype.write=function(M,A,z,$){if(A===void 0)$="utf8",z=this.length,A=0;else if(z===void 0&&typeof A=="string")$=A,z=this.length,A=0;else{if(!isFinite(A))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");A>>>=0,isFinite(z)?(z>>>=0,$===void 0&&($="utf8")):($=z,z=void 0)}var Z=this.length-A;if((z===void 0||Z<z)&&(z=Z),0<M.length&&(z<0||A<0)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");$=$||"utf8";for(var te,ie,he,oe=!1;;)switch($){case"hex":var ce=this,fe=M,ee=A,de=z,ye=(ee=Number(ee)||0,ce.length-ee);(!de||ye<(de=Number(de)))&&(de=ye),(ye=fe.length)/2<de&&(de=ye/2);for(var we=0;we<de;++we){var ge=parseInt(fe.substr(2*we,2),16);if(Q(ge))return we;ce[ee+we]=ge}return we;case"utf8":case"utf-8":return ye=A,he=z,V(W(M,(ie=this).length-ye),ie,ye,he);case"ascii":return E(this,M,A,z);case"latin1":case"binary":return E(this,M,A,z);case"base64":return ie=this,he=A,te=z,V(G(M),ie,he,te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,M,A,z);default:if(oe)throw new TypeError("Unknown encoding: "+$);$=(""+$).toLowerCase(),oe=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var N=4096;function C(M,A,z){if(M%1!=0||M<0)throw new RangeError("offset is not uint");if(z<M+A)throw new RangeError("Trying to access beyond buffer length")}function D(M,A,z,$,Z,te){if(!i.isBuffer(M))throw new TypeError('"buffer" argument must be a Buffer instance');if(Z<A||A<te)throw new RangeError('"value" argument is out of bounds');if(z+$>M.length)throw new RangeError("Index out of range")}function L(M,A,z,$){if(z+$>M.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function F(M,A,z,$,Z){return A=+A,z>>>=0,Z||L(M,0,z,4),s.write(M,A,z,$,23,4),z+4}function I(M,A,z,$,Z){return A=+A,z>>>=0,Z||L(M,0,z,8),s.write(M,A,z,$,52,8),z+8}i.prototype.slice=function(M,A){var z=this.length,z=((M=~~M)<0?(M+=z)<0&&(M=0):z<M&&(M=z),(A=A===void 0?z:~~A)<0?(A+=z)<0&&(A=0):z<A&&(A=z),A<M&&(A=M),this.subarray(M,A));return Object.setPrototypeOf(z,i.prototype),z},i.prototype.readUIntLE=function(M,A,z){M>>>=0,A>>>=0,z||C(M,A,this.length);for(var $=this[M],Z=1,te=0;++te<A&&(Z*=256);)$+=this[M+te]*Z;return $},i.prototype.readUIntBE=function(M,A,z){M>>>=0,A>>>=0,z||C(M,A,this.length);for(var $=this[M+--A],Z=1;0<A&&(Z*=256);)$+=this[M+--A]*Z;return $},i.prototype.readUInt8=function(M,A){return M>>>=0,A||C(M,1,this.length),this[M]},i.prototype.readUInt16LE=function(M,A){return M>>>=0,A||C(M,2,this.length),this[M]|this[M+1]<<8},i.prototype.readUInt16BE=function(M,A){return M>>>=0,A||C(M,2,this.length),this[M]<<8|this[M+1]},i.prototype.readUInt32LE=function(M,A){return M>>>=0,A||C(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+16777216*this[M+3]},i.prototype.readUInt32BE=function(M,A){return M>>>=0,A||C(M,4,this.length),16777216*this[M]+(this[M+1]<<16|this[M+2]<<8|this[M+3])},i.prototype.readIntLE=function(M,A,z){M>>>=0,A>>>=0,z||C(M,A,this.length);for(var $=this[M],Z=1,te=0;++te<A&&(Z*=256);)$+=this[M+te]*Z;return(Z*=128)<=$&&($-=Math.pow(2,8*A)),$},i.prototype.readIntBE=function(M,A,z){M>>>=0,A>>>=0,z||C(M,A,this.length);for(var $=A,Z=1,te=this[M+--$];0<$&&(Z*=256);)te+=this[M+--$]*Z;return(Z*=128)<=te&&(te-=Math.pow(2,8*A)),te},i.prototype.readInt8=function(M,A){return M>>>=0,A||C(M,1,this.length),128&this[M]?-1*(255-this[M]+1):this[M]},i.prototype.readInt16LE=function(M,A){return M>>>=0,A||C(M,2,this.length),A=this[M]|this[M+1]<<8,32768&A?4294901760|A:A},i.prototype.readInt16BE=function(M,A){return M>>>=0,A||C(M,2,this.length),A=this[M+1]|this[M]<<8,32768&A?4294901760|A:A},i.prototype.readInt32LE=function(M,A){return M>>>=0,A||C(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},i.prototype.readInt32BE=function(M,A){return M>>>=0,A||C(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},i.prototype.readFloatLE=function(M,A){return M>>>=0,A||C(M,4,this.length),s.read(this,M,!0,23,4)},i.prototype.readFloatBE=function(M,A){return M>>>=0,A||C(M,4,this.length),s.read(this,M,!1,23,4)},i.prototype.readDoubleLE=function(M,A){return M>>>=0,A||C(M,8,this.length),s.read(this,M,!0,52,8)},i.prototype.readDoubleBE=function(M,A){return M>>>=0,A||C(M,8,this.length),s.read(this,M,!1,52,8)},i.prototype.writeUIntLE=function(M,A,z,$){M=+M,A>>>=0,z>>>=0,$||D(this,M,A,z,Math.pow(2,8*z)-1,0);var Z=1,te=0;for(this[A]=255&M;++te<z&&(Z*=256);)this[A+te]=M/Z&255;return A+z},i.prototype.writeUIntBE=function(M,A,z,$){M=+M,A>>>=0,z>>>=0,$||D(this,M,A,z,Math.pow(2,8*z)-1,0);var Z=z-1,te=1;for(this[A+Z]=255&M;0<=--Z&&(te*=256);)this[A+Z]=M/te&255;return A+z},i.prototype.writeUInt8=function(M,A,z){return M=+M,A>>>=0,z||D(this,M,A,1,255,0),this[A]=255&M,A+1},i.prototype.writeUInt16LE=function(M,A,z){return M=+M,A>>>=0,z||D(this,M,A,2,65535,0),this[A]=255&M,this[A+1]=M>>>8,A+2},i.prototype.writeUInt16BE=function(M,A,z){return M=+M,A>>>=0,z||D(this,M,A,2,65535,0),this[A]=M>>>8,this[A+1]=255&M,A+2},i.prototype.writeUInt32LE=function(M,A,z){return M=+M,A>>>=0,z||D(this,M,A,4,4294967295,0),this[A+3]=M>>>24,this[A+2]=M>>>16,this[A+1]=M>>>8,this[A]=255&M,A+4},i.prototype.writeUInt32BE=function(M,A,z){return M=+M,A>>>=0,z||D(this,M,A,4,4294967295,0),this[A]=M>>>24,this[A+1]=M>>>16,this[A+2]=M>>>8,this[A+3]=255&M,A+4},i.prototype.writeIntLE=function(M,A,z,$){M=+M,A>>>=0,$||D(this,M,A,z,($=Math.pow(2,8*z-1))-1,-$);var Z=0,te=1,ie=0;for(this[A]=255&M;++Z<z&&(te*=256);)M<0&&ie===0&&this[A+Z-1]!==0&&(ie=1),this[A+Z]=(M/te>>0)-ie&255;return A+z},i.prototype.writeIntBE=function(M,A,z,$){M=+M,A>>>=0,$||D(this,M,A,z,($=Math.pow(2,8*z-1))-1,-$);var Z=z-1,te=1,ie=0;for(this[A+Z]=255&M;0<=--Z&&(te*=256);)M<0&&ie===0&&this[A+Z+1]!==0&&(ie=1),this[A+Z]=(M/te>>0)-ie&255;return A+z},i.prototype.writeInt8=function(M,A,z){return M=+M,A>>>=0,z||D(this,M,A,1,127,-128),this[A]=255&(M=M<0?255+M+1:M),A+1},i.prototype.writeInt16LE=function(M,A,z){return M=+M,A>>>=0,z||D(this,M,A,2,32767,-32768),this[A]=255&M,this[A+1]=M>>>8,A+2},i.prototype.writeInt16BE=function(M,A,z){return M=+M,A>>>=0,z||D(this,M,A,2,32767,-32768),this[A]=M>>>8,this[A+1]=255&M,A+2},i.prototype.writeInt32LE=function(M,A,z){return M=+M,A>>>=0,z||D(this,M,A,4,2147483647,-2147483648),this[A]=255&M,this[A+1]=M>>>8,this[A+2]=M>>>16,this[A+3]=M>>>24,A+4},i.prototype.writeInt32BE=function(M,A,z){return M=+M,A>>>=0,z||D(this,M,A,4,2147483647,-2147483648),this[A]=(M=M<0?4294967295+M+1:M)>>>24,this[A+1]=M>>>16,this[A+2]=M>>>8,this[A+3]=255&M,A+4},i.prototype.writeFloatLE=function(M,A,z){return F(this,M,A,!0,z)},i.prototype.writeFloatBE=function(M,A,z){return F(this,M,A,!1,z)},i.prototype.writeDoubleLE=function(M,A,z){return I(this,M,A,!0,z)},i.prototype.writeDoubleBE=function(M,A,z){return I(this,M,A,!1,z)},i.prototype.copy=function(M,A,z,$){if(!i.isBuffer(M))throw new TypeError("argument should be a Buffer");if(z=z||0,$||$===0||($=this.length),A>=M.length&&(A=M.length),($=0<$&&$<z?z:$)===z||M.length===0||this.length===0)return 0;if((A=A||0)<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("sourceEnd out of bounds");$>this.length&&($=this.length);var Z=($=M.length-A<$-z?M.length-A+z:$)-z;if(this===M&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(A,z,$);else if(this===M&&z<A&&A<$)for(var te=Z-1;0<=te;--te)M[te+A]=this[te+z];else Uint8Array.prototype.set.call(M,this.subarray(z,$),A);return Z},i.prototype.fill=function(M,A,z,$){if(typeof M=="string"){if(typeof A=="string"?($=A,A=0,z=this.length):typeof z=="string"&&($=z,z=this.length),$!==void 0&&typeof $!="string")throw new TypeError("encoding must be a string");if(typeof $=="string"&&!i.isEncoding($))throw new TypeError("Unknown encoding: "+$);var Z;M.length===1&&(Z=M.charCodeAt(0),($==="utf8"&&Z<128||$==="latin1")&&(M=Z))}else typeof M=="number"?M&=255:typeof M=="boolean"&&(M=Number(M));if(A<0||this.length<A||this.length<z)throw new RangeError("Out of range index");var te;if(!(z<=A))if(A>>>=0,z=z===void 0?this.length:z>>>0,typeof(M=M||0)=="number")for(te=A;te<z;++te)this[te]=M;else{var ie=i.isBuffer(M)?M:i.from(M,$),he=ie.length;if(he===0)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(te=0;te<z-A;++te)this[te+A]=ie[te%he]}return this};var B=/[^+/0-9A-Za-z-_]/g;function W(M,A){A=A||1/0;for(var z,$=M.length,Z=null,te=[],ie=0;ie<$;++ie){if(55295<(z=M.charCodeAt(ie))&&z<57344){if(!Z){if(56319<z){-1<(A-=3)&&te.push(239,191,189);continue}if(ie+1===$){-1<(A-=3)&&te.push(239,191,189);continue}Z=z;continue}if(z<56320){-1<(A-=3)&&te.push(239,191,189),Z=z;continue}z=65536+(Z-55296<<10|z-56320)}else Z&&-1<(A-=3)&&te.push(239,191,189);if(Z=null,z<128){if(--A<0)break;te.push(z)}else if(z<2048){if((A-=2)<0)break;te.push(z>>6|192,63&z|128)}else if(z<65536){if((A-=3)<0)break;te.push(z>>12|224,z>>6&63|128,63&z|128)}else{if(!(z<1114112))throw new Error("Invalid code point");if((A-=4)<0)break;te.push(z>>18|240,z>>12&63|128,z>>6&63|128,63&z|128)}}return te}function G(M){return p.toByteArray(function(A){if((A=(A=A.split("=")[0]).trim().replace(B,"")).length<2)return"";for(;A.length%4!=0;)A+="=";return A}(M))}function V(M,A,z,$){for(var Z=0;Z<$&&!(Z+z>=A.length||Z>=M.length);++Z)A[Z+z]=M[Z];return Z}function X(M,A){return M instanceof A||M!=null&&M.constructor!=null&&M.constructor.name!=null&&M.constructor.name===A.name}function Q(M){return M!=M}var se=function(){for(var M="0123456789abcdef",A=new Array(256),z=0;z<16;++z)for(var $=16*z,Z=0;Z<16;++Z)A[$+Z]=M[z]+M[Z];return A}()}).call(this,t("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:254}],5:[function(t,m,u){m.exports=function(a){if(typeof a!="function")throw TypeError(String(a)+" is not a function");return a}},{}],6:[function(t,m,u){var a=t("../internals/is-object");m.exports=function(p){if(a(p)||p===null)return p;throw TypeError("Can't set "+String(p)+" as a prototype")}},{"../internals/is-object":75}],7:[function(s,m,u){var a=s("../internals/well-known-symbol"),p=s("../internals/object-create"),s=s("../internals/object-define-property"),h=a("unscopables"),b=Array.prototype;b[h]==null&&s.f(b,h,{configurable:!0,value:p(null)}),m.exports=function(v){b[h][v]=!0}},{"../internals/object-create":91,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],8:[function(t,m,u){var a=t("../internals/string-multibyte").charAt;m.exports=function(p,s,h){return s+(h?a(p,s).length:1)}},{"../internals/string-multibyte":125}],9:[function(t,m,u){m.exports=function(a,p,s){if(a instanceof p)return a;throw TypeError("Incorrect "+(s?s+" ":"")+"invocation")}},{}],10:[function(t,m,u){var a=t("../internals/is-object");m.exports=function(p){if(a(p))return p;throw TypeError(String(p)+" is not an object")}},{"../internals/is-object":75}],11:[function(t,m,u){m.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(L,m,u){function a(I){return v(I)&&i(F,d(I))}var p,s=L("../internals/array-buffer-native"),h=L("../internals/descriptors"),b=L("../internals/global"),v=L("../internals/is-object"),i=L("../internals/has"),d=L("../internals/classof"),f=L("../internals/create-non-enumerable-property"),y=L("../internals/redefine"),g=L("../internals/object-define-property").f,c=L("../internals/object-get-prototype-of"),l=L("../internals/object-set-prototype-of"),N=L("../internals/well-known-symbol"),L=L("../internals/uid"),w=b.Int8Array,x=w&&w.prototype,_=b.Uint8ClampedArray,_=_&&_.prototype,T=w&&c(w),E=x&&c(x),S=Object.prototype,P=S.isPrototypeOf,N=N("toStringTag"),C=L("TYPED_ARRAY_TAG"),D=s&&!!l&&d(b.opera)!=="Opera",L=!1,F={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(p in F)b[p]||(D=!1);if((!D||typeof T!="function"||T===Function.prototype)&&(T=function(){throw TypeError("Incorrect invocation")},D))for(p in F)b[p]&&l(b[p],T);if((!D||!E||E===S)&&(E=T.prototype,D))for(p in F)b[p]&&l(b[p].prototype,E);if(D&&c(_)!==E&&l(_,E),h&&!i(E,N))for(p in L=!0,g(E,N,{get:function(){return v(this)?this[C]:void 0}}),F)b[p]&&f(b[p],C,p);m.exports={NATIVE_ARRAY_BUFFER_VIEWS:D,TYPED_ARRAY_TAG:L&&C,aTypedArray:function(I){if(a(I))return I;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(I){if(l){if(P.call(T,I))return I}else for(var B in F)if(i(F,p)&&(B=b[B],B&&(I===B||P.call(B,I))))return I;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(I,B,W){if(h){if(W)for(var G in F)G=b[G],G&&i(G.prototype,I)&&delete G.prototype[I];E[I]&&!W||y(E,I,!W&&D&&x[I]||B)}},exportTypedArrayStaticMethod:function(I,B,W){var G,V;if(h){if(l){if(W)for(G in F)(V=b[G])&&i(V,I)&&delete V[I];if(T[I]&&!W)return;try{return y(T,I,!W&&D&&w[I]||B)}catch{}}for(G in F)!(V=b[G])||V[I]&&!W||y(V,I,B)}},isView:function(I){return I=d(I),I==="DataView"||i(F,I)},isTypedArray:a,TypedArray:T,TypedArrayPrototype:E}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/uid":147,"../internals/well-known-symbol":150}],13:[function(z,m,u){function a(ee){return[255&ee]}function p(ee){return[255&ee,ee>>8&255]}function s(ee){return[255&ee,ee>>8&255,ee>>16&255,ee>>24&255]}function h(ee){return ee[3]<<24|ee[2]<<16|ee[1]<<8|ee[0]}function b(ee){return te(ee,23,4)}function v(ee){return te(ee,52,8)}function i(ee,de){L(ee[X],de,{get:function(){return B(this)[de]}})}function d(ke,de,xe,we){if(xe=S(xe),ke=B(ke),xe+de>ke.byteLength)throw Z(Q);var ge=B(ke.buffer).bytes,xe=xe+ke.byteOffset,ke=ge.slice(xe,xe+de);return we?ke:ke.reverse()}function f(ee,de,ye,we,ge,xe){if(ye=S(ye),ee=B(ee),ye+de>ee.byteLength)throw Z(Q);for(var ke=B(ee.buffer).bytes,Fe=ye+ee.byteOffset,Me=we(+ge),Je=0;Je<de;Je++)ke[Fe+Je]=Me[xe?Je:de-Je-1]}var y=z("../internals/global"),g=z("../internals/descriptors"),c=z("../internals/array-buffer-native"),l=z("../internals/create-non-enumerable-property"),w=z("../internals/redefine-all"),x=z("../internals/fails"),_=z("../internals/an-instance"),T=z("../internals/to-integer"),E=z("../internals/to-length"),S=z("../internals/to-index"),P=z("../internals/ieee754"),N=z("../internals/object-get-prototype-of"),C=z("../internals/object-set-prototype-of"),D=z("../internals/object-get-own-property-names").f,L=z("../internals/object-define-property").f,F=z("../internals/array-fill"),I=z("../internals/set-to-string-tag"),z=z("../internals/internal-state"),B=z.get,W=z.set,G="ArrayBuffer",V="DataView",X="prototype",Q="Wrong index",se=y[G],M=se,A=y[V],z=A&&A[X],$=Object.prototype,Z=y.RangeError,te=P.pack,ie=P.unpack;if(c){if(!x(function(){se(1)})||!x(function(){new se(-1)})||x(function(){return new se,new se(1.5),new se(NaN),se.name!=G})){for(var he,y=(M=function(ye){return _(this,M),new se(S(ye))})[X]=se[X],oe=D(se),ce=0;oe.length>ce;)(he=oe[ce++])in M||l(M,he,se[he]);y.constructor=M}C&&N(z)!==$&&C(z,$);var P=new A(new M(2)),fe=z.setInt8;P.setInt8(0,2147483648),P.setInt8(1,2147483649),!P.getInt8(0)&&P.getInt8(1)||w(z,{setInt8:function(de,ye){fe.call(this,de,ye<<24>>24)},setUint8:function(de,ye){fe.call(this,de,ye<<24>>24)}},{unsafe:!0})}else M=function(ee){_(this,M,G),ee=S(ee),W(this,{bytes:F.call(new Array(ee),0),byteLength:ee}),g||(this.byteLength=ee)},A=function(ee,ge,ye){_(this,A,V),_(ee,M,V);var we=B(ee).byteLength,ge=T(ge);if(ge<0||we<ge)throw Z("Wrong offset");if(we<ge+(ye=ye===void 0?we-ge:E(ye)))throw Z("Wrong length");W(this,{buffer:ee,byteLength:ye,byteOffset:ge}),g||(this.buffer=ee,this.byteLength=ye,this.byteOffset=ge)},g&&(i(M,"byteLength"),i(A,"buffer"),i(A,"byteLength"),i(A,"byteOffset")),w(A[X],{getInt8:function(ee){return d(this,1,ee)[0]<<24>>24},getUint8:function(ee){return d(this,1,ee)[0]},getInt16:function(ee){return ee=d(this,2,ee,1<arguments.length?arguments[1]:void 0),(ee[1]<<8|ee[0])<<16>>16},getUint16:function(ee){return ee=d(this,2,ee,1<arguments.length?arguments[1]:void 0),ee[1]<<8|ee[0]},getInt32:function(ee){return h(d(this,4,ee,1<arguments.length?arguments[1]:void 0))},getUint32:function(ee){return h(d(this,4,ee,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(ee){return ie(d(this,4,ee,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(ee){return ie(d(this,8,ee,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(ee,de){f(this,1,ee,a,de)},setUint8:function(ee,de){f(this,1,ee,a,de)},setInt16:function(ee,de){f(this,2,ee,p,de,2<arguments.length?arguments[2]:void 0)},setUint16:function(ee,de){f(this,2,ee,p,de,2<arguments.length?arguments[2]:void 0)},setInt32:function(ee,de){f(this,4,ee,s,de,2<arguments.length?arguments[2]:void 0)},setUint32:function(ee,de){f(this,4,ee,s,de,2<arguments.length?arguments[2]:void 0)},setFloat32:function(ee,de){f(this,4,ee,b,de,2<arguments.length?arguments[2]:void 0)},setFloat64:function(ee,de){f(this,8,ee,v,de,2<arguments.length?arguments[2]:void 0)}});I(M,G),I(A,V),m.exports={ArrayBuffer:M,DataView:A}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/ieee754":66,"../internals/internal-state":71,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/to-index":135,"../internals/to-integer":137,"../internals/to-length":138}],14:[function(t,m,u){var a=t("../internals/to-object"),p=t("../internals/to-absolute-index"),s=t("../internals/to-length"),h=Math.min;m.exports=[].copyWithin||function(g,v){var i=a(this),d=s(i.length),f=p(g,d),y=p(v,d),g=2<arguments.length?arguments[2]:void 0,c=h((g===void 0?d:p(g,d))-y,d-f),l=1;for(y<f&&f<y+c&&(l=-1,y+=c-1,f+=c-1);0<c--;)y in i?i[f]=i[y]:delete i[f],f+=l,y+=l;return i}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],15:[function(t,m,u){var a=t("../internals/to-object"),p=t("../internals/to-absolute-index"),s=t("../internals/to-length");m.exports=function(h){for(var b=a(this),v=s(b.length),d=arguments.length,i=p(1<d?arguments[1]:void 0,v),d=2<d?arguments[2]:void 0,f=d===void 0?v:p(d,v);i<f;)b[i++]=h;return b}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],16:[function(s,m,u){var a=s("../internals/array-iteration").forEach,p=s("../internals/array-method-is-strict"),s=s("../internals/array-method-uses-to-length"),p=p("forEach"),s=s("forEach");m.exports=p&&s?[].forEach:function(h){return a(this,h,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(t,m,u){var a=t("../internals/function-bind-context"),p=t("../internals/to-object"),s=t("../internals/call-with-safe-iteration-closing"),h=t("../internals/is-array-iterator-method"),b=t("../internals/to-length"),v=t("../internals/create-property"),i=t("../internals/get-iterator-method");m.exports=function(_){var f,y,g,c,l,w,x=p(_),_=typeof this=="function"?this:Array,T=arguments.length,E=1<T?arguments[1]:void 0,S=E!==void 0,P=i(x),N=0;if(S&&(E=a(E,2<T?arguments[2]:void 0,2)),P==null||_==Array&&h(P))for(y=new _(f=b(x.length));N<f;N++)w=S?E(x[N],N):x[N],v(y,N,w);else for(l=(c=P.call(x)).next,y=new _;!(g=l.call(c)).done;N++)w=S?s(c,E,[g.value,N],!0):g.value,v(y,N,w);return y.length=N,y}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],18:[function(t,m,u){function a(b){return function(v,i,d){var f,y=p(v),g=s(y.length),c=h(d,g);if(b&&i!=i){for(;c<g;)if((f=y[c++])!=f)return!0}else for(;c<g;c++)if((b||c in y)&&y[c]===i)return b||c||0;return!b&&-1}}var p=t("../internals/to-indexed-object"),s=t("../internals/to-length"),h=t("../internals/to-absolute-index");m.exports={includes:a(!0),indexOf:a(!1)}},{"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138}],19:[function(t,m,u){function a(d){var f=d==1,y=d==2,g=d==3,c=d==4,l=d==6,w=d==5||l;return function(x,_,T,E){for(var S,P,N=h(x),C=s(N),D=p(_,T,3),L=b(C.length),F=0,_=E||v,I=f?_(x,L):y?_(x,0):void 0;F<L;F++)if((w||F in C)&&(P=D(S=C[F],F,N),d)){if(f)I[F]=P;else if(P)switch(d){case 3:return!0;case 5:return S;case 6:return F;case 2:i.call(I,S)}else if(c)return!1}return l?-1:g||c?c:I}}var p=t("../internals/function-bind-context"),s=t("../internals/indexed-object"),h=t("../internals/to-object"),b=t("../internals/to-length"),v=t("../internals/array-species-create"),i=[].push;m.exports={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":55,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],20:[function(d,m,u){var a=d("../internals/to-indexed-object"),p=d("../internals/to-integer"),s=d("../internals/to-length"),i=d("../internals/array-method-is-strict"),d=d("../internals/array-method-uses-to-length"),h=Math.min,b=[].lastIndexOf,v=!!b&&1/[1].lastIndexOf(1,-0)<0,i=i("lastIndexOf"),d=d("indexOf",{ACCESSORS:!0,1:0});m.exports=v||!i||!d?function(f){if(v)return b.apply(this,arguments)||0;var y=a(this),g=s(y.length),c=g-1;for((c=1<arguments.length?h(c,p(arguments[1])):c)<0&&(c=g+c);0<=c;c--)if(c in y&&y[c]===f)return c||0;return-1}:b},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":136,"../internals/to-integer":137,"../internals/to-length":138}],21:[function(t,m,u){var a=t("../internals/fails"),p=t("../internals/well-known-symbol"),s=t("../internals/engine-v8-version"),h=p("species");m.exports=function(b){return 51<=s||!a(function(){var v=[];return(v.constructor={})[h]=function(){return{foo:1}},v[b](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":150}],22:[function(t,m,u){var a=t("../internals/fails");m.exports=function(p,s){var h=[][p];return!!h&&a(function(){h.call(null,s||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(t,m,u){function a(i){throw i}var p=t("../internals/descriptors"),s=t("../internals/fails"),h=t("../internals/has"),b=Object.defineProperty,v={};m.exports=function(i,d){var f,y,g,c;return h(v,i)?v[i]:(f=[][i],y=!!h(d=d||{},"ACCESSORS")&&d.ACCESSORS,g=h(d,0)?d[0]:a,c=h(d,1)?d[1]:void 0,v[i]=!!f&&!s(function(){if(y&&!p)return!0;var l={length:-1};y?b(l,1,{enumerable:!0,get:a}):l[1]=1,f.call(l,g,c)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":61}],24:[function(t,m,u){function a(v){return function(i,d,f,y){p(d);var g=s(i),c=h(g),l=b(g.length),w=v?l-1:0,x=v?-1:1;if(f<2)for(;;){if(w in c){y=c[w],w+=x;break}if(w+=x,v?w<0:l<=w)throw TypeError("Reduce of empty array with no initial value")}for(;v?0<=w:w<l;w+=x)w in c&&(y=d(y,c[w],w,g));return y}}var p=t("../internals/a-function"),s=t("../internals/to-object"),h=t("../internals/indexed-object"),b=t("../internals/to-length");m.exports={left:a(!1),right:a(!0)}},{"../internals/a-function":5,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],25:[function(t,m,u){var a=t("../internals/is-object"),p=t("../internals/is-array"),s=t("../internals/well-known-symbol")("species");m.exports=function(h,b){var v;return new((v=p(h)&&(typeof(v=h.constructor)=="function"&&(v===Array||p(v.prototype))||a(v)&&(v=v[s])===null)?void 0:v)===void 0?Array:v)(b===0?0:b)}},{"../internals/is-array":73,"../internals/is-object":75,"../internals/well-known-symbol":150}],26:[function(t,m,u){var a=t("../internals/an-object");m.exports=function(p,s,h,b){try{return b?s(a(h)[0],h[1]):s(h)}catch(v){throw b=p.return,b!==void 0&&a(b.call(p)),v}}},{"../internals/an-object":10}],27:[function(t,m,u){var a=t("../internals/well-known-symbol")("iterator"),p=!1;try{var s=0,h={next:function(){return{done:!!s++}},return:function(){p=!0}};h[a]=function(){return this},Array.from(h,function(){throw 2})}catch{}m.exports=function(b,v){if(!v&&!p)return!1;var i=!1;try{var d={};d[a]=function(){return{next:function(){return{done:i=!0}}}},b(d)}catch{}return i}},{"../internals/well-known-symbol":150}],28:[function(t,m,u){var a={}.toString;m.exports=function(p){return a.call(p).slice(8,-1)}},{}],29:[function(t,m,u){var a=t("../internals/to-string-tag-support"),p=t("../internals/classof-raw"),s=t("../internals/well-known-symbol")("toStringTag"),h=p(function(){return arguments}())=="Arguments";m.exports=a?p:function(b){var v;return b===void 0?"Undefined":b===null?"Null":typeof(v=function(i,d){try{return i[d]}catch{}}(b=Object(b),s))=="string"?v:h?p(b):(v=p(b))=="Object"&&typeof b.callee=="function"?"Arguments":v}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":143,"../internals/well-known-symbol":150}],30:[function(g,m,u){var a=g("../internals/object-define-property").f,p=g("../internals/object-create"),s=g("../internals/redefine-all"),h=g("../internals/function-bind-context"),b=g("../internals/an-instance"),v=g("../internals/iterate"),i=g("../internals/define-iterator"),d=g("../internals/set-species"),f=g("../internals/descriptors"),y=g("../internals/internal-metadata").fastKey,g=g("../internals/internal-state"),c=g.set,l=g.getterFor;m.exports={getConstructor:function(w,x,_,T){function E(C,D,L){var F,I=N(C),B=S(C,D);return B?B.value=L:(I.last=B={index:F=y(D,!0),key:D,value:L,previous:D=I.last,next:void 0,removed:!1},I.first||(I.first=B),D&&(D.next=B),f?I.size++:C.size++,F!=="F"&&(I.index[F]=B)),C}function S(F,D){var L,F=N(F),I=y(D);if(I!=="F")return F.index[I];for(L=F.first;L;L=L.next)if(L.key==D)return L}var P=w(function(C,D){b(C,P,x),c(C,{type:x,index:p(null),first:void 0,last:void 0,size:0}),f||(C.size=0),D!=null&&v(D,C[T],C,_)}),N=l(x);return s(P.prototype,{clear:function(){for(var C=N(this),D=C.index,L=C.first;L;)L.removed=!0,L.previous&&(L.previous=L.previous.next=void 0),delete D[L.index],L=L.next;C.first=C.last=void 0,f?C.size=0:this.size=0},delete:function(I){var D,L,F=N(this),I=S(this,I);return I&&(D=I.next,L=I.previous,delete F.index[I.index],I.removed=!0,L&&(L.next=D),D&&(D.previous=L),F.first==I&&(F.first=D),F.last==I&&(F.last=L),f?F.size--:this.size--),!!I},forEach:function(C){for(var D,L=N(this),F=h(C,1<arguments.length?arguments[1]:void 0,3);D=D?D.next:L.first;)for(F(D.value,D.key,this);D&&D.removed;)D=D.previous},has:function(C){return!!S(this,C)}}),s(P.prototype,_?{get:function(C){return C=S(this,C),C&&C.value},set:function(C,D){return E(this,C===0?0:C,D)}}:{add:function(C){return E(this,C=C===0?0:C,C)}}),f&&a(P.prototype,"size",{get:function(){return N(this).size}}),P},setStrong:function(w,x,_){var T=x+" Iterator",E=l(x),S=l(T);i(w,x,function(P,N){c(this,{type:T,target:P,state:E(P),kind:N,last:void 0})},function(){for(var P=S(this),N=P.kind,C=P.last;C&&C.removed;)C=C.previous;return P.target&&(P.last=C=C?C.next:P.state.first)?N=="keys"?{value:C.key,done:!1}:N=="values"?{value:C.value,done:!1}:{value:[C.key,C.value],done:!1}:{value:P.target=void 0,done:!0}},_?"entries":"values",!_,!0),d(x)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":55,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/iterate":78,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/redefine-all":109,"../internals/set-species":118}],31:[function(c,m,u){function a(E){return E.frozen||(E.frozen=new p)}function p(){this.entries=[]}function s(E,S){return x(E.entries,function(P){return P[0]===S})}var h=c("../internals/redefine-all"),b=c("../internals/internal-metadata").getWeakData,v=c("../internals/an-object"),i=c("../internals/is-object"),d=c("../internals/an-instance"),f=c("../internals/iterate"),y=c("../internals/array-iteration"),g=c("../internals/has"),c=c("../internals/internal-state"),l=c.set,w=c.getterFor,x=y.find,_=y.findIndex,T=0;p.prototype={get:function(E){if(E=s(this,E),E)return E[1]},has:function(E){return!!s(this,E)},set:function(E,S){var P=s(this,E);P?P[1]=S:this.entries.push([E,S])},delete:function(E){var S=_(this.entries,function(P){return P[0]===E});return~S&&this.entries.splice(S,1),!!~S}},m.exports={getConstructor:function(E,S,P,N){function C(F,I,B){var W=L(F),G=b(v(I),!0);return G===!0?a(W).set(I,B):G[W.id]=B,F}var D=E(function(F,I){d(F,D,S),l(F,{type:S,id:T++,frozen:void 0}),I!=null&&f(I,F[N],F,P)}),L=w(S);return h(D.prototype,{delete:function(F){var I,B=L(this);return!!i(F)&&((I=b(F))===!0?a(B).delete(F):I&&g(I,B.id)&&delete I[B.id])},has:function(F){var I,B=L(this);return!!i(F)&&((I=b(F))===!0?a(B).has(F):I&&g(I,B.id))}}),h(D.prototype,P?{get:function(F){var I,B=L(this);if(i(F))return(I=b(F))===!0?a(B).get(F):I?I[B.id]:void 0},set:function(F,I){return C(this,F,I)}}:{add:function(F){return C(this,F,!0)}}),D}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":61,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine-all":109}],32:[function(t,m,u){var a=t("../internals/export"),p=t("../internals/global"),s=t("../internals/is-forced"),h=t("../internals/redefine"),b=t("../internals/internal-metadata"),v=t("../internals/iterate"),i=t("../internals/an-instance"),d=t("../internals/is-object"),f=t("../internals/fails"),y=t("../internals/check-correctness-of-iteration"),g=t("../internals/set-to-string-tag"),c=t("../internals/inherit-if-required");m.exports=function(l,w,x){function _(G){var V=I[G];h(I,G,G=="add"?function(X){return V.call(this,X===0?0:X),this}:G=="delete"?function(X){return!(D&&!d(X))&&V.call(this,X===0?0:X)}:G=="get"?function(X){return D&&!d(X)?void 0:V.call(this,X===0?0:X)}:G=="has"?function(X){return!(D&&!d(X))&&V.call(this,X===0?0:X)}:function(X,Q){return V.call(this,X===0?0:X,Q),this})}var T,E,S,P,N,C=l.indexOf("Map")!==-1,D=l.indexOf("Weak")!==-1,L=C?"set":"add",F=p[l],I=F&&F.prototype,B=F,W={};return s(l,typeof F!="function"||!(D||I.forEach&&!f(function(){new F().entries().next()})))?(B=x.getConstructor(w,l,C,L),b.REQUIRED=!0):s(l,!0)&&(E=(T=new B)[L](D?{}:-0,1)!=T,S=f(function(){T.has(1)}),P=y(function(G){new F(G)}),N=!D&&f(function(){for(var G=new F,V=5;V--;)G[L](V,V);return!G.has(-0)}),P||(((B=w(function(G,V){return i(G,B,l),G=c(new F,G,B),V!=null&&v(V,G[L],G,C),G})).prototype=I).constructor=B),(S||N)&&(_("delete"),_("has"),C&&_("get")),(N||E)&&_(L),D&&I.clear&&delete I.clear),W[l]=B,a({global:!0,forced:B!=F},W),g(B,l),D||x.setStrong(B,l,C),B}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-metadata":70,"../internals/is-forced":74,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine":110,"../internals/set-to-string-tag":119}],33:[function(t,m,u){var a=t("../internals/has"),p=t("../internals/own-keys"),s=t("../internals/object-get-own-property-descriptor"),h=t("../internals/object-define-property");m.exports=function(b,v){for(var i=p(v),d=h.f,f=s.f,y=0;y<i.length;y++){var g=i[y];a(b,g)||d(b,g,f(v,g))}}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/own-keys":105}],34:[function(t,m,u){var a=t("../internals/well-known-symbol")("match");m.exports=function(p){var s=/./;try{"/./"[p](s)}catch{try{return s[a]=!1,"/./"[p](s)}catch{}}return!1}},{"../internals/well-known-symbol":150}],35:[function(t,m,u){t=t("../internals/fails"),m.exports=!t(function(){function a(){}return a.prototype.constructor=null,Object.getPrototypeOf(new a)!==a.prototype})},{"../internals/fails":51}],36:[function(t,m,u){var a=t("../internals/require-object-coercible"),p=/"/g;m.exports=function(i,h,b,v){var i=String(a(i)),d="<"+h;return b!==""&&(d+=" "+b+'="'+String(v).replace(p,"&quot;")+'"'),d+">"+i+"</"+h+">"}},{"../internals/require-object-coercible":115}],37:[function(t,m,u){function a(){return this}var p=t("../internals/iterators-core").IteratorPrototype,s=t("../internals/object-create"),h=t("../internals/create-property-descriptor"),b=t("../internals/set-to-string-tag"),v=t("../internals/iterators");m.exports=function(i,d,f){return d+=" Iterator",i.prototype=s(p,{next:h(1,f)}),b(i,d,!1,!0),v[d]=a,i}},{"../internals/create-property-descriptor":39,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-create":91,"../internals/set-to-string-tag":119}],38:[function(t,m,u){var a=t("../internals/descriptors"),p=t("../internals/object-define-property"),s=t("../internals/create-property-descriptor");m.exports=a?function(h,b,v){return p.f(h,b,s(1,v))}:function(h,b,v){return h[b]=v,h}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":93}],39:[function(t,m,u){m.exports=function(a,p){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:p}}},{}],40:[function(t,m,u){var a=t("../internals/to-primitive"),p=t("../internals/object-define-property"),s=t("../internals/create-property-descriptor");m.exports=function(h,b,v){b=a(b),b in h?p.f(h,b,s(0,v)):h[b]=v}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":93,"../internals/to-primitive":142}],41:[function(c,m,u){function a(){return this}var p=c("../internals/export"),s=c("../internals/create-iterator-constructor"),h=c("../internals/object-get-prototype-of"),b=c("../internals/object-set-prototype-of"),v=c("../internals/set-to-string-tag"),i=c("../internals/create-non-enumerable-property"),d=c("../internals/redefine"),f=c("../internals/well-known-symbol"),y=c("../internals/is-pure"),g=c("../internals/iterators"),c=c("../internals/iterators-core"),l=c.IteratorPrototype,w=c.BUGGY_SAFARI_ITERATORS,x=f("iterator"),_="values",T="entries";m.exports=function(E,S,P,W,C,D,L){s(P,S,W);function F(M){if(M===C&&Q)return Q;if(!w&&M in V)return V[M];switch(M){case"keys":case _:case T:return function(){return new P(this,M)}}return function(){return new P(this)}}var I,B,W=S+" Iterator",G=!1,V=E.prototype,X=V[x]||V["@@iterator"]||C&&V[C],Q=!w&&X||F(C),se=S=="Array"&&V.entries||X;if(se&&(se=h(se.call(new E)),l!==Object.prototype&&se.next&&(y||h(se)===l||(b?b(se,l):typeof se[x]!="function"&&i(se,x,a)),v(se,W,!0,!0),y&&(g[W]=a))),C==_&&X&&X.name!==_&&(G=!0,Q=function(){return X.call(this)}),y&&!L||V[x]===Q||i(V,x,Q),g[S]=Q,C)if(I={values:F(_),keys:D?Q:F("keys"),entries:F(T)},L)for(B in I)!w&&!G&&B in V||d(V,B,I[B]);else p({target:S,proto:!0,forced:w||G},I);return I}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":76,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150}],42:[function(t,m,u){var a=t("../internals/path"),p=t("../internals/has"),s=t("../internals/well-known-symbol-wrapped"),h=t("../internals/object-define-property").f;m.exports=function(b){var v=a.Symbol||(a.Symbol={});p(v,b)||h(v,b,{value:s.f(b)})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/path":106,"../internals/well-known-symbol-wrapped":149}],43:[function(t,m,u){t=t("../internals/fails"),m.exports=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(p,m,u){var a=p("../internals/global"),p=p("../internals/is-object"),s=a.document,h=p(s)&&p(s.createElement);m.exports=function(b){return h?s.createElement(b):{}}},{"../internals/global":60,"../internals/is-object":75}],45:[function(t,m,u){m.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(t,m,u){t=t("../internals/engine-user-agent"),m.exports=/(iphone|ipod|ipad).*applewebkit/i.test(t)},{"../internals/engine-user-agent":47}],47:[function(t,m,u){t=t("../internals/get-built-in"),m.exports=t("navigator","userAgent")||""},{"../internals/get-built-in":57}],48:[function(s,m,u){var a,p,h=s("../internals/global"),s=s("../internals/engine-user-agent"),h=h.process,h=h&&h.versions,h=h&&h.v8;h?p=(a=h.split("."))[0]+a[1]:s&&(!(a=s.match(/Edge\/(\d+)/))||74<=a[1])&&(a=s.match(/Chrome\/(\d+)/))&&(p=a[1]),m.exports=p&&+p},{"../internals/engine-user-agent":47,"../internals/global":60}],49:[function(t,m,u){m.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(t,m,u){var a=t("../internals/global"),p=t("../internals/object-get-own-property-descriptor").f,s=t("../internals/create-non-enumerable-property"),h=t("../internals/redefine"),b=t("../internals/set-global"),v=t("../internals/copy-constructor-properties"),i=t("../internals/is-forced");m.exports=function(d,f){var y,g,c,l=d.target,w=d.global,x=d.stat,_=w?a:x?a[l]||b(l,{}):(a[l]||{}).prototype;if(_)for(y in f){if(g=f[y],c=d.noTargetGet?(c=p(_,y))&&c.value:_[y],!i(w?y:l+(x?".":"#")+y,d.forced)&&c!==void 0){if(typeof g==typeof c)continue;v(g,c)}(d.sham||c&&c.sham)&&s(g,"sham",!0),h(_,y,g,d)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/is-forced":74,"../internals/object-get-own-property-descriptor":94,"../internals/redefine":110,"../internals/set-global":117}],51:[function(t,m,u){m.exports=function(a){try{return!!a()}catch{return!0}}},{}],52:[function(f,m,u){f("../modules/es.regexp.exec");var a=f("../internals/redefine"),p=f("../internals/fails"),s=f("../internals/well-known-symbol"),h=f("../internals/regexp-exec"),b=f("../internals/create-non-enumerable-property"),v=s("species"),i=!p(function(){var c=/./;return c.exec=function(){var l=[];return l.groups={a:"7"},l},"".replace(c,"$<a>")!=="7"}),d="a".replace(/./,"$0")==="$0",f=s("replace"),y=!!/./[f]&&/./[f]("a","$0")==="",g=!p(function(){var l=/(?:)/,c=l.exec,l=(l.exec=function(){return c.apply(this,arguments)},"ab".split(l));return l.length!==2||l[0]!=="a"||l[1]!=="b"});m.exports=function(c,l,w,x){var _,T,E=s(c),S=!p(function(){var N={};return N[E]=function(){return 7},""[c](N)!=7}),P=S&&!p(function(){var N=!1,C=/a/;return c==="split"&&((C={constructor:{}}).constructor[v]=function(){return C},C.flags="",C[E]=/./[E]),C.exec=function(){return N=!0,null},C[E](""),!N});S&&P&&(c!=="replace"||i&&d&&!y)&&(c!=="split"||g)||(_=/./[E],w=(P=w(E,""[c],function(N,C,D,L,F){return C.exec===h?S&&!F?{done:!0,value:_.call(C,D,L)}:{done:!0,value:N.call(D,C,L)}:{done:!1}},{REPLACE_KEEPS_$0:d,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:y}))[0],T=P[1],a(String.prototype,c,w),a(RegExp.prototype,E,l==2?function(N,C){return T.call(N,this,C)}:function(N){return T.call(N,this)})),x&&b(RegExp.prototype[E],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-exec":112,"../internals/well-known-symbol":150,"../modules/es.regexp.exec":195}],53:[function(t,m,u){function a(b,v,i,d,f,y,g,c){for(var l,w=f,x=0,_=!!g&&h(g,c,3);x<d;){if(x in i){if(l=_?_(i[x],x,v):i[x],0<y&&p(l))w=a(b,v,l,s(l.length),w,y-1)-1;else{if(9007199254740991<=w)throw TypeError("Exceed the acceptable array length");b[w]=l}w++}x++}return w}var p=t("../internals/is-array"),s=t("../internals/to-length"),h=t("../internals/function-bind-context");m.exports=a},{"../internals/function-bind-context":55,"../internals/is-array":73,"../internals/to-length":138}],54:[function(t,m,u){t=t("../internals/fails"),m.exports=!t(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],55:[function(t,m,u){var a=t("../internals/a-function");m.exports=function(p,s,h){if(a(p),s===void 0)return p;switch(h){case 0:return function(){return p.call(s)};case 1:return function(b){return p.call(s,b)};case 2:return function(b,v){return p.call(s,b,v)};case 3:return function(b,v,i){return p.call(s,b,v,i)}}return function(){return p.apply(s,arguments)}}},{"../internals/a-function":5}],56:[function(t,m,u){var a=t("../internals/a-function"),p=t("../internals/is-object"),s=[].slice,h={};m.exports=Function.bind||function(b){var v=a(this),i=s.call(arguments,1),d=function(){var f=i.concat(s.call(arguments));if(this instanceof d){var y=v,g=f.length,c=f;if(!(g in h)){for(var l=[],w=0;w<g;w++)l[w]="a["+w+"]";h[g]=Function("C,a","return new C("+l.join(",")+")")}return h[g](y,c)}return v.apply(b,f)};return p(v.prototype)&&(d.prototype=v.prototype),d}},{"../internals/a-function":5,"../internals/is-object":75}],57:[function(t,m,u){function a(h){return typeof h=="function"?h:void 0}var p=t("../internals/path"),s=t("../internals/global");m.exports=function(h,b){return arguments.length<2?a(p[h])||a(s[h]):p[h]&&p[h][b]||s[h]&&s[h][b]}},{"../internals/global":60,"../internals/path":106}],58:[function(t,m,u){var a=t("../internals/classof"),p=t("../internals/iterators"),s=t("../internals/well-known-symbol")("iterator");m.exports=function(h){if(h!=null)return h[s]||h["@@iterator"]||p[a(h)]}},{"../internals/classof":29,"../internals/iterators":80,"../internals/well-known-symbol":150}],59:[function(t,m,u){var a=t("../internals/an-object"),p=t("../internals/get-iterator-method");m.exports=function(s){var h=p(s);if(typeof h!="function")throw TypeError(String(s)+" is not iterable");return a(h.call(s))}},{"../internals/an-object":10,"../internals/get-iterator-method":58}],60:[function(t,m,u){(function(a){function p(s){return s&&s.Math==Math&&s}m.exports=p(typeof globalThis=="object"&&globalThis)||p(typeof window=="object"&&window)||p(typeof self=="object"&&self)||p(typeof a=="object"&&a)||Function("return this")()}).call(this,typeof ni<"u"?ni:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(t,m,u){var a={}.hasOwnProperty;m.exports=function(p,s){return a.call(p,s)}},{}],62:[function(t,m,u){m.exports={}},{}],63:[function(t,m,u){var a=t("../internals/global");m.exports=function(p,s){var h=a.console;h&&h.error&&(arguments.length===1?h.error(p):h.error(p,s))}},{"../internals/global":60}],64:[function(t,m,u){t=t("../internals/get-built-in"),m.exports=t("document","documentElement")},{"../internals/get-built-in":57}],65:[function(t,m,u){var a=t("../internals/descriptors"),p=t("../internals/fails"),s=t("../internals/document-create-element");m.exports=!a&&!p(function(){return Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],66:[function(t,m,u){var a=Math.abs,p=Math.pow,s=Math.floor,h=Math.log,b=Math.LN2;m.exports={pack:function(v,i,w){var f,y,g,c=new Array(w),l=8*w-i-1,w=(1<<l)-1,x=w>>1,_=i===23?p(2,-24)-p(2,-77):0,T=v<0||v===0&&1/v<0?1:0,E=0;for((v=a(v))!=v||v===1/0?(y=v!=v?1:0,f=w):(f=s(h(v)/b),v*(g=p(2,-f))<1&&(f--,g*=2),2<=(v+=1<=f+x?_/g:_*p(2,1-x))*g&&(f++,g/=2),w<=f+x?(y=0,f=w):1<=f+x?(y=(v*g-1)*p(2,i),f+=x):(y=v*p(2,x-1)*p(2,i),f=0));8<=i;c[E++]=255&y,y/=256,i-=8);for(f=f<<i|y,l+=i;0<l;c[E++]=255&f,f/=256,l-=8);return c[--E]|=128*T,c},unpack:function(v,i){var d,f=v.length,w=8*f-i-1,y=(1<<w)-1,g=y>>1,c=w-7,l=f-1,w=v[l--],x=127&w;for(w>>=7;0<c;x=256*x+v[l],l--,c-=8);for(d=x&(1<<-c)-1,x>>=-c,c+=i;0<c;d=256*d+v[l],l--,c-=8);if(x===0)x=1-g;else{if(x===y)return d?NaN:w?-1/0:1/0;d+=p(2,i),x-=g}return(w?-1:1)*d*p(2,x-i)}}},{}],67:[function(t,m,u){var a=t("../internals/fails"),p=t("../internals/classof-raw"),s="".split;m.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(h){return p(h)=="String"?s.call(h,""):Object(h)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],68:[function(t,m,u){var a=t("../internals/is-object"),p=t("../internals/object-set-prototype-of");m.exports=function(s,h,b){return p&&typeof(h=h.constructor)=="function"&&h!==b&&a(h=h.prototype)&&h!==b.prototype&&p(s,h),s}},{"../internals/is-object":75,"../internals/object-set-prototype-of":102}],69:[function(a,m,u){var a=a("../internals/shared-store"),p=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(s){return p.call(s)}),m.exports=a.inspectSource},{"../internals/shared-store":121}],70:[function(t,m,u){function a(c){b(c,d,{value:{objectID:"O"+ ++f,weakData:{}}})}var p=t("../internals/hidden-keys"),s=t("../internals/is-object"),h=t("../internals/has"),b=t("../internals/object-define-property").f,v=t("../internals/uid"),i=t("../internals/freezing"),d=v("meta"),f=0,y=Object.isExtensible||function(){return!0},g=m.exports={REQUIRED:!1,fastKey:function(c,l){if(!s(c))return typeof c=="symbol"?c:(typeof c=="string"?"S":"P")+c;if(!h(c,d)){if(!y(c))return"F";if(!l)return"E";a(c)}return c[d].objectID},getWeakData:function(c,l){if(!h(c,d)){if(!y(c))return!0;if(!l)return!1;a(c)}return c[d].weakData},onFreeze:function(c){return i&&g.REQUIRED&&y(c)&&!h(c,d)&&a(c),c}};p[d]=!0},{"../internals/freezing":54,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/uid":147}],71:[function(w,m,u){var a,p,s,h,b,v,i,d,f=w("../internals/native-weak-map"),x=w("../internals/global"),y=w("../internals/is-object"),g=w("../internals/create-non-enumerable-property"),c=w("../internals/has"),l=w("../internals/shared-key"),w=w("../internals/hidden-keys"),x=x.WeakMap;i=f?(a=new x,p=a.get,s=a.has,h=a.set,b=function(_,T){return h.call(a,_,T),T},v=function(_){return p.call(a,_)||{}},function(_){return s.call(a,_)}):(w[d=l("state")]=!0,b=function(_,T){return g(_,d,T),T},v=function(_){return c(_,d)?_[d]:{}},function(_){return c(_,d)}),m.exports={set:b,get:v,has:i,enforce:function(_){return i(_)?v(_):b(_,{})},getterFor:function(_){return function(T){if(y(T)&&(T=v(T)).type===_)return T;throw TypeError("Incompatible receiver, "+_+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/shared-key":120}],72:[function(t,m,u){var a=t("../internals/well-known-symbol"),p=t("../internals/iterators"),s=a("iterator"),h=Array.prototype;m.exports=function(b){return b!==void 0&&(p.Array===b||h[s]===b)}},{"../internals/iterators":80,"../internals/well-known-symbol":150}],73:[function(t,m,u){var a=t("../internals/classof-raw");m.exports=Array.isArray||function(p){return a(p)=="Array"}},{"../internals/classof-raw":28}],74:[function(t,m,u){function a(d,f){return(d=b[h(d)])==i||d!=v&&(typeof f=="function"?p(f):!!f)}var p=t("../internals/fails"),s=/#|\.prototype\./,h=a.normalize=function(d){return String(d).replace(s,".").toLowerCase()},b=a.data={},v=a.NATIVE="N",i=a.POLYFILL="P";m.exports=a},{"../internals/fails":51}],75:[function(t,m,u){m.exports=function(a){return typeof a=="object"?a!==null:typeof a=="function"}},{}],76:[function(t,m,u){m.exports=!1},{}],77:[function(t,m,u){var a=t("../internals/is-object"),p=t("../internals/classof-raw"),s=t("../internals/well-known-symbol")("match");m.exports=function(h){var b;return a(h)&&((b=h[s])!==void 0?!!b:p(h)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":75,"../internals/well-known-symbol":150}],78:[function(t,m,u){function a(d,f){this.stopped=d,this.result=f}var p=t("../internals/an-object"),s=t("../internals/is-array-iterator-method"),h=t("../internals/to-length"),b=t("../internals/function-bind-context"),v=t("../internals/get-iterator-method"),i=t("../internals/call-with-safe-iteration-closing");(m.exports=function(d,f,y,g,c){var l,w,x,_,T,E,S=b(f,y,g?2:1);if(c)l=d;else{if(typeof(f=v(d))!="function")throw TypeError("Target is not iterable");if(s(f)){for(w=0,x=h(d.length);w<x;w++)if((_=g?S(p(E=d[w])[0],E[1]):S(d[w]))&&_ instanceof a)return _;return new a(!1)}l=f.call(d)}for(T=l.next;!(E=T.call(l)).done;)if(typeof(_=i(l,S,E.value,g))=="object"&&_&&_ instanceof a)return _;return new a(!1)}).stop=function(d){return new a(!0,d)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138}],79:[function(v,m,u){var a,p,s=v("../internals/object-get-prototype-of"),h=v("../internals/create-non-enumerable-property"),b=v("../internals/has"),i=v("../internals/well-known-symbol"),v=v("../internals/is-pure"),i=i("iterator"),d=!1;[].keys&&("next"in(p=[].keys())?(s=s(s(p)))!==Object.prototype&&(a=s):d=!0),a==null&&(a={}),v||b(a,i)||h(a,i,function(){return this}),m.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:d}},{"../internals/create-non-enumerable-property":38,"../internals/has":61,"../internals/is-pure":76,"../internals/object-get-prototype-of":98,"../internals/well-known-symbol":150}],80:[function(t,m,u){m.exports={}},{}],81:[function(t,m,u){m.exports=Math.sign||function(a){return(a=+a)==0||a!=a?a:a<0?-1:1}},{}],82:[function(g,m,u){var a,p,s,h,b,v,i,d,f=g("../internals/global"),T=g("../internals/object-get-own-property-descriptor").f,_=g("../internals/classof-raw"),y=g("../internals/task").set,g=g("../internals/engine-is-ios"),c=f.MutationObserver||f.WebKitMutationObserver,l=f.process,w=f.Promise,x=_(l)=="process",_=T(f,"queueMicrotask"),T=_&&_.value;T||(a=function(){var E,S;for(x&&(E=l.domain)&&E.exit();p;){S=p.fn,p=p.next;try{S()}catch(P){throw p?h():s=void 0,P}}s=void 0,E&&E.enter()},h=x?function(){l.nextTick(a)}:c&&!g?(b=!0,v=document.createTextNode(""),new c(a).observe(v,{characterData:!0}),function(){v.data=b=!b}):w&&w.resolve?(i=w.resolve(void 0),d=i.then,function(){d.call(i,a)}):function(){y.call(f,a)}),m.exports=T||function(E){E={fn:E,next:void 0},s&&(s.next=E),p||(p=E,h()),s=E}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":60,"../internals/object-get-own-property-descriptor":94,"../internals/task":132}],83:[function(t,m,u){t=t("../internals/global"),m.exports=t.Promise},{"../internals/global":60}],84:[function(t,m,u){t=t("../internals/fails"),m.exports=!!Object.getOwnPropertySymbols&&!t(function(){return!String(Symbol())})},{"../internals/fails":51}],85:[function(t,m,u){var a=t("../internals/fails"),p=t("../internals/well-known-symbol"),s=t("../internals/is-pure"),h=p("iterator");m.exports=!a(function(){var b=new URL("b?a=1&b=2&c=3","http://a"),v=b.searchParams,i="";return b.pathname="c%20d",v.forEach(function(d,f){v.delete("b"),i+=f+d}),s&&!b.toJSON||!v.sort||b.href!=="http://a/c%20d?a=1&c=3"||v.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!v[h]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://").host!=="xn--e1aybc"||new URL("http://a#").hash!=="#%D0%B1"||i!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":76,"../internals/well-known-symbol":150}],86:[function(a,m,u){var p=a("../internals/global"),a=a("../internals/inspect-source"),p=p.WeakMap;m.exports=typeof p=="function"&&/native code/.test(a(p))},{"../internals/global":60,"../internals/inspect-source":69}],87:[function(t,m,u){function a(s){var h,b;this.promise=new s(function(v,i){if(h!==void 0||b!==void 0)throw TypeError("Bad Promise constructor");h=v,b=i}),this.resolve=p(h),this.reject=p(b)}var p=t("../internals/a-function");m.exports.f=function(s){return new a(s)}},{"../internals/a-function":5}],88:[function(t,m,u){var a=t("../internals/is-regexp");m.exports=function(p){if(a(p))throw TypeError("The method doesn't accept regular expressions");return p}},{"../internals/is-regexp":77}],89:[function(t,m,u){var a=t("../internals/global").isFinite;m.exports=Number.isFinite||function(p){return typeof p=="number"&&a(p)}},{"../internals/global":60}],90:[function(t,m,u){var a=t("../internals/descriptors"),p=t("../internals/fails"),s=t("../internals/object-keys"),h=t("../internals/object-get-own-property-symbols"),b=t("../internals/object-property-is-enumerable"),v=t("../internals/to-object"),i=t("../internals/indexed-object"),d=Object.assign,f=Object.defineProperty;m.exports=!d||p(function(){var y,g,c,l;return!(!a||d({b:1},d(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(g={},l="abcdefghijklmnopqrst",(y={})[c=Symbol()]=7,l.split("").forEach(function(w){g[w]=w}),d({},y)[c]!=7||s(d({},g)).join("")!=l)})?function(y,g){for(var c=v(y),l=arguments.length,w=1,x=h.f,_=b.f;w<l;)for(var T,E=i(arguments[w++]),S=x?s(E).concat(x(E)):s(E),P=S.length,N=0;N<P;)T=S[N++],a&&!_.call(E,T)||(c[T]=E[T]);return c}:d},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":67,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-object":139}],91:[function(f,m,u){function a(){}var p,s=f("../internals/an-object"),h=f("../internals/object-define-properties"),b=f("../internals/enum-bug-keys"),v=f("../internals/hidden-keys"),i=f("../internals/html"),d=f("../internals/document-create-element"),f=f("../internals/shared-key"),y="prototype",g="script",c=f("IE_PROTO"),l=function(x){return"<"+g+">"+x+"</"+g+">"},w=function(){try{p=document.domain&&new ActiveXObject("htmlfile")}catch{}w=p?((x=p).write(l("")),x.close(),_=x.parentWindow.Object,x=null,_):(x=d("iframe"),_="java"+g+":",x.style.display="none",i.appendChild(x),x.src=String(_),(_=x.contentWindow.document).open(),_.write(l("document.F=Object")),_.close(),_.F);for(var x,_,T=b.length;T--;)delete w[y][b[T]];return w()};v[c]=!0,m.exports=Object.create||function(x,_){var T;return x!==null?(a[y]=s(x),T=new a,a[y]=null,T[c]=x):T=w(),_===void 0?T:h(T,_)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":62,"../internals/html":64,"../internals/object-define-properties":92,"../internals/shared-key":120}],92:[function(t,m,u){var a=t("../internals/descriptors"),p=t("../internals/object-define-property"),s=t("../internals/an-object"),h=t("../internals/object-keys");m.exports=a?Object.defineProperties:function(b,v){s(b);for(var i,d=h(v),f=d.length,y=0;y<f;)p.f(b,i=d[y++],v[i]);return b}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":93,"../internals/object-keys":100}],93:[function(t,m,u){var a=t("../internals/descriptors"),p=t("../internals/ie8-dom-define"),s=t("../internals/an-object"),h=t("../internals/to-primitive"),b=Object.defineProperty;u.f=a?b:function(v,i,d){if(s(v),i=h(i,!0),s(d),p)try{return b(v,i,d)}catch{}if("get"in d||"set"in d)throw TypeError("Accessors not supported");return"value"in d&&(v[i]=d.value),v}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":65,"../internals/to-primitive":142}],94:[function(t,m,u){var a=t("../internals/descriptors"),p=t("../internals/object-property-is-enumerable"),s=t("../internals/create-property-descriptor"),h=t("../internals/to-indexed-object"),b=t("../internals/to-primitive"),v=t("../internals/has"),i=t("../internals/ie8-dom-define"),d=Object.getOwnPropertyDescriptor;u.f=a?d:function(f,y){if(f=h(f),y=b(y,!0),i)try{return d(f,y)}catch{}if(v(f,y))return s(!p.f.call(f,y),f[y])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":61,"../internals/ie8-dom-define":65,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136,"../internals/to-primitive":142}],95:[function(t,m,u){var a=t("../internals/to-indexed-object"),p=t("../internals/object-get-own-property-names").f,s={}.toString,h=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];m.exports.f=function(b){if(!h||s.call(b)!="[object Window]")return p(a(b));try{return p(b)}catch{return h.slice()}}},{"../internals/object-get-own-property-names":96,"../internals/to-indexed-object":136}],96:[function(t,m,u){var a=t("../internals/object-keys-internal"),p=t("../internals/enum-bug-keys").concat("length","prototype");u.f=Object.getOwnPropertyNames||function(s){return a(s,p)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],97:[function(t,m,u){u.f=Object.getOwnPropertySymbols},{}],98:[function(h,m,u){var a=h("../internals/has"),p=h("../internals/to-object"),s=h("../internals/shared-key"),h=h("../internals/correct-prototype-getter"),b=s("IE_PROTO"),v=Object.prototype;m.exports=h?Object.getPrototypeOf:function(i){return i=p(i),a(i,b)?i[b]:typeof i.constructor=="function"&&i instanceof i.constructor?i.constructor.prototype:i instanceof Object?v:null}},{"../internals/correct-prototype-getter":35,"../internals/has":61,"../internals/shared-key":120,"../internals/to-object":139}],99:[function(t,m,u){var a=t("../internals/has"),p=t("../internals/to-indexed-object"),s=t("../internals/array-includes").indexOf,h=t("../internals/hidden-keys");m.exports=function(b,v){var i,d=p(b),f=0,y=[];for(i in d)!a(h,i)&&a(d,i)&&y.push(i);for(;v.length>f;)!a(d,i=v[f++])||~s(y,i)||y.push(i);return y}},{"../internals/array-includes":18,"../internals/has":61,"../internals/hidden-keys":62,"../internals/to-indexed-object":136}],100:[function(t,m,u){var a=t("../internals/object-keys-internal"),p=t("../internals/enum-bug-keys");m.exports=Object.keys||function(s){return a(s,p)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],101:[function(t,m,u){var a={}.propertyIsEnumerable,p=Object.getOwnPropertyDescriptor,s=p&&!a.call({1:2},1);u.f=s?function(h){return h=p(this,h),!!h&&h.enumerable}:a},{}],102:[function(t,m,u){var a=t("../internals/an-object"),p=t("../internals/a-possible-prototype");m.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var s,h=!1,b={};try{(s=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(b,[]),h=b instanceof Array}catch{}return function(v,i){return a(v),p(i),h?s.call(v,i):v.__proto__=i,v}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],103:[function(t,m,u){function a(v){return function(i){for(var d,f=h(i),y=s(f),g=y.length,c=0,l=[];c<g;)d=y[c++],p&&!b.call(f,d)||l.push(v?[d,f[d]]:f[d]);return l}}var p=t("../internals/descriptors"),s=t("../internals/object-keys"),h=t("../internals/to-indexed-object"),b=t("../internals/object-property-is-enumerable").f;m.exports={entries:a(!0),values:a(!1)}},{"../internals/descriptors":43,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136}],104:[function(t,m,u){var a=t("../internals/to-string-tag-support"),p=t("../internals/classof");m.exports=a?{}.toString:function(){return"[object "+p(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":143}],105:[function(t,m,u){var a=t("../internals/get-built-in"),p=t("../internals/object-get-own-property-names"),s=t("../internals/object-get-own-property-symbols"),h=t("../internals/an-object");m.exports=a("Reflect","ownKeys")||function(b){var v=p.f(h(b)),i=s.f;return i?v.concat(i(b)):v}},{"../internals/an-object":10,"../internals/get-built-in":57,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-symbols":97}],106:[function(t,m,u){t=t("../internals/global"),m.exports=t},{"../internals/global":60}],107:[function(t,m,u){m.exports=function(a){try{return{error:!1,value:a()}}catch(p){return{error:!0,value:p}}}},{}],108:[function(t,m,u){var a=t("../internals/an-object"),p=t("../internals/is-object"),s=t("../internals/new-promise-capability");m.exports=function(h,b){return a(h),p(b)&&b.constructor===h?b:((0,(h=s.f(h)).resolve)(b),h.promise)}},{"../internals/an-object":10,"../internals/is-object":75,"../internals/new-promise-capability":87}],109:[function(t,m,u){var a=t("../internals/redefine");m.exports=function(p,s,h){for(var b in s)a(p,b,s[b],h);return p}},{"../internals/redefine":110}],110:[function(v,m,u){var a=v("../internals/global"),p=v("../internals/create-non-enumerable-property"),s=v("../internals/has"),h=v("../internals/set-global"),b=v("../internals/inspect-source"),v=v("../internals/internal-state"),i=v.get,d=v.enforce,f=String(String).split("String");(m.exports=function(y,g,c,_){var w=!!_&&!!_.unsafe,x=!!_&&!!_.enumerable,_=!!_&&!!_.noTargetGet;typeof c=="function"&&(typeof g!="string"||s(c,"name")||p(c,"name",g),d(c).source=f.join(typeof g=="string"?g:"")),y===a?x?y[g]=c:h(g,c):(w?!_&&y[g]&&(x=!0):delete y[g],x?y[g]=c:p(y,g,c))})(Function.prototype,"toString",function(){return typeof this=="function"&&i(this).source||b(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/set-global":117}],111:[function(t,m,u){var a=t("./classof-raw"),p=t("./regexp-exec");m.exports=function(s,h){var b=s.exec;if(typeof b=="function"){if(b=b.call(s,h),typeof b!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return b}if(a(s)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return p.call(s,h)}},{"./classof-raw":28,"./regexp-exec":112}],112:[function(h,m,u){var a,p,s=h("./regexp-flags"),h=h("./regexp-sticky-helpers"),b=RegExp.prototype.exec,v=String.prototype.replace,i=b,d=(a=/a/,p=/b*/g,b.call(a,"a"),b.call(p,"a"),a.lastIndex!==0||p.lastIndex!==0),f=h.UNSUPPORTED_Y||h.BROKEN_CARET,y=/()??/.exec("")[1]!==void 0;m.exports=i=d||y||f?function(g){var c,l,w,x,_=this,T=f&&_.sticky,E=s.call(_),S=_.source,P=0,N=g;return T&&((E=E.replace("y","")).indexOf("g")===-1&&(E+="g"),N=String(g).slice(_.lastIndex),0<_.lastIndex&&(!_.multiline||_.multiline&&g[_.lastIndex-1]!==`
`)&&(S="(?: "+S+")",N=" "+N,P++),l=new RegExp("^(?:"+S+")",E)),y&&(l=new RegExp("^"+S+"$(?!\\s)",E)),d&&(c=_.lastIndex),w=b.call(T?l:_,N),T?w?(w.input=w.input.slice(P),w[0]=w[0].slice(P),w.index=_.lastIndex,_.lastIndex+=w[0].length):_.lastIndex=0:d&&w&&(_.lastIndex=_.global?w.index+w[0].length:c),y&&w&&1<w.length&&v.call(w[0],l,function(){for(x=1;x<arguments.length-2;x++)arguments[x]===void 0&&(w[x]=void 0)}),w}:i},{"./regexp-flags":113,"./regexp-sticky-helpers":114}],113:[function(t,m,u){var a=t("../internals/an-object");m.exports=function(){var p=a(this),s="";return p.global&&(s+="g"),p.ignoreCase&&(s+="i"),p.multiline&&(s+="m"),p.dotAll&&(s+="s"),p.unicode&&(s+="u"),p.sticky&&(s+="y"),s}},{"../internals/an-object":10}],114:[function(t,m,u){t=t("./fails");function a(p,s){return RegExp(p,s)}u.UNSUPPORTED_Y=t(function(){var p=a("a","y");return p.lastIndex=2,p.exec("abcd")!=null}),u.BROKEN_CARET=t(function(){var p=a("^r","gy");return p.lastIndex=2,p.exec("str")!=null})},{"./fails":51}],115:[function(t,m,u){m.exports=function(a){if(a==null)throw TypeError("Can't call method on "+a);return a}},{}],116:[function(t,m,u){m.exports=Object.is||function(a,p){return a===p?a!==0||1/a==1/p:a!=a&&p!=p}},{}],117:[function(t,m,u){var a=t("../internals/global"),p=t("../internals/create-non-enumerable-property");m.exports=function(s,h){try{p(a,s,h)}catch{a[s]=h}return h}},{"../internals/create-non-enumerable-property":38,"../internals/global":60}],118:[function(t,m,u){var a=t("../internals/get-built-in"),p=t("../internals/object-define-property"),s=t("../internals/well-known-symbol"),h=t("../internals/descriptors"),b=s("species");m.exports=function(i){var i=a(i),d=p.f;h&&i&&!i[b]&&d(i,b,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":57,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],119:[function(t,m,u){var a=t("../internals/object-define-property").f,p=t("../internals/has"),s=t("../internals/well-known-symbol")("toStringTag");m.exports=function(h,b,v){h&&!p(h=v?h:h.prototype,s)&&a(h,s,{configurable:!0,value:b})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],120:[function(t,m,u){var a=t("../internals/shared"),p=t("../internals/uid"),s=a("keys");m.exports=function(h){return s[h]||(s[h]=p(h))}},{"../internals/shared":122,"../internals/uid":147}],121:[function(a,m,u){var s=a("../internals/global"),a=a("../internals/set-global"),p="__core-js_shared__",s=s[p]||a(p,{});m.exports=s},{"../internals/global":60,"../internals/set-global":117}],122:[function(t,m,u){var a=t("../internals/is-pure"),p=t("../internals/shared-store");(m.exports=function(s,h){return p[s]||(p[s]=h!==void 0?h:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":76,"../internals/shared-store":121}],123:[function(t,m,u){var a=t("../internals/an-object"),p=t("../internals/a-function"),s=t("../internals/well-known-symbol")("species");m.exports=function(v,b){var v=a(v).constructor;return v===void 0||(v=a(v)[s])==null?b:p(v)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":150}],124:[function(t,m,u){var a=t("../internals/fails");m.exports=function(p){return a(function(){var s=""[p]('"');return s!==s.toLowerCase()||3<s.split('"').length})}},{"../internals/fails":51}],125:[function(t,m,u){function a(h){return function(d,f){var i,d=String(s(d)),f=p(f),y=d.length;return f<0||y<=f?h?"":void 0:(i=d.charCodeAt(f))<55296||56319<i||f+1===y||(y=d.charCodeAt(f+1))<56320||57343<y?h?d.charAt(f):i:h?d.slice(f,f+2):y-56320+(i-55296<<10)+65536}}var p=t("../internals/to-integer"),s=t("../internals/require-object-coercible");m.exports={codeAt:a(!1),charAt:a(!0)}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],126:[function(t,m,u){t=t("../internals/engine-user-agent"),m.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(t)},{"../internals/engine-user-agent":47}],127:[function(t,m,u){function a(v){return function(y,l,c){var y=String(h(y)),g=y.length,c=c===void 0?" ":String(c),l=p(l);return l<=g||c==""?y:((g=s.call(c,b((l=l-g)/c.length))).length>l&&(g=g.slice(0,l)),v?y+g:g+y)}}var p=t("../internals/to-length"),s=t("../internals/string-repeat"),h=t("../internals/require-object-coercible"),b=Math.ceil;m.exports={start:a(!1),end:a(!0)}},{"../internals/require-object-coercible":115,"../internals/string-repeat":129,"../internals/to-length":138}],128:[function(t,m,u){function a(w){return w+22+75*(w<26)}function p(w){var x,_=[],T=(w=function(X){for(var Q=[],se=0,M=X.length;se<M;){var A,z=X.charCodeAt(se++);55296<=z&&z<=56319&&se<M?(64512&(A=X.charCodeAt(se++)))==56320?Q.push(((1023&z)<<10)+(1023&A)+65536):(Q.push(z),se--):Q.push(z)}return Q}(w)).length,E=128,S=0,P=72;for(L=0;L<w.length;L++)(x=w[L])<128&&_.push(l(x));var N=_.length,C=N;for(N&&_.push("-");C<T;){for(var D=s,L=0;L<w.length;L++)E<=(x=w[L])&&x<D&&(D=x);var F=C+1;if(D-E>c((s-S)/F))throw RangeError(y);for(S+=(D-E)*F,E=D,L=0;L<w.length;L++){if((x=w[L])<E&&++S>s)throw RangeError(y);if(x==E){for(var I=S,B=h;;B+=h){var W=B<=P?1:P+b<=B?b:B-P;if(I<W)break;var G=I-W,V=h-W;_.push(l(a(W+G%V))),I=c(G/V)}_.push(l(a(I))),P=function(X,Q,se){var M=0;for(X=se?c(X/i):X>>1,X+=c(X/Q);g*b>>1<X;M+=h)X=c(X/g);return c(M+(g+1)*X/(X+v))}(S,F,C==N),S=0,++C}}++S,++E}return _.join("")}var s=2147483647,h=36,b=26,v=38,i=700,d=/[^\0-\u007E]/,f=/[.\u3002\uFF0E\uFF61]/g,y="Overflow: input needs wider integers to process",g=h-1,c=Math.floor,l=String.fromCharCode;m.exports=function(w){for(var x,_=[],T=w.toLowerCase().replace(f,".").split("."),E=0;E<T.length;E++)x=T[E],_.push(d.test(x)?"xn--"+p(x):x);return _.join(".")}},{}],129:[function(t,m,u){var a=t("../internals/to-integer"),p=t("../internals/require-object-coercible");m.exports="".repeat||function(s){var h=String(p(this)),b="",v=a(s);if(v<0||v==1/0)throw RangeError("Wrong number of repetitions");for(;0<v;(v>>>=1)&&(h+=h))1&v&&(b+=h);return b}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],130:[function(t,m,u){var a=t("../internals/fails"),p=t("../internals/whitespaces");m.exports=function(s){return a(function(){return!!p[s]()||""[s]()!=""||p[s].name!==s})}},{"../internals/fails":51,"../internals/whitespaces":151}],131:[function(s,m,u){function a(v){return function(i){return i=String(p(i)),1&v&&(i=i.replace(h,"")),i=2&v?i.replace(b,""):i}}var p=s("../internals/require-object-coercible"),s="["+s("../internals/whitespaces")+"]",h=RegExp("^"+s+s+"*"),b=RegExp(s+s+"*$");m.exports={start:a(1),end:a(2),trim:a(3)}},{"../internals/require-object-coercible":115,"../internals/whitespaces":151}],132:[function(g,m,u){function a(C){return function(){N(C)}}function p(C){N(C.data)}function s(C){b.postMessage(C+"",c.protocol+"//"+c.host)}var h,b=g("../internals/global"),v=g("../internals/fails"),i=g("../internals/classof-raw"),d=g("../internals/function-bind-context"),f=g("../internals/html"),y=g("../internals/document-create-element"),g=g("../internals/engine-is-ios"),c=b.location,l=b.setImmediate,w=b.clearImmediate,x=b.process,_=b.MessageChannel,T=b.Dispatch,E=0,S={},P="onreadystatechange",N=function(C){var D;S.hasOwnProperty(C)&&(D=S[C],delete S[C],D())};l&&w||(l=function(C){for(var D=[],L=1;L<arguments.length;)D.push(arguments[L++]);return S[++E]=function(){(typeof C=="function"?C:Function(C)).apply(void 0,D)},h(E),E},w=function(C){delete S[C]},i(x)=="process"?h=function(C){x.nextTick(a(C))}:T&&T.now?h=function(C){T.now(a(C))}:_&&!g?(g=(i=new _).port2,i.port1.onmessage=p,h=d(g.postMessage,g,1)):!b.addEventListener||typeof postMessage!="function"||b.importScripts||v(s)||c.protocol==="file:"?h=P in y("script")?function(C){f.appendChild(y("script"))[P]=function(){f.removeChild(this),N(C)}}:function(C){setTimeout(a(C),0)}:(h=s,b.addEventListener("message",p,!1))),m.exports={set:l,clear:w}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":55,"../internals/global":60,"../internals/html":64}],133:[function(t,m,u){var a=t("../internals/classof-raw");m.exports=function(p){if(typeof p!="number"&&a(p)!="Number")throw TypeError("Incorrect invocation");return+p}},{"../internals/classof-raw":28}],134:[function(t,m,u){var a=t("../internals/to-integer"),p=Math.max,s=Math.min;m.exports=function(h,b){return h=a(h),h<0?p(h+b,0):s(h,b)}},{"../internals/to-integer":137}],135:[function(t,m,u){var a=t("../internals/to-integer"),p=t("../internals/to-length");m.exports=function(h){if(h===void 0)return 0;var h=a(h),b=p(h);if(h!==b)throw RangeError("Wrong length or index");return b}},{"../internals/to-integer":137,"../internals/to-length":138}],136:[function(t,m,u){var a=t("../internals/indexed-object"),p=t("../internals/require-object-coercible");m.exports=function(s){return a(p(s))}},{"../internals/indexed-object":67,"../internals/require-object-coercible":115}],137:[function(t,m,u){var a=Math.ceil,p=Math.floor;m.exports=function(s){return isNaN(s=+s)?0:(0<s?p:a)(s)}},{}],138:[function(t,m,u){var a=t("../internals/to-integer"),p=Math.min;m.exports=function(s){return 0<s?p(a(s),9007199254740991):0}},{"../internals/to-integer":137}],139:[function(t,m,u){var a=t("../internals/require-object-coercible");m.exports=function(p){return Object(a(p))}},{"../internals/require-object-coercible":115}],140:[function(t,m,u){var a=t("../internals/to-positive-integer");m.exports=function(p,s){if(p=a(p),p%s)throw RangeError("Wrong offset");return p}},{"../internals/to-positive-integer":141}],141:[function(t,m,u){var a=t("../internals/to-integer");m.exports=function(p){if(p=a(p),p<0)throw RangeError("The argument can't be less than 0");return p}},{"../internals/to-integer":137}],142:[function(t,m,u){var a=t("../internals/is-object");m.exports=function(p,s){if(!a(p))return p;var h,b;if(s&&typeof(h=p.toString)=="function"&&!a(b=h.call(p))||typeof(h=p.valueOf)=="function"&&!a(b=h.call(p))||!s&&typeof(h=p.toString)=="function"&&!a(b=h.call(p)))return b;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":75}],143:[function(t,m,u){var a={};a[t("../internals/well-known-symbol")("toStringTag")]="z",m.exports=String(a)==="[object z]"},{"../internals/well-known-symbol":150}],144:[function(t,m,u){function a(ge,xe){for(var ke=0,Fe=xe.length,Me=new(ee(ge))(Fe);ke<Fe;)Me[ke]=xe[ke++];return Me}function p(ge,xe){A(ge,xe,{get:function(){return se(this)[xe]}})}function s(ge){return ge instanceof te||(ge=N(ge))=="ArrayBuffer"||ge=="SharedArrayBuffer"}function h(ge,xe){return de(ge)&&typeof xe!="symbol"&&xe in ge&&String(+xe)==String(xe)}function b(ge,xe){return h(ge,xe=S(xe,!0))?w(2,ge[xe]):z(ge,xe)}function v(ge,xe,ke){return!(h(ge,xe=S(xe,!0))&&C(ke)&&P(ke,"value"))||P(ke,"get")||P(ke,"set")||ke.configurable||P(ke,"writable")&&!ke.writable||P(ke,"enumerable")&&!ke.enumerable?A(ge,xe,ke):(ge[xe]=ke.value,ge)}var i=t("../internals/export"),d=t("../internals/global"),f=t("../internals/descriptors"),y=t("../internals/typed-array-constructors-require-wrappers"),g=t("../internals/array-buffer-view-core"),c=t("../internals/array-buffer"),l=t("../internals/an-instance"),w=t("../internals/create-property-descriptor"),x=t("../internals/create-non-enumerable-property"),_=t("../internals/to-length"),T=t("../internals/to-index"),E=t("../internals/to-offset"),S=t("../internals/to-primitive"),P=t("../internals/has"),N=t("../internals/classof"),C=t("../internals/is-object"),D=t("../internals/object-create"),L=t("../internals/object-set-prototype-of"),F=t("../internals/object-get-own-property-names").f,I=t("../internals/typed-array-from"),B=t("../internals/array-iteration").forEach,W=t("../internals/set-species"),G=t("../internals/object-define-property"),V=t("../internals/object-get-own-property-descriptor"),X=t("../internals/internal-state"),Q=t("../internals/inherit-if-required"),se=X.get,M=X.set,A=G.f,z=V.f,$=Math.round,Z=d.RangeError,te=c.ArrayBuffer,ie=c.DataView,he=g.NATIVE_ARRAY_BUFFER_VIEWS,oe=g.TYPED_ARRAY_TAG,ce=g.TypedArray,fe=g.TypedArrayPrototype,ee=g.aTypedArrayConstructor,de=g.isTypedArray,ye="BYTES_PER_ELEMENT",we="Wrong length";f?(he||(V.f=b,G.f=v,p(fe,"buffer"),p(fe,"byteOffset"),p(fe,"byteLength"),p(fe,"length")),i({target:"Object",stat:!0,forced:!he},{getOwnPropertyDescriptor:b,defineProperty:v}),m.exports=function(je,xe,ke){function Fe(Ee,J){A(Ee,J,{get:function(){var ne=this,K=J;return(ne=se(ne)).view[We](K*Me+ne.byteOffset,!0)},set:function(ne){var K=this,ae=J;K=se(K),ke&&(ne=(ne=$(ne))<0?0:255<ne?255:255&ne),K.view[qe](ae*Me+K.byteOffset,ne,!0)},enumerable:!0})}var Me=je.match(/\d+$/)[0]/8,Je=je+(ke?"Clamped":"")+"Array",We="get"+je,qe="set"+je,Xe=d[Je],$e=Xe,je=$e&&$e.prototype,Ae={};he?y&&($e=xe(function(Ee,J,ne,K){return l(Ee,$e,Je),Q(C(J)?s(J)?K!==void 0?new Xe(J,E(ne,Me),K):ne!==void 0?new Xe(J,E(ne,Me)):new Xe(J):de(J)?a($e,J):I.call($e,J):new Xe(T(J)),Ee,$e)}),L&&L($e,ce),B(F(Xe),function(Ee){Ee in $e||x($e,Ee,Xe[Ee])}),$e.prototype=je):($e=xe(function(Ee,J,ne,K){l(Ee,$e,Je);var ae,ve,Se=0,Le=0;if(C(J)){if(!s(J))return de(J)?a($e,J):I.call($e,J);var Be=J,Le=E(ne,Me),ne=J.byteLength;if(K===void 0){if(ne%Me||(ae=ne-Le)<0)throw Z(we)}else if(ne<(ae=_(K)*Me)+Le)throw Z(we);ve=ae/Me}else ve=T(J),Be=new te(ae=ve*Me);for(M(Ee,{buffer:Be,byteOffset:Le,byteLength:ae,length:ve,view:new ie(Be)});Se<ve;)Fe(Ee,Se++)}),L&&L($e,ce),je=$e.prototype=D(fe)),je.constructor!==$e&&x(je,"constructor",$e),oe&&x(je,oe,Je),Ae[Je]=$e,i({global:!0,forced:$e!=Xe,sham:!he},Ae),ye in $e||x($e,ye,Me),ye in je||x(je,ye,Me),W(Je)}):m.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-object":75,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-set-prototype-of":102,"../internals/set-species":118,"../internals/to-index":135,"../internals/to-length":138,"../internals/to-offset":140,"../internals/to-primitive":142,"../internals/typed-array-constructors-require-wrappers":145,"../internals/typed-array-from":146}],145:[function(h,m,u){var a=h("../internals/global"),p=h("../internals/fails"),s=h("../internals/check-correctness-of-iteration"),h=h("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,b=a.ArrayBuffer,v=a.Int8Array;m.exports=!h||!p(function(){v(1)})||!p(function(){new v(-1)})||!s(function(i){new v,new v(null),new v(1.5),new v(i)},!0)||p(function(){return new v(new b(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":60}],146:[function(t,m,u){var a=t("../internals/to-object"),p=t("../internals/to-length"),s=t("../internals/get-iterator-method"),h=t("../internals/is-array-iterator-method"),b=t("../internals/function-bind-context"),v=t("../internals/array-buffer-view-core").aTypedArrayConstructor;m.exports=function(i){var d,f,y,g,c,l,w=a(i),x=arguments.length,_=1<x?arguments[1]:void 0,T=_!==void 0,E=s(w);if(E!=null&&!h(E))for(l=(c=E.call(w)).next,w=[];!(g=l.call(c)).done;)w.push(g.value);for(T&&2<x&&(_=b(_,arguments[2],2)),f=p(w.length),y=new(v(this))(f),d=0;d<f;d++)y[d]=T?_(w[d],d):w[d];return y}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],147:[function(t,m,u){var a=0,p=Math.random();m.exports=function(s){return"Symbol("+String(s===void 0?"":s)+")_"+(++a+p).toString(36)}},{}],148:[function(t,m,u){t=t("../internals/native-symbol"),m.exports=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":84}],149:[function(t,m,u){t=t("../internals/well-known-symbol"),u.f=t},{"../internals/well-known-symbol":150}],150:[function(v,m,u){var a=v("../internals/global"),p=v("../internals/shared"),s=v("../internals/has"),h=v("../internals/uid"),b=v("../internals/native-symbol"),v=v("../internals/use-symbol-as-uid"),i=p("wks"),d=a.Symbol,f=v?d:d&&d.withoutSetter||h;m.exports=function(y){return s(i,y)||(b&&s(d,y)?i[y]=d[y]:i[y]=f("Symbol."+y)),i[y]}},{"../internals/global":60,"../internals/has":61,"../internals/native-symbol":84,"../internals/shared":122,"../internals/uid":147,"../internals/use-symbol-as-uid":148}],151:[function(t,m,u){m.exports=`	
\v\f\r \u2028\u2029\uFEFF`},{}],152:[function(s,m,u){var a=s("../internals/export"),p=s("../internals/global"),b=s("../internals/array-buffer"),s=s("../internals/set-species"),h="ArrayBuffer",b=b[h];a({global:!0,forced:p[h]!==b},{ArrayBuffer:b}),s(h)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":60,"../internals/set-species":118}],153:[function(w,m,u){var a=w("../internals/export"),p=w("../internals/fails"),s=w("../internals/is-array"),h=w("../internals/is-object"),b=w("../internals/to-object"),v=w("../internals/to-length"),i=w("../internals/create-property"),d=w("../internals/array-species-create"),f=w("../internals/array-method-has-species-support"),l=w("../internals/well-known-symbol"),w=w("../internals/engine-v8-version"),y=l("isConcatSpreadable"),g=9007199254740991,c="Maximum allowed index exceeded",l=51<=w||!p(function(){var x=[];return x[y]=!1,x.concat()[0]!==x}),w=f("concat");a({target:"Array",proto:!0,forced:!l||!w},{concat:function(x){for(var _,T,E,S,P,N=b(this),C=d(N,0),D=0,L=-1,F=arguments.length;L<F;L++)if(P=void 0,!h(S=E=L===-1?N:arguments[L])||((P=S[y])!==void 0?!P:!s(S))){if(g<=D)throw TypeError(c);i(C,D++,E)}else{if(T=v(E.length),g<D+T)throw TypeError(c);for(_=0;_<T;_++,D++)_ in E&&i(C,D,E[_])}return C.length=D,C}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-length":138,"../internals/to-object":139,"../internals/well-known-symbol":150}],154:[function(s,m,u){var a=s("../internals/export"),p=s("../internals/array-copy-within"),s=s("../internals/add-to-unscopables");a({target:"Array",proto:!0},{copyWithin:p}),s("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],155:[function(h,m,u){var a=h("../internals/export"),p=h("../internals/array-iteration").every,s=h("../internals/array-method-is-strict"),h=h("../internals/array-method-uses-to-length"),s=s("every"),h=h("every");a({target:"Array",proto:!0,forced:!s||!h},{every:function(b){return p(this,b,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],156:[function(s,m,u){var a=s("../internals/export"),p=s("../internals/array-fill"),s=s("../internals/add-to-unscopables");a({target:"Array",proto:!0},{fill:p}),s("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],157:[function(h,m,u){var a=h("../internals/export"),p=h("../internals/array-iteration").filter,s=h("../internals/array-method-has-species-support"),h=h("../internals/array-method-uses-to-length"),s=s("filter"),h=h("filter");a({target:"Array",proto:!0,forced:!s||!h},{filter:function(b){return p(this,b,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(v,m,u){var a=v("../internals/export"),p=v("../internals/array-iteration").findIndex,s=v("../internals/add-to-unscopables"),v=v("../internals/array-method-uses-to-length"),h="findIndex",b=!0,v=v(h);h in[]&&Array(1)[h](function(){b=!1}),a({target:"Array",proto:!0,forced:b||!v},{findIndex:function(i){return p(this,i,1<arguments.length?arguments[1]:void 0)}}),s(h)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],159:[function(t,m,u){var a=t("../internals/export"),p=t("../internals/flatten-into-array"),s=t("../internals/to-object"),h=t("../internals/to-length"),b=t("../internals/a-function"),v=t("../internals/array-species-create");a({target:"Array",proto:!0},{flatMap:function(i){var d,f=s(this),y=h(f.length);return b(i),(d=v(f,0)).length=p(d,f,f,y,0,1,i,1<arguments.length?arguments[1]:void 0),d}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-length":138,"../internals/to-object":139}],160:[function(t,m,u){var a=t("../internals/export"),p=t("../internals/flatten-into-array"),s=t("../internals/to-object"),h=t("../internals/to-length"),b=t("../internals/to-integer"),v=t("../internals/array-species-create");a({target:"Array",proto:!0},{flat:function(){var i=arguments.length?arguments[0]:void 0,d=s(this),f=h(d.length),y=v(d,0);return y.length=p(y,d,d,f,0,i===void 0?1:b(i)),y}})},{"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],161:[function(p,m,u){var a=p("../internals/export"),p=p("../internals/array-for-each");a({target:"Array",proto:!0,forced:[].forEach!=p},{forEach:p})},{"../internals/array-for-each":16,"../internals/export":50}],162:[function(t,m,u){var a=t("../internals/export"),p=t("../internals/array-from");a({target:"Array",stat:!0,forced:!t("../internals/check-correctness-of-iteration")(function(s){Array.from(s)})},{from:p})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],163:[function(t,m,u){var a=t("../internals/export"),p=t("../internals/array-includes").includes,s=t("../internals/add-to-unscopables");a({target:"Array",proto:!0,forced:!t("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(h){return p(this,h,1<arguments.length?arguments[1]:void 0)}}),s("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(v,m,u){var a=v("../internals/export"),p=v("../internals/array-includes").indexOf,b=v("../internals/array-method-is-strict"),v=v("../internals/array-method-uses-to-length"),s=[].indexOf,h=!!s&&1/[1].indexOf(1,-0)<0,b=b("indexOf"),v=v("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:h||!b||!v},{indexOf:function(i){return h?s.apply(this,arguments)||0:p(this,i,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],165:[function(b,m,u){var a=b("../internals/to-indexed-object"),p=b("../internals/add-to-unscopables"),s=b("../internals/iterators"),h=b("../internals/internal-state"),b=b("../internals/define-iterator"),v="Array Iterator",i=h.set,d=h.getterFor(v);m.exports=b(Array,"Array",function(f,y){i(this,{type:v,target:a(f),index:0,kind:y})},function(){var f=d(this),y=f.target,g=f.kind,c=f.index++;return!y||c>=y.length?{value:f.target=void 0,done:!0}:g=="keys"?{value:c,done:!1}:g=="values"?{value:y[c],done:!1}:{value:[c,y[c]],done:!1}},"values"),s.Arguments=s.Array,p("keys"),p("values"),p("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/iterators":80,"../internals/to-indexed-object":136}],166:[function(b,m,u){var a=b("../internals/export"),h=b("../internals/indexed-object"),p=b("../internals/to-indexed-object"),b=b("../internals/array-method-is-strict"),s=[].join,h=h!=Object,b=b("join",",");a({target:"Array",proto:!0,forced:h||!b},{join:function(v){return s.call(p(this),v===void 0?",":v)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":67,"../internals/to-indexed-object":136}],167:[function(p,m,u){var a=p("../internals/export"),p=p("../internals/array-last-index-of");a({target:"Array",proto:!0,forced:p!==[].lastIndexOf},{lastIndexOf:p})},{"../internals/array-last-index-of":20,"../internals/export":50}],168:[function(h,m,u){var a=h("../internals/export"),p=h("../internals/array-iteration").map,s=h("../internals/array-method-has-species-support"),h=h("../internals/array-method-uses-to-length"),s=s("map"),h=h("map");a({target:"Array",proto:!0,forced:!s||!h},{map:function(b){return p(this,b,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],169:[function(y,m,u){var a=y("../internals/export"),p=y("../internals/is-object"),s=y("../internals/is-array"),h=y("../internals/to-absolute-index"),b=y("../internals/to-length"),v=y("../internals/to-indexed-object"),i=y("../internals/create-property"),d=y("../internals/well-known-symbol"),f=y("../internals/array-method-has-species-support"),y=y("../internals/array-method-uses-to-length"),f=f("slice"),y=y("slice",{ACCESSORS:!0,0:0,1:2}),g=d("species"),c=[].slice,l=Math.max;a({target:"Array",proto:!0,forced:!f||!y},{slice:function(w,x){var _,T,E,S=v(this),P=b(S.length),N=h(w,P),C=h(x===void 0?P:x,P);if(s(S)&&((_=typeof(_=S.constructor)=="function"&&(_===Array||s(_.prototype))||p(_)&&(_=_[g])===null?void 0:_)===Array||_===void 0))return c.call(S,N,C);for(T=new(_===void 0?Array:_)(l(C-N,0)),E=0;N<C;N++,E++)N in S&&i(T,E,S[N]);return T.length=E,T}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138,"../internals/well-known-symbol":150}],170:[function(h,m,u){var a=h("../internals/export"),p=h("../internals/array-iteration").some,s=h("../internals/array-method-is-strict"),h=h("../internals/array-method-uses-to-length"),s=s("some"),h=h("some");a({target:"Array",proto:!0,forced:!s||!h},{some:function(b){return p(this,b,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],171:[function(f,m,u){var a=f("../internals/export"),p=f("../internals/to-absolute-index"),s=f("../internals/to-integer"),h=f("../internals/to-length"),b=f("../internals/to-object"),v=f("../internals/array-species-create"),i=f("../internals/create-property"),d=f("../internals/array-method-has-species-support"),f=f("../internals/array-method-uses-to-length"),d=d("splice"),f=f("splice",{ACCESSORS:!0,0:0,1:2}),y=Math.max,g=Math.min;a({target:"Array",proto:!0,forced:!d||!f},{splice:function(D,l){var w,x,_,T,E,S,P=b(this),N=h(P.length),C=p(D,N),D=arguments.length;if(D===0?w=x=0:x=D===1?(w=0,N-C):(w=D-2,g(y(s(l),0),N-C)),9007199254740991<N+w-x)throw TypeError("Maximum allowed length exceeded");for(_=v(P,x),T=0;T<x;T++)(E=C+T)in P&&i(_,T,P[E]);if(w<(_.length=x)){for(T=C;T<N-x;T++)S=T+w,(E=T+x)in P?P[S]=P[E]:delete P[S];for(T=N;N-x+w<T;T--)delete P[T-1]}else if(x<w)for(T=N-x;C<T;T--)S=T+w-1,(E=T+x-1)in P?P[S]=P[E]:delete P[S];for(T=0;T<w;T++)P[T+C]=arguments[T+2];return P.length=N-x+w,_}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":134,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],172:[function(t,m,u){t("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],173:[function(t,m,u){t("../internals/add-to-unscopables")("flat")},{"../internals/add-to-unscopables":7}],174:[function(p,m,u){var a=p("../internals/descriptors"),p=p("../internals/object-define-property").f,s=Function.prototype,h=s.toString,b=/^\s*function ([^ (]*)/;!a||"name"in s||p(s,"name",{configurable:!0,get:function(){try{return h.call(this).match(b)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":93}],175:[function(p,m,u){var a=p("../internals/collection"),p=p("../internals/collection-strong");m.exports=a("Map",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},p)},{"../internals/collection":32,"../internals/collection-strong":30}],176:[function(a,m,u){var a=a("../internals/export"),p=Math.hypot,s=Math.abs,h=Math.sqrt;a({target:"Math",stat:!0,forced:!!p&&p(1/0,NaN)!==1/0},{hypot:function(b,v){for(var i,d,f=0,y=0,g=arguments.length,c=0;y<g;)c<(i=s(arguments[y++]))?(f=f*(d=c/i)*d+1,c=i):f+=0<i?(d=i/c)*d:i;return c===1/0?1/0:c*h(f)}})},{"../internals/export":50}],177:[function(a,m,u){var a=a("../internals/export"),p=Math.log,s=Math.LN2;a({target:"Math",stat:!0},{log2:function(h){return p(h)/s}})},{"../internals/export":50}],178:[function(t,m,u){t("../internals/export")({target:"Math",stat:!0},{sign:t("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":81}],179:[function(t,m,u){function a(L){var F,I,B,W,G,V,X,Q=f(L,!1);if(typeof Q=="string"&&2<Q.length){if((L=(Q=x(Q)).charCodeAt(0))===43||L===45){if((F=Q.charCodeAt(2))===88||F===120)return NaN}else if(L===48){switch(Q.charCodeAt(1)){case 66:case 98:I=2,B=49;break;case 79:case 111:I=8,B=55;break;default:return+Q}for(G=(W=Q.slice(2)).length,V=0;V<G;V++)if((X=W.charCodeAt(V))<48||B<X)return NaN;return parseInt(W,I)}}return+Q}var p=t("../internals/descriptors"),s=t("../internals/global"),h=t("../internals/is-forced"),b=t("../internals/redefine"),v=t("../internals/has"),i=t("../internals/classof-raw"),d=t("../internals/inherit-if-required"),f=t("../internals/to-primitive"),y=t("../internals/fails"),g=t("../internals/object-create"),c=t("../internals/object-get-own-property-names").f,l=t("../internals/object-get-own-property-descriptor").f,w=t("../internals/object-define-property").f,x=t("../internals/string-trim").trim,_="Number",T=s[_],E=T.prototype,S=i(g(E))==_;if(h(_,!T(" 0o1")||!T("0b1")||T("+0x1"))){for(var P,N=function(F){var F=arguments.length<1?0:F,I=this;return I instanceof N&&(S?y(function(){E.valueOf.call(I)}):i(I)!=_)?d(new T(a(F)),I,N):a(F)},C=p?c(T):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),D=0;C.length>D;D++)v(T,P=C[D])&&!v(N,P)&&w(N,P,l(T,P));(N.prototype=E).constructor=N,b(s,_,N)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/is-forced":74,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/string-trim":131,"../internals/to-primitive":142}],180:[function(t,m,u){t("../internals/export")({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},{"../internals/export":50}],181:[function(t,m,u){t("../internals/export")({target:"Number",stat:!0},{isFinite:t("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":89}],182:[function(v,m,u){function a(f,y,g){return y===0?g:y%2==1?a(f,y-1,g*f):a(f*f,y/2,g)}var p=v("../internals/export"),s=v("../internals/to-integer"),h=v("../internals/this-number-value"),b=v("../internals/string-repeat"),v=v("../internals/fails"),i=1 .toFixed,d=Math.floor;p({target:"Number",proto:!0,forced:i&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!v(function(){i.call({})})},{toFixed:function(_){function y(P,N){for(var C=-1,D=N;++C<6;)D+=P*T[C],T[C]=D%1e7,D=d(D/1e7)}function g(P){for(var N=6,C=0;0<=--N;)C+=T[N],T[N]=d(C/P),C=C%P*1e7}function c(){for(var P,N=6,C="";0<=--N;)C===""&&N!==0&&T[N]===0||(P=String(T[N]),C=C===""?P:C+b.call("0",7-P.length)+P);return C}var l,w,x=h(this),_=s(_),T=[0,0,0,0,0,0],E="",S="0";if(_<0||20<_)throw RangeError("Incorrect fraction digits");if(x!=x)return"NaN";if(x<=-1e21||1e21<=x)return String(x);if(x<0&&(E="-",x=-x),1e-21<x)if(x=(l=function(P){for(var N=0,C=P;4096<=C;)N+=12,C/=4096;for(;2<=C;)N+=1,C/=2;return N}(x*a(2,69,1))-69)<0?x*a(2,-l,1):x/a(2,l,1),x*=4503599627370496,0<(l=52-l)){for(y(0,x),w=_;7<=w;)y(1e7,0),w-=7;for(y(a(10,w,1),0),w=l-1;23<=w;)g(1<<23),w-=23;g(1<<w),y(1,1),g(2),S=c()}else y(0,x),y(1<<-l,0),S=c()+b.call("0",_);return S=0<_?E+((x=S.length)<=_?"0."+b.call("0",_-x)+S:S.slice(0,x-_)+"."+S.slice(x-_)):E+S}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":129,"../internals/this-number-value":133,"../internals/to-integer":137}],183:[function(p,m,u){var a=p("../internals/export"),p=p("../internals/object-assign");a({target:"Object",stat:!0,forced:Object.assign!==p},{assign:p})},{"../internals/export":50,"../internals/object-assign":90}],184:[function(t,m,u){var a=t("../internals/export"),p=t("../internals/object-to-array").entries;a({target:"Object",stat:!0},{entries:function(s){return p(s)}})},{"../internals/export":50,"../internals/object-to-array":103}],185:[function(t,m,u){var a=t("../internals/export"),p=t("../internals/iterate"),s=t("../internals/create-property");a({target:"Object",stat:!0},{fromEntries:function(h){var b={};return p(h,function(v,i){s(b,v,i)},void 0,!0),b}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":78}],186:[function(h,m,u){var a=h("../internals/export"),b=h("../internals/fails"),p=h("../internals/to-indexed-object"),s=h("../internals/object-get-own-property-descriptor").f,h=h("../internals/descriptors"),b=b(function(){s(1)});a({target:"Object",stat:!0,forced:!h||b,sham:!h},{getOwnPropertyDescriptor:function(v,i){return s(p(v),i)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":94,"../internals/to-indexed-object":136}],187:[function(s,m,u){var a=s("../internals/export"),p=s("../internals/fails"),s=s("../internals/object-get-own-property-names-external").f;a({target:"Object",stat:!0,forced:p(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:s})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":95}],188:[function(b,m,u){var a=b("../internals/export"),p=b("../internals/fails"),s=b("../internals/to-object"),h=b("../internals/object-get-prototype-of"),b=b("../internals/correct-prototype-getter");a({target:"Object",stat:!0,forced:p(function(){h(1)}),sham:!b},{getPrototypeOf:function(v){return h(s(v))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":98,"../internals/to-object":139}],189:[function(t,m,u){var a=t("../internals/export"),p=t("../internals/to-object"),s=t("../internals/object-keys");a({target:"Object",stat:!0,forced:t("../internals/fails")(function(){s(1)})},{keys:function(h){return s(p(h))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":100,"../internals/to-object":139}],190:[function(s,m,u){var a=s("../internals/to-string-tag-support"),p=s("../internals/redefine"),s=s("../internals/object-to-string");a||p(Object.prototype,"toString",s,{unsafe:!0})},{"../internals/object-to-string":104,"../internals/redefine":110,"../internals/to-string-tag-support":143}],191:[function(ke,m,u){var a,p,s,h,b=ke("../internals/export"),v=ke("../internals/is-pure"),i=ke("../internals/global"),d=ke("../internals/get-built-in"),f=ke("../internals/native-promise-constructor"),y=ke("../internals/redefine"),g=ke("../internals/redefine-all"),c=ke("../internals/set-to-string-tag"),l=ke("../internals/set-species"),w=ke("../internals/is-object"),x=ke("../internals/a-function"),_=ke("../internals/an-instance"),T=ke("../internals/classof-raw"),E=ke("../internals/inspect-source"),S=ke("../internals/iterate"),P=ke("../internals/check-correctness-of-iteration"),N=ke("../internals/species-constructor"),C=ke("../internals/task").set,D=ke("../internals/microtask"),L=ke("../internals/promise-resolve"),F=ke("../internals/host-report-errors"),I=ke("../internals/new-promise-capability"),B=ke("../internals/perform"),W=ke("../internals/internal-state"),G=ke("../internals/is-forced"),Fe=ke("../internals/well-known-symbol"),V=ke("../internals/engine-v8-version"),X=Fe("species"),Q="Promise",se=W.get,M=W.set,A=W.getterFor(Q),z=f,$=i.TypeError,Z=i.document,te=i.process,ie=d("fetch"),he=I.f,oe=he,ce=T(te)=="process",fe=!!(Z&&Z.createEvent&&i.dispatchEvent),ee="unhandledrejection",de="rejectionhandled",ye=1,we=2,ge=1,xe=2,ke=G(Q,function(){var Ae,Ee;return E(z)===String(z)&&(V===66||!ce&&typeof PromiseRejectionEvent!="function")?!0:!(!v||z.prototype.finally)||!(51<=V&&/native code/.test(z))&&(Ee=function(J){J(function(){},function(){})},((Ae=z.resolve(1)).constructor={})[X]=Ee,!(Ae.then(function(){})instanceof Ee))}),Fe=ke||!P(function(Ae){z.all(Ae).catch(function(){})}),Me=function(Ae){var Ee;return!(!w(Ae)||typeof(Ee=Ae.then)!="function")&&Ee},Je=function(Ae,Ee,J){var ne;Ee.notified||(Ee.notified=!0,ne=Ee.reactions,D(function(){for(var K,ae,ve=Ee.value,Se=Ee.state==ye,Le=0;ne.length>Le;){var Be,Ve,He,Ke=ne[Le++],ut=Se?Ke.ok:Ke.fail,it=Ke.resolve,tt=Ke.reject,lt=Ke.domain;try{ut?(Se||(Ee.rejection===xe&&function(at,Et){C.call(i,function(){ce?te.emit("rejectionHandled",at):We(de,at,Et.value)})}(Ae,Ee),Ee.rejection=ge),ut===!0?Be=ve:(lt&&lt.enter(),Be=ut(ve),lt&&(lt.exit(),He=!0)),Be===Ke.promise?tt($("Promise-chain cycle")):(Ve=Me(Be))?Ve.call(Be,it,tt):it(Be)):tt(ve)}catch(at){lt&&!He&&lt.exit(),tt(at)}}Ee.reactions=[],Ee.notified=!1,J&&!Ee.rejection&&(K=Ae,ae=Ee,C.call(i,function(){var at=ae.value,Et=qe(ae);if(Et&&(Et=B(function(){ce?te.emit("unhandledRejection",at,K):We(ee,K,at)}),ae.rejection=ce||qe(ae)?xe:ge,Et.error))throw Et.value}))}))},We=function(Ae,Ee,J){var ne;fe?((ne=Z.createEvent("Event")).promise=Ee,ne.reason=J,ne.initEvent(Ae,!1,!0),i.dispatchEvent(ne)):ne={promise:Ee,reason:J},(Ee=i["on"+Ae])?Ee(ne):Ae===ee&&F("Unhandled promise rejection",J)},qe=function(Ae){return Ae.rejection!==ge&&!Ae.parent},Xe=function(Ae,Ee,J,ne){return function(K){Ae(Ee,J,K,ne)}},$e=function(Ae,Ee,J,ne){Ee.done||(Ee.done=!0,(Ee=ne||Ee).value=J,Ee.state=we,Je(Ae,Ee,!0))},je=function(Ae,Ee,J,ne){if(!Ee.done){Ee.done=!0,ne&&(Ee=ne);try{if(Ae===J)throw $("Promise can't be resolved itself");var K=Me(J);K?D(function(){var ae={done:!1};try{K.call(J,Xe(je,Ae,ae,Ee),Xe($e,Ae,ae,Ee))}catch(ve){$e(Ae,ae,ve,Ee)}}):(Ee.value=J,Ee.state=ye,Je(Ae,Ee,!1))}catch(ae){$e(Ae,{done:!1},ae,Ee)}}};ke&&(z=function(Ae){_(this,z,Q),x(Ae),a.call(this);var Ee=se(this);try{Ae(Xe(je,this,Ee),Xe($e,this,Ee))}catch(J){$e(this,Ee,J)}},(a=function(Ae){M(this,{type:Q,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=g(z.prototype,{then:function(Ae,Ee){var J=A(this),ne=he(N(this,z));return ne.ok=typeof Ae!="function"||Ae,ne.fail=typeof Ee=="function"&&Ee,ne.domain=ce?te.domain:void 0,J.parent=!0,J.reactions.push(ne),J.state!=0&&Je(this,J,!1),ne.promise},catch:function(Ae){return this.then(void 0,Ae)}}),p=function(){var Ae=new a,Ee=se(Ae);this.promise=Ae,this.resolve=Xe(je,Ae,Ee),this.reject=Xe($e,Ae,Ee)},I.f=he=function(Ae){return Ae===z||Ae===s?new p:oe(Ae)},v||typeof f!="function"||(h=f.prototype.then,y(f.prototype,"then",function(Ae,Ee){var J=this;return new z(function(ne,K){h.call(J,ne,K)}).then(Ae,Ee)},{unsafe:!0}),typeof ie=="function"&&b({global:!0,enumerable:!0,forced:!0},{fetch:function(Ae){return L(z,ie.apply(i,arguments))}}))),b({global:!0,wrap:!0,forced:ke},{Promise:z}),c(z,Q,!1,!0),l(Q),s=d(Q),b({target:Q,stat:!0,forced:ke},{reject:function(Ae){var Ee=he(this);return Ee.reject.call(void 0,Ae),Ee.promise}}),b({target:Q,stat:!0,forced:v||ke},{resolve:function(Ae){return L(v&&this===s?z:this,Ae)}}),b({target:Q,stat:!0,forced:Fe},{all:function(Ae){var Ee=this,J=he(Ee),ne=J.resolve,K=J.reject,ae=B(function(){var ve=x(Ee.resolve),Se=[],Le=0,Be=1;S(Ae,function(Ve){var He=Le++,Ke=!1;Se.push(void 0),Be++,ve.call(Ee,Ve).then(function(ut){Ke||(Ke=!0,Se[He]=ut,--Be||ne(Se))},K)}),--Be||ne(Se)});return ae.error&&K(ae.value),J.promise},race:function(Ae){var Ee=this,J=he(Ee),ne=J.reject,K=B(function(){var ae=x(Ee.resolve);S(Ae,function(ve){ae.call(Ee,ve).then(J.resolve,ne)})});return K.error&&ne(K.value),J.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":57,"../internals/global":60,"../internals/host-report-errors":63,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-object":75,"../internals/is-pure":76,"../internals/iterate":78,"../internals/microtask":82,"../internals/native-promise-constructor":83,"../internals/new-promise-capability":87,"../internals/perform":107,"../internals/promise-resolve":108,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-species":118,"../internals/set-to-string-tag":119,"../internals/species-constructor":123,"../internals/task":132,"../internals/well-known-symbol":150}],192:[function(i,m,u){var a=i("../internals/export"),g=i("../internals/get-built-in"),p=i("../internals/a-function"),s=i("../internals/an-object"),h=i("../internals/is-object"),b=i("../internals/object-create"),v=i("../internals/function-bind"),i=i("../internals/fails"),d=g("Reflect","construct"),f=i(function(){function c(){}return!(d(function(){},[],c)instanceof c)}),y=!i(function(){d(function(){})}),g=f||y;a({target:"Reflect",stat:!0,forced:g,sham:g},{construct:function(c,l){p(c),s(l);var w=arguments.length<3?c:p(arguments[2]);if(y&&!f)return d(c,l,w);if(c==w){switch(l.length){case 0:return new c;case 1:return new c(l[0]);case 2:return new c(l[0],l[1]);case 3:return new c(l[0],l[1],l[2]);case 4:return new c(l[0],l[1],l[2],l[3])}var x=[null];return x.push.apply(x,l),new(v.apply(c,x))}return x=w.prototype,w=b(h(x)?x:Object.prototype),x=Function.apply.call(c,w,l),h(x)?x:w}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":56,"../internals/get-built-in":57,"../internals/is-object":75,"../internals/object-create":91}],193:[function(t,m,u){var a=t("../internals/export"),p=t("../internals/is-object"),s=t("../internals/an-object"),h=t("../internals/has"),b=t("../internals/object-get-own-property-descriptor"),v=t("../internals/object-get-prototype-of");a({target:"Reflect",stat:!0},{get:function i(d,f){var y,g=arguments.length<3?d:arguments[2];return s(d)===g?d[f]:(y=b.f(d,f))?h(y,"value")?y.value:y.get===void 0?void 0:y.get.call(g):p(y=v(d))?i(y,f,g):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":61,"../internals/is-object":75,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-prototype-of":98}],194:[function(t,m,u){var a=t("../internals/descriptors"),p=t("../internals/global"),s=t("../internals/is-forced"),h=t("../internals/inherit-if-required"),b=t("../internals/object-define-property").f,v=t("../internals/object-get-own-property-names").f,i=t("../internals/is-regexp"),d=t("../internals/regexp-flags"),f=t("../internals/regexp-sticky-helpers"),y=t("../internals/redefine"),g=t("../internals/fails"),c=t("../internals/internal-state").set,l=t("../internals/set-species"),w=t("../internals/well-known-symbol")("match"),x=p.RegExp,_=x.prototype,T=/a/g,E=/a/g,S=new x(T)!==T,P=f.UNSUPPORTED_Y;if(a&&s("RegExp",!S||P||g(function(){return E[w]=!1,x(T)!=T||x(E)==E||x(T,"i")!="/a/i"}))){for(var N=function(L,F){var I,B=this instanceof N,W=i(L),G=F===void 0;return!B&&W&&L.constructor===N&&G?L:(S?W&&!G&&(L=L.source):L instanceof N&&(G&&(F=d.call(L)),L=L.source),P&&(I=!!F&&-1<F.indexOf("y"))&&(F=F.replace(/y/g,"")),W=h(S?new x(L,F):x(L,F),B?this:_,N),P&&I&&c(W,{sticky:I}),W)},C=v(x),D=0;C.length>D;)(function(L){L in N||b(N,L,{configurable:!0,get:function(){return x[L]},set:function(F){x[L]=F}})})(C[D++]);(_.constructor=N).prototype=_,y(p,"RegExp",N)}l("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-regexp":77,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/regexp-flags":113,"../internals/regexp-sticky-helpers":114,"../internals/set-species":118,"../internals/well-known-symbol":150}],195:[function(p,m,u){var a=p("../internals/export"),p=p("../internals/regexp-exec");a({target:"RegExp",proto:!0,forced:/./.exec!==p},{exec:p})},{"../internals/export":50,"../internals/regexp-exec":112}],196:[function(h,m,u){var a=h("../internals/redefine"),p=h("../internals/an-object"),i=h("../internals/fails"),s=h("../internals/regexp-flags"),h="toString",b=RegExp.prototype,v=b[h],i=i(function(){return v.call({source:"a",flags:"b"})!="/a/b"}),d=v.name!=h;(i||d)&&a(RegExp.prototype,h,function(){var f=p(this),y=String(f.source),g=f.flags;return"/"+y+"/"+String(g===void 0&&f instanceof RegExp&&!("flags"in b)?s.call(f):g)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-flags":113}],197:[function(p,m,u){var a=p("../internals/collection"),p=p("../internals/collection-strong");m.exports=a("Set",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},p)},{"../internals/collection":32,"../internals/collection-strong":30}],198:[function(v,m,u){var a=v("../internals/export"),p=v("../internals/object-get-own-property-descriptor").f,s=v("../internals/to-length"),h=v("../internals/not-a-regexp"),b=v("../internals/require-object-coercible"),f=v("../internals/correct-is-regexp-logic"),v=v("../internals/is-pure"),i="".endsWith,d=Math.min,f=f("endsWith");a({target:"String",proto:!0,forced:!!(v||f||!(a=p(String.prototype,"endsWith"))||a.writable)&&!f},{endsWith:function(y){var g=String(b(this)),c=(h(y),1<arguments.length?arguments[1]:void 0),l=s(g.length),c=c===void 0?l:d(s(c),l),l=String(y);return i?i.call(g,l,c):g.slice(c-l.length,c)===l}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],199:[function(t,m,u){var a=t("../internals/export"),p=t("../internals/not-a-regexp"),s=t("../internals/require-object-coercible");a({target:"String",proto:!0,forced:!t("../internals/correct-is-regexp-logic")("includes")},{includes:function(h){return!!~String(s(this)).indexOf(p(h),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":88,"../internals/require-object-coercible":115}],200:[function(s,m,u){var a=s("../internals/string-multibyte").charAt,p=s("../internals/internal-state"),s=s("../internals/define-iterator"),h="String Iterator",b=p.set,v=p.getterFor(h);s(String,"String",function(i){b(this,{type:h,string:String(i),index:0})},function(){var i=v(this),d=i.string,f=i.index;return f>=d.length?{value:void 0,done:!0}:(d=a(d,f),i.index+=d.length,{value:d,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/string-multibyte":125}],201:[function(t,m,u){var a=t("../internals/fix-regexp-well-known-symbol-logic"),p=t("../internals/an-object"),s=t("../internals/to-length"),h=t("../internals/require-object-coercible"),b=t("../internals/advance-string-index"),v=t("../internals/regexp-exec-abstract");a("match",1,function(i,d,f){return[function(y){var g=h(this),c=y==null?void 0:y[i];return c!==void 0?c.call(y,g):new RegExp(y)[i](String(g))},function(y){var g=f(d,y,this);if(g.done)return g.value;var c=p(y),l=String(this);if(!c.global)return v(c,l);for(var w=c.unicode,x=[],_=c.lastIndex=0;(T=v(c,l))!==null;){var T=String(T[0]);(x[_]=T)===""&&(c.lastIndex=b(l,s(c.lastIndex),w)),_++}return _===0?null:x}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-length":138}],202:[function(t,m,u){var a=t("../internals/export"),p=t("../internals/string-pad").start;a({target:"String",proto:!0,forced:t("../internals/string-pad-webkit-bug")},{padStart:function(s){return p(this,s,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":127,"../internals/string-pad-webkit-bug":126}],203:[function(t,m,u){t("../internals/export")({target:"String",proto:!0},{repeat:t("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":129}],204:[function(t,m,u){var a=t("../internals/fix-regexp-well-known-symbol-logic"),p=t("../internals/an-object"),s=t("../internals/to-object"),h=t("../internals/to-length"),b=t("../internals/to-integer"),v=t("../internals/require-object-coercible"),i=t("../internals/advance-string-index"),d=t("../internals/regexp-exec-abstract"),f=Math.max,y=Math.min,g=Math.floor,c=/\$([$&'`]|\d\d?|<[^>]*>)/g,l=/\$([$&'`]|\d\d?)/g;a("replace",2,function(w,x,_,T){var E=T.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,S=T.REPLACE_KEEPS_$0,P=E?"$":"$0";return[function(N,C){var D=v(this),L=N==null?void 0:N[w];return L!==void 0?L.call(N,D,C):x.call(String(D),N,C)},function(N,C){if(!E&&S||typeof C=="string"&&C.indexOf(P)===-1){var D=_(x,N,this,C);if(D.done)return D.value}for(var L,F=p(N),I=String(this),B=typeof C=="function",W=(B||(C=String(C)),F.global),G=(W&&(L=F.unicode,F.lastIndex=0),[]);(M=d(F,I))!==null&&(G.push(M),W);)String(M[0])===""&&(F.lastIndex=i(I,h(F.lastIndex),L));for(var V,X="",Q=0,se=0;se<G.length;se++){for(var M=G[se],A=String(M[0]),z=f(y(b(M.index),I.length),0),$=[],Z=1;Z<M.length;Z++)$.push((V=M[Z])===void 0?V:String(V));var te=M.groups,ie=B?(ie=[A].concat($,z,I),te!==void 0&&ie.push(te),String(C.apply(void 0,ie))):function(he,oe,ce,fe,ee,de){var ye=ce+he.length,we=fe.length,ge=l;return ee!==void 0&&(ee=s(ee),ge=c),x.call(de,ge,function(xe,ke){var Fe;switch(ke.charAt(0)){case"$":return"$";case"&":return he;case"`":return oe.slice(0,ce);case"'":return oe.slice(ye);case"<":Fe=ee[ke.slice(1,-1)];break;default:var Me,Je=+ke;if(Je==0)return xe;if(we<Je)return(Me=g(Je/10))!==0&&Me<=we?fe[Me-1]===void 0?ke.charAt(1):fe[Me-1]+ke.charAt(1):xe;Fe=fe[Je-1]}return Fe===void 0?"":Fe})}(A,I,z,$,te,C);Q<=z&&(X+=I.slice(Q,z)+ie,Q=z+A.length)}return X+I.slice(Q)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],205:[function(t,m,u){var a=t("../internals/fix-regexp-well-known-symbol-logic"),p=t("../internals/an-object"),s=t("../internals/require-object-coercible"),h=t("../internals/same-value"),b=t("../internals/regexp-exec-abstract");a("search",1,function(v,i,d){return[function(f){var y=s(this),g=f==null?void 0:f[v];return g!==void 0?g.call(f,y):new RegExp(f)[v](String(y))},function(f){var y,g=d(i,f,this);return g.done?g.value:(g=p(f),f=String(this),y=g.lastIndex,h(y,0)||(g.lastIndex=0),f=b(g,f),h(g.lastIndex,y)||(g.lastIndex=y),f===null?-1:f.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/same-value":116}],206:[function(y,m,u){var a=y("../internals/fix-regexp-well-known-symbol-logic"),p=y("../internals/is-regexp"),s=y("../internals/an-object"),h=y("../internals/require-object-coercible"),b=y("../internals/species-constructor"),v=y("../internals/advance-string-index"),i=y("../internals/to-length"),d=y("../internals/regexp-exec-abstract"),f=y("../internals/regexp-exec"),y=y("../internals/fails"),g=[].push,c=Math.min,l=4294967295,w=!y(function(){return!RegExp(l,"y")});a("split",2,function(x,_,T){var E="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(S,P){var N=String(h(this)),C=P===void 0?l:P>>>0;if(C==0)return[];if(S===void 0)return[N];if(!p(S))return _.call(N,S,C);for(var D,L,F,I=[],P=(S.ignoreCase?"i":"")+(S.multiline?"m":"")+(S.unicode?"u":"")+(S.sticky?"y":""),B=0,W=new RegExp(S.source,P+"g");(D=f.call(W,N))&&!(B<(L=W.lastIndex)&&(I.push(N.slice(B,D.index)),1<D.length&&D.index<N.length&&g.apply(I,D.slice(1)),F=D[0].length,B=L,I.length>=C));)W.lastIndex===D.index&&W.lastIndex++;return B===N.length?!F&&W.test("")||I.push(""):I.push(N.slice(B)),I.length>C?I.slice(0,C):I}:"0".split(void 0,0).length?function(S,P){return S===void 0&&P===0?[]:_.call(this,S,P)}:_;return[function(S,P){var N=h(this),C=S==null?void 0:S[x];return C!==void 0?C.call(S,N,P):E.call(String(N),S,P)},function(D,P){var N=T(E,D,this,P,E!==_);if(N.done)return N.value;var N=s(D),C=String(this),D=b(N,RegExp),L=N.unicode,F=(N.ignoreCase?"i":"")+(N.multiline?"m":"")+(N.unicode?"u":"")+(w?"y":"g"),I=new D(w?N:"^(?:"+N.source+")",F),B=P===void 0?l:P>>>0;if(B==0)return[];if(C.length===0)return d(I,C)===null?[C]:[];for(var W=0,G=0,V=[];G<C.length;){I.lastIndex=w?G:0;var X,Q=d(I,w?C:C.slice(G));if(Q===null||(X=c(i(I.lastIndex+(w?0:G)),C.length))===W)G=v(C,G,L);else{if(V.push(C.slice(W,G)),V.length===B)return V;for(var se=1;se<=Q.length-1;se++)if(V.push(Q[se]),V.length===B)return V;G=W=X}}return V.push(C.slice(W)),V}]},!w)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":77,"../internals/regexp-exec":112,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/species-constructor":123,"../internals/to-length":138}],207:[function(v,m,u){var a=v("../internals/export"),p=v("../internals/object-get-own-property-descriptor").f,s=v("../internals/to-length"),h=v("../internals/not-a-regexp"),b=v("../internals/require-object-coercible"),f=v("../internals/correct-is-regexp-logic"),v=v("../internals/is-pure"),i="".startsWith,d=Math.min,f=f("startsWith");a({target:"String",proto:!0,forced:!!(v||f||!(a=p(String.prototype,"startsWith"))||a.writable)&&!f},{startsWith:function(l){var g=String(b(this)),c=(h(l),s(d(1<arguments.length?arguments[1]:void 0,g.length))),l=String(l);return i?i.call(g,l,c):g.slice(c,c+l.length)===l}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],208:[function(t,m,u){var a=t("../internals/export"),p=t("../internals/create-html");a({target:"String",proto:!0,forced:t("../internals/string-html-forced")("sub")},{sub:function(){return p(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":124}],209:[function(t,m,u){var a=t("../internals/export"),p=t("../internals/string-trim").trim;a({target:"String",proto:!0,forced:t("../internals/string-trim-forced")("trim")},{trim:function(){return p(this)}})},{"../internals/export":50,"../internals/string-trim":131,"../internals/string-trim-forced":130}],210:[function(c,m,u){var a,p,s,h,b,v=c("../internals/export"),i=c("../internals/descriptors"),d=c("../internals/global"),f=c("../internals/has"),y=c("../internals/is-object"),g=c("../internals/object-define-property").f,c=c("../internals/copy-constructor-properties"),l=d.Symbol;!i||typeof l!="function"||"description"in l.prototype&&l().description===void 0||(a={},c(p=function(){var w=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),x=this instanceof p?new l(w):w===void 0?l():l(w);return w===""&&(a[x]=!0),x},l),(d=p.prototype=l.prototype).constructor=p,s=d.toString,h=String(l("test"))=="Symbol(test)",b=/^Symbol\((.*)\)[^)]+$/,g(d,"description",{configurable:!0,get:function(){var w=y(this)?this.valueOf():this,x=s.call(w);return f(a,w)?"":(w=h?x.slice(7,-1):x.replace(b,"$1"))===""?void 0:w}}),v({global:!0,forced:!0},{Symbol:p}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93}],211:[function(t,m,u){t("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],212:[function(oe,m,u){function a(K,ae){var ve=Fe[K]=N(de[he]);return ce(ve,{type:ie,tag:K,description:ae}),f||(ve.description=ae),ve}function p(K,Se){_(K);var ve=E(Se),Se=C(ve).concat(ne(ve));return Z(Se,function(Le){f&&!J.call(ve,Le)||Ee(K,Le,ve[Le])}),K}function s(Se,Le){var ve,Se=E(Se),Le=S(Le,!0);if(Se!==ee||!l(Fe,Le)||l(Me,Le))return!(ve=we(Se,Le))||!l(Fe,Le)||l(Se,te)&&Se[te][Le]||(ve.enumerable=!0),ve}function h(ae){var ae=xe(E(ae)),ve=[];return Z(ae,function(Se){l(Fe,Se)||l(Q,Se)||ve.push(Se)}),ve}var b=oe("../internals/export"),v=oe("../internals/global"),i=oe("../internals/get-built-in"),d=oe("../internals/is-pure"),f=oe("../internals/descriptors"),y=oe("../internals/native-symbol"),g=oe("../internals/use-symbol-as-uid"),c=oe("../internals/fails"),l=oe("../internals/has"),w=oe("../internals/is-array"),x=oe("../internals/is-object"),_=oe("../internals/an-object"),T=oe("../internals/to-object"),E=oe("../internals/to-indexed-object"),S=oe("../internals/to-primitive"),P=oe("../internals/create-property-descriptor"),N=oe("../internals/object-create"),C=oe("../internals/object-keys"),D=oe("../internals/object-get-own-property-names"),L=oe("../internals/object-get-own-property-names-external"),F=oe("../internals/object-get-own-property-symbols"),I=oe("../internals/object-get-own-property-descriptor"),B=oe("../internals/object-define-property"),W=oe("../internals/object-property-is-enumerable"),G=oe("../internals/create-non-enumerable-property"),V=oe("../internals/redefine"),X=oe("../internals/shared"),qe=oe("../internals/shared-key"),Q=oe("../internals/hidden-keys"),se=oe("../internals/uid"),M=oe("../internals/well-known-symbol"),A=oe("../internals/well-known-symbol-wrapped"),z=oe("../internals/define-well-known-symbol"),$=oe("../internals/set-to-string-tag"),Xe=oe("../internals/internal-state"),Z=oe("../internals/array-iteration").forEach,te=qe("hidden"),ie="Symbol",he="prototype",oe=M("toPrimitive"),ce=Xe.set,fe=Xe.getterFor(ie),ee=Object[he],de=v.Symbol,ye=i("JSON","stringify"),we=I.f,ge=B.f,xe=L.f,ke=W.f,Fe=X("symbols"),Me=X("op-symbols"),Je=X("string-to-symbol-registry"),We=X("symbol-to-string-registry"),qe=X("wks"),Xe=v.QObject,$e=!Xe||!Xe[he]||!Xe[he].findChild,je=f&&c(function(){return N(ge({},"a",{get:function(){return ge(this,"a",{value:7}).a}})).a!=7})?function(K,ae,ve){var Se=we(ee,ae);Se&&delete ee[ae],ge(K,ae,ve),Se&&K!==ee&&ge(ee,ae,Se)}:ge,Ae=g?function(K){return typeof K=="symbol"}:function(K){return Object(K)instanceof de},Ee=function(K,ae,ve){return K===ee&&Ee(Me,ae,ve),_(K),ae=S(ae,!0),_(ve),(l(Fe,ae)?(ve.enumerable?(l(K,te)&&K[te][ae]&&(K[te][ae]=!1),ve=N(ve,{enumerable:P(0,!1)})):(l(K,te)||ge(K,te,P(1,{})),K[te][ae]=!0),je):ge)(K,ae,ve)},J=function(ae){var ae=S(ae,!0),ve=ke.call(this,ae);return!(this===ee&&l(Fe,ae)&&!l(Me,ae))&&(!(ve||!l(this,ae)||!l(Fe,ae)||l(this,te)&&this[te][ae])||ve)},ne=function(ve){var ae=ve===ee,ve=xe(ae?Me:E(ve)),Se=[];return Z(ve,function(Le){!l(Fe,Le)||ae&&!l(ee,Le)||Se.push(Fe[Le])}),Se};y||(V((de=function(){if(this instanceof de)throw TypeError("Symbol is not a constructor");var K=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,ae=se(K),ve=function(Se){this===ee&&ve.call(Me,Se),l(this,te)&&l(this[te],ae)&&(this[te][ae]=!1),je(this,ae,P(1,Se))};return f&&$e&&je(ee,ae,{configurable:!0,set:ve}),a(ae,K)})[he],"toString",function(){return fe(this).tag}),V(de,"withoutSetter",function(K){return a(se(K),K)}),W.f=J,B.f=Ee,I.f=s,D.f=L.f=h,F.f=ne,A.f=function(K){return a(M(K),K)},f&&(ge(de[he],"description",{configurable:!0,get:function(){return fe(this).description}}),d||V(ee,"propertyIsEnumerable",J,{unsafe:!0}))),b({global:!0,wrap:!0,forced:!y,sham:!y},{Symbol:de}),Z(C(qe),function(K){z(K)}),b({target:ie,stat:!0,forced:!y},{for:function(ve){var ae,ve=String(ve);return l(Je,ve)?Je[ve]:(ae=de(ve),Je[ve]=ae,We[ae]=ve,ae)},keyFor:function(K){if(!Ae(K))throw TypeError(K+" is not a symbol");if(l(We,K))return We[K]},useSetter:function(){$e=!0},useSimple:function(){$e=!1}}),b({target:"Object",stat:!0,forced:!y,sham:!f},{create:function(K,ae){return ae===void 0?N(K):p(N(K),ae)},defineProperty:Ee,defineProperties:p,getOwnPropertyDescriptor:s}),b({target:"Object",stat:!0,forced:!y},{getOwnPropertyNames:h,getOwnPropertySymbols:ne}),b({target:"Object",stat:!0,forced:c(function(){F.f(1)})},{getOwnPropertySymbols:function(K){return F.f(T(K))}}),ye&&b({target:"JSON",stat:!0,forced:!y||c(function(){var K=de();return ye([K])!="[null]"||ye({a:K})!="{}"||ye(Object(K))!="{}"})},{stringify:function(K,ae,ve){for(var Se,Le=[K],Be=1;Be<arguments.length;)Le.push(arguments[Be++]);if((x(Se=ae)||K!==void 0)&&!Ae(K))return w(ae)||(ae=function(Ve,He){if(typeof Se=="function"&&(He=Se.call(this,Ve,He)),!Ae(He))return He}),Le[1]=ae,ye.apply(null,Le)}}),de[he][oe]||G(de[he],oe,de[he].valueOf),$(de,ie),Q[te]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":57,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/internal-state":71,"../internals/is-array":73,"../internals/is-object":75,"../internals/is-pure":76,"../internals/native-symbol":84,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-names-external":95,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/shared":122,"../internals/shared-key":120,"../internals/to-indexed-object":136,"../internals/to-object":139,"../internals/to-primitive":142,"../internals/uid":147,"../internals/use-symbol-as-uid":148,"../internals/well-known-symbol":150,"../internals/well-known-symbol-wrapped":149}],213:[function(t,m,u){var a=t("../internals/array-buffer-view-core"),p=t("../internals/array-copy-within"),s=a.aTypedArray;(0,a.exportTypedArrayMethod)("copyWithin",function(h,b){return p.call(s(this),h,b,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],214:[function(t,m,u){var a=t("../internals/array-buffer-view-core"),p=t("../internals/array-iteration").every,s=a.aTypedArray;(0,a.exportTypedArrayMethod)("every",function(h){return p(s(this),h,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],215:[function(t,m,u){var a=t("../internals/array-buffer-view-core"),p=t("../internals/array-fill"),s=a.aTypedArray;(0,a.exportTypedArrayMethod)("fill",function(h){return p.apply(s(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],216:[function(t,m,u){var a=t("../internals/array-buffer-view-core"),p=t("../internals/array-iteration").filter,s=t("../internals/species-constructor"),h=a.aTypedArray,b=a.aTypedArrayConstructor;(0,a.exportTypedArrayMethod)("filter",function(v){for(var i=p(h(this),v,1<arguments.length?arguments[1]:void 0),v=s(this,this.constructor),d=0,f=i.length,y=new(b(v))(f);d<f;)y[d]=i[d++];return y})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],217:[function(t,m,u){var a=t("../internals/array-buffer-view-core"),p=t("../internals/array-iteration").findIndex,s=a.aTypedArray;(0,a.exportTypedArrayMethod)("findIndex",function(h){return p(s(this),h,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],218:[function(t,m,u){var a=t("../internals/array-buffer-view-core"),p=t("../internals/array-iteration").find,s=a.aTypedArray;(0,a.exportTypedArrayMethod)("find",function(h){return p(s(this),h,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],219:[function(t,m,u){t("../internals/typed-array-constructor")("Float32",function(a){return function(p,s,h){return a(this,p,s,h)}})},{"../internals/typed-array-constructor":144}],220:[function(t,m,u){t("../internals/typed-array-constructor")("Float64",function(a){return function(p,s,h){return a(this,p,s,h)}})},{"../internals/typed-array-constructor":144}],221:[function(t,m,u){var a=t("../internals/array-buffer-view-core"),p=t("../internals/array-iteration").forEach,s=a.aTypedArray;(0,a.exportTypedArrayMethod)("forEach",function(h){p(s(this),h,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],222:[function(t,m,u){var a=t("../internals/array-buffer-view-core"),p=t("../internals/array-includes").includes,s=a.aTypedArray;(0,a.exportTypedArrayMethod)("includes",function(h){return p(s(this),h,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],223:[function(t,m,u){var a=t("../internals/array-buffer-view-core"),p=t("../internals/array-includes").indexOf,s=a.aTypedArray;(0,a.exportTypedArrayMethod)("indexOf",function(h){return p(s(this),h,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],224:[function(t,m,u){t("../internals/typed-array-constructor")("Int16",function(a){return function(p,s,h){return a(this,p,s,h)}})},{"../internals/typed-array-constructor":144}],225:[function(t,m,u){t("../internals/typed-array-constructor")("Int32",function(a){return function(p,s,h){return a(this,p,s,h)}})},{"../internals/typed-array-constructor":144}],226:[function(p,m,u){function a(){return s.call(v(this))}var f=p("../internals/global"),d=p("../internals/array-buffer-view-core"),i=p("../modules/es.array.iterator"),p=p("../internals/well-known-symbol")("iterator"),f=f.Uint8Array,s=i.values,h=i.keys,b=i.entries,v=d.aTypedArray,i=d.exportTypedArrayMethod,d=f&&f.prototype[p],f=!!d&&(d.name=="values"||d.name==null);i("entries",function(){return b.call(v(this))}),i("keys",function(){return h.call(v(this))}),i("values",a,!f),i(p,a,!f)},{"../internals/array-buffer-view-core":12,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],227:[function(p,m,u){var p=p("../internals/array-buffer-view-core"),a=p.aTypedArray,p=p.exportTypedArrayMethod,s=[].join;p("join",function(h){return s.apply(a(this),arguments)})},{"../internals/array-buffer-view-core":12}],228:[function(t,m,u){var a=t("../internals/array-buffer-view-core"),p=t("../internals/array-last-index-of"),s=a.aTypedArray;(0,a.exportTypedArrayMethod)("lastIndexOf",function(h){return p.apply(s(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],229:[function(t,m,u){var a=t("../internals/array-buffer-view-core"),p=t("../internals/array-iteration").map,s=t("../internals/species-constructor"),h=a.aTypedArray,b=a.aTypedArrayConstructor;(0,a.exportTypedArrayMethod)("map",function(v){return p(h(this),v,1<arguments.length?arguments[1]:void 0,function(i,d){return new(b(s(i,i.constructor)))(d)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],230:[function(t,m,u){var a=t("../internals/array-buffer-view-core"),p=t("../internals/array-reduce").right,s=a.aTypedArray;(0,a.exportTypedArrayMethod)("reduceRight",function(h){return p(s(this),h,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],231:[function(t,m,u){var a=t("../internals/array-buffer-view-core"),p=t("../internals/array-reduce").left,s=a.aTypedArray;(0,a.exportTypedArrayMethod)("reduce",function(h){return p(s(this),h,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],232:[function(p,m,u){var p=p("../internals/array-buffer-view-core"),a=p.aTypedArray,p=p.exportTypedArrayMethod,s=Math.floor;p("reverse",function(){for(var h,b=a(this).length,v=s(b/2),i=0;i<v;)h=this[i],this[i++]=this[--b],this[b]=h;return this})},{"../internals/array-buffer-view-core":12}],233:[function(b,m,u){var a=b("../internals/array-buffer-view-core"),p=b("../internals/to-length"),s=b("../internals/to-offset"),h=b("../internals/to-object"),b=b("../internals/fails"),v=a.aTypedArray;(0,a.exportTypedArrayMethod)("set",function(i){v(this);var d=s(1<arguments.length?arguments[1]:void 0,1),f=this.length,y=h(i),g=p(y.length),c=0;if(f<g+d)throw RangeError("Wrong length");for(;c<g;)this[d+c]=y[c++]},b(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":138,"../internals/to-object":139,"../internals/to-offset":140}],234:[function(p,m,u){var b=p("../internals/array-buffer-view-core"),a=p("../internals/species-constructor"),p=p("../internals/fails"),s=b.aTypedArray,h=b.aTypedArrayConstructor,b=b.exportTypedArrayMethod,v=[].slice;b("slice",function(i,d){for(var f=v.call(s(this),i,d),i=a(this,this.constructor),y=0,g=f.length,c=new(h(i))(g);y<g;)c[y]=f[y++];return c},p(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":123}],235:[function(t,m,u){var a=t("../internals/array-buffer-view-core"),p=t("../internals/array-iteration").some,s=a.aTypedArray;(0,a.exportTypedArrayMethod)("some",function(h){return p(s(this),h,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],236:[function(p,m,u){var p=p("../internals/array-buffer-view-core"),a=p.aTypedArray,p=p.exportTypedArrayMethod,s=[].sort;p("sort",function(h){return s.call(a(this),h)})},{"../internals/array-buffer-view-core":12}],237:[function(t,m,u){var a=t("../internals/array-buffer-view-core"),p=t("../internals/to-length"),s=t("../internals/to-absolute-index"),h=t("../internals/species-constructor"),b=a.aTypedArray;(0,a.exportTypedArrayMethod)("subarray",function(y,i){var d=b(this),f=d.length,y=s(y,f);return new(h(d,d.constructor))(d.buffer,d.byteOffset+y*d.BYTES_PER_ELEMENT,p((i===void 0?f:s(i,f))-y))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":123,"../internals/to-absolute-index":134,"../internals/to-length":138}],238:[function(p,m,u){var b=p("../internals/global"),a=p("../internals/array-buffer-view-core"),p=p("../internals/fails"),s=b.Int8Array,h=a.aTypedArray,b=a.exportTypedArrayMethod,v=[].toLocaleString,i=[].slice,d=!!s&&p(function(){v.call(new s(1))});b("toLocaleString",function(){return v.apply(d?i.call(h(this)):h(this),arguments)},p(function(){return[1,2].toLocaleString()!=new s([1,2]).toLocaleString()})||!p(function(){s.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],239:[function(p,m,u){var a=p("../internals/array-buffer-view-core").exportTypedArrayMethod,b=p("../internals/fails"),p=p("../internals/global").Uint8Array,p=p&&p.prototype||{},s=[].toString,h=[].join,b=(b(function(){s.call({})})&&(s=function(){return h.call(this)}),p.toString!=s);a("toString",s,b)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],240:[function(t,m,u){t("../internals/typed-array-constructor")("Uint16",function(a){return function(p,s,h){return a(this,p,s,h)}})},{"../internals/typed-array-constructor":144}],241:[function(t,m,u){t("../internals/typed-array-constructor")("Uint32",function(a){return function(p,s,h){return a(this,p,s,h)}})},{"../internals/typed-array-constructor":144}],242:[function(t,m,u){t("../internals/typed-array-constructor")("Uint8",function(a){return function(p,s,h){return a(this,p,s,h)}})},{"../internals/typed-array-constructor":144}],243:[function(t,m,u){t("../internals/typed-array-constructor")("Uint8",function(a){return function(p,s,h){return a(this,p,s,h)}},!0)},{"../internals/typed-array-constructor":144}],244:[function(l,_,u){function a(T){return function(){return T(this,arguments.length?arguments[0]:void 0)}}var p,s,h,b,v,w=l("../internals/global"),i=l("../internals/redefine-all"),d=l("../internals/internal-metadata"),f=l("../internals/collection"),y=l("../internals/collection-weak"),g=l("../internals/is-object"),c=l("../internals/internal-state").enforce,l=l("../internals/native-weak-map"),w=!w.ActiveXObject&&"ActiveXObject"in w,x=Object.isExtensible,_=_.exports=f("WeakMap",a,y);l&&w&&(p=y.getConstructor(a,"WeakMap",!0),d.REQUIRED=!0,f=_.prototype,s=f.delete,h=f.has,b=f.get,v=f.set,i(f,{delete:function(T){var E;return g(T)&&!x(T)?((E=c(this)).frozen||(E.frozen=new p),s.call(this,T)||E.frozen.delete(T)):s.call(this,T)},has:function(T){var E;return g(T)&&!x(T)?((E=c(this)).frozen||(E.frozen=new p),h.call(this,T)||E.frozen.has(T)):h.call(this,T)},get:function(T){var E;return!g(T)||x(T)||((E=c(this)).frozen||(E.frozen=new p),h.call(this,T))?b.call(this,T):E.frozen.get(T)},set:function(T,E){var S;return!g(T)||x(T)||((S=c(this)).frozen||(S.frozen=new p),h.call(this,T))?v.call(this,T,E):S.frozen.set(T,E),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":60,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/redefine-all":109}],245:[function(t,m,u){var a,p=t("../internals/global"),s=t("../internals/dom-iterables"),h=t("../internals/array-for-each"),b=t("../internals/create-non-enumerable-property");for(a in s){var v=p[a],v=v&&v.prototype;if(v&&v.forEach!==h)try{b(v,"forEach",h)}catch{v.forEach=h}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60}],246:[function(v,m,u){var a,p=v("../internals/global"),s=v("../internals/dom-iterables"),h=v("../modules/es.array.iterator"),b=v("../internals/create-non-enumerable-property"),v=v("../internals/well-known-symbol"),i=v("iterator"),d=v("toStringTag"),f=h.values;for(a in s){var y=p[a],g=y&&y.prototype;if(g){if(g[i]!==f)try{b(g,i,f)}catch{g[i]=f}if(g[d]||b(g,d,a),s[a]){for(var c in h)if(g[c]!==h[c])try{b(g,c,h[c])}catch{g[c]=h[c]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],247:[function(te,m,u){te("../modules/es.array.iterator");function a(ie){try{return decodeURIComponent(ie)}catch{return ie}}function p(ie){return z[ie]}function s(ie){return encodeURIComponent(ie).replace(A,p)}function h(ie){this.entries.length=0,$(this.entries,ie)}function b(ie,he){if(ie<he)throw TypeError("Not enough arguments")}function v(){w(this,v,B);var ie,he,oe,ce,fe,ee,de,ye,we=0<arguments.length?arguments[0]:void 0,ge=[];if(G(this,{type:B,entries:ge,updateURL:function(){},updateSearchParams:h}),we!==void 0)if(S(we))if(typeof(ie=D(we))=="function")for(oe=(he=ie.call(we)).next;!(ce=oe.call(he)).done;){if((ee=(fe=(ce=C(E(ce.value))).next).call(ce)).done||(de=fe.call(ce)).done||!fe.call(ce).done)throw TypeError("Expected sequence with length 2");ge.push({key:ee.value+"",value:de.value+""})}else for(ye in we)x(we,ye)&&ge.push({key:ye,value:we[ye]+""});else $(ge,typeof we=="string"?we.charAt(0)==="?"?we.slice(1):we:we+"")}var i=te("../internals/export"),I=te("../internals/get-built-in"),d=te("../internals/native-url"),f=te("../internals/redefine"),y=te("../internals/redefine-all"),g=te("../internals/set-to-string-tag"),c=te("../internals/create-iterator-constructor"),l=te("../internals/internal-state"),w=te("../internals/an-instance"),x=te("../internals/has"),_=te("../internals/function-bind-context"),T=te("../internals/classof"),E=te("../internals/an-object"),S=te("../internals/is-object"),P=te("../internals/object-create"),N=te("../internals/create-property-descriptor"),C=te("../internals/get-iterator"),D=te("../internals/get-iterator-method"),te=te("../internals/well-known-symbol"),L=I("fetch"),F=I("Headers"),I=te("iterator"),B="URLSearchParams",W=B+"Iterator",G=l.set,V=l.getterFor(B),X=l.getterFor(W),Q=/\+/g,se=Array(4),M=function(ie){var he,oe=ie.replace(Q," "),ce=4;try{return decodeURIComponent(oe)}catch{for(;ce;)oe=oe.replace((he=ce--,se[he-1]||(se[he-1]=RegExp("((?:%[\\da-f]{2}){"+he+"})","gi"))),a);return oe}},A=/[!'()~]|%20/g,z={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},$=function(ie,he){if(he)for(var oe,ce=he.split("&"),fe=0;fe<ce.length;)(oe=ce[fe++]).length&&(oe=oe.split("="),ie.push({key:M(oe.shift()),value:M(oe.join("="))}))},Z=c(function(ie,he){G(this,{type:W,iterator:C(V(ie).entries),kind:he})},"Iterator",function(){var he=X(this),ie=he.kind,he=he.iterator.next(),oe=he.value;return he.done||(he.value=ie==="keys"?oe.key:ie==="values"?oe.value:[oe.key,oe.value]),he}),te=v.prototype;y(te,{append:function(ie,he){b(arguments.length,2);var oe=V(this);oe.entries.push({key:ie+"",value:he+""}),oe.updateURL()},delete:function(ie){b(arguments.length,1);for(var he=V(this),oe=he.entries,ce=ie+"",fe=0;fe<oe.length;)oe[fe].key===ce?oe.splice(fe,1):fe++;he.updateURL()},get:function(ie){b(arguments.length,1);for(var he=V(this).entries,oe=ie+"",ce=0;ce<he.length;ce++)if(he[ce].key===oe)return he[ce].value;return null},getAll:function(ie){b(arguments.length,1);for(var he=V(this).entries,oe=ie+"",ce=[],fe=0;fe<he.length;fe++)he[fe].key===oe&&ce.push(he[fe].value);return ce},has:function(ie){b(arguments.length,1);for(var he=V(this).entries,oe=ie+"",ce=0;ce<he.length;)if(he[ce++].key===oe)return!0;return!1},set:function(ie,he){b(arguments.length,1);for(var oe,ce=V(this),fe=ce.entries,ee=!1,de=ie+"",ye=he+"",we=0;we<fe.length;we++)(oe=fe[we]).key===de&&(ee?fe.splice(we--,1):(ee=!0,oe.value=ye));ee||fe.push({key:de,value:ye}),ce.updateURL()},sort:function(){for(var ie,he,oe=V(this),ce=oe.entries,fe=ce.slice(),ee=ce.length=0;ee<fe.length;ee++){for(ie=fe[ee],he=0;he<ee;he++)if(ce[he].key>ie.key){ce.splice(he,0,ie);break}he===ee&&ce.push(ie)}oe.updateURL()},forEach:function(ie){for(var he,oe=V(this).entries,ce=_(ie,1<arguments.length?arguments[1]:void 0,3),fe=0;fe<oe.length;)ce((he=oe[fe++]).value,he.key,this)},keys:function(){return new Z(this,"keys")},values:function(){return new Z(this,"values")},entries:function(){return new Z(this,"entries")}},{enumerable:!0}),f(te,I,te.entries),f(te,"toString",function(){for(var ie,he=V(this).entries,oe=[],ce=0;ce<he.length;)ie=he[ce++],oe.push(s(ie.key)+"="+s(ie.value));return oe.join("&")},{enumerable:!0}),g(v,B),i({global:!0,forced:!d},{URLSearchParams:v}),d||typeof L!="function"||typeof F!="function"||i({global:!0,enumerable:!0,forced:!0},{fetch:function(fe){var he,oe,ce,fe=[fe];return 1<arguments.length&&(S(he=arguments[1])&&(oe=he.body,T(oe)===B&&((ce=he.headers?new F(he.headers):new F).has("content-type")||ce.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),he=P(he,{body:N(0,String(oe)),headers:N(0,ce)}))),fe.push(he)),L.apply(this,fe)}}),m.exports={URLSearchParams:v,getState:V}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":55,"../internals/get-built-in":57,"../internals/get-iterator":59,"../internals/get-iterator-method":58,"../internals/has":61,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-url":85,"../internals/object-create":91,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],248:[function(C,m,u){C("../modules/es.string.iterator");function a(me){var ze,Ze,Ue,ht;if(typeof me=="number"){for(ze=[],Ze=0;Ze<4;Ze++)ze.unshift(me%256),me=W(me/256);return ze.join(".")}if(typeof me!="object")return me;for(ze="",Ue=de(me),Ze=0;Ze<8;Ze++)ht&&me[Ze]===0||(ht=ht&&!1,Ue===Ze?(ze+=Ze?":":"::",ht=!0):(ze+=me[Ze].toString(16),Ze<7&&(ze+=":")));return"["+ze+"]"}function p(me){return!me.host||me.cannotBeABaseURL||me.scheme=="file"}function s(me,ze,Ze,Ue){var ht,De,gt,Ye=Ze||Ae,mt=0,Qe="",Gt=!1,Xt=!1,Ut=!1;for(Ze||(me.scheme="",me.username="",me.password="",me.host=null,me.port=null,me.path=[],me.query=null,me.fragment=null,me.cannotBeABaseURL=!1,ze=ze.replace(ce,"")),ze=ze.replace(fe,""),ht=T(ze);mt<=ht.length;){switch(De=ht[mt],Ye){case Ae:if(!De||!M.test(De)){if(Ze)return X;Ye=J;continue}Qe+=De.toLowerCase(),Ye=Ee;break;case Ee:if(De&&(A.test(De)||De=="+"||De=="-"||De=="."))Qe+=De.toLowerCase();else{if(De!=":"){if(Ze)return X;Qe="",Ye=J,mt=0;continue}if(Ze&&(Me(me)!=x(Fe,Qe)||Qe=="file"&&(Je(me)||me.port!==null)||me.scheme=="file"&&!me.host))return;if(me.scheme=Qe,Ze)return void(Me(me)&&Fe[me.scheme]==me.port&&(me.port=null));Qe="",me.scheme=="file"?Ye=ut:Me(me)&&Ue&&Ue.scheme==me.scheme?Ye=ne:Me(me)?Ye=Se:ht[mt+1]=="/"?(Ye=K,mt++):(me.cannotBeABaseURL=!0,me.path.push(""),Ye=Et)}break;case J:if(!Ue||Ue.cannotBeABaseURL&&De!="#")return X;if(Ue.cannotBeABaseURL&&De=="#"){me.scheme=Ue.scheme,me.path=Ue.path.slice(),me.query=Ue.query,me.fragment="",me.cannotBeABaseURL=!0,Ye=Wt;break}Ye=Ue.scheme=="file"?ut:ae;continue;case ne:if(De!="/"||ht[mt+1]!="/"){Ye=ae;continue}Ye=Le,mt++;break;case K:if(De=="/"){Ye=Be;break}Ye=at;continue;case ae:if(me.scheme=Ue.scheme,De==v)me.username=Ue.username,me.password=Ue.password,me.host=Ue.host,me.port=Ue.port,me.path=Ue.path.slice(),me.query=Ue.query;else if(De=="/"||De=="\\"&&Me(me))Ye=ve;else if(De=="?")me.username=Ue.username,me.password=Ue.password,me.host=Ue.host,me.port=Ue.port,me.path=Ue.path.slice(),me.query="",Ye=cr;else{if(De!="#"){me.username=Ue.username,me.password=Ue.password,me.host=Ue.host,me.port=Ue.port,me.path=Ue.path.slice(),me.path.pop(),Ye=at;continue}me.username=Ue.username,me.password=Ue.password,me.host=Ue.host,me.port=Ue.port,me.path=Ue.path.slice(),me.query=Ue.query,me.fragment="",Ye=Wt}break;case ve:if(!Me(me)||De!="/"&&De!="\\"){if(De!="/"){me.username=Ue.username,me.password=Ue.password,me.host=Ue.host,me.port=Ue.port,Ye=at;continue}Ye=Be}else Ye=Le;break;case Se:if(Ye=Le,De!="/"||Qe.charAt(mt+1)!="/")continue;mt++;break;case Le:if(De=="/"||De=="\\")break;Ye=Be;continue;case Be:if(De=="@"){Gt&&(Qe="%40"+Qe);for(var Gt=!0,Jt=T(Qe),an=0;an<Jt.length;an++){var Cr=Jt[an];Cr!=":"||Ut?(Cr=ke(Cr,xe),Ut?me.password+=Cr:me.username+=Cr):Ut=!0}Qe=""}else if(De==v||De=="/"||De=="?"||De=="#"||De=="\\"&&Me(me)){if(Gt&&Qe=="")return V;mt-=T(Qe).length+1,Qe="",Ye=Ve}else Qe+=De;break;case Ve:case He:if(Ze&&me.scheme=="file"){Ye=tt;continue}if(De!=":"||Xt){if(De==v||De=="/"||De=="?"||De=="#"||De=="\\"&&Me(me)){if(Me(me)&&Qe=="")return Q;if(Ze&&Qe==""&&(Je(me)||me.port!==null))return;if(gt=ee(me,Qe))return gt;if(Qe="",Ye=lt,Ze)return;continue}De=="["?Xt=!0:De=="]"&&(Xt=!1),Qe+=De}else{if(Qe=="")return Q;if(gt=ee(me,Qe))return gt;if(Qe="",Ye=Ke,Ze==He)return}break;case Ke:if(!z.test(De)){if(De==v||De=="/"||De=="?"||De=="#"||De=="\\"&&Me(me)||Ze){if(Qe!=""){var ln=parseInt(Qe,10);if(65535<ln)return se;me.port=Me(me)&&ln===Fe[me.scheme]?null:ln,Qe=""}if(Ze)return;Ye=lt;continue}return se}Qe+=De;break;case ut:if(me.scheme="file",De=="/"||De=="\\")Ye=it;else{if(!Ue||Ue.scheme!="file"){Ye=at;continue}if(De==v)me.host=Ue.host,me.path=Ue.path.slice(),me.query=Ue.query;else if(De=="?")me.host=Ue.host,me.path=Ue.path.slice(),me.query="",Ye=cr;else{if(De!="#"){qe(ht.slice(mt).join(""))||(me.host=Ue.host,me.path=Ue.path.slice(),Xe(me)),Ye=at;continue}me.host=Ue.host,me.path=Ue.path.slice(),me.query=Ue.query,me.fragment="",Ye=Wt}}break;case it:if(De=="/"||De=="\\"){Ye=tt;break}Ue&&Ue.scheme=="file"&&!qe(ht.slice(mt).join(""))&&(We(Ue.path[0],!0)?me.path.push(Ue.path[0]):me.host=Ue.host),Ye=at;continue;case tt:if(De==v||De=="/"||De=="\\"||De=="?"||De=="#"){if(!Ze&&We(Qe))Ye=at;else{if(Qe==""){if(me.host="",Ze)return}else{if(gt=ee(me,Qe))return gt;if(me.host=="localhost"&&(me.host=""),Ze)return;Qe=""}Ye=lt}continue}Qe+=De;break;case lt:if(Me(me)){if(Ye=at,De!="/"&&De!="\\")continue}else if(Ze||De!="?")if(Ze||De!="#"){if(De!=v&&(Ye=at,De!="/"))continue}else me.fragment="",Ye=Wt;else me.query="",Ye=cr;break;case at:if(De==v||De=="/"||De=="\\"&&Me(me)||!Ze&&(De=="?"||De=="#")){if(je(Qe)?(Xe(me),De=="/"||De=="\\"&&Me(me)||me.path.push("")):$e(Qe)?De=="/"||De=="\\"&&Me(me)||me.path.push(""):(me.scheme=="file"&&!me.path.length&&We(Qe)&&(me.host&&(me.host=""),Qe=Qe.charAt(0)+":"),me.path.push(Qe)),Qe="",me.scheme=="file"&&(De==v||De=="?"||De=="#"))for(;1<me.path.length&&me.path[0]==="";)me.path.shift();De=="?"?(me.query="",Ye=cr):De=="#"&&(me.fragment="",Ye=Wt)}else Qe+=ke(De,ge);break;case Et:De=="?"?(me.query="",Ye=cr):De=="#"?(me.fragment="",Ye=Wt):De!=v&&(me.path[0]+=ke(De,ye));break;case cr:Ze||De!="#"?De!=v&&(De=="'"&&Me(me)?me.query+="%27":me.query+=De=="#"?"%23":ke(De,ye)):(me.fragment="",Ye=Wt);break;case Wt:De!=v&&(me.fragment+=ke(De,we))}mt++}}function h(De){var ze,Ze,Ue=w(this,h,"URL"),ht=1<arguments.length?arguments[1]:void 0,De=String(De),gt=I(Ue,{type:"URL"});if(ht!==void 0){if(ht instanceof h)ze=B(ht);else if(Ze=s(ze={},String(ht)))throw TypeError(Ze)}if(Ze=s(gt,De,null,ze))throw TypeError(Ze);var Ye=gt.searchParams=new L;(ht=F(Ye)).updateSearchParams(gt.query),ht.updateURL=function(){gt.query=String(Ye)||null},y||(Ue.href=Ct.call(Ue),Ue.origin=yt.call(Ue),Ue.protocol=or.call(Ue),Ue.username=Zt.call(Ue),Ue.password=_t.call(Ue),Ue.host=sr.call(Ue),Ue.hostname=As.call(Ue),Ue.port=Is.call(Ue),Ue.pathname=Ds.call(Ue),Ue.search=Qa.call(Ue),Ue.searchParams=Fs.call(Ue),Ue.hash=Us.call(Ue))}function b(me,ze){return{get:me,set:ze,configurable:!0,enumerable:!0}}var v,i,d,f=C("../internals/export"),y=C("../internals/descriptors"),g=C("../internals/native-url"),bt=C("../internals/global"),c=C("../internals/object-define-properties"),l=C("../internals/redefine"),w=C("../internals/an-instance"),x=C("../internals/has"),_=C("../internals/object-assign"),T=C("../internals/array-from"),E=C("../internals/string-multibyte").codeAt,S=C("../internals/string-punycode-to-ascii"),P=C("../internals/set-to-string-tag"),N=C("../modules/web.url-search-params"),C=C("../internals/internal-state"),D=bt.URL,L=N.URLSearchParams,F=N.getState,I=C.set,B=C.getterFor("URL"),W=Math.floor,G=Math.pow,V="Invalid authority",X="Invalid scheme",Q="Invalid host",se="Invalid port",M=/[A-Za-z]/,A=/[\d+-.A-Za-z]/,z=/\d/,$=/^(0x|0X)/,Z=/^[0-7]+$/,te=/^\d+$/,ie=/^[\dA-Fa-f]+$/,he=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,oe=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,ce=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,fe=/[\u0009\u000A\u000D]/g,ee=function(me,ze){var Ze,Ue,ht;if(ze.charAt(0)=="[")return ze.charAt(ze.length-1)=="]"&&(Ze=function(De){var gt=[0,0,0,0,0,0,0,0],Ye=0,mt=null,Qe=0,Gt,Xt,Ut,Jt,an,Cr,ln,er=function(){return De.charAt(Qe)};if(er()==":"){if(De.charAt(1)!=":")return;Qe+=2,Ye++,mt=Ye}for(;er();){if(Ye==8)return;if(er()==":"){if(mt!==null)return;Qe++,Ye++,mt=Ye;continue}for(Gt=Xt=0;Xt<4&&ie.test(er());)Gt=Gt*16+parseInt(er(),16),Qe++,Xt++;if(er()=="."){if(Xt==0||(Qe-=Xt,Ye>6))return;for(Ut=0;er();){if(Jt=null,Ut>0)if(er()=="."&&Ut<4)Qe++;else return;if(!z.test(er()))return;for(;z.test(er());){if(an=parseInt(er(),10),Jt===null)Jt=an;else{if(Jt==0)return;Jt=Jt*10+an}if(Jt>255)return;Qe++}gt[Ye]=gt[Ye]*256+Jt,Ut++,(Ut==2||Ut==4)&&Ye++}if(Ut!=4)return;break}else if(er()==":"){if(Qe++,!er())return}else if(er())return;gt[Ye++]=Gt}if(mt!==null)for(Cr=Ye-mt,Ye=7;Ye!=0&&Cr>0;)ln=gt[Ye],gt[Ye--]=gt[mt+Cr-1],gt[mt+--Cr]=ln;else if(Ye!=8)return;return gt}(ze.slice(1,-1)))?void(me.host=Ze):Q;if(Me(me))return ze=S(ze),he.test(ze)||(Ze=function(De){var gt=De.split("."),Ye,mt,Qe,Gt,Xt,Ut,Jt;if(gt.length&&gt[gt.length-1]==""&&gt.pop(),(Ye=gt.length)>4)return De;for(mt=[],Qe=0;Qe<Ye;Qe++){if(Gt=gt[Qe],Gt=="")return De;if(Xt=10,Gt.length>1&&Gt.charAt(0)=="0"&&(Xt=$.test(Gt)?16:8,Gt=Gt.slice(Xt==8?1:2)),Gt==="")Ut=0;else{if(!(Xt==10?te:Xt==8?Z:ie).test(Gt))return De;Ut=parseInt(Gt,Xt)}mt.push(Ut)}for(Qe=0;Qe<Ye;Qe++)if(Ut=mt[Qe],Qe==Ye-1){if(Ut>=G(256,5-Ye))return null}else if(Ut>255)return null;for(Jt=mt.pop(),Qe=0;Qe<mt.length;Qe++)Jt+=mt[Qe]*G(256,3-Qe);return Jt}(ze))===null?Q:void(me.host=Ze);if(oe.test(ze))return Q;for(Ze="",Ue=T(ze),ht=0;ht<Ue.length;ht++)Ze+=ke(Ue[ht],ye);me.host=Ze},de=function(me){for(var ze=null,Ze=1,Ue=null,ht=0,De=0;De<8;De++)me[De]!==0?(Ze<ht&&(ze=Ue,Ze=ht),Ue=null,ht=0):(Ue===null&&(Ue=De),++ht);return Ze<ht&&(ze=Ue,Ze=ht),ze},ye={},we=_({},ye,{" ":1,'"':1,"<":1,">":1,"`":1}),ge=_({},we,{"#":1,"?":1,"{":1,"}":1}),xe=_({},ge,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ke=function(me,ze){var Ze=E(me,0);return 32<Ze&&Ze<127&&!x(ze,me)?me:encodeURIComponent(me)},Fe={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Me=function(me){return x(Fe,me.scheme)},Je=function(me){return me.username!=""||me.password!=""},We=function(me,ze){return me.length==2&&M.test(me.charAt(0))&&((me=me.charAt(1))==":"||!ze&&me=="|")},qe=function(me){return 1<me.length&&We(me.slice(0,2))&&(me.length==2||(me=me.charAt(2))==="/"||me==="\\"||me==="?"||me==="#")},Xe=function(me){var ze=me.path,Ze=ze.length;!Ze||me.scheme=="file"&&Ze==1&&We(ze[0],!0)||ze.pop()},$e=function(me){return me==="."||me.toLowerCase()==="%2e"},je=function(me){return(me=me.toLowerCase())===".."||me==="%2e."||me===".%2e"||me==="%2e%2e"},Ae={},Ee={},J={},ne={},K={},ae={},ve={},Se={},Le={},Be={},Ve={},He={},Ke={},ut={},it={},tt={},lt={},at={},Et={},cr={},Wt={},bt=h.prototype,Ct=function(){var me=B(this),ze=me.scheme,Ze=me.username,Ue=me.password,ht=me.host,De=me.port,gt=me.path,Ye=me.query,mt=me.fragment,Qe=ze+":";return ht!==null?(Qe+="//",Je(me)&&(Qe+=Ze+(Ue?":"+Ue:"")+"@"),Qe+=a(ht),De!==null&&(Qe+=":"+De)):ze=="file"&&(Qe+="//"),Qe+=me.cannotBeABaseURL?gt[0]:gt.length?"/"+gt.join("/"):"",Ye!==null&&(Qe+="?"+Ye),mt!==null&&(Qe+="#"+mt),Qe},yt=function(){var me=B(this),ze=me.scheme,Ze=me.port;if(ze=="blob")try{return new URL(ze.path[0]).origin}catch{return"null"}return ze!="file"&&Me(me)?ze+"://"+a(me.host)+(Ze!==null?":"+Ze:""):"null"},or=function(){return B(this).scheme+":"},Zt=function(){return B(this).username},_t=function(){return B(this).password},sr=function(){var ze=B(this),me=ze.host,ze=ze.port;return me===null?"":ze===null?a(me):a(me)+":"+ze},As=function(){var me=B(this).host;return me===null?"":a(me)},Is=function(){var me=B(this).port;return me===null?"":String(me)},Ds=function(){var me=B(this),ze=me.path;return me.cannotBeABaseURL?ze[0]:ze.length?"/"+ze.join("/"):""},Qa=function(){var me=B(this).query;return me?"?"+me:""},Fs=function(){return B(this).searchParams},Us=function(){var me=B(this).fragment;return me?"#"+me:""};y&&c(bt,{href:b(Ct,function(Ze){var ze=B(this),Ze=String(Ze),Ze=s(ze,Ze);if(Ze)throw TypeError(Ze);F(ze.searchParams).updateSearchParams(ze.query)}),origin:b(yt),protocol:b(or,function(me){var ze=B(this);s(ze,String(me)+":",Ae)}),username:b(Zt,function(me){var ze=B(this),Ze=T(String(me));if(!p(ze)){ze.username="";for(var Ue=0;Ue<Ze.length;Ue++)ze.username+=ke(Ze[Ue],xe)}}),password:b(_t,function(me){var ze=B(this),Ze=T(String(me));if(!p(ze)){ze.password="";for(var Ue=0;Ue<Ze.length;Ue++)ze.password+=ke(Ze[Ue],xe)}}),host:b(sr,function(me){var ze=B(this);ze.cannotBeABaseURL||s(ze,String(me),Ve)}),hostname:b(As,function(me){var ze=B(this);ze.cannotBeABaseURL||s(ze,String(me),He)}),port:b(Is,function(me){var ze=B(this);p(ze)||((me=String(me))==""?ze.port=null:s(ze,me,Ke))}),pathname:b(Ds,function(me){var ze=B(this);ze.cannotBeABaseURL||(ze.path=[],s(ze,me+"",lt))}),search:b(Qa,function(me){var ze=B(this);(me=String(me))==""?ze.query=null:(me.charAt(0)=="?"&&(me=me.slice(1)),ze.query="",s(ze,me,cr)),F(ze.searchParams).updateSearchParams(ze.query)}),searchParams:b(Fs),hash:b(Us,function(me){var ze=B(this);(me=String(me))==""?ze.fragment=null:(me.charAt(0)=="#"&&(me=me.slice(1)),ze.fragment="",s(ze,me,Wt))})}),l(bt,"toJSON",function(){return Ct.call(this)},{enumerable:!0}),l(bt,"toString",function(){return Ct.call(this)},{enumerable:!0}),D&&(i=D.createObjectURL,d=D.revokeObjectURL,i&&l(h,"createObjectURL",function(me){return i.apply(D,arguments)}),d&&l(h,"revokeObjectURL",function(me){return d.apply(D,arguments)})),P(h,"URL"),f({global:!0,forced:!g,sham:!y},{URL:h})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/internal-state":71,"../internals/native-url":85,"../internals/object-assign":90,"../internals/object-define-properties":92,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/string-multibyte":125,"../internals/string-punycode-to-ascii":128,"../modules/es.string.iterator":200,"../modules/web.url-search-params":247}],249:[function(t,m,u){m.exports=t("./").polyfill()},{"./":250}],250:[function(t,m,u){(function(a,p){var s,h;s=this,h=function(){function b(ee){return typeof ee=="function"}var v=Array.isArray||function(ee){return Object.prototype.toString.call(ee)==="[object Array]"},i=0,d=void 0,f=void 0,y=function(ee,de){_[i]=ee,_[i+1]=de,(i+=2)===2&&(f?f(T):L())},g=typeof window<"u"?window:void 0,c=g||{},c=c.MutationObserver||c.WebKitMutationObserver,l=typeof self>"u"&&a!==void 0&&{}.toString.call(a)==="[object process]",w=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function x(){var ee=setTimeout;return function(){return ee(T,1)}}var _=new Array(1e3);function T(){for(var ee=0;ee<i;ee+=2)(0,_[ee])(_[ee+1]),_[ee]=void 0,_[ee+1]=void 0;i=0}function E(){try{var ee=Function("return this")().require("vertx");return(d=ee.runOnLoop||ee.runOnContext)!==void 0?function(){d(T)}:x()}catch{return x()}}var S,P,N,L=void 0;function C(ee,de){var ye,we=this,ge=new this.constructor(I),xe=(ge[F]===void 0&&ie(ge),we._state);return xe?(ye=arguments[xe-1],y(function(){return Z(xe,ge,ye,we._result)})):z(we,ge,ee,de),ge}function D(ee){var de;return ee&&typeof ee=="object"&&ee.constructor===this?ee:(Q(de=new this(I),ee),de)}var L=l?function(){return a.nextTick(T)}:c?(P=0,l=new c(T),N=document.createTextNode(""),l.observe(N,{characterData:!0}),function(){N.data=P=++P%2}):w?((S=new MessageChannel).port1.onmessage=T,function(){return S.port2.postMessage(0)}):(g===void 0&&typeof t=="function"?E:x)(),F=Math.random().toString(36).substring(2);function I(){}var B=void 0,W=1,G=2;function V(ee,de,ye){y(function(we){var ge=!1,xe=function(ke,Fe,Me,Je){try{ke.call(Fe,Me,Je)}catch(We){return We}}(ye,de,function(ke){ge||(ge=!0,(de!==ke?Q:M)(we,ke))},function(ke){ge||(ge=!0,A(we,ke))},we._label);!ge&&xe&&(ge=!0,A(we,xe))},ee)}function X(ee,de,ye){var we,ge;de.constructor===ee.constructor&&ye===C&&de.constructor.resolve===D?(we=ee,(ge=de)._state===W?M(we,ge._result):ge._state===G?A(we,ge._result):z(ge,void 0,function(xe){return Q(we,xe)},function(xe){return A(we,xe)})):ye!==void 0&&b(ye)?V(ee,de,ye):M(ee,de)}function Q(ee,de){if(ee===de)A(ee,new TypeError("You cannot resolve a promise with itself"));else if(ye=typeof de,de===null||ye!="object"&&ye!="function")M(ee,de);else{ye=void 0;try{ye=de.then}catch(we){return void A(ee,we)}X(ee,de,ye)}var ye}function se(ee){ee._onerror&&ee._onerror(ee._result),$(ee)}function M(ee,de){ee._state===B&&(ee._result=de,ee._state=W,ee._subscribers.length!==0&&y($,ee))}function A(ee,de){ee._state===B&&(ee._state=G,ee._result=de,y(se,ee))}function z(ee,de,ye,we){var ge=ee._subscribers,xe=ge.length;ee._onerror=null,ge[xe]=de,ge[xe+W]=ye,ge[xe+G]=we,xe===0&&ee._state&&y($,ee)}function $(ee){var de=ee._subscribers,ye=ee._state;if(de.length!==0){for(var we,ge=void 0,xe=ee._result,ke=0;ke<de.length;ke+=3)we=de[ke],ge=de[ke+ye],we?Z(ye,we,ge,xe):ge(xe);ee._subscribers.length=0}}function Z(ee,de,ye,we){var ge=b(ye),xe=void 0,ke=void 0,Fe=!0;if(ge){try{xe=ye(we)}catch(Me){Fe=!1,ke=Me}if(de===xe)return void A(de,new TypeError("A promises callback cannot return that same promise."))}else xe=we;de._state===B&&(ge&&Fe?Q(de,xe):Fe===!1?A(de,ke):ee===W?M(de,xe):ee===G&&A(de,xe))}var te=0;function ie(ee){ee[F]=te++,ee._state=void 0,ee._result=void 0,ee._subscribers=[]}oe.prototype._enumerate=function(ee){for(var de=0;this._state===B&&de<ee.length;de++)this._eachEntry(ee[de],de)},oe.prototype._eachEntry=function(ee,de){var ye=this._instanceConstructor,we=ye.resolve;if(we===D){var ge,xe=void 0,ke=void 0,Fe=!1;try{xe=ee.then}catch(Me){Fe=!0,ke=Me}xe===C&&ee._state!==B?this._settledAt(ee._state,de,ee._result):typeof xe!="function"?(this._remaining--,this._result[de]=ee):ye===ce?(ge=new ye(I),Fe?A(ge,ke):X(ge,ee,xe),this._willSettleAt(ge,de)):this._willSettleAt(new ye(function(Me){return Me(ee)}),de)}else this._willSettleAt(we(ee),de)},oe.prototype._settledAt=function(ee,de,ye){var we=this.promise;we._state===B&&(this._remaining--,ee===G?A(we,ye):this._result[de]=ye),this._remaining===0&&M(we,this._result)},oe.prototype._willSettleAt=function(ee,de){var ye=this;z(ee,void 0,function(we){return ye._settledAt(W,de,we)},function(we){return ye._settledAt(G,de,we)})};var he=oe;function oe(ee,de){this._instanceConstructor=ee,this.promise=new ee(I),this.promise[F]||ie(this.promise),v(de)?(this.length=de.length,this._remaining=de.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(de),this._remaining!==0)||M(this.promise,this._result)):A(this.promise,new Error("Array Methods must be provided an Array"))}fe.prototype.catch=function(ee){return this.then(null,ee)},fe.prototype.finally=function(ee){var de=this.constructor;return b(ee)?this.then(function(ye){return de.resolve(ee()).then(function(){return ye})},function(ye){return de.resolve(ee()).then(function(){throw ye})}):this.then(ee,ee)};var ce=fe;function fe(ee){if(this[F]=te++,this._result=this._state=void 0,this._subscribers=[],I!==ee){if(typeof ee!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof fe))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var de=this;try{ee(function(ye){Q(de,ye)},function(ye){A(de,ye)})}catch(ye){A(de,ye)}}}return ce.prototype.then=C,ce.all=function(ee){return new he(this,ee).promise},ce.race=function(ee){var de=this;return v(ee)?new de(function(ye,we){for(var ge=ee.length,xe=0;xe<ge;xe++)de.resolve(ee[xe]).then(ye,we)}):new de(function(ye,we){return we(new TypeError("You must pass an array to race."))})},ce.resolve=D,ce.reject=function(ee){var de=new this(I);return A(de,ee),de},ce._setScheduler=function(ee){f=ee},ce._setAsap=function(ee){y=ee},ce._asap=y,ce.polyfill=function(){var ee=void 0;if(p!==void 0)ee=p;else if(typeof self<"u")ee=self;else try{ee=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var de=ee.Promise;if(de){var ye=null;try{ye=Object.prototype.toString.call(de.resolve())}catch{}if(ye==="[object Promise]"&&!de.cast)return}ee.Promise=ce},ce.Promise=ce},typeof u=="object"&&m!==void 0?m.exports=h():s.ES6Promise=h()}).call(this,t("_process"),typeof ni<"u"?ni:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:259}],251:[function(t,m,u){var a,p;a=this,p=function(s,h){var b=5e3,v="callback";function i(f){try{delete window[f]}catch{window[f]=void 0}}function d(f){f=document.getElementById(f),f&&document.getElementsByTagName("head")[0].removeChild(f)}h.exports=function(f){var y=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],g=f,c=y.timeout||b,l=y.jsonpCallback||v,w=void 0;return new Promise(function(x,_){var T=y.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),E=l+"_"+T,S=(window[T]=function(P){x({ok:!0,json:function(){return Promise.resolve(P)}}),w&&clearTimeout(w),d(E),i(T)},g+=g.indexOf("?")===-1?"?":"&",document.createElement("script"));S.setAttribute("src",""+g+l+"="+T),y.charset&&S.setAttribute("charset",y.charset),S.id=E,document.getElementsByTagName("head")[0].appendChild(S),w=setTimeout(function(){_(new Error("JSONP request to "+f+" timed out")),i(T),d(E),window[T]=function(){i(T)}},c),S.onerror=function(){_(new Error("JSONP request to "+f+" failed")),i(T),d(E),w&&clearTimeout(w)}})}},u!==void 0&&m!==void 0?p(0,m):(p(p={exports:{}},p),a.fetchJsonp=p.exports)},{}],252:[function(t,m,u){var a=function(p){var s,h,b,v,i,d,f,y,g,c,l;if(!(p===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return l=p.document,s=function(){return p.URL||p.webkitURL||p},h=l.createElementNS("http://www.w3.org/1999/xhtml","a"),b="download"in h,v=/constructor/i.test(p.HTMLElement)||p.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent),d=function(w){(p.setImmediate||p.setTimeout)(function(){throw w},0)},f=4e4,y=function(w){setTimeout(function(){typeof w=="string"?s().revokeObjectURL(w):w.remove()},f)},g=function(w){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(w.type)?new Blob(["\uFEFF",w],{type:w.type}):w},l=(c=function(w,x,P){P||(w=g(w));var T,E,S=this,P=w.type==="application/octet-stream",N=function(){for(var C=S,D="writestart progress write writeend".split(" "),L=void 0,F=(D=[].concat(D)).length;F--;){var I=C["on"+D[F]];if(typeof I=="function")try{I.call(C,L||C)}catch(B){d(B)}}};S.readyState=S.INIT,b?(T=s().createObjectURL(w),setTimeout(function(){var C,D;h.href=T,h.download=x,C=h,D=new MouseEvent("click"),C.dispatchEvent(D),N(),y(T),S.readyState=S.DONE})):(i||P&&v)&&p.FileReader?((E=new FileReader).onloadend=function(){var C=i?E.result:E.result.replace(/^data:[^;]*;/,"data:attachment/file;");p.open(C,"_blank")||(p.location.href=C),C=void 0,S.readyState=S.DONE,N()},E.readAsDataURL(w),S.readyState=S.INIT):(T=T||s().createObjectURL(w),!P&&p.open(T,"_blank")||(p.location.href=T),S.readyState=S.DONE,N(),y(T))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(w,x,_){return x=x||w.name||"download",_||(w=g(w)),navigator.msSaveOrOpenBlob(w,x)}:(l.abort=function(){},l.readyState=l.INIT=0,l.WRITING=1,l.DONE=2,l.error=l.onwritestart=l.onprogress=l.onwrite=l.onabort=l.onerror=l.onwriteend=null,function(w,x,_){return new c(w,x||w.name||"download",_)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);m!==void 0&&m.exports?m.exports.saveAs=a:o!=null},{}],253:[function(t,m,u){var a,p=Object.defineProperty,s=(p(u,"__esModule",{value:!0}),u),h={GIFEncoder:()=>N,applyPalette:()=>function(B,W,G="rgb565"){if(!B||!B.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(B instanceof Uint8Array||B instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<W.length)throw new Error("applyPalette() only works with 256 colors or less");const V=new Uint32Array(B.buffer),X=V.length,Q=G==="rgb444"?4096:65536,se=new Uint8Array(X),M=new Array(Q);if(G==="rgba4444")for(let fe=0;fe<X;fe++){var Z=V[fe],A=Z>>24&255,z=Z>>16&255,$=Z>>8&255,Z=255&Z,te=y(Z,$,z,A),te=te in M?M[te]:M[te]=function(ee,de,ye,we,ge){let xe=0,ke=1e100;for(let We=0;We<ge.length;We++){var Fe,Me=ge[We],Je=E(Me[3]-we);Je>ke||(Fe=Me[0],(Je+=E(Fe-ee))>ke||(Fe=Me[1],(Je+=E(Fe-de))>ke||(Fe=Me[2],(Je+=E(Fe-ye))>ke||(ke=Je,xe=We))))}return xe}(Z,$,z,A,W);se[fe]=te}else{const fe=G==="rgb444"?g:f;for(let ee=0;ee<X;ee++){var oe=V[ee],ie=oe>>16&255,he=oe>>8&255,oe=255&oe,ce=fe(oe,he,ie),ce=ce in M?M[ce]:M[ce]=function(de,ye,we,ge){let xe=0,ke=1e100;for(let We=0;We<ge.length;We++){var Fe,Me=ge[We],Je=E(Me[0]-de);Je>ke||(Fe=Me[1],(Je+=E(Fe-ye))>ke||(Fe=Me[2],(Je+=E(Fe-we))>ke||(ke=Je,xe=We)))}return xe}(oe,he,ie,W);se[ee]=ce}}return se},default:()=>I,nearestColor:()=>function(B,W,G=_){return B[S(B,W,G)]},nearestColorIndex:()=>S,nearestColorIndexWithDistance:()=>P,prequantize:()=>function(B,{roundRGB:W=5,roundAlpha:G=10,oneBitAlpha:V=null}={}){const X=new Uint32Array(B.buffer);for(let z=0;z<X.length;z++){var A=X[z];let $=A>>24&255;var Q,se=A>>16&255,M=A>>8&255,A=255&A;$=T($,G),V&&(Q=typeof V=="number"?V:127,$=$<=Q?0:255),A=T(A,W),M=T(M,W),se=T(se,W),X[z]=$<<24|se<<16|M<<8|A<<0}},quantize:()=>function(B,W,G={}){var{format:V="rgb565",clearAlpha:X=!0,clearAlphaColor:Q=0,clearAlphaThreshold:se=0,oneBitAlpha:M=!1}=G;if(!B||!B.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(B instanceof Uint8Array||B instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");B=new Uint32Array(B.buffer);let A=G.useSqrt!==!1;const z=V==="rgba4444",$=function(qe,Xe){const $e=Xe==="rgb444"?4096:65536,je=new Array($e),Ae=qe.length;if(Xe==="rgba4444")for(let it=0;it<Ae;++it){var K=qe[it],Ee=K>>24&255,J=K>>16&255,ne=K>>8&255,K=255&K,ae=y(K,ne,J,Ee);let tt=ae in je?je[ae]:je[ae]=x();tt.rc+=K,tt.gc+=ne,tt.bc+=J,tt.ac+=Ee,tt.cnt++}else if(Xe==="rgb444")for(let it=0;it<Ae;++it){var Le=qe[it],ve=Le>>16&255,Se=Le>>8&255,Le=255&Le,Be=g(Le,Se,ve);let tt=Be in je?je[Be]:je[Be]=x();tt.rc+=Le,tt.gc+=Se,tt.bc+=ve,tt.cnt++}else for(let it=0;it<Ae;++it){var Ke=qe[it],Ve=Ke>>16&255,He=Ke>>8&255,Ke=255&Ke,ut=f(Ke,He,Ve);let tt=ut in je?je[ut]:je[ut]=x();tt.rc+=Ke,tt.gc+=He,tt.bc+=Ve,tt.cnt++}return je}(B,V),Z=$.length,te=Z-1,ie=new Uint32Array(Z+1);for(var he=0,oe=0;oe<Z;++oe){const qe=$[oe];qe!=null&&(Me=1/qe.cnt,z&&(qe.ac*=Me),qe.rc*=Me,qe.gc*=Me,qe.bc*=Me,$[he++]=qe)}l(W)/he<.022&&(A=!1);for(var ce,fe,ee,oe=0;oe<he-1;++oe)$[oe].fw=oe+1,$[oe+1].bk=oe,A&&($[oe].cnt=Math.sqrt($[oe].cnt));for(A&&($[oe].cnt=Math.sqrt($[oe].cnt)),oe=0;oe<he;++oe){w($,oe);var de=$[oe].err;for(fe=++ie[0];1<fe&&(ee=fe>>1,!($[ce=ie[ee]].err<=de));fe=ee)ie[fe]=ce;ie[fe]=oe}var ye,we=he-W;for(oe=0;oe<we;){for(;;){var ge=ie[1];if((ye=$[ge]).tm>=ye.mtm&&$[ye.nn].mtm<=ye.tm)break;for(ye.mtm==te?ge=ie[1]=ie[ie[0]--]:(w($,ge),ye.tm=oe),de=$[ge].err,fe=1;(ee=fe+fe)<=ie[0]&&(ee<ie[0]&&$[ie[ee]].err>$[ie[ee+1]].err&&ee++,!(de<=$[ce=ie[ee]].err));fe=ee)ie[fe]=ce;ie[fe]=ge}var xe=$[ye.nn],ke=ye.cnt,Fe=xe.cnt,Me=1/(ke+Fe);z&&(ye.ac=Me*(ke*ye.ac+Fe*xe.ac)),ye.rc=Me*(ke*ye.rc+Fe*xe.rc),ye.gc=Me*(ke*ye.gc+Fe*xe.gc),ye.bc=Me*(ke*ye.bc+Fe*xe.bc),ye.cnt+=xe.cnt,ye.mtm=++oe,$[xe.bk].fw=xe.fw,$[xe.fw].bk=xe.bk,xe.mtm=te}let Je=[];for(oe=0;;0){let qe=c(Math.round($[oe].rc),0,255),Xe=c(Math.round($[oe].gc),0,255),$e=c(Math.round($[oe].bc),0,255),je=255;z&&(je=c(Math.round($[oe].ac),0,255),M&&(We=typeof M=="number"?M:127,je=je<=We?0:255),X&&je<=se&&(qe=Xe=$e=Q,je=0));var We=z?[qe,Xe,$e,je]:[qe,Xe,$e];if(function(Ae,Ee){for(let K=0;K<Ae.length;K++){var ne=Ae[K],J=ne[0]===Ee[0]&&ne[1]===Ee[1]&&ne[2]===Ee[2],ne=!(4<=ne.length&&4<=Ee.length)||ne[3]===Ee[3];if(J&&ne)return!0}return!1}(Je,We)||Je.push(We),(oe=$[oe].fw)==0)break}return Je},snapColorsToPalette:()=>function(B,W,G=5){if(B.length&&W.length){var V=B.map(A=>A.slice(0,3)),X=G*G,Q=B[0].length;for(let A=0;A<W.length;A++){let z=W[A];z=z.length<Q?[z[0],z[1],z[2],255]:z.length>Q?z.slice(0,3):z.slice();var M=P(V,z.slice(0,3),_),se=M[0],M=M[1];0<M&&M<=X&&(B[se]=z)}}}};for(a in h)p(s,a,{get:h[a],enumerable:!0});var b={trailer:59};function v(B=256){let W=0,G=new Uint8Array(B);return{get buffer(){return G.buffer},reset(){W=0},bytesView(){return G.subarray(0,W)},bytes(){return G.slice(0,W)},writeByte(X){V(W+1),G[W]=X,W++},writeBytes(X,Q=0,se=X.length){V(W+se);for(let M=0;M<se;M++)G[W++]=X[M+Q]},writeBytesView(X,Q=0,se=X.byteLength){V(W+se),G.set(X.subarray(Q,Q+se),W),W+=se}};function V(X){var Q=G.length;if(!(X<=Q)){X=Math.max(X,Q*(Q<1048576?2:1.125)>>>0),Q!=0&&(X=Math.max(X,256));const se=G;G=new Uint8Array(X),0<W&&G.set(se.subarray(0,W),0)}}}var i=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],d=function(B,W,G,z,X=v(512),Q=new Uint8Array(256),se=new Int32Array(5003),M=new Int32Array(5003)){var A=se.length,z=Math.max(2,z);Q.fill(0),M.fill(0),se.fill(-1);let $=0,Z=0;var te=z+1;const ie=te;let he=!1,oe=ie,ce=(1<<oe)-1;var fe=1<<te-1;const ee=1+fe;let de=2+fe,ye=0,we=G[0],ge=0;for(let We=A;We<65536;We*=2)++ge;ge=8-ge,X.writeByte(z),Je(fe);var xe=G.length;for(let We=1;We<xe;We++)e:{var ke=G[We],Fe=(ke<<12)+we;let qe=ke<<ge^we;if(se[qe]===Fe)we=M[qe];else{for(var Me=qe===0?1:A-qe;0<=se[qe];)if((qe-=Me)<0&&(qe+=A),se[qe]===Fe){we=M[qe];break e}Je(we),we=ke,de<4096?(M[qe]=de++,se[qe]=Fe):(se.fill(-1),de=2+fe,he=!0,Je(fe))}}return Je(we),Je(ee),X.writeByte(0),X.bytesView();function Je(We){for($&=i[Z],0<Z?$|=We<<Z:$=We,Z+=oe;8<=Z;)Q[ye++]=255&$,254<=ye&&(X.writeByte(ye),X.writeBytesView(Q,0,ye),ye=0),$>>=8,Z-=8;if((de>ce||he)&&(he?(oe=ie,ce=(1<<oe)-1,he=!1):(++oe,ce=oe===12?1<<oe:(1<<oe)-1)),We==ee){for(;0<Z;)Q[ye++]=255&$,254<=ye&&(X.writeByte(ye),X.writeBytesView(Q,0,ye),ye=0),$>>=8,Z-=8;0<ye&&(X.writeByte(ye),X.writeBytesView(Q,0,ye),ye=0)}}};function f(B,W,G){return B<<8&63488|W<<2&992|G>>3}function y(B,W,G,V){return B>>4|240&W|(240&G)<<4|(240&V)<<8}function g(B,W,G){return B>>4<<8|240&W|G>>4}function c(B,W,G){return B<W?W:G<B?G:B}function l(B){return B*B}function w(B,W,G){var V=0,X=1e100;const Q=B[W];for(var se=Q.cnt,M=Q.ac,A=Q.rc,z=Q.gc,$=Q.bc,Z=Q.fw;Z!=0;Z=B[Z].fw){var te,ie=B[Z],he=ie.cnt,he=se*he/(se+he);X<=he||(te=0,X<=(te+=he*l(ie.rc-A))||X<=(te+=he*l(ie.gc-z))||X<=(te+=he*l(ie.bc-$))||(X=te,V=Z))}Q.err=X,Q.nn=V}function x(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function _(B,W){for(var G=0,V=0;V<B.length;V++){var X=B[V]-W[V];G+=X*X}return G}function T(B,W){return 1<W?Math.round(B/W)*W:B}function E(B){return B*B}function S(B,W,G=_){let V=1/0,X=-1;for(let se=0;se<B.length;se++){var Q=G(W,B[se]);Q<V&&(V=Q,X=se)}return X}function P(B,W,G=_){let V=1/0,X=-1;for(let se=0;se<B.length;se++){var Q=G(W,B[se]);Q<V&&(V=Q,X=se)}return[X,V]}function N(B={}){const{initialCapacity:W=4096,auto:G=!0}=B,V=v(W),X=new Uint8Array(256),Q=new Int32Array(5003),se=new Int32Array(5003);let M=!1;return{reset(){V.reset(),M=!1},finish(){V.writeByte(b.trailer)},bytes(){return V.bytes()},bytesView(){return V.bytesView()},get buffer(){return V.buffer},get stream(){return V},writeHeader:A,writeFrame(z,$,Z,we={}){var{transparent:ie=!1,transparentIndex:he=0,delay:Me=0,palette:oe=null,repeat:xe=0,colorDepth:ce=8,dispose:fe=-1}=we;let ee=!1;if(G?M||(ee=!0,A(),M=!0):ee=!!we.first,$=Math.max(0,Math.floor($)),Z=Math.max(0,Math.floor(Z)),ee){if(!oe)throw new Error("First frame must include a { palette } option");var[we,ke,ye,Fe,ge=8]=[V,$,Z,oe,ce];Fe=F(Fe.length)-1,ge=128|ge-1<<4|Fe,D(we,ke),D(we,ye),we.writeBytes([ge,0,0]),C(V,oe),0<=xe&&(Fe=V,ke=xe,Fe.writeByte(33),Fe.writeByte(255),Fe.writeByte(11),L(Fe,"NETSCAPE2.0"),Fe.writeByte(3),Fe.writeByte(1),D(Fe,ke),Fe.writeByte(0))}var de,ye=Math.round(Me/10),we=V,ge=fe,xe=ye,ke=ie,Fe=he,Me=(we.writeByte(33),we.writeByte(249),we.writeByte(4),Fe<0&&(Fe=0,ke=!1),ke=ke?(de=1,2):de=0,0<=ge&&(ke=7&ge),ke<<=2,we.writeByte(0|ke|de),D(we,xe),we.writeByte(Fe||0),we.writeByte(0),!!oe&&!ee);fe=V,ie=$,he=Z,de=Me?oe:null,fe.writeByte(44),D(fe,0),D(fe,0),D(fe,ie),D(fe,he),de?(ie=F(de.length)-1,fe.writeByte(128|ie)):fe.writeByte(0),Me&&C(V,oe),[xe,we,he,ie,fe=8,Me,oe,z]=[V,z,$,Z,ce,X,Q,se],d(he,ie,we,fe,xe,Me,oe,z)}};function A(){L(V,"GIF89a")}}function C(B,W){var G=1<<F(W.length);for(let V=0;V<G;V++){let X=[0,0,0];V<W.length&&(X=W[V]),B.writeByte(X[0]),B.writeByte(X[1]),B.writeByte(X[2])}}function D(B,W){B.writeByte(255&W),B.writeByte(W>>8&255)}function L(B,W){for(var G=0;G<W.length;G++)B.writeByte(W.charCodeAt(G))}function F(B){return Math.max(Math.ceil(Math.log2(B)),1)}var I=N},{}],254:[function(t,m,u){u.read=function(a,p,s,h,w){var v,i,d=8*w-h-1,f=(1<<d)-1,y=f>>1,g=-7,c=s?w-1:0,l=s?-1:1,w=a[p+c];for(c+=l,v=w&(1<<-g)-1,w>>=-g,g+=d;0<g;v=256*v+a[p+c],c+=l,g-=8);for(i=v&(1<<-g)-1,v>>=-g,g+=h;0<g;i=256*i+a[p+c],c+=l,g-=8);if(v===0)v=1-y;else{if(v===f)return i?NaN:1/0*(w?-1:1);i+=Math.pow(2,h),v-=y}return(w?-1:1)*i*Math.pow(2,v-h)},u.write=function(a,p,s,h,b,x){var i,d,f=8*x-b-1,y=(1<<f)-1,g=y>>1,c=b===23?Math.pow(2,-24)-Math.pow(2,-77):0,l=h?0:x-1,w=h?1:-1,x=p<0||p===0&&1/p<0?1:0;for(p=Math.abs(p),isNaN(p)||p===1/0?(d=isNaN(p)?1:0,i=y):(i=Math.floor(Math.log(p)/Math.LN2),p*(h=Math.pow(2,-i))<1&&(i--,h*=2),2<=(p+=1<=i+g?c/h:c*Math.pow(2,1-g))*h&&(i++,h/=2),y<=i+g?(d=0,i=y):1<=i+g?(d=(p*h-1)*Math.pow(2,b),i+=g):(d=p*Math.pow(2,g-1)*Math.pow(2,b),i=0));8<=b;a[s+l]=255&d,l+=w,d/=256,b-=8);for(i=i<<b|d,f+=b;0<f;a[s+l]=255&i,l+=w,i/=256,f-=8);a[s+l-w]|=128*x}},{}],255:[function(t,m,u){var a;function p(J,ne){return J.b===ne.b&&J.a===ne.a}function s(J,ne){return J.b<ne.b||J.b===ne.b&&J.a<=ne.a}function h(J,ne,K){var ae=ne.b-J.b,ve=K.b-ne.b;return 0<ae+ve?ae<ve?ne.a-J.a+ae/(ae+ve)*(J.a-K.a):ne.a-K.a+ve/(ae+ve)*(K.a-J.a):0}function b(J,ne,K){var ae=ne.b-J.b,ve=K.b-ne.b;return 0<ae+ve?(ne.a-K.a)*ae+(ne.a-J.a)*ve:0}function v(J,ne){return J.a<ne.a||J.a===ne.a&&J.b<=ne.b}function i(J,ne,K){var ae=ne.a-J.a,ve=K.a-ne.a;return 0<ae+ve?ae<ve?ne.b-J.b+ae/(ae+ve)*(J.b-K.b):ne.b-K.b+ve/(ae+ve)*(K.b-J.b):0}function d(J,ne,K){var ae=ne.a-J.a,ve=K.a-ne.a;return 0<ae+ve?(ne.b-K.b)*ae+(ne.b-J.b)*ve:0}function f(J,ne,K,ae){return(J=J<0?0:J)<=(K=K<0?0:K)?K===0?(ne+ae)/2:ne+J/(J+K)*(ae-ne):ae+K/(J+K)*(ne-ae)}function y(J){var ne=x(J.b);return T(ne,J.c),T(ne.b,J.c),E(ne,J.a),ne}function g(J,ne){var K=!1,ae=!1;J!==ne&&(ne.a!==J.a&&(ae=!0,P(ne.a,J.a)),ne.d!==J.d&&(K=!0,N(ne.d,J.d)),_(ne,J),ae||(T(ne,J.a),J.a.c=J),K||(E(ne,J.d),J.d.a=J))}function c(J){var ne=J.b,K=!1;J.d!==J.b.d&&(K=!0,N(J.d,J.b.d)),J.c===J?P(J.a,null):(J.b.d.a=J.b.e,J.a.c=J.c,_(J,J.b.e),K||E(J,J.d)),ne.c===ne?(P(ne.a,null),N(ne.d,null)):(J.d.a=ne.b.e,ne.a.c=ne.c,_(ne,ne.b.e)),S(J)}function l(J){var ne=x(J),K=ne.b;return _(ne,J.e),ne.a=J.b.a,T(K,ne.a),ne.d=K.d=J.d,ne=ne.b,_(J.b,J.b.b.e),_(J.b,ne),J.b.a=ne.a,ne.b.a.c=ne.b,ne.b.d=J.b.d,ne.f=J.f,ne.b.f=J.b.f,ne}function w(J,ne){var K=!1,ae=x(J),ve=ae.b;return ne.d!==J.d&&(K=!0,N(ne.d,J.d)),_(ae,J.e),_(ve,ne),ae.a=J.b.a,ve.a=ne.a,ae.d=ve.d=J.d,J.d.a=ve,K||E(ae,J.d),ae}function x(J){var ne=new ye,K=new ye,ae=J.b.h;return(((K.h=ae).b.h=ne).h=J).b.h=K,ne.b=K,((ne.c=ne).e=K).b=ne,(K.c=K).e=ne}function _(J,ne){var K=J.c,ae=ne.c;K.b.e=ne,(ae.b.e=J).c=ae,ne.c=K}function T(J,ne){var K=ne.f,ae=new ge(ne,K);for(K.e=ae,K=(ne.f=ae).c=J;K.a=ae,(K=K.c)!==J;);}function E(J,ne){var K=ne.d,ae=new de(ne,K);for(K.b=ae,(ne.d=ae).a=J,ae.c=ne.c,K=J;K.d=ae,(K=K.e)!==J;);}function S(J){var ne=J.h;J=J.b.h,(ne.b.h=J).b.h=ne}function P(J,ne){for(var K=J.c,ae=K;ae.a=ne,(ae=ae.c)!==K;);K=J.f,((ae=J.e).f=K).e=ae}function N(J,ne){for(var K=J.a,ae=K;ae.d=ne,(ae=ae.e)!==K;);K=J.d,((ae=J.b).d=K).b=ae}function C(J){var ne=0;return Math.abs(J[1])>Math.abs(J[0])&&(ne=1),ne=Math.abs(J[2])>Math.abs(J[ne])?2:ne}function D(J,ne){J.f+=ne.f,J.b.f+=ne.b.f}function L(J,ne,K){return J=J.a,ne=ne.a,K=K.a,ne.b.a===J?K.b.a===J?s(ne.a,K.a)?b(K.b.a,ne.a,K.a)<=0:0<=b(ne.b.a,K.a,ne.a):b(K.b.a,J,K.a)<=0:K.b.a===J?0<=b(ne.b.a,J,ne.a):(ne=h(ne.b.a,J,ne.a),(J=h(K.b.a,J,K.a))<=ne)}function F(J){J.a.i=null;var ne=J.e;ne.a.c=ne.c,ne.c.a=ne.a,J.e=null}function I(J,ne){c(J.a),J.c=!1,(J.a=ne).i=J}function B(J){for(var ne=J.a.a;(J=Ee(J)).a.a===ne;);return J.c&&(I(J,ne=w(Ae(J).a.b,J.a.e)),J=Ee(J)),J}function W(J,ne,K){var ae=new je;return ae.a=K,ae.e=he(J.f,ne.e,ae),K.i=ae}function G(J,ne){switch(J.s){case 100130:return(1&ne)!=0;case 100131:return ne!==0;case 100132:return 0<ne;case 100133:return ne<0;case 100134:return 2<=ne||ne<=-2}return!1}function V(J){var ne=J.a,K=ne.d;K.c=J.d,K.a=ne,F(J)}function X(J,ne,K){for(ne=(J=ne).a;J!==K;){J.c=!1;var ae=Ae(J),ve=ae.a;if(ve.a!==ne.a){if(!ae.c){V(J);break}I(ae,ve=w(ne.c.b,ve.b))}ne.c!==ve&&(g(ve.b.e,ve),g(ne,ve)),V(J),ne=ae.a,J=ae}return ne}function Q(J,ne,K,ae,ve,Se){for(var Le=!0;W(J,ne,K.b),(K=K.c)!==ae;);for(ve===null&&(ve=Ae(ne).a.b.c);(K=(ae=Ae(ne)).a.b).a===ve.a;)K.c!==ve&&(g(K.b.e,K),g(ve.b.e,K)),ae.f=ne.f-K.f,ae.d=G(J,ae.f),ne.b=!0,!Le&&z(J,ne)&&(D(K,ve),F(ne),c(ve)),Le=!1,ne=ae,ve=K;ne.b=!0,Se&&Z(J,ne)}function se(J,ne,K,ae,ve){var Se=[ne.g[0],ne.g[1],ne.g[2]];ne.d=null,ne.d=J.o&&J.o(Se,K,ae,J.c)||null,ne.d===null&&(ve?J.n||(ee(J,100156),J.n=!0):ne.d=K[0])}function M(J,ne,K){var ae=[null,null,null,null];ae[0]=ne.a.d,ae[1]=K.a.d,se(J,ne.a,ae,[.5,.5,0,0],!1),g(ne,K)}function A(J,ne,K,ae,ve){var Se=Math.abs(ne.b-J.b)+Math.abs(ne.a-J.a),Le=Math.abs(K.b-J.b)+Math.abs(K.a-J.a),Be=ve+1;ae[ve]=.5*Le/(Se+Le),ae[Be]=.5*Se/(Se+Le),J.g[0]+=ae[ve]*ne.g[0]+ae[Be]*K.g[0],J.g[1]+=ae[ve]*ne.g[1]+ae[Be]*K.g[1],J.g[2]+=ae[ve]*ne.g[2]+ae[Be]*K.g[2]}function z(J,ne){var K=Ae(ne),ae=ne.a,ve=K.a;if(s(ae.a,ve.a)){if(0<b(ve.b.a,ae.a,ve.a))return;if(p(ae.a,ve.a)){if(ae.a!==ve.a){var K=J.e,Se=ae.a.h;if(0<=Se){var Le=(K=K.b).d,Be=K.e,Ve=K.c,He=Ve[Se];Le[He]=Le[K.a],(Ve[Le[He]]=He)<=--K.a&&(He<=1||s(Be[Le[He>>1]],Be[Le[He]])?Xe:$e)(K,He),Be[Se]=null,Ve[Se]=K.b,K.b=Se}else for(K.c[-(Se+1)]=null;0<K.a&&K.c[K.d[K.a-1]]===null;)--K.a;M(J,ve.b.e,ae)}}else l(ve.b),g(ae,ve.b.e),ne.b=K.b=!0}else{if(b(ae.b.a,ve.a,ae.a)<0)return;Ee(ne).b=ne.b=!0,l(ae.b),g(ve.b.e,ae)}return 1}function $(J,ne){var K=Ae(ne),ae=ne.a,ve=K.a,Se=ae.a,Le=ve.a,Be=ae.b.a,Ve=ve.b.a,He=new ge;if(b(Be,J.a,Se),b(Ve,J.a,Le),!(Se===Le||Math.min(Se.a,Be.a)>Math.max(Le.a,Ve.a))){if(s(Se,Le)){if(0<b(Ve,Se,Le))return}else if(b(Be,Le,Se)<0)return;var Ke,ut,it=Be,tt=Se,lt=Ve,at=Le;if(s(it,tt)||(Ke=it,it=tt,tt=Ke),s(lt,at)||(Ke=lt,lt=at,at=Ke),s(it,lt)||(Ke=it,it=lt,lt=Ke,Ke=tt,tt=at,at=Ke),s(lt,tt)?s(tt,at)?((Ke=h(it,lt,tt))+(ut=h(lt,tt,at))<0&&(Ke=-Ke,ut=-ut),He.b=f(Ke,lt.b,ut,tt.b)):((Ke=b(it,lt,tt))+(ut=-b(it,at,tt))<0&&(Ke=-Ke,ut=-ut),He.b=f(Ke,lt.b,ut,at.b)):He.b=(lt.b+tt.b)/2,v(it,tt)||(Ke=it,it=tt,tt=Ke),v(lt,at)||(Ke=lt,lt=at,at=Ke),v(it,lt)||(Ke=it,it=lt,lt=Ke,Ke=tt,tt=at,at=Ke),v(lt,tt)?v(tt,at)?((Ke=i(it,lt,tt))+(ut=i(lt,tt,at))<0&&(Ke=-Ke,ut=-ut),He.a=f(Ke,lt.a,ut,tt.a)):((Ke=d(it,lt,tt))+(ut=-d(it,at,tt))<0&&(Ke=-Ke,ut=-ut),He.a=f(Ke,lt.a,ut,at.a)):He.a=(lt.a+tt.a)/2,s(He,J.a)&&(He.b=J.a.b,He.a=J.a.a),it=s(Se,Le)?Se:Le,s(it,He)&&(He.b=it.b,He.a=it.a),p(He,Se)||p(He,Le))return z(J,ne),0;if(!p(Be,J.a)&&0<=b(Be,J.a,He)||!p(Ve,J.a)&&b(Ve,J.a,He)<=0){if(Ve===J.a)l(ae.b),g(ve.b,ae),ae=Ae(ne=B(ne)).a,X(J,Ae(ne),K),Q(J,ne,ae.b.e,ae,ae,!0);else{if(Be!==J.a)return 0<=b(Be,J.a,He)&&(Ee(ne).b=ne.b=!0,l(ae.b),ae.a.b=J.a.b,ae.a.a=J.a.a),void(b(Ve,J.a,He)<=0&&(ne.b=K.b=!0,l(ve.b),ve.a.b=J.a.b,ve.a.a=J.a.a));for(l(ve.b),g(ae.e,ve.b.e),Le=(Se=K=ne).a.b.a;(Se=Ee(Se)).a.b.a===Le;);Se=Ae(ne=Se).a.b.c,K.a=ve.b.e,Q(J,ne,(ve=X(J,K,null)).c,ae.b.c,Se,!0)}return 1}l(ae.b),l(ve.b),g(ve.b.e,ae),ae.a.b=He.b,ae.a.a=He.a,ae.a.h=ke(J.e,ae.a),ae=ae.a,ve=[0,0,0,0],He=[Se.d,Be.d,Le.d,Ve.d],ae.g[0]=ae.g[1]=ae.g[2]=0,A(ae,Se,Be,ve,0),A(ae,Le,Ve,ve,2),se(J,ae,He,ve,!0),Ee(ne).b=ne.b=K.b=!0}}function Z(J,ne){for(var K=Ae(ne);;){for(;K.b;)K=Ae(ne=K);if(!ne.b&&((ne=Ee(K=ne))===null||!ne.b))break;ne.b=!1;var ae=ne.a,ve=K.a;if(Se=ae.b.a!==ve.b.a)e:{var Se,Le=Ae(Se=ne),Be=Se.a,Ve=Le.a,He=void 0;if(s(Be.b.a,Ve.b.a)){if(b(Be.b.a,Ve.b.a,Be.a)<0){Se=!1;break e}Ee(Se).b=Se.b=!0,He=l(Be),g(Ve.b,He),He.d.c=Se.d}else{if(0<b(Ve.b.a,Be.b.a,Ve.a)){Se=!1;break e}Se.b=Le.b=!0,He=l(Ve),g(Be.e,Ve.b),He.b.d.c=Se.d}Se=!0}if(Se&&(K.c?(F(K),c(ve),ve=(K=Ae(ne)).a):ne.c&&(F(ne),c(ae),ae=(ne=Ee(K)).a)),ae.a!==ve.a){if(ae.b.a===ve.b.a||ne.c||K.c||ae.b.a!==J.a&&ve.b.a!==J.a)z(J,ne);else if($(J,ne))break}ae.a===ve.a&&ae.b.a===ve.b.a&&(D(ve,ae),F(ne),c(ae),ne=Ee(K))}}function te(J,ne){var K=new je,ae=y(J.b);ae.a.b=4e150,ae.a.a=ne,ae.b.a.b=-4e150,ae.b.a.a=ne,J.a=ae.b.a,K.a=ae,K.f=0,K.d=!1,K.c=!1,K.h=!0,K.b=!1,ae=he(ae=J.f,ae.a,K),K.e=ae}function ie(J){this.a=new oe,this.b=J,this.c=L}function he(J,ne,K){for(;(ne=ne.c).b!==null&&!J.c(J.b,ne.b,K););return J=new oe(K,ne.a,ne),ne.a.c=J,ne.a=J}function oe(J,ne,K){this.b=J||null,this.a=ne||this,this.c=K||this}function ce(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function fe(J,ne){if(J.d!==ne)for(;J.d!==ne;)if(J.d<ne)switch(J.d){case 0:ee(J,100151),J.u(null);break;case 1:ee(J,100152),J.t()}else switch(J.d){case 2:ee(J,100154),J.v();break;case 1:ee(J,100153),J.w()}}function ee(J,ne){J.p&&J.p(ne,J.c)}function de(J,ne){this.b=J||this,this.d=ne||this,this.a=null,this.c=!1}function ye(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function we(){this.c=new ge,this.a=new de,this.b=new ye,this.d=new ye,this.b.b=this.d,this.d.b=this.b}function ge(J,ne){this.e=J||this,this.f=ne||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function xe(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new Me}function ke(J,ne){var K,ae,ve;return J.e?(2*(ae=++(K=J.b).a)>K.f&&(K.f*=2,K.c=Je(K.c,K.f+1)),K.b===0?ve=ae:(ve=K.b,K.b=K.c[K.b]),K.e[ve]=ne,K.c[ve]=ae,K.d[ae]=ve,K.h&&$e(K,ae),ve):(K=J.a++,J.c[K]=ne,-(K+1))}function Fe(J){if(J.a===0)return qe(J.b);var ne=J.c[J.d[J.a-1]];if(J.b.a!==0&&s(We(J.b),ne))return qe(J.b);for(;--J.a,0<J.a&&J.c[J.d[J.a-1]]===null;);return ne}function Me(){this.d=Je([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function Je(J,ne){for(var K=Array(ne),ae=0;ae<J.length;ae++)K[ae]=J[ae];for(;ae<ne;ae++)K[ae]=0;return K}function We(J){return J.e[J.d[1]]}function qe(J){var ne=J.d,K=J.e,ae=J.c,ve=ne[1],Se=K[ve];return 0<J.a&&(ne[1]=ne[J.a],ae[ne[1]]=1,K[ve]=null,ae[ve]=J.b,J.b=ve,0<--J.a&&Xe(J,1)),Se}function Xe(J,ne){for(var K=J.d,ae=J.e,ve=J.c,Se=ne,Le=K[Se];;){var Be=Se<<1,Ve=(Be<J.a&&s(ae[K[Be+1]],ae[K[Be]])&&(Be+=1),K[Be]);if(Be>J.a||s(ae[Le],ae[Ve])){ve[K[Se]=Le]=Se;break}ve[K[Se]=Ve]=Se,Se=Be}}function $e(J,ne){for(var K=J.d,ae=J.e,ve=J.c,Se=ne,Le=K[Se];;){var Be=Se>>1,Ve=K[Be];if(Be==0||s(ae[Ve],ae[Le])){ve[K[Se]=Le]=Se;break}ve[K[Se]=Ve]=Se,Se=Be}}function je(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function Ae(J){return J.e.c.b}function Ee(J){return J.e.a.b}(a=ce.prototype).x=function(){fe(this,0)},a.B=function(J,ne){switch(J){case 100142:return;case 100140:switch(ne){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=ne)}break;case 100141:return void(this.m=!!ne);default:return void ee(this,100900)}ee(this,100901)},a.y=function(J){switch(J){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:ee(this,100900)}return!1},a.A=function(J,ne,K){this.j[0]=J,this.j[1]=ne,this.j[2]=K},a.z=function(J,ne){var K=ne||null;switch(J){case 100100:case 100106:this.h=K;break;case 100104:case 100110:this.l=K;break;case 100101:case 100107:this.k=K;break;case 100102:case 100108:this.i=K;break;case 100103:case 100109:this.p=K;break;case 100105:case 100111:this.o=K;break;case 100112:this.r=K;break;default:ee(this,100900)}},a.C=function(J,ne){var K=!1,ae=[0,0,0];fe(this,2);for(var ve=0;ve<3;++ve){var Se=J[ve];Se<-1e150&&(Se=-1e150,K=!0),1e150<Se&&(Se=1e150,K=!0),ae[ve]=Se}K&&ee(this,100155),(K=this.q)===null?g(K=y(this.b),K.b):(l(K),K=K.e),K.a.d=ne,K.a.g[0]=ae[0],K.a.g[1]=ae[1],K.a.g[2]=ae[2],K.f=1,K.b.f=-1,this.q=K},a.u=function(J){fe(this,0),this.d=1,this.b=new we,this.c=J},a.t=function(){fe(this,1),this.d=2,this.q=null},a.v=function(){fe(this,2),this.d=1},a.w=function(){fe(this,1),this.d=0;var J,ne,K=this.j[0],ae=this.j[1],ve=this.j[2],Se=!1,Le=[K,ae,ve];if(K===0&&ae===0&&ve===0){for(var ae=[-2e150,-2e150,-2e150],Be=[2e150,2e150,2e150],ve=[],Ve=[],K=(Se=this.b.c).e;K!==Se;K=K.e)for(var He=0;He<3;++He){var Ke=K.g[He];Ke<Be[He]&&(Be[He]=Ke,Ve[He]=K),Ke>ae[He]&&(ae[He]=Ke,ve[He]=K)}if(ae[1]-Be[1]>ae[K=0]-Be[0]&&(K=1),Be[K=ae[2]-Be[2]>ae[K]-Be[K]?2:K]>=ae[K])Le[0]=0,Le[1]=0,Le[2]=1;else{for(Be=Ve[K],ve=ve[K],Ve=[ae=0,0,0],Be=[Be.g[0]-ve.g[0],Be.g[1]-ve.g[1],Be.g[2]-ve.g[2]],He=[0,0,0],K=Se.e;K!==Se;K=K.e)He[0]=K.g[0]-ve.g[0],He[1]=K.g[1]-ve.g[1],He[2]=K.g[2]-ve.g[2],Ve[0]=Be[1]*He[2]-Be[2]*He[1],Ve[1]=Be[2]*He[0]-Be[0]*He[2],Ve[2]=Be[0]*He[1]-Be[1]*He[0],ae<(Ke=Ve[0]*Ve[0]+Ve[1]*Ve[1]+Ve[2]*Ve[2])&&(ae=Ke,Le[0]=Ve[0],Le[1]=Ve[1],Le[2]=Ve[2]);ae<=0&&(Le[0]=Le[1]=Le[2]=0,Le[C(Be)]=1)}Se=!0}for(Ve=C(Le),K=this.b.c,ae=(Ve+1)%3,ve=(Ve+2)%3,Ve=0<Le[Ve]?1:-1,Le=K.e;Le!==K;Le=Le.e)Le.b=Le.g[ae],Le.a=Ve*Le.g[ve];if(Se){for(Le=0,K=(Se=this.b.a).b;K!==Se;K=K.b)if(!((ae=K.a).f<=0))for(;Le+=(ae.a.b-ae.b.a.b)*(ae.a.a+ae.b.a.a),(ae=ae.e)!==K.a;);if(Le<0)for(Se=(Le=this.b.c).e;Se!==Le;Se=Se.e)Se.a=-Se.a}for(this.n=!1,Le=this.b.b,K=Le.h;K!==Le;K=Se)Se=K.h,ae=K.e,p(K.a,K.b.a)&&K.e.e!==K&&(M(this,ae,K),c(K),ae=(K=ae).e),ae.e===K&&(ae!==K&&(ae!==Se&&ae!==Se.b||(Se=Se.h),c(ae)),K!==Se&&K!==Se.b||(Se=Se.h),c(K));for(this.e=Le=new xe,Se=this.b.c,K=Se.e;K!==Se;K=K.e)K.h=ke(Le,K);var ut=Le;ut.d=[];for(var it=0;it<ut.a;it++)ut.d[it]=it;ut.d.sort(function(at){return function(Et,cr){return s(at[Et],at[cr])?1:-1}}(ut.c)),ut.e=!0;for(var tt=ut.b,lt=tt.a;1<=lt;--lt)Xe(tt,lt);for(tt.h=!0,this.f=new ie(this),te(this,-4e150),te(this,4e150);(Le=Fe(this.e))!==null;){for(;;){e:if((K=this.e).a===0)Se=We(K.b);else if(Se=K.c[K.d[K.a-1]],K.b.a!==0&&s(K=We(K.b),Se)){Se=K;break e}if(Se===null||!p(Se,Le))break;Se=Fe(this.e),M(this,Le.c,Se.c)}(function at(Et,cr){for(var Wt,bt=(Et.a=cr).c;bt.i===null;)if((bt=bt.c)===cr.c){var bt=Et,Ct=cr;(_t=new je).a=Ct.c.b;for(var sr=(yt=bt.f).a;(sr=sr.a).b!==null&&!yt.c(yt.b,_t,sr.b););var yt,or,Zt=Ae(yt=sr.b),_t=yt.a,sr=Zt.a;return void(b(_t.b.a,Ct,_t.a)===0?p((_t=yt.a).a,Ct)||p(_t.b.a,Ct)||(l(_t.b),yt.c&&(c(_t.c),yt.c=!1),g(Ct.c,_t),at(bt,Ct)):(or=s(sr.b.a,_t.b.a)?yt:Zt,Zt=void 0,yt.d||or.c?(Zt=or===yt?w(Ct.c.b,_t.e):w(sr.b.c.b,Ct.c).b,or.c?I(or,Zt):((yt=W(_t=bt,yt,Zt)).f=Ee(yt).f+yt.a.f,yt.d=G(_t,yt.f)),at(bt,Ct)):Q(bt,yt,Ct.c,Ct.c,null,!0)))}yt=(_t=Ae(bt=B(bt.i))).a,(_t=X(Et,_t,null)).c===yt?(_t=(yt=_t).c,sr=Ae(bt),Zt=bt.a,or=sr.a,Wt=!1,Zt.b.a!==or.b.a&&$(Et,bt),p(Zt.a,Et.a)&&(g(_t.b.e,Zt),_t=Ae(bt=B(bt)).a,X(Et,Ae(bt),sr),Wt=!0),p(or.a,Et.a)&&(g(yt,or.b.e),yt=X(Et,sr,null),Wt=!0),Wt?Q(Et,bt,yt.c,_t,_t,!0):(Ct=s(or.a,Zt.a)?or.b.e:Zt,Q(Et,bt,Ct=w(yt.c.b,Ct),Ct.c,Ct.c,!1),Ct.b.i.c=!0,Z(Et,bt))):Q(Et,bt,_t.c,yt,yt,!0)})(this,Le)}for(this.a=this.f.a.a.b.a.a,Le=0;(Se=this.f.a.a.b)!==null;)Se.h||++Le,F(Se);for(this.f=null,(Le=this.e).b=null,Le.d=null,this.e=Le.c=null,Le=this.b,K=Le.a.b;K!==Le.a;K=Se)Se=K.b,(K=K.a).e.e===K&&(D(K.c,K),c(K));if(!this.n){if(Le=this.b,this.m)for(K=Le.b.h;K!==Le.b;K=Se)Se=K.h,K.b.d.c!==K.d.c?K.f=K.d.c?1:-1:c(K);else for(K=Le.a.b;K!==Le.a;K=Se)if(Se=K.b,K.c){for(K=K.a;s(K.b.a,K.a);K=K.c.b);for(;s(K.a,K.b.a);K=K.e);for(ae=K.c.b,ve=void 0;K.e!==ae;)if(s(K.b.a,ae.a)){for(;ae.e!==K&&(s((ne=ae.e).b.a,ne.a)||b(ae.a,ae.b.a,ae.e.b.a)<=0);)ae=(ve=w(ae.e,ae)).b;ae=ae.c.b}else{for(;ae.e!==K&&(s((J=K.c.b).a,J.b.a)||0<=b(K.b.a,K.a,K.c.b.a));)K=(ve=w(K,K.c.b)).b;K=K.e}for(;ae.e.e!==K;)ve=w(ae.e,ae),ae=ve.b}if(this.h||this.i||this.k||this.l)if(this.m){for(Se=(Le=this.b).a.b;Se!==Le.a;Se=Se.b)if(Se.c){for(this.h&&this.h(2,this.c),K=Se.a;this.k&&this.k(K.a.d,this.c),(K=K.e)!==Se.a;);this.i&&this.i(this.c)}}else{for(Le=this.b,Se=!!this.l,K=!1,ae=-1,ve=Le.a.d;ve!==Le.a;ve=ve.d)if(ve.c)for(K||(this.h&&this.h(4,this.c),K=!0),Ve=ve.a;Se&&(Be=Ve.b.d.c?0:1,ae!==Be&&(ae=Be,this.l&&this.l(!!ae,this.c))),this.k&&this.k(Ve.a.d,this.c),(Ve=Ve.e)!==ve.a;);K&&this.i&&this.i(this.c)}if(this.r){for(Le=this.b,K=Le.a.b;K!==Le.a;K=Se)if(Se=K.b,!K.c){for(ve=(ae=K.a).e,Ve=void 0;ve=(Ve=ve).e,(Ve.d=null)===Ve.b.d&&(Ve.c===Ve?P(Ve.a,null):(Ve.a.c=Ve.c,_(Ve,Ve.b.e)),(Be=Ve.b).c===Be?P(Be.a,null):(Be.a.c=Be.c,_(Be,Be.b.e)),S(Ve)),Ve!==ae;);ae=K.d,((K=K.b).d=ae).b=K}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:ce,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},ce.prototype.gluDeleteTess=ce.prototype.x,ce.prototype.gluTessProperty=ce.prototype.B,ce.prototype.gluGetTessProperty=ce.prototype.y,ce.prototype.gluTessNormal=ce.prototype.A,ce.prototype.gluTessCallback=ce.prototype.z,ce.prototype.gluTessVertex=ce.prototype.C,ce.prototype.gluTessBeginPolygon=ce.prototype.u,ce.prototype.gluTessBeginContour=ce.prototype.t,ce.prototype.gluTessEndContour=ce.prototype.v,ce.prototype.gluTessEndPolygon=ce.prototype.w,m!==void 0&&(m.exports=this.libtess)},{}],256:[function(t,m,u){function a(s,h,b,v){var i=0,d=(v=v===void 0?{}:v).loop===void 0?null:v.loop,f=v.palette===void 0?null:v.palette;if(h<=0||b<=0||65535<h||65535<b)throw new Error("Width/Height invalid.");function y(E){if(E=E.length,E<2||256<E||E&E-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return E}s[i++]=71,s[i++]=73,s[i++]=70,s[i++]=56,s[i++]=57,s[i++]=97;var g=0,c=0;if(f!==null){for(var l=y(f);l>>=1;)++g;if(l=1<<g,--g,v.background!==void 0){if(l<=(c=v.background))throw new Error("Background index out of range.");if(c===0)throw new Error("Background index explicitly passed as 0.")}}if(s[i++]=255&h,s[i++]=h>>8&255,s[i++]=255&b,s[i++]=b>>8&255,s[i++]=(f!==null?128:0)|g,s[i++]=c,s[i++]=0,f!==null)for(var w=0,x=f.length;w<x;++w){var _=f[w];s[i++]=_>>16&255,s[i++]=_>>8&255,s[i++]=255&_}if(d!==null){if(d<0||65535<d)throw new Error("Loop count invalid.");s[i++]=33,s[i++]=255,s[i++]=11,s[i++]=78,s[i++]=69,s[i++]=84,s[i++]=83,s[i++]=67,s[i++]=65,s[i++]=80,s[i++]=69,s[i++]=50,s[i++]=46,s[i++]=48,s[i++]=3,s[i++]=1,s[i++]=255&d,s[i++]=d>>8&255,s[i++]=0}var T=!1;this.addFrame=function(E,S,P,N,C,D){if(T===!0&&(--i,T=!1),D=D===void 0?{}:D,E<0||S<0||65535<E||65535<S)throw new Error("x/y invalid.");if(P<=0||N<=0||65535<P||65535<N)throw new Error("Width/Height invalid.");if(C.length<P*N)throw new Error("Not enough pixels for the frame size.");var L=!0,F=D.palette;if(F==null&&(L=!1,F=f),F==null)throw new Error("Must supply either a local or global palette.");for(var B=y(F),I=0;B>>=1;)++I;var B=1<<I,W=D.delay===void 0?0:D.delay,G=D.disposal===void 0?0:D.disposal;if(G<0||3<G)throw new Error("Disposal out of range.");var V=!1,X=0;if(D.transparent!==void 0&&D.transparent!==null&&(V=!0,(X=D.transparent)<0||B<=X))throw new Error("Transparent color index.");if(G===0&&!V&&W===0||(s[i++]=33,s[i++]=249,s[i++]=4,s[i++]=G<<2|(V===!0?1:0),s[i++]=255&W,s[i++]=W>>8&255,s[i++]=X,s[i++]=0),s[i++]=44,s[i++]=255&E,s[i++]=E>>8&255,s[i++]=255&S,s[i++]=S>>8&255,s[i++]=255&P,s[i++]=P>>8&255,s[i++]=255&N,s[i++]=N>>8&255,s[i++]=L===!0?128|I-1:0,L===!0)for(var Q=0,se=F.length;Q<se;++Q){var M=F[Q];s[i++]=M>>16&255,s[i++]=M>>8&255,s[i++]=255&M}return i=function(A,z,$,Z){A[z++]=$;var te=z++,ie=1<<$,he=ie-1,oe=1+ie,ce=1+oe,fe=$+1,ee=0,de=0;function ye(qe){for(;qe<=ee;)A[z++]=255&de,de>>=8,ee-=8,z===te+256&&(A[te]=255,te=z++)}function we(qe){de|=qe<<ee,ee+=fe,ye(8)}var ge=Z[0]&he,xe={};we(ie);for(var ke=1,Fe=Z.length;ke<Fe;++ke){var Me=Z[ke]&he,Je=ge<<8|Me,We=xe[Je];if(We===void 0){for(de|=ge<<ee,ee+=fe;8<=ee;)A[z++]=255&de,de>>=8,ee-=8,z===te+256&&(A[te]=255,te=z++);ce===4096?(we(ie),ce=1+oe,fe=$+1,xe={}):(1<<fe<=ce&&++fe,xe[Je]=ce++),ge=Me}else ge=We}return we(ge),we(oe),ye(1),te+1===z?A[te]=0:(A[te]=z-te-1,A[z++]=0),z}(s,i,I<2?2:I,C)},this.end=function(){return T===!1&&(s[i++]=59,T=!0),i},this.getOutputBuffer=function(){return s},this.setOutputBuffer=function(E){s=E},this.getOutputBufferPosition=function(){return i},this.setOutputBufferPosition=function(E){i=E}}function p(s,h,b,v){for(var i=s[h++],d=1<<i,f=1+d,y=1+f,g=i+1,c=(1<<g)-1,l=0,w=0,x=0,_=s[h++],T=new Int32Array(4096),E=null;;){for(;l<16&&_!==0;)w|=s[h++]<<l,l+=8,_===1?_=s[h++]:--_;if(l<g)break;var S=w&c;if(w>>=g,l-=g,S==d)y=1+f,c=(1<<(g=i+1))-1,E=null;else{if(S==f)break;for(var P=S<y?S:E,N=0,C=P;d<C;)C=T[C]>>8,++N;var D=C;if(v<x+N+(P!==S?1:0))return void console.log("Warning, gif stream longer than expected.");b[x++]=D;var L=x+=N;for(P!==S&&(b[x++]=D),C=P;N--;)C=T[C],b[--L]=255&C,C>>=8;E!==null&&y<4096&&(T[y++]=E<<8|D,c+1<=y&&g<12&&(++g,c=c<<1|1)),E=S}}x!==v&&console.log("Warning, gif stream shorter than expected.")}try{u.GifWriter=a,u.GifReader=function(s){var h=0;if(s[h++]!==71||s[h++]!==73||s[h++]!==70||s[h++]!==56||(s[h++]+1&253)!=56||s[h++]!==97)throw new Error("Invalid GIF 87a/89a header.");var b=s[h++]|s[h++]<<8,v=s[h++]|s[h++]<<8,i=s[h++],d=1<<1+(7&i),f=(s[h++],s[h++],null),y=null,g=(i>>7&&(f=h,h+=3*(y=d)),!0),c=[],l=0,w=null,x=0,_=null;for(this.width=b,this.height=v;g&&h<s.length;)switch(s[h++]){case 33:switch(s[h++]){case 255:if(s[h]!==11||s[h+1]==78&&s[h+2]==69&&s[h+3]==84&&s[h+4]==83&&s[h+5]==67&&s[h+6]==65&&s[h+7]==80&&s[h+8]==69&&s[h+9]==50&&s[h+10]==46&&s[h+11]==48&&s[h+12]==3&&s[h+13]==1&&s[h+16]==0)h+=14,_=s[h++]|s[h++]<<8,h++;else for(h+=12;;){if(!(0<=(E=s[h++])))throw Error("Invalid block size");if(E===0)break;h+=E}break;case 249:if(s[h++]!==4||s[h+4]!==0)throw new Error("Invalid graphics extension block.");var T=s[h++],l=s[h++]|s[h++]<<8,w=s[h++];!(1&T)&&(w=null),x=T>>2&7,h++;break;case 254:for(;;){if(!(0<=(E=s[h++])))throw Error("Invalid block size");if(E===0)break;h+=E}break;default:throw new Error("Unknown graphic control label: 0x"+s[h-1].toString(16))}break;case 44:var E,S=s[h++]|s[h++]<<8,P=s[h++]|s[h++]<<8,N=s[h++]|s[h++]<<8,C=s[h++]|s[h++]<<8,W=s[h++],D=W>>6&1,L=1<<1+(7&W),F=f,I=y,B=!1,W=(W>>7&&(B=!0,F=h,h+=3*(I=L)),h);for(h++;;){if(!(0<=(E=s[h++])))throw Error("Invalid block size");if(E===0)break;h+=E}c.push({x:S,y:P,width:N,height:C,has_local_palette:B,palette_offset:F,palette_size:I,data_offset:W,data_length:h-W,transparent_index:w,interlaced:!!D,delay:l,disposal:x});break;case 59:g=!1;break;default:throw new Error("Unknown gif block: 0x"+s[h-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return _},this.frameInfo=function(G){if(G<0||G>=c.length)throw new Error("Frame index out of range.");return c[G]},this.decodeAndBlitFrameBGRA=function(G,V){for(var G=this.frameInfo(G),X=G.width*G.height,Q=new Uint8Array(X),se=(p(s,G.data_offset,Q,X),G.palette_offset),M=G.transparent_index,A=(M===null&&(M=256),G.width),z=b-A,$=A,Z=4*(G.y*b+G.x),te=4*((G.y+G.height)*b+G.x),ie=Z,he=4*z,oe=(G.interlaced===!0&&(he+=4*b*7),8),ce=0,fe=Q.length;ce<fe;++ce){var ee,de,ye=Q[ce];$===0&&($=A,te<=(ie+=he)&&(he=4*z+4*b*(oe-1),ie=Z+(A+z)*(oe<<1),oe>>=1)),ye===M?ie+=4:(ee=s[se+3*ye],de=s[se+3*ye+1],ye=s[se+3*ye+2],V[ie++]=ye,V[ie++]=de,V[ie++]=ee,V[ie++]=255),--$}},this.decodeAndBlitFrameRGBA=function(G,V){for(var G=this.frameInfo(G),X=G.width*G.height,Q=new Uint8Array(X),se=(p(s,G.data_offset,Q,X),G.palette_offset),M=G.transparent_index,A=(M===null&&(M=256),G.width),z=b-A,$=A,Z=4*(G.y*b+G.x),te=4*((G.y+G.height)*b+G.x),ie=Z,he=4*z,oe=(G.interlaced===!0&&(he+=4*b*7),8),ce=0,fe=Q.length;ce<fe;++ce){var ee,de,ye=Q[ce];$===0&&($=A,te<=(ie+=he)&&(he=4*z+4*b*(oe-1),ie=Z+(A+z)*(oe<<1),oe>>=1)),ye===M?ie+=4:(ee=s[se+3*ye],de=s[se+3*ye+1],ye=s[se+3*ye+2],V[ie++]=ee,V[ie++]=de,V[ie++]=ye,V[ie++]=255),--$}}}}catch{}},{}],257:[function(t,m,u){(function(a){var p,s;p=this,s=function(h){function b(U){if(this==null)throw TypeError();var k,O=String(this),R=O.length,U=U?Number(U):0;if(!((U=U!=U?0:U)<0||R<=U))return 55296<=(k=O.charCodeAt(U))&&k<=56319&&U+1<R&&56320<=(R=O.charCodeAt(U+1))&&R<=57343?1024*(k-55296)+R-56320+65536:k}String.prototype.codePointAt||((v=function(){try{var j={},k=Object.defineProperty,O=k(j,j,j)&&k}catch{}return O}())?v(String.prototype,"codePointAt",{value:b,configurable:!0,writable:!0}):String.prototype.codePointAt=b);var v,i=0,d=-3;function f(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function y(j,k){this.source=j,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=k,this.destLen=0,this.ltree=new f,this.dtree=new f}var g=new f,c=new f,l=new Uint8Array(30),w=new Uint16Array(30),x=new Uint8Array(30),_=new Uint16Array(30),T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),E=new f,S=new Uint8Array(320);function P(j,k,O,R){for(var U,q=0;q<O;++q)j[q]=0;for(q=0;q<30-O;++q)j[q+O]=q/O|0;for(U=R,q=0;q<30;++q)k[q]=U,U+=1<<j[q]}var N=new Uint16Array(16);function C(j,k,O,R){for(var U,q=0;q<16;++q)j.table[q]=0;for(q=0;q<R;++q)j.table[k[O+q]]++;for(q=U=j.table[0]=0;q<16;++q)N[q]=U,U+=j.table[q];for(q=0;q<R;++q)k[O+q]&&(j.trans[N[k[O+q]]++]=q)}function D(j,k,O){if(!k)return O;for(;j.bitcount<24;)j.tag|=j.source[j.sourceIndex++]<<j.bitcount,j.bitcount+=8;var R=j.tag&65535>>>16-k;return j.tag>>>=k,j.bitcount-=k,R+O}function L(j,k){for(;j.bitcount<24;)j.tag|=j.source[j.sourceIndex++]<<j.bitcount,j.bitcount+=8;for(var O=0,R=0,U=0,q=j.tag;R=2*R+(1&q),q>>>=1,O+=k.table[++U],0<=(R-=k.table[U]););return j.tag=q,j.bitcount-=U,k.trans[O+R]}function F(j,k,O){for(;;){var R=L(j,k);if(R===256)return i;if(R<256)j.dest[j.destLen++]=R;else for(var U,q=D(j,l[R-=257],w[R]),R=L(j,O),Y=U=j.destLen-D(j,x[R],_[R]);Y<U+q;++Y)j.dest[j.destLen++]=j.dest[Y]}}for(var I=g,B=c,W=0;W<7;++W)I.table[W]=0;for(I.table[7]=24,I.table[8]=152,I.table[9]=112,W=0;W<24;++W)I.trans[W]=256+W;for(W=0;W<144;++W)I.trans[24+W]=W;for(W=0;W<8;++W)I.trans[168+W]=280+W;for(W=0;W<112;++W)I.trans[176+W]=144+W;for(W=0;W<5;++W)B.table[W]=0;for(B.table[5]=32,W=0;W<32;++W)B.trans[W]=W;P(l,w,4,3),P(x,_,2,1),l[28]=0,w[28]=258;var G=function(j,k){var O,R,U,q=new y(j,k);do{switch(U=void 0,(R=q).bitcount--||(R.tag=R.source[R.sourceIndex++],R.bitcount=7),U=1&R.tag,R.tag>>>=1,R=U,D(q,2,0)){case 0:O=function(Oe){for(var nt,ct;8<Oe.bitcount;)Oe.sourceIndex--,Oe.bitcount-=8;if((nt=256*Oe.source[Oe.sourceIndex+1]+Oe.source[Oe.sourceIndex])!==(65535&~(256*Oe.source[Oe.sourceIndex+3]+Oe.source[Oe.sourceIndex+2])))return d;for(Oe.sourceIndex+=4,ct=nt;ct;--ct)Oe.dest[Oe.destLen++]=Oe.source[Oe.sourceIndex++];return Oe.bitcount=0,i}(q);break;case 1:O=F(q,g,c);break;case 2:Ne=Pe=Ie=Ce=Y=pe=_e=Te=be=le=ue=re=void 0;for(var Y,re=q,ue=q.ltree,le=q.dtree,be=D(re,5,257),Te=D(re,5,1),_e=D(re,4,4),pe=0;pe<19;++pe)S[pe]=0;for(pe=0;pe<_e;++pe){var Ie=D(re,3,0);S[T[pe]]=Ie}for(C(E,S,0,19),Y=0;Y<be+Te;){var Pe=L(re,E);switch(Pe){case 16:for(var Ne=S[Y-1],Ce=D(re,2,3);Ce;--Ce)S[Y++]=Ne;break;case 17:for(Ce=D(re,3,3);Ce;--Ce)S[Y++]=0;break;case 18:for(Ce=D(re,7,11);Ce;--Ce)S[Y++]=0;break;default:S[Y++]=Pe}}C(ue,S,0,be),C(le,S,be,Te),O=F(q,q.ltree,q.dtree);break;default:O=d}if(O!==i)throw new Error("Data error")}while(!R);return q.destLen<q.dest.length?typeof q.dest.slice=="function"?q.dest.slice(0,q.destLen):q.dest.subarray(0,q.destLen):q.dest};function V(j,k,O,R,U){return Math.pow(1-U,3)*j+3*Math.pow(1-U,2)*U*k+3*(1-U)*Math.pow(U,2)*O+Math.pow(U,3)*R}function X(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function Q(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function se(j){throw new Error(j)}function M(j,k){j||se(k)}X.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},X.prototype.addPoint=function(j,k){typeof j=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=j,this.x2=j),j<this.x1&&(this.x1=j),j>this.x2&&(this.x2=j)),typeof k=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=k,this.y2=k),k<this.y1&&(this.y1=k),k>this.y2&&(this.y2=k))},X.prototype.addX=function(j){this.addPoint(j,null)},X.prototype.addY=function(j){this.addPoint(null,j)},X.prototype.addBezier=function(j,k,O,R,U,q,Y,re){var ue=[j,k],le=[O,R],be=[U,q],Te=[Y,re];this.addPoint(j,k),this.addPoint(Y,re);for(var _e=0;_e<=1;_e++){var pe,Ie=6*ue[_e]-12*le[_e]+6*be[_e],Pe=-3*ue[_e]+9*le[_e]-9*be[_e]+3*Te[_e],Ne=3*le[_e]-3*ue[_e];Pe==0?Ie==0||0<(pe=-Ne/Ie)&&pe<1&&(_e===0&&this.addX(V(ue[_e],le[_e],be[_e],Te[_e],pe)),_e===1&&this.addY(V(ue[_e],le[_e],be[_e],Te[_e],pe))):(pe=Math.pow(Ie,2)-4*Ne*Pe)<0||(0<(Ne=(-Ie+Math.sqrt(pe))/(2*Pe))&&Ne<1&&(_e===0&&this.addX(V(ue[_e],le[_e],be[_e],Te[_e],Ne)),_e===1&&this.addY(V(ue[_e],le[_e],be[_e],Te[_e],Ne))),0<(Ne=(-Ie-Math.sqrt(pe))/(2*Pe))&&Ne<1&&(_e===0&&this.addX(V(ue[_e],le[_e],be[_e],Te[_e],Ne)),_e===1&&this.addY(V(ue[_e],le[_e],be[_e],Te[_e],Ne))))}},X.prototype.addQuad=function(j,k,O,R,U,q){O=j+2/3*(O-j),R=k+2/3*(R-k),this.addBezier(j,k,O,R,O+1/3*(U-j),R+1/3*(q-k),U,q)},Q.prototype.moveTo=function(j,k){this.commands.push({type:"M",x:j,y:k})},Q.prototype.lineTo=function(j,k){this.commands.push({type:"L",x:j,y:k})},Q.prototype.curveTo=Q.prototype.bezierCurveTo=function(j,k,O,R,U,q){this.commands.push({type:"C",x1:j,y1:k,x2:O,y2:R,x:U,y:q})},Q.prototype.quadTo=Q.prototype.quadraticCurveTo=function(j,k,O,R){this.commands.push({type:"Q",x1:j,y1:k,x:O,y:R})},Q.prototype.close=Q.prototype.closePath=function(){this.commands.push({type:"Z"})},Q.prototype.extend=function(j){var k;if(j.commands)j=j.commands;else if(j instanceof X)return k=j,this.moveTo(k.x1,k.y1),this.lineTo(k.x2,k.y1),this.lineTo(k.x2,k.y2),this.lineTo(k.x1,k.y2),void this.close();Array.prototype.push.apply(this.commands,j)},Q.prototype.getBoundingBox=function(){for(var j=new X,k=0,O=0,R=0,U=0,q=0;q<this.commands.length;q++){var Y=this.commands[q];switch(Y.type){case"M":j.addPoint(Y.x,Y.y),k=R=Y.x,O=U=Y.y;break;case"L":j.addPoint(Y.x,Y.y),R=Y.x,U=Y.y;break;case"Q":j.addQuad(R,U,Y.x1,Y.y1,Y.x,Y.y),R=Y.x,U=Y.y;break;case"C":j.addBezier(R,U,Y.x1,Y.y1,Y.x2,Y.y2,Y.x,Y.y),R=Y.x,U=Y.y;break;case"Z":R=k,U=O;break;default:throw new Error("Unexpected path command "+Y.type)}}return j.isEmpty()&&j.addPoint(0,0),j},Q.prototype.draw=function(j){j.beginPath();for(var k=0;k<this.commands.length;k+=1){var O=this.commands[k];O.type==="M"?j.moveTo(O.x,O.y):O.type==="L"?j.lineTo(O.x,O.y):O.type==="C"?j.bezierCurveTo(O.x1,O.y1,O.x2,O.y2,O.x,O.y):O.type==="Q"?j.quadraticCurveTo(O.x1,O.y1,O.x,O.y):O.type==="Z"&&j.closePath()}this.fill&&(j.fillStyle=this.fill,j.fill()),this.stroke&&(j.strokeStyle=this.stroke,j.lineWidth=this.strokeWidth,j.stroke())},Q.prototype.toPathData=function(j){function k(){for(var q=arguments,Y="",re=0;re<arguments.length;re+=1){var ue=q[re];0<=ue&&0<re&&(Y+=" "),Y+=(ue=ue,Math.round(ue)===ue?""+Math.round(ue):ue.toFixed(j))}return Y}j=j!==void 0?j:2;for(var O="",R=0;R<this.commands.length;R+=1){var U=this.commands[R];U.type==="M"?O+="M"+k(U.x,U.y):U.type==="L"?O+="L"+k(U.x,U.y):U.type==="C"?O+="C"+k(U.x1,U.y1,U.x2,U.y2,U.x,U.y):U.type==="Q"?O+="Q"+k(U.x1,U.y1,U.x,U.y):U.type==="Z"&&(O+="Z")}return O},Q.prototype.toSVG=function(j){var k=(k='<path d="')+this.toPathData(j)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?k+=' fill="none"':k+=' fill="'+this.fill+'"'),this.stroke&&(k+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),k+="/>"},Q.prototype.toDOMElement=function(k){var k=this.toPathData(k),O=document.createElementNS("http://www.w3.org/2000/svg","path");return O.setAttribute("d",k),O};var A={fail:se,argument:M,assert:M},z={},$={},Z={};function te(j){return function(){return j}}$.BYTE=function(j){return A.argument(0<=j&&j<=255,"Byte value should be between 0 and 255."),[j]},Z.BYTE=te(1),$.CHAR=function(j){return[j.charCodeAt(0)]},Z.CHAR=te(1),$.CHARARRAY=function(j){for(var k=[],O=0;O<j.length;O+=1)k[O]=j.charCodeAt(O);return k},Z.CHARARRAY=function(j){return j.length},$.USHORT=function(j){return[j>>8&255,255&j]},Z.USHORT=te(2),$.SHORT=function(j){return[(j=32768<=j?-(65536-j):j)>>8&255,255&j]},Z.SHORT=te(2),$.UINT24=function(j){return[j>>16&255,j>>8&255,255&j]},Z.UINT24=te(3),$.ULONG=function(j){return[j>>24&255,j>>16&255,j>>8&255,255&j]},Z.ULONG=te(4),$.LONG=function(j){return[(j=2147483648<=j?-(4294967296-j):j)>>24&255,j>>16&255,j>>8&255,255&j]},Z.LONG=te(4),$.FIXED=$.ULONG,Z.FIXED=Z.ULONG,$.FWORD=$.SHORT,Z.FWORD=Z.SHORT,$.UFWORD=$.USHORT,Z.UFWORD=Z.USHORT,$.LONGDATETIME=function(j){return[0,0,0,0,j>>24&255,j>>16&255,j>>8&255,255&j]},Z.LONGDATETIME=te(8),$.TAG=function(j){return A.argument(j.length===4,"Tag should be exactly 4 ASCII characters."),[j.charCodeAt(0),j.charCodeAt(1),j.charCodeAt(2),j.charCodeAt(3)]},Z.TAG=te(4),$.Card8=$.BYTE,Z.Card8=Z.BYTE,$.Card16=$.USHORT,Z.Card16=Z.USHORT,$.OffSize=$.BYTE,Z.OffSize=Z.BYTE,$.SID=$.USHORT,Z.SID=Z.USHORT,$.NUMBER=function(j){return-107<=j&&j<=107?[j+139]:108<=j&&j<=1131?[247+((j-=108)>>8),255&j]:-1131<=j&&j<=-108?[251+((j=-j-108)>>8),255&j]:-32768<=j&&j<=32767?$.NUMBER16(j):$.NUMBER32(j)},Z.NUMBER=function(j){return $.NUMBER(j).length},$.NUMBER16=function(j){return[28,j>>8&255,255&j]},Z.NUMBER16=te(3),$.NUMBER32=function(j){return[29,j>>24&255,j>>16&255,j>>8&255,255&j]},Z.NUMBER32=te(5),$.REAL=function(j){for(var k=j.toString(),O=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(k),R=(O&&(O=parseFloat("1e"+((O[2]?+O[2]:0)+O[1].length)),k=(Math.round(j*O)/O).toString()),""),U=0,q=k.length;U<q;U+=1){var Y=k[U];R+=Y==="e"?k[++U]==="-"?"c":"b":Y==="."?"a":Y==="-"?"e":Y}for(var re=[30],ue=0,le=(R+=1&R.length?"f":"ff").length;ue<le;ue+=2)re.push(parseInt(R.substr(ue,2),16));return re},Z.REAL=function(j){return $.REAL(j).length},$.NAME=$.CHARARRAY,Z.NAME=Z.CHARARRAY,$.STRING=$.CHARARRAY,Z.STRING=Z.CHARARRAY,z.UTF8=function(j,k,O){for(var R=[],U=O,q=0;q<U;q++,k+=1)R[q]=j.getUint8(k);return String.fromCharCode.apply(null,R)},z.UTF16=function(j,k,O){for(var R=[],U=O/2,q=0;q<U;q++,k+=2)R[q]=j.getUint16(k);return String.fromCharCode.apply(null,R)},$.UTF16=function(j){for(var k=[],O=0;O<j.length;O+=1){var R=j.charCodeAt(O);k[k.length]=R>>8&255,k[k.length]=255&R}return k},Z.UTF16=function(j){return 2*j.length};var ie,he={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""},oe=(z.MACSTRING=function(j,k,O,R){var U=he[R];if(U!==void 0){for(var q="",Y=0;Y<O;Y++){var re=j.getUint8(k+Y);q+=re<=127?String.fromCharCode(re):U[127&re]}return q}},typeof WeakMap=="function"&&new WeakMap);function ce(j){return-128<=j&&j<=127}$.MACSTRING=function(j,k){var O=function(Y){if(!ie)for(var re in ie={},he)ie[re]=new String(re);var ue=ie[Y];if(ue!==void 0){if(oe){var le=oe.get(ue);if(le!==void 0)return le}var be=he[Y];if(be!==void 0){for(var Te={},_e=0;_e<be.length;_e++)Te[be.charCodeAt(_e)]=_e+128;return oe&&oe.set(ue,Te),Te}}}(k);if(O!==void 0){for(var R=[],U=0;U<j.length;U++){var q=j.charCodeAt(U);if(128<=q&&(q=O[q])===void 0)return;R[U]=q}return R}},Z.MACSTRING=function(j,k){return j=$.MACSTRING(j,k),j!==void 0?j.length:0},$.VARDELTAS=function(j){for(var R=0,k=[];R<j.length;)var O=j[R],R=(O===0?function(U,q,Y){for(var re=0,ue=U.length;q<ue&&re<64&&U[q]===0;)++q,++re;return Y.push(128|re-1),q}:-128<=O&&O<=127?function(U,q,Y){for(var re=0,ue=U.length,le=q;le<ue&&re<64;){var be=U[le];if(!ce(be)||be===0&&le+1<ue&&U[le+1]===0)break;++le,++re}Y.push(re-1);for(var Te=q;Te<le;++Te)Y.push(U[Te]+256&255);return le}:function(U,q,Y){for(var re=0,ue=U.length,le=q;le<ue&&re<64;){var be=U[le];if(be===0||ce(be)&&le+1<ue&&ce(U[le+1]))break;++le,++re}Y.push(64|re-1);for(var Te=q;Te<le;++Te){var _e=U[Te];Y.push(_e+65536>>8&255,_e+256&255)}return le})(j,R,k);return k},$.INDEX=function(j){for(var k=1,O=[k],R=[],U=0;U<j.length;U+=1){var q=$.OBJECT(j[U]);Array.prototype.push.apply(R,q),k+=q.length,O.push(k)}if(R.length===0)return[0,0];for(var Y=[],re=1+Math.floor(Math.log(k)/Math.log(2))/8|0,ue=[void 0,$.BYTE,$.USHORT,$.UINT24,$.ULONG][re],le=0;le<O.length;le+=1){var be=ue(O[le]);Array.prototype.push.apply(Y,be)}return Array.prototype.concat($.Card16(j.length),$.OffSize(re),Y,R)},Z.INDEX=function(j){return $.INDEX(j).length},$.DICT=function(j){for(var k=[],O=Object.keys(j),R=O.length,U=0;U<R;U+=1){var q=parseInt(O[U],0),Y=j[q];k=(k=k.concat($.OPERAND(Y.value,Y.type))).concat($.OPERATOR(q))}return k},Z.DICT=function(j){return $.DICT(j).length},$.OPERATOR=function(j){return j<1200?[j]:[12,j-1200]},$.OPERAND=function(j,k){var O=[];if(Array.isArray(k))for(var R=0;R<k.length;R+=1)A.argument(j.length===k.length,"Not enough arguments given for type"+k),O=O.concat($.OPERAND(j[R],k[R]));else if(k==="SID")O=O.concat($.NUMBER(j));else if(k==="offset")O=O.concat($.NUMBER32(j));else if(k==="number")O=O.concat($.NUMBER(j));else{if(k!=="real")throw new Error("Unknown operand type "+k);O=O.concat($.REAL(j))}return O},$.OP=$.BYTE,Z.OP=Z.BYTE;var fe=typeof WeakMap=="function"&&new WeakMap;function ee(j,k,O){for(var R=0;R<k.length;R+=1){var U=k[R];this[U.name]=U.value}if(this.tableName=j,this.fields=k,O)for(var q=Object.keys(O),Y=0;Y<q.length;Y+=1){var re=q[Y],ue=O[re];this[re]!==void 0&&(this[re]=ue)}}function de(j,k,O){O===void 0&&(O=k.length);var R=new Array(k.length+1);R[0]={name:j+"Count",type:"USHORT",value:O};for(var U=0;U<k.length;U++)R[U+1]={name:j+U,type:"USHORT",value:k[U]};return R}function ye(j,k,O){var R=k.length,U=new Array(R+1);U[0]={name:j+"Count",type:"USHORT",value:R};for(var q=0;q<R;q++)U[q+1]={name:j+q,type:"TABLE",value:O(k[q],q)};return U}function we(j,k,O){var R=k.length,U=[];U[0]={name:j+"Count",type:"USHORT",value:R};for(var q=0;q<R;q++)U=U.concat(O(k[q],q));return U}function ge(j){j.format===1?ee.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(de("glyph",j.glyphs))):A.assert(!1,"Can't create coverage table format 2 yet.")}function xe(j){ee.call(this,"scriptListTable",we("scriptRecord",j,function(k,O){var R=k.script,U=R.defaultLangSys;return A.assert(!!U,"Unable to write GSUB: script "+k.tag+" has no default language system."),[{name:"scriptTag"+O,type:"TAG",value:k.tag},{name:"script"+O,type:"TABLE",value:new ee("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new ee("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:U.reqFeatureIndex}].concat(de("featureIndex",U.featureIndexes)))}].concat(we("langSys",R.langSysRecords,function(q,Y){var re=q.langSys;return[{name:"langSysTag"+Y,type:"TAG",value:q.tag},{name:"langSys"+Y,type:"TABLE",value:new ee("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:re.reqFeatureIndex}].concat(de("featureIndex",re.featureIndexes)))}]})))}]}))}function ke(j){ee.call(this,"featureListTable",we("featureRecord",j,function(k,O){var R=k.feature;return[{name:"featureTag"+O,type:"TAG",value:k.tag},{name:"feature"+O,type:"TABLE",value:new ee("featureTable",[{name:"featureParams",type:"USHORT",value:R.featureParams}].concat(de("lookupListIndex",R.lookupListIndexes)))}]}))}function Fe(j,k){ee.call(this,"lookupListTable",ye("lookup",j,function(O){var R=k[O.lookupType];return A.assert(!!R,"Unable to write GSUB lookup type "+O.lookupType+" tables."),new ee("lookupTable",[{name:"lookupType",type:"USHORT",value:O.lookupType},{name:"lookupFlag",type:"USHORT",value:O.lookupFlag}].concat(ye("subtable",O.subtables,R)))}))}$.CHARSTRING=function(j){if(fe){var k=fe.get(j);if(k!==void 0)return k}for(var q=[],O=j.length,R=0;R<O;R+=1)var U=j[R],q=q.concat($[U.type](U.value));return fe&&fe.set(j,q),q},Z.CHARSTRING=function(j){return $.CHARSTRING(j).length},$.OBJECT=function(j){var k=$[j.type];return A.argument(k!==void 0,"No encoding function for type "+j.type),k(j.value)},Z.OBJECT=function(j){var k=Z[j.type];return A.argument(k!==void 0,"No sizeOf function for type "+j.type),k(j.value)},$.TABLE=function(j){for(var k=[],O=j.fields.length,R=[],U=[],q=0;q<O;q+=1){var Y=j.fields[q],ue=$[Y.type],re=(A.argument(ue!==void 0,"No encoding function for field type "+Y.type+" ("+Y.name+")"),j[Y.name]),ue=ue(re=re===void 0?Y.value:re);Y.type==="TABLE"?(U.push(k.length),k=k.concat([0,0]),R.push(ue)):k=k.concat(ue)}for(var le=0;le<R.length;le+=1){var be=U[le],Te=k.length;A.argument(Te<65536,"Table "+j.tableName+" too big."),k[be]=Te>>8,k[be+1]=255&Te,k=k.concat(R[le])}return k},Z.TABLE=function(j){for(var k=0,O=j.fields.length,R=0;R<O;R+=1){var U=j.fields[R],q=Z[U.type],Y=(A.argument(q!==void 0,"No sizeOf function for field type "+U.type+" ("+U.name+")"),j[U.name]);k+=q(Y=Y===void 0?U.value:Y),U.type==="TABLE"&&(k+=2)}return k},$.RECORD=$.TABLE,Z.RECORD=Z.TABLE,$.LITERAL=function(j){return j},Z.LITERAL=function(j){return j.length},ee.prototype.encode=function(){return $.TABLE(this)},ee.prototype.sizeOf=function(){return Z.TABLE(this)};var Me={Table:ee,Record:ee,Coverage:(ge.prototype=Object.create(ee.prototype)).constructor=ge,ScriptList:(xe.prototype=Object.create(ee.prototype)).constructor=xe,FeatureList:(ke.prototype=Object.create(ee.prototype)).constructor=ke,LookupList:(Fe.prototype=Object.create(ee.prototype)).constructor=Fe,ushortList:de,tableList:ye,recordList:we};function Je(j,k){return j.getUint8(k)}function We(j,k){return j.getUint16(k,!1)}function qe(j,k){return j.getUint32(k,!1)}function Xe(j,k){return j.getInt16(k,!1)+j.getUint16(k+2,!1)/65535}var $e={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function je(j,k){this.data=j,this.offset=k,this.relativeOffset=0}je.prototype.parseByte=function(){var j=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,j},je.prototype.parseChar=function(){var j=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,j},je.prototype.parseCard8=je.prototype.parseByte,je.prototype.parseCard16=je.prototype.parseUShort=function(){var j=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,j},je.prototype.parseSID=je.prototype.parseUShort,je.prototype.parseOffset16=je.prototype.parseUShort,je.prototype.parseShort=function(){var j=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,j},je.prototype.parseF2Dot14=function(){var j=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,j},je.prototype.parseOffset32=je.prototype.parseULong=function(){var j=qe(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,j},je.prototype.parseFixed=function(){var j=Xe(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,j},je.prototype.parseString=function(j){var k=this.data,O=this.offset+this.relativeOffset,R="";this.relativeOffset+=j;for(var U=0;U<j;U++)R+=String.fromCharCode(k.getUint8(O+U));return R},je.prototype.parseTag=function(){return this.parseString(4)},je.prototype.parseLongDateTime=function(){var j=qe(this.data,this.offset+this.relativeOffset+4);return j-=2082844800,this.relativeOffset+=8,j},je.prototype.parseVersion=function(j){var k=We(this.data,this.offset+this.relativeOffset),O=We(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,k+O/(j=j===void 0?4096:j)/10},je.prototype.skip=function(j,k){this.relativeOffset+=$e[j]*(k=k===void 0?1:k)},je.prototype.parseULongList=function(j){j===void 0&&(j=this.parseULong());for(var k=new Array(j),O=this.data,R=this.offset+this.relativeOffset,U=0;U<j;U++)k[U]=O.getUint32(R),R+=4;return this.relativeOffset+=4*j,k},je.prototype.parseOffset16List=je.prototype.parseUShortList=function(j){j===void 0&&(j=this.parseUShort());for(var k=new Array(j),O=this.data,R=this.offset+this.relativeOffset,U=0;U<j;U++)k[U]=O.getUint16(R),R+=2;return this.relativeOffset+=2*j,k},je.prototype.parseShortList=function(j){for(var k=new Array(j),O=this.data,R=this.offset+this.relativeOffset,U=0;U<j;U++)k[U]=O.getInt16(R),R+=2;return this.relativeOffset+=2*j,k},je.prototype.parseByteList=function(j){for(var k=new Array(j),O=this.data,R=this.offset+this.relativeOffset,U=0;U<j;U++)k[U]=O.getUint8(R++);return this.relativeOffset+=j,k},je.prototype.parseList=function(j,k){k||(k=j,j=this.parseUShort());for(var O=new Array(j),R=0;R<j;R++)O[R]=k.call(this);return O},je.prototype.parseList32=function(j,k){k||(k=j,j=this.parseULong());for(var O=new Array(j),R=0;R<j;R++)O[R]=k.call(this);return O},je.prototype.parseRecordList=function(j,k){k||(k=j,j=this.parseUShort());for(var O=new Array(j),R=Object.keys(k),U=0;U<j;U++){for(var q={},Y=0;Y<R.length;Y++){var re=R[Y],ue=k[re];q[re]=ue.call(this)}O[U]=q}return O},je.prototype.parseRecordList32=function(j,k){k||(k=j,j=this.parseULong());for(var O=new Array(j),R=Object.keys(k),U=0;U<j;U++){for(var q={},Y=0;Y<R.length;Y++){var re=R[Y],ue=k[re];q[re]=ue.call(this)}O[U]=q}return O},je.prototype.parseStruct=function(j){if(typeof j=="function")return j.call(this);for(var k=Object.keys(j),O={},R=0;R<k.length;R++){var U=k[R],q=j[U];O[U]=q.call(this)}return O},je.prototype.parseValueRecord=function(j){var k;if((j=j===void 0?this.parseUShort():j)!==0)return k={},1&j&&(k.xPlacement=this.parseShort()),2&j&&(k.yPlacement=this.parseShort()),4&j&&(k.xAdvance=this.parseShort()),8&j&&(k.yAdvance=this.parseShort()),16&j&&(k.xPlaDevice=void 0,this.parseShort()),32&j&&(k.yPlaDevice=void 0,this.parseShort()),64&j&&(k.xAdvDevice=void 0,this.parseShort()),128&j&&(k.yAdvDevice=void 0,this.parseShort()),k},je.prototype.parseValueRecordList=function(){for(var j=this.parseUShort(),k=this.parseUShort(),O=new Array(k),R=0;R<k;R++)O[R]=this.parseValueRecord(j);return O},je.prototype.parsePointer=function(j){var k=this.parseOffset16();if(0<k)return new je(this.data,this.offset+k).parseStruct(j)},je.prototype.parsePointer32=function(j){var k=this.parseOffset32();if(0<k)return new je(this.data,this.offset+k).parseStruct(j)},je.prototype.parseListOfLists=function(j){for(var k=this.parseOffset16List(),O=k.length,R=this.relativeOffset,U=new Array(O),q=0;q<O;q++){var Y=k[q];if(Y===0)U[q]=void 0;else if(this.relativeOffset=Y,j){for(var re=this.parseOffset16List(),ue=new Array(re.length),le=0;le<re.length;le++)this.relativeOffset=Y+re[le],ue[le]=j.call(this);U[q]=ue}else U[q]=this.parseUShortList()}return this.relativeOffset=R,U},je.prototype.parseCoverage=function(){var j=this.offset+this.relativeOffset,k=this.parseUShort(),O=this.parseUShort();if(k===1)return{format:1,glyphs:this.parseUShortList(O)};if(k!==2)throw new Error("0x"+j.toString(16)+": Coverage format must be 1 or 2.");for(var R=new Array(O),U=0;U<O;U++)R[U]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:R}},je.prototype.parseClassDef=function(){var j=this.offset+this.relativeOffset,k=this.parseUShort();if(k===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(k===2)return{format:2,ranges:this.parseRecordList({start:je.uShort,end:je.uShort,classId:je.uShort})};throw new Error("0x"+j.toString(16)+": ClassDef format must be 1 or 2.")},je.list=function(j,k){return function(){return this.parseList(j,k)}},je.list32=function(j,k){return function(){return this.parseList32(j,k)}},je.recordList=function(j,k){return function(){return this.parseRecordList(j,k)}},je.recordList32=function(j,k){return function(){return this.parseRecordList32(j,k)}},je.pointer=function(j){return function(){return this.parsePointer(j)}},je.pointer32=function(j){return function(){return this.parsePointer32(j)}},je.tag=je.prototype.parseTag,je.byte=je.prototype.parseByte,je.uShort=je.offset16=je.prototype.parseUShort,je.uShortList=je.prototype.parseUShortList,je.uLong=je.offset32=je.prototype.parseULong,je.uLongList=je.prototype.parseULongList,je.struct=je.prototype.parseStruct,je.coverage=je.prototype.parseCoverage,je.classDef=je.prototype.parseClassDef;var Ae={reserved:je.uShort,reqFeatureIndex:je.uShort,featureIndexes:je.uShortList},Ee=(je.prototype.parseScriptList=function(){return this.parsePointer(je.recordList({tag:je.tag,script:je.pointer({defaultLangSys:je.pointer(Ae),langSysRecords:je.recordList({tag:je.tag,langSys:je.pointer(Ae)})})}))||[]},je.prototype.parseFeatureList=function(){return this.parsePointer(je.recordList({tag:je.tag,feature:je.pointer({featureParams:je.offset16,lookupListIndexes:je.uShortList})}))||[]},je.prototype.parseLookupList=function(j){return this.parsePointer(je.list(je.pointer(function(){var k=this.parseUShort(),O=(A.argument(1<=k&&k<=9,"GPOS/GSUB lookup type "+k+" unknown."),this.parseUShort()),R=16&O;return{lookupType:k,lookupFlag:O,subtables:this.parseList(je.pointer(j[k])),markFilteringSet:R?this.parseUShort():void 0}})))||[]},je.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var j=this.parseUShort(),k=this.parseUShort();return A.argument(j===1&&k<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:je.offset32,featureTableSubstitutionOffset:je.offset32})})||[]},{getByte:Je,getCard8:Je,getUShort:We,getCard16:We,getShort:function(j,k){return j.getInt16(k,!1)},getULong:qe,getFixed:Xe,getTag:function(j,k){for(var O="",R=k;R<k+4;R+=1)O+=String.fromCharCode(j.getInt8(R));return O},getOffset:function(j,k,O){for(var R=0,U=0;U<O;U+=1)R=(R<<=8)+j.getUint8(k+U);return R},getBytes:function(j,k,O){for(var R=[],U=k;U<O;U+=1)R.push(j.getUint8(U));return R},bytesToString:function(j){for(var k="",O=0;O<j.length;O+=1)k+=String.fromCharCode(j[O]);return k},Parser:je}),J={parse:function(j,k){for(var O={},R=(O.version=Ee.getUShort(j,k),A.argument(O.version===0,"cmap table version should be 0."),O.numTables=Ee.getUShort(j,k+2),-1),U=O.numTables-1;0<=U;--U){var q=Ee.getUShort(j,k+4+8*U),Y=Ee.getUShort(j,k+4+8*U+2);if(q===3&&(Y===0||Y===1||Y===10)||q===0&&(Y===0||Y===1||Y===2||Y===3||Y===4)){R=Ee.getULong(j,k+4+8*U+4);break}}if(R===-1)throw new Error("No valid cmap sub-tables found.");var re=new Ee.Parser(j,k+R);if(O.format=re.parseUShort(),O.format===12){var ue,le=O,be=re;be.parseUShort(),le.length=be.parseULong(),le.language=be.parseULong(),le.groupCount=ue=be.parseULong(),le.glyphIndexMap={};for(var Te=0;Te<ue;Te+=1)for(var _e=be.parseULong(),pe=be.parseULong(),Ie=be.parseULong(),Pe=_e;Pe<=pe;Pe+=1)le.glyphIndexMap[Pe]=Ie,Ie++}else{if(O.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+O.format+").");var Ne=O,Ce=j,Oe=k,nt=R;Ne.length=re.parseUShort(),Ne.language=re.parseUShort(),Ne.segCount=ct=re.parseUShort()>>1,re.skip("uShort",3),Ne.glyphIndexMap={};for(var ct,ot=new Ee.Parser(Ce,Oe+nt+14),st=new Ee.Parser(Ce,Oe+nt+16+2*ct),ft=new Ee.Parser(Ce,Oe+nt+16+4*ct),Tt=new Ee.Parser(Ce,Oe+nt+16+6*ct),Bt=Oe+nt+16+8*ct,$t=0;$t<ct-1;$t+=1)for(var dr=void 0,fr=ot.parseUShort(),Xr=st.parseUShort(),kt=ft.parseShort(),Ot=Tt.parseUShort(),xt=Xr;xt<=fr;xt+=1)Ot!==0?(Bt=(Bt=Tt.offset+Tt.relativeOffset-2)+Ot+2*(xt-Xr),(dr=Ee.getUShort(Ce,Bt))!==0&&(dr=dr+kt&65535)):dr=xt+kt&65535,Ne.glyphIndexMap[xt]=dr}return O},make:function(j){for(var k=!0,O=j.length-1;0<O;--O)if(65535<j.get(O).unicode){console.log("Adding CMAP format 12 (needed!)"),k=!1;break}var R,U,q=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:k?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:k?12:20}],Y=(q=(q=k?q:q.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new Me.Table("cmap",q));for(Y.segments=[],O=0;O<j.length;O+=1){for(var re=j.get(O),ue=0;ue<re.unicodes.length;ue+=1)R=re.unicodes[ue],U=O,Y.segments.push({end:R,start:R,delta:-(R-U),offset:0,glyphIndex:U});Y.segments=Y.segments.sort(function(Oe,nt){return Oe.start-nt.start})}Y.segments.push({end:65535,start:65535,delta:1,offset:0});var le=Y.segments.length,be=0,Te=[],_e=[],pe=[],Ie=[],Pe=[],Ne=[];for(O=0;O<le;O+=1){var Ce=Y.segments[O];Ce.end<=65535&&Ce.start<=65535?(Te=Te.concat({name:"end_"+O,type:"USHORT",value:Ce.end}),_e=_e.concat({name:"start_"+O,type:"USHORT",value:Ce.start}),pe=pe.concat({name:"idDelta_"+O,type:"SHORT",value:Ce.delta}),Ie=Ie.concat({name:"idRangeOffset_"+O,type:"USHORT",value:Ce.offset}),Ce.glyphId!==void 0&&(Pe=Pe.concat({name:"glyph_"+O,type:"USHORT",value:Ce.glyphId}))):be+=1,k||Ce.glyphIndex===void 0||(Ne=(Ne=(Ne=Ne.concat({name:"cmap12Start_"+O,type:"ULONG",value:Ce.start})).concat({name:"cmap12End_"+O,type:"ULONG",value:Ce.end})).concat({name:"cmap12Glyph_"+O,type:"ULONG",value:Ce.glyphIndex}))}return Y.segCountX2=2*(le-be),Y.searchRange=2*Math.pow(2,Math.floor(Math.log(le-be)/Math.log(2))),Y.entrySelector=Math.log(Y.searchRange/2)/Math.log(2),Y.rangeShift=Y.segCountX2-Y.searchRange,Y.fields=Y.fields.concat(Te),Y.fields.push({name:"reservedPad",type:"USHORT",value:0}),Y.fields=Y.fields.concat(_e),Y.fields=Y.fields.concat(pe),Y.fields=Y.fields.concat(Ie),Y.fields=Y.fields.concat(Pe),Y.cmap4Length=14+2*Te.length+2+2*_e.length+2*pe.length+2*Ie.length+2*Pe.length,k||(q=16+4*Ne.length,Y.cmap12Offset=20+Y.cmap4Length,Y.fields=Y.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:q},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:Ne.length/3}]),Y.fields=Y.fields.concat(Ne)),Y}},ne=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],K=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],ae=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],ve=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Se(j){this.font=j}function Le(j){this.cmap=j}function Be(j,k){this.encoding=j,this.charset=k}function Ve(j){switch(j.version){case 1:this.names=ve.slice();break;case 2:this.names=new Array(j.numberOfGlyphs);for(var k=0;k<j.numberOfGlyphs;k++)j.glyphNameIndex[k]<ve.length?this.names[k]=ve[j.glyphNameIndex[k]]:this.names[k]=j.names[j.glyphNameIndex[k]-ve.length];break;case 2.5:this.names=new Array(j.numberOfGlyphs);for(var O=0;O<j.numberOfGlyphs;O++)this.names[O]=ve[O+j.glyphNameIndex[O]];break;default:this.names=[]}}Se.prototype.charToGlyphIndex=function(j){var k=j.codePointAt(0),O=this.font.glyphs;if(O){for(var R=0;R<O.length;R+=1)for(var U=O.get(R),q=0;q<U.unicodes.length;q+=1)if(U.unicodes[q]===k)return R}return null},Le.prototype.charToGlyphIndex=function(j){return this.cmap.glyphIndexMap[j.codePointAt(0)]||0},Be.prototype.charToGlyphIndex=function(j){return j=j.codePointAt(0),j=this.encoding[j],this.charset.indexOf(j)},Ve.prototype.nameToGlyphIndex=function(j){return this.names.indexOf(j)},Ve.prototype.glyphIndexToName=function(j){return this.names[j]};var He={line:function(j,k,O,R,U){j.beginPath(),j.moveTo(k,O),j.lineTo(R,U),j.stroke()}};function Ke(j){this.bindConstructorValues(j)}function ut(j,k,O){Object.defineProperty(j,k,{get:function(){return j.path,j[O]},set:function(R){j[O]=R},enumerable:!0,configurable:!0})}function it(j,k){if(this.font=j,this.glyphs={},Array.isArray(k))for(var O=0;O<k.length;O++)this.glyphs[O]=k[O];this.length=k&&k.length||0}Ke.prototype.bindConstructorValues=function(j){var k;this.index=j.index||0,this.name=j.name||null,this.unicode=j.unicode||void 0,this.unicodes=j.unicodes||j.unicode!==void 0?[j.unicode]:[],j.xMin&&(this.xMin=j.xMin),j.yMin&&(this.yMin=j.yMin),j.xMax&&(this.xMax=j.xMax),j.yMax&&(this.yMax=j.yMax),j.advanceWidth&&(this.advanceWidth=j.advanceWidth),Object.defineProperty(this,"path",(j=j.path,k=j||new Q,{configurable:!0,get:function(){return k=typeof k=="function"?k():k},set:function(O){k=O}}))},Ke.prototype.addUnicode=function(j){this.unicodes.length===0&&(this.unicode=j),this.unicodes.push(j)},Ke.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Ke.prototype.getPath=function(j,k,O,R,U){j=j!==void 0?j:0,k=k!==void 0?k:0,O=O!==void 0?O:72;for(var q,Y,re=(R=R||{}).xScale,ue=R.yScale,le=((q=R.hinting&&U&&U.hinting?this.path&&U.hinting.exec(this,O):q)?(Y=U.hinting.getCommands(q),j=Math.round(j),k=Math.round(k),re=ue=1):(Y=this.path.commands,R=1/this.path.unitsPerEm*O,re===void 0&&(re=R),ue===void 0&&(ue=R)),new Q),be=0;be<Y.length;be+=1){var Te=Y[be];Te.type==="M"?le.moveTo(j+Te.x*re,k+-Te.y*ue):Te.type==="L"?le.lineTo(j+Te.x*re,k+-Te.y*ue):Te.type==="Q"?le.quadraticCurveTo(j+Te.x1*re,k+-Te.y1*ue,j+Te.x*re,k+-Te.y*ue):Te.type==="C"?le.curveTo(j+Te.x1*re,k+-Te.y1*ue,j+Te.x2*re,k+-Te.y2*ue,j+Te.x*re,k+-Te.y*ue):Te.type==="Z"&&le.closePath()}return le},Ke.prototype.getContours=function(){if(this.points===void 0)return[];for(var j=[],k=[],O=0;O<this.points.length;O+=1){var R=this.points[O];k.push(R),R.lastPointOfContour&&(j.push(k),k=[])}return A.argument(k.length===0,"There are still points left in the current contour."),j},Ke.prototype.getMetrics=function(){for(var j=this.path.commands,k=[],O=[],R=0;R<j.length;R+=1){var U=j[R];U.type!=="Z"&&(k.push(U.x),O.push(U.y)),U.type!=="Q"&&U.type!=="C"||(k.push(U.x1),O.push(U.y1)),U.type==="C"&&(k.push(U.x2),O.push(U.y2))}var q={xMin:Math.min.apply(null,k),yMin:Math.min.apply(null,O),xMax:Math.max.apply(null,k),yMax:Math.max.apply(null,O),leftSideBearing:this.leftSideBearing};return isFinite(q.xMin)||(q.xMin=0),isFinite(q.xMax)||(q.xMax=this.advanceWidth),isFinite(q.yMin)||(q.yMin=0),isFinite(q.yMax)||(q.yMax=0),q.rightSideBearing=this.advanceWidth-q.leftSideBearing-(q.xMax-q.xMin),q},Ke.prototype.draw=function(j,k,O,R,U){this.getPath(k,O,R,U).draw(j)},Ke.prototype.drawPoints=function(j,k,O,R){function U(be,Te,_e,pe){var Ie=2*Math.PI;j.beginPath();for(var Pe=0;Pe<be.length;Pe+=1)j.moveTo(Te+be[Pe].x*pe,_e+be[Pe].y*pe),j.arc(Te+be[Pe].x*pe,_e+be[Pe].y*pe,2,0,Ie,!1);j.closePath(),j.fill()}k=k!==void 0?k:0,O=O!==void 0?O:0;for(var R=1/this.path.unitsPerEm*(R=R!==void 0?R:24),q=[],Y=[],re=this.path,ue=0;ue<re.commands.length;ue+=1){var le=re.commands[ue];le.x!==void 0&&q.push({x:le.x,y:-le.y}),le.x1!==void 0&&Y.push({x:le.x1,y:-le.y1}),le.x2!==void 0&&Y.push({x:le.x2,y:-le.y2})}j.fillStyle="blue",U(q,k,O,R),j.fillStyle="red",U(Y,k,O,R)},Ke.prototype.drawMetrics=function(j,k,O,R){k=k!==void 0?k:0,O=O!==void 0?O:0,R=1/this.path.unitsPerEm*(R=R!==void 0?R:24),j.lineWidth=1,j.strokeStyle="black",He.line(j,k,-1e4,k,1e4),He.line(j,-1e4,O,1e4,O);var U=this.xMin||0,q=this.yMin||0,Y=this.xMax||0,re=this.yMax||0,ue=this.advanceWidth||0;j.strokeStyle="blue",He.line(j,k+U*R,-1e4,k+U*R,1e4),He.line(j,k+Y*R,-1e4,k+Y*R,1e4),He.line(j,-1e4,O+-q*R,1e4,O+-q*R),He.line(j,-1e4,O+-re*R,1e4,O+-re*R),j.strokeStyle="green",He.line(j,k+ue*R,-1e4,k+ue*R,1e4)},it.prototype.get=function(j){return typeof this.glyphs[j]=="function"&&(this.glyphs[j]=this.glyphs[j]()),this.glyphs[j]},it.prototype.push=function(j,k){this.glyphs[j]=k,this.length++};var tt={GlyphSet:it,glyphLoader:function(j,k){return new Ke({index:k,font:j})},ttfGlyphLoader:function(j,k,O,R,U,q){return function(){var Y=new Ke({index:k,font:j});return Y.path=function(){O(Y,R,U);var re=q(j.glyphs,Y);return re.unitsPerEm=j.unitsPerEm,re},ut(Y,"xMin","_xMin"),ut(Y,"xMax","_xMax"),ut(Y,"yMin","_yMin"),ut(Y,"yMax","_yMax"),Y}},cffGlyphLoader:function(j,k,O,R){return function(){var U=new Ke({index:k,font:j});return U.path=function(){var q=O(j,U,R);return q.unitsPerEm=j.unitsPerEm,q},U}}};function lt(j){return j=j.length<1240?107:j.length<33900?1131:32768,j}function at(j,k,O){var R,U=[],q=[],Y=Ee.getCard16(j,k);if(Y!==0){for(var re=Ee.getByte(j,k+2),ue=k+(Y+1)*re+2,le=k+3,be=0;be<Y+1;be+=1)U.push(Ee.getOffset(j,le,re)),le+=re;R=ue+U[Y]}else R=k+2;for(var Te=0;Te<U.length-1;Te+=1){var _e=Ee.getBytes(j,ue+U[Te],ue+U[Te+1]);O&&(_e=O(_e)),q.push(_e)}return{objects:q,startOffset:k,endOffset:R}}function Et(j,k){if(k===28)return j.parseByte()<<8|j.parseByte();if(k===29)return j.parseByte()<<24|j.parseByte()<<16|j.parseByte()<<8|j.parseByte();if(k===30){for(var O=j,R="",U=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var Y=O.parseByte(),q=Y>>4,Y=15&Y;if(q==15||(R+=U[q],Y==15))break;R+=U[Y]}return parseFloat(R)}if(32<=k&&k<=246)return k-139;if(247<=k&&k<=250)return 256*(k-247)+j.parseByte()+108;if(251<=k&&k<=254)return 256*-(k-251)-j.parseByte()-108;throw new Error("Invalid b0 "+k)}function cr(j,k,O){var R=new Ee.Parser(j,k=k!==void 0?k:0),U=[],q=[];for(O=O!==void 0?O:j.length;R.relativeOffset<O;){var Y=R.parseByte();Y<=21?(Y===12&&(Y=1200+R.parseByte()),U.push([Y,q]),q=[]):q.push(Et(R,Y))}for(var re=U,ue={},le=0;le<re.length;le+=1){var be=re[le][0],Te=re[le][1],_e=void 0,_e=Te.length===1?Te[0]:Te;if(ue.hasOwnProperty(be)&&!isNaN(ue[be]))throw new Error("Object "+ue+" already has key "+be);ue[be]=_e}return ue}function Wt(j,k){return k=k<=390?ne[k]:j[k-391]}function bt(j,k,O){for(var R,U={},q=0;q<k.length;q+=1){var Y=k[q];if(Array.isArray(Y.type)){var re=[];re.length=Y.type.length;for(var ue=0;ue<Y.type.length;ue++)(R=j[Y.op]!==void 0?j[Y.op][ue]:void 0)===void 0&&(R=Y.value!==void 0&&Y.value[ue]!==void 0?Y.value[ue]:null),Y.type[ue]==="SID"&&(R=Wt(O,R)),re[ue]=R;U[Y.name]=re}else(R=j[Y.op])===void 0&&(R=Y.value!==void 0?Y.value:null),Y.type==="SID"&&(R=Wt(O,R)),U[Y.name]=R}return U}var Ct=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],yt=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function or(j,k,O,R){return bt(cr(j,k,O),yt,R)}function Zt(j,k,O,R){for(var U=[],q=0;q<O.length;q+=1){var Y=new DataView(new Uint8Array(O[q]).buffer),Y=(re=R,bt(cr(Y,0,Y.byteLength),Ct,re)),re=(Y._subrs=[],Y._subrsBias=0,Y.private[0]),ue=Y.private[1];re!==0&&ue!==0&&(re=or(j,ue+k,re,R),Y._defaultWidthX=re.defaultWidthX,Y._nominalWidthX=re.nominalWidthX,re.subrs!==0&&(ue=at(j,ue+re.subrs+k),Y._subrs=ue.objects,Y._subrsBias=lt(Y._subrs)),Y._privateDict=re),U.push(Y)}return U}function _t(j,k,O){var R,U,q,Y,re,ue,le,be,Te,_e=new Q,pe=[],Ie=0,Pe=!1,Ne=!1,Ce=0,Oe=0,nt=(Te=(j.isCIDFont?(re=j.tables.cff.topDict._fdSelect[k.index],re=j.tables.cff.topDict._fdArray[re],ue=re._subrs,le=re._subrsBias,be=re._defaultWidthX,re):(ue=j.tables.cff.topDict._subrs,le=j.tables.cff.topDict._subrsBias,be=j.tables.cff.topDict._defaultWidthX,j.tables.cff.topDict))._nominalWidthX,be);function ct(st,ft){Ne&&_e.closePath(),_e.moveTo(st,ft),Ne=!0}function ot(){pe.length%2==0||Pe||(nt=pe.shift()+Te),Ie+=pe.length>>1,pe.length=0,Pe=!0}return function st(ft){for(var Tt,Bt,$t,dr,fr,Xr,kt,Ot,xt,hr,At,ar,Pt=0;Pt<ft.length;){var tr=ft[Pt];switch(Pt+=1,tr){case 1:case 3:ot();break;case 4:1<pe.length&&!Pe&&(nt=pe.shift()+Te,Pe=!0),Oe+=pe.pop(),ct(Ce,Oe);break;case 5:for(;0<pe.length;)Ce+=pe.shift(),Oe+=pe.shift(),_e.lineTo(Ce,Oe);break;case 6:for(;0<pe.length&&(Ce+=pe.shift(),_e.lineTo(Ce,Oe),pe.length!==0);)Oe+=pe.shift(),_e.lineTo(Ce,Oe);break;case 7:for(;0<pe.length&&(Oe+=pe.shift(),_e.lineTo(Ce,Oe),pe.length!==0);)Ce+=pe.shift(),_e.lineTo(Ce,Oe);break;case 8:for(;0<pe.length;)R=Ce+pe.shift(),U=Oe+pe.shift(),q=R+pe.shift(),Y=U+pe.shift(),Ce=q+pe.shift(),Oe=Y+pe.shift(),_e.curveTo(R,U,q,Y,Ce,Oe);break;case 10:fr=pe.pop()+le,(Xr=ue[fr])&&st(Xr);break;case 11:return;case 12:switch(tr=ft[Pt],Pt+=1,tr){case 35:R=Ce+pe.shift(),U=Oe+pe.shift(),q=R+pe.shift(),Y=U+pe.shift(),kt=q+pe.shift(),Ot=Y+pe.shift(),xt=kt+pe.shift(),hr=Ot+pe.shift(),At=xt+pe.shift(),ar=hr+pe.shift(),Ce=At+pe.shift(),Oe=ar+pe.shift(),pe.shift(),_e.curveTo(R,U,q,Y,kt,Ot),_e.curveTo(xt,hr,At,ar,Ce,Oe);break;case 34:R=Ce+pe.shift(),U=Oe,q=R+pe.shift(),Y=U+pe.shift(),kt=q+pe.shift(),Ot=Y,xt=kt+pe.shift(),hr=Y,At=xt+pe.shift(),ar=Oe,Ce=At+pe.shift(),_e.curveTo(R,U,q,Y,kt,Ot),_e.curveTo(xt,hr,At,ar,Ce,Oe);break;case 36:R=Ce+pe.shift(),U=Oe+pe.shift(),q=R+pe.shift(),Y=U+pe.shift(),kt=q+pe.shift(),Ot=Y,xt=kt+pe.shift(),hr=Y,At=xt+pe.shift(),ar=hr+pe.shift(),Ce=At+pe.shift(),_e.curveTo(R,U,q,Y,kt,Ot),_e.curveTo(xt,hr,At,ar,Ce,Oe);break;case 37:R=Ce+pe.shift(),U=Oe+pe.shift(),q=R+pe.shift(),Y=U+pe.shift(),kt=q+pe.shift(),Ot=Y+pe.shift(),xt=kt+pe.shift(),hr=Ot+pe.shift(),At=xt+pe.shift(),ar=hr+pe.shift(),Math.abs(At-Ce)>Math.abs(ar-Oe)?Ce=At+pe.shift():Oe=ar+pe.shift(),_e.curveTo(R,U,q,Y,kt,Ot),_e.curveTo(xt,hr,At,ar,Ce,Oe);break;default:console.log("Glyph "+k.index+": unknown operator 1200"+tr),pe.length=0}break;case 14:0<pe.length&&!Pe&&(nt=pe.shift()+Te,Pe=!0),Ne&&(_e.closePath(),Ne=!1);break;case 18:ot();break;case 19:case 20:ot(),Pt+=Ie+7>>3;break;case 21:2<pe.length&&!Pe&&(nt=pe.shift()+Te,Pe=!0),Oe+=pe.pop(),ct(Ce+=pe.pop(),Oe);break;case 22:1<pe.length&&!Pe&&(nt=pe.shift()+Te,Pe=!0),ct(Ce+=pe.pop(),Oe);break;case 23:ot();break;case 24:for(;2<pe.length;)R=Ce+pe.shift(),U=Oe+pe.shift(),q=R+pe.shift(),Y=U+pe.shift(),Ce=q+pe.shift(),Oe=Y+pe.shift(),_e.curveTo(R,U,q,Y,Ce,Oe);Ce+=pe.shift(),Oe+=pe.shift(),_e.lineTo(Ce,Oe);break;case 25:for(;6<pe.length;)Ce+=pe.shift(),Oe+=pe.shift(),_e.lineTo(Ce,Oe);R=Ce+pe.shift(),U=Oe+pe.shift(),q=R+pe.shift(),Y=U+pe.shift(),Ce=q+pe.shift(),Oe=Y+pe.shift(),_e.curveTo(R,U,q,Y,Ce,Oe);break;case 26:for(pe.length%2&&(Ce+=pe.shift());0<pe.length;)R=Ce,U=Oe+pe.shift(),q=R+pe.shift(),Y=U+pe.shift(),Ce=q,Oe=Y+pe.shift(),_e.curveTo(R,U,q,Y,Ce,Oe);break;case 27:for(pe.length%2&&(Oe+=pe.shift());0<pe.length;)R=Ce+pe.shift(),U=Oe,q=R+pe.shift(),Y=U+pe.shift(),Ce=q+pe.shift(),Oe=Y,_e.curveTo(R,U,q,Y,Ce,Oe);break;case 28:Tt=ft[Pt],Bt=ft[Pt+1],pe.push((Tt<<24|Bt<<16)>>16),Pt+=2;break;case 29:fr=pe.pop()+j.gsubrsBias,(Xr=j.gsubrs[fr])&&st(Xr);break;case 30:for(;0<pe.length&&(R=Ce,U=Oe+pe.shift(),q=R+pe.shift(),Y=U+pe.shift(),Ce=q+pe.shift(),Oe=Y+(pe.length===1?pe.shift():0),_e.curveTo(R,U,q,Y,Ce,Oe),pe.length!==0);)R=Ce+pe.shift(),U=Oe,q=R+pe.shift(),Y=U+pe.shift(),Oe=Y+pe.shift(),Ce=q+(pe.length===1?pe.shift():0),_e.curveTo(R,U,q,Y,Ce,Oe);break;case 31:for(;0<pe.length&&(R=Ce+pe.shift(),U=Oe,q=R+pe.shift(),Y=U+pe.shift(),Oe=Y+pe.shift(),Ce=q+(pe.length===1?pe.shift():0),_e.curveTo(R,U,q,Y,Ce,Oe),pe.length!==0);)R=Ce,U=Oe+pe.shift(),q=R+pe.shift(),Y=U+pe.shift(),Ce=q+pe.shift(),Oe=Y+(pe.length===1?pe.shift():0),_e.curveTo(R,U,q,Y,Ce,Oe);break;default:tr<32?console.log("Glyph "+k.index+": unknown operator "+tr):tr<247?pe.push(tr-139):tr<251?(Tt=ft[Pt],Pt+=1,pe.push(256*(tr-247)+Tt+108)):tr<255?(Tt=ft[Pt],Pt+=1,pe.push(256*-(tr-251)-Tt-108)):(Tt=ft[Pt],Bt=ft[Pt+1],$t=ft[Pt+2],dr=ft[Pt+3],Pt+=4,pe.push((Tt<<24|Bt<<16|$t<<8|dr)/65536))}}}(O),k.advanceWidth=nt,_e}function sr(j,k){var O,R=ne.indexOf(j);return 0<=R&&(O=R),0<=(R=k.indexOf(j))?O=R+ne.length:(O=ne.length+k.length,k.push(j)),O}function As(j,k,O){for(var R={},U=0;U<j.length;U+=1){var q=j[U],Y=k[q.name];Y===void 0||function re(ue,le){if(ue===le)return 1;if(Array.isArray(ue)&&Array.isArray(le)&&ue.length===le.length){for(var be=0;be<ue.length;be+=1)if(!re(ue[be],le[be]))return;return 1}}(Y,q.value)||(q.type==="SID"&&(Y=sr(Y,O)),R[q.op]={name:q.name,type:q.type,value:Y})}return R}function Is(j,k){var O=new Me.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return O.dict=As(Ct,j,k),O}function Ds(j){var k=new Me.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return k.topDicts=[{name:"topDict_0",type:"TABLE",value:j}],k}function Qa(j){for(var k=new Me.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),O=0;O<j.length;O+=1){var R=j.get(O),U=function(q){for(var Y=[],re=q.path,ue=(Y.push({name:"width",type:"NUMBER",value:q.advanceWidth}),0),le=0,be=0;be<re.commands.length;be+=1){var Te,_e,pe,Ie,Pe=void 0,Ne=void 0,Ce=re.commands[be];(Ce=Ce.type==="Q"?{type:"C",x:Ce.x,y:Ce.y,x1:1/3*ue+2/3*Ce.x1,y1:1/3*le+2/3*Ce.y1,x2:1/3*Ce.x+2/3*Ce.x1,y2:1/3*Ce.y+2/3*Ce.y1}:Ce).type==="M"?(Pe=Math.round(Ce.x-ue),Ne=Math.round(Ce.y-le),Y.push({name:"dx",type:"NUMBER",value:Pe}),Y.push({name:"dy",type:"NUMBER",value:Ne}),Y.push({name:"rmoveto",type:"OP",value:21}),ue=Math.round(Ce.x),le=Math.round(Ce.y)):Ce.type==="L"?(Pe=Math.round(Ce.x-ue),Ne=Math.round(Ce.y-le),Y.push({name:"dx",type:"NUMBER",value:Pe}),Y.push({name:"dy",type:"NUMBER",value:Ne}),Y.push({name:"rlineto",type:"OP",value:5}),ue=Math.round(Ce.x),le=Math.round(Ce.y)):Ce.type==="C"&&(Te=Math.round(Ce.x1-ue),_e=Math.round(Ce.y1-le),pe=Math.round(Ce.x2-Ce.x1),Ie=Math.round(Ce.y2-Ce.y1),Pe=Math.round(Ce.x-Ce.x2),Ne=Math.round(Ce.y-Ce.y2),Y.push({name:"dx1",type:"NUMBER",value:Te}),Y.push({name:"dy1",type:"NUMBER",value:_e}),Y.push({name:"dx2",type:"NUMBER",value:pe}),Y.push({name:"dy2",type:"NUMBER",value:Ie}),Y.push({name:"dx",type:"NUMBER",value:Pe}),Y.push({name:"dy",type:"NUMBER",value:Ne}),Y.push({name:"rrcurveto",type:"OP",value:8}),ue=Math.round(Ce.x),le=Math.round(Ce.y))}return Y.push({name:"endchar",type:"OP",value:14}),Y}(R);k.charStrings.push({name:R.name,type:"CHARSTRING",value:U})}return k}var Fs={parse:function(j,k,O){O.tables.cff={},re=j,R=k,(U={}).formatMajor=Ee.getCard8(re,R),U.formatMinor=Ee.getCard8(re,R+1),U.size=Ee.getCard8(re,R+2),U.offsetSize=Ee.getCard8(re,R+3),U.startOffset=R,U.endOffset=R+4;var re=at(j,U.endOffset,Ee.bytesToString),R=at(j,re.endOffset),U=at(j,R.endOffset,Ee.bytesToString),re=at(j,U.endOffset);if(O.gsubrs=re.objects,O.gsubrsBias=lt(O.gsubrs),(re=Zt(j,k,R.objects,U.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+re.length);if(R=re[0],(O.tables.cff.topDict=R)._privateDict&&(O.defaultWidthX=R._privateDict.defaultWidthX,O.nominalWidthX=R._privateDict.nominalWidthX),R.ros[0]!==void 0&&R.ros[1]!==void 0&&(O.isCIDFont=!0),O.isCIDFont){var re=R.fdArray,q=R.fdSelect;if(re===0||q===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");re=Zt(j,k,at(j,re+=k).objects,U.objects),R._fdArray=re,R._fdSelect=function(_e,pe,Ie,Pe){var Ne,Ce=[],Oe=new Ee.Parser(_e,pe);if((_e=Oe.parseCard8())===0)for(var nt=0;nt<Ie;nt++){if(Pe<=(Ne=Oe.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+Ne+" (FD count "+Pe+")");Ce.push(Ne)}else{if(_e!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+_e);var ct,ot=Oe.parseCard16(),st=Oe.parseCard16();if(st!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+st);for(var ft=0;ft<ot;ft++){if(Ne=Oe.parseCard8(),ct=Oe.parseCard16(),Pe<=Ne)throw new Error("CFF table CID Font FDSelect has bad FD index value "+Ne+" (FD count "+Pe+")");if(Ie<ct)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+ct);for(;st<ct;st++)Ce.push(Ne);st=ct}if(ct!==Ie)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+ct)}return Ce}(j,q+=k,O.numGlyphs,re.length)}var q=k+R.private[1],re=or(j,q,R.private[0],U.objects),Y=(O.defaultWidthX=re.defaultWidthX,O.nominalWidthX=re.nominalWidthX,re.subrs!==0?(q=at(j,q+re.subrs),O.subrs=q.objects,O.subrsBias=lt(O.subrs)):(O.subrs=[],O.subrsBias=0),at(j,k+R.charStrings)),re=(O.nGlyphs=Y.objects.length,function(be,Te,_e,pe){var Ie=new Ee.Parser(be,Te),Pe=(--_e,[".notdef"]);if((be=Ie.parseCard8())===0)for(var Ne=0;Ne<_e;Ne+=1)Ce=Ie.parseSID(),Pe.push(Wt(pe,Ce));else if(be===1)for(;Pe.length<=_e;)for(var Ce=Ie.parseSID(),Oe=Ie.parseCard8(),nt=0;nt<=Oe;nt+=1)Pe.push(Wt(pe,Ce)),Ce+=1;else{if(be!==2)throw new Error("Unknown charset format "+be);for(;Pe.length<=_e;){Ce=Ie.parseSID(),Oe=Ie.parseCard16();for(var ct=0;ct<=Oe;ct+=1)Pe.push(Wt(pe,Ce)),Ce+=1}}return Pe}(j,k+R.charset,O.nGlyphs,U.objects));R.encoding===0?O.cffEncoding=new Be(K,re):R.encoding===1?O.cffEncoding=new Be(ae,re):O.cffEncoding=function(be,Te,_e){var pe={},Ie=new Ee.Parser(be,Te);if((be=Ie.parseCard8())===0)for(var Pe=Ie.parseCard8(),Ne=0;Ne<Pe;Ne+=1)pe[Oe=Ie.parseCard8()]=Ne;else{if(be!==1)throw new Error("Unknown encoding format "+be);for(var Ce=Ie.parseCard8(),Oe=1,nt=0;nt<Ce;nt+=1)for(var ct=Ie.parseCard8(),ot=Ie.parseCard8(),st=ct;st<=ct+ot;st+=1)pe[st]=Oe,Oe+=1}return new Be(pe,_e)}(j,k+R.encoding,re),O.encoding=O.encoding||O.cffEncoding,O.glyphs=new tt.GlyphSet(O);for(var ue=0;ue<O.nGlyphs;ue+=1){var le=Y.objects[ue];O.glyphs.push(ue,tt.cffGlyphLoader(O,ue,_t,le))}},make:function(j,be){for(var O,R=new Me.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),U=1/be.unitsPerEm,U={version:be.version,fullName:be.fullName,familyName:be.familyName,weight:be.weightName,fontBBox:be.fontBBox||[0,0,0,0],fontMatrix:[U,0,0,U,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},q=[],Y=1;Y<j.length;Y+=1)O=j.get(Y),q.push(O.name);var re,ue,le=[],be=(R.header=new Me.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),R.nameIndex=function(_e){var pe=new Me.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);pe.names=[];for(var Ie=0;Ie<_e.length;Ie+=1)pe.names.push({name:"name_"+Ie,type:"NAME",value:_e[Ie]});return pe}([be.postScriptName]),Is(U,le)),Te=(R.topDictIndex=Ds(be),R.globalSubrIndex=new Me.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),R.charsets=function(_e,pe){for(var Ie=new Me.Record("Charsets",[{name:"format",type:"Card8",value:0}]),Pe=0;Pe<_e.length;Pe+=1){var Ne=sr(_e[Pe],pe);Ie.fields.push({name:"glyph_"+Pe,type:"SID",value:Ne})}return Ie}(q,le),R.charStringsIndex=Qa(j),R.privateDict=(Te={},re=le,(ue=new Me.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=As(yt,Te,re),ue),R.stringIndex=function(_e){var pe=new Me.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);pe.strings=[];for(var Ie=0;Ie<_e.length;Ie+=1)pe.strings.push({name:"string_"+Ie,type:"STRING",value:_e[Ie]});return pe}(le),R.header.sizeOf()+R.nameIndex.sizeOf()+R.topDictIndex.sizeOf()+R.stringIndex.sizeOf()+R.globalSubrIndex.sizeOf());return U.charset=Te,U.encoding=0,U.charStrings=U.charset+R.charsets.sizeOf(),U.private[1]=U.charStrings+R.charStringsIndex.sizeOf(),be=Is(U,le),R.topDictIndex=Ds(be),R}},Us={parse:function(R,k){var O={},R=new Ee.Parser(R,k);return O.version=R.parseVersion(),O.fontRevision=Math.round(1e3*R.parseFixed())/1e3,O.checkSumAdjustment=R.parseULong(),O.magicNumber=R.parseULong(),A.argument(O.magicNumber===1594834165,"Font header has wrong magic number."),O.flags=R.parseUShort(),O.unitsPerEm=R.parseUShort(),O.created=R.parseLongDateTime(),O.modified=R.parseLongDateTime(),O.xMin=R.parseShort(),O.yMin=R.parseShort(),O.xMax=R.parseShort(),O.yMax=R.parseShort(),O.macStyle=R.parseUShort(),O.lowestRecPPEM=R.parseUShort(),O.fontDirectionHint=R.parseShort(),O.indexToLocFormat=R.parseShort(),O.glyphDataFormat=R.parseShort(),O},make:function(j){var k=Math.round(new Date().getTime()/1e3)+2082844800,O=k;return j.createdTimestamp&&(O=j.createdTimestamp+2082844800),new Me.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:O},{name:"modified",type:"LONGDATETIME",value:k},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],j)}},me={parse:function(R,k){var O={},R=new Ee.Parser(R,k);return O.version=R.parseVersion(),O.ascender=R.parseShort(),O.descender=R.parseShort(),O.lineGap=R.parseShort(),O.advanceWidthMax=R.parseUShort(),O.minLeftSideBearing=R.parseShort(),O.minRightSideBearing=R.parseShort(),O.xMaxExtent=R.parseShort(),O.caretSlopeRise=R.parseShort(),O.caretSlopeRun=R.parseShort(),O.caretOffset=R.parseShort(),R.relativeOffset+=8,O.metricDataFormat=R.parseShort(),O.numberOfHMetrics=R.parseUShort(),O},make:function(j){return new Me.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],j)}},ze={parse:function(j,k,O,R,U){for(var q,Y,re=new Ee.Parser(j,k),ue=0;ue<R;ue+=1){ue<O&&(q=re.parseUShort(),Y=re.parseShort());var le=U.get(ue);le.advanceWidth=q,le.leftSideBearing=Y}},make:function(j){for(var k=new Me.Table("hmtx",[]),O=0;O<j.length;O+=1){var U=j.get(O),R=U.advanceWidth||0,U=U.leftSideBearing||0;k.fields.push({name:"advanceWidth_"+O,type:"USHORT",value:R}),k.fields.push({name:"leftSideBearing_"+O,type:"SHORT",value:U})}return k}},Ze={make:function(j){for(var k=new Me.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:j.length}]),O="",R=12+4*j.length,U=0;U<j.length;++U){var q=O.indexOf(j[U]);q<0&&(q=O.length,O+=j[U]),k.fields.push({name:"offset "+U,type:"USHORT",value:R+q}),k.fields.push({name:"length "+U,type:"USHORT",value:j[U].length})}return k.fields.push({name:"stringPool",type:"CHARARRAY",value:O}),k},parse:function(j,k){for(var O=new Ee.Parser(j,k),R=O.parseULong(),U=(A.argument(R===1,"Unsupported ltag table version."),O.skip("uLong",1),O.parseULong()),q=[],Y=0;Y<U;Y++){for(var re="",ue=k+O.parseUShort(),le=O.parseUShort(),be=ue;be<ue+le;++be)re+=String.fromCharCode(j.getInt8(be));q.push(re)}return q}},Ue={parse:function(R,k){var O={},R=new Ee.Parser(R,k);return O.version=R.parseVersion(),O.numGlyphs=R.parseUShort(),O.version===1&&(O.maxPoints=R.parseUShort(),O.maxContours=R.parseUShort(),O.maxCompositePoints=R.parseUShort(),O.maxCompositeContours=R.parseUShort(),O.maxZones=R.parseUShort(),O.maxTwilightPoints=R.parseUShort(),O.maxStorage=R.parseUShort(),O.maxFunctionDefs=R.parseUShort(),O.maxInstructionDefs=R.parseUShort(),O.maxStackElements=R.parseUShort(),O.maxSizeOfInstructions=R.parseUShort(),O.maxComponentElements=R.parseUShort(),O.maxComponentDepth=R.parseUShort()),O},make:function(j){return new Me.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:j}])}},ht=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],De={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},gt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},Ye={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},mt="utf-16",Qe={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Gt={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Xt(j,k,O){switch(j){case 0:return mt;case 1:return Gt[O]||Qe[k];case 3:if(k===1||k===10)return mt}}function Ut(j){var k,O={};for(k in j)O[j[k]]=parseInt(k);return O}function Jt(j,k,O,R,U,q){return new Me.Record("NameRecord",[{name:"platformID",type:"USHORT",value:j},{name:"encodingID",type:"USHORT",value:k},{name:"languageID",type:"USHORT",value:O},{name:"nameID",type:"USHORT",value:R},{name:"length",type:"USHORT",value:U},{name:"offset",type:"USHORT",value:q}])}function an(j,k){if((O=function(q,Y){var re=q.length,ue=Y.length-re+1;e:for(var le=0;le<ue;le++)for(;le<ue;le++){for(var be=0;be<re;be++)if(Y[le+be]!==q[be])continue e;return le}return-1}(j,k))<0)for(var O=k.length,R=0,U=j.length;R<U;++R)k.push(j[R]);return O}var Cr={parse:function(j,k,O){for(var R={},U=new Ee.Parser(j,k),k=U.parseUShort(),q=U.parseUShort(),Y=U.offset+U.parseUShort(),re=0;re<q;re++){var Ie=U.parseUShort(),ue=U.parseUShort(),le=U.parseUShort(),be=U.parseUShort(),be=ht[be]||be,Te=U.parseUShort(),_e=U.parseUShort(),pe=function(Ne,Ce,Oe){switch(Ne){case 0:if(Ce===65535)return"und";if(Oe)return Oe[Ce];break;case 1:return De[Ce];case 3:return Ye[Ce]}}(Ie,le,O),Ie=Xt(Ie,ue,le);Ie!==void 0&&pe!==void 0&&(ue=void 0,(ue=Ie===mt?z.UTF16(j,Y+_e,Te):z.MACSTRING(j,Y+_e,Te,Ie))&&((le=(le=R[be])===void 0?R[be]={}:le)[pe]=ue))}return k===1&&U.parseUShort(),R},make:function(j,k){var O,R=[],U={},q=Ut(ht);for(O in j){var Y=q[O];if(Y===void 0&&(Y=O),_e=parseInt(Y),isNaN(_e))throw new Error('Name table entry "'+O+'" does not exist, see nameTableNames for complete list.');U[_e]=j[O],R.push(_e)}for(var re=Ut(De),ue=Ut(Ye),le=[],be=[],Te=0;Te<R.length;Te++){var _e,pe,Ie=U[_e=R[Te]];for(pe in Ie){var Pe=Ie[pe],ct=1,Ne=re[pe],Ce=gt[Ne],Oe=Xt(ct,Ce,Ne),Oe=$.MACSTRING(Pe,Oe),nt=(Oe===void 0&&(ct=0,(Ne=k.indexOf(pe))<0&&(Ne=k.length,k.push(pe)),Ce=4,Oe=$.UTF16(Pe)),an(Oe,be)),ct=(le.push(Jt(ct,Ce,Ne,_e,Oe.length,nt)),ue[pe]);ct!==void 0&&(Ne=an(Ce=$.UTF16(Pe),be),le.push(Jt(3,1,ct,_e,Ce.length,Ne)))}}le.sort(function(ft,Tt){return ft.platformID-Tt.platformID||ft.encodingID-Tt.encodingID||ft.languageID-Tt.languageID||ft.nameID-Tt.nameID});for(var ot=new Me.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:le.length},{name:"stringOffset",type:"USHORT",value:6+12*le.length}]),st=0;st<le.length;st++)ot.fields.push({name:"record_"+st,type:"RECORD",value:le[st]});return ot.fields.push({name:"strings",type:"LITERAL",value:be}),ot}},ln=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],er={parse:function(j,k){var O={},R=new Ee.Parser(j,k);O.version=R.parseUShort(),O.xAvgCharWidth=R.parseShort(),O.usWeightClass=R.parseUShort(),O.usWidthClass=R.parseUShort(),O.fsType=R.parseUShort(),O.ySubscriptXSize=R.parseShort(),O.ySubscriptYSize=R.parseShort(),O.ySubscriptXOffset=R.parseShort(),O.ySubscriptYOffset=R.parseShort(),O.ySuperscriptXSize=R.parseShort(),O.ySuperscriptYSize=R.parseShort(),O.ySuperscriptXOffset=R.parseShort(),O.ySuperscriptYOffset=R.parseShort(),O.yStrikeoutSize=R.parseShort(),O.yStrikeoutPosition=R.parseShort(),O.sFamilyClass=R.parseShort(),O.panose=[];for(var U=0;U<10;U++)O.panose[U]=R.parseByte();return O.ulUnicodeRange1=R.parseULong(),O.ulUnicodeRange2=R.parseULong(),O.ulUnicodeRange3=R.parseULong(),O.ulUnicodeRange4=R.parseULong(),O.achVendID=String.fromCharCode(R.parseByte(),R.parseByte(),R.parseByte(),R.parseByte()),O.fsSelection=R.parseUShort(),O.usFirstCharIndex=R.parseUShort(),O.usLastCharIndex=R.parseUShort(),O.sTypoAscender=R.parseShort(),O.sTypoDescender=R.parseShort(),O.sTypoLineGap=R.parseShort(),O.usWinAscent=R.parseUShort(),O.usWinDescent=R.parseUShort(),1<=O.version&&(O.ulCodePageRange1=R.parseULong(),O.ulCodePageRange2=R.parseULong()),2<=O.version&&(O.sxHeight=R.parseShort(),O.sCapHeight=R.parseShort(),O.usDefaultChar=R.parseUShort(),O.usBreakChar=R.parseUShort(),O.usMaxContent=R.parseUShort()),O},make:function(j){return new Me.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],j)},unicodeRanges:ln,getUnicodeRange:function(j){for(var k=0;k<ln.length;k+=1){var O=ln[k];if(j>=O.begin&&j<O.end)return k}return-1}},df={parse:function(j,k){var O={},R=new Ee.Parser(j,k);switch(O.version=R.parseVersion(),O.italicAngle=R.parseFixed(),O.underlinePosition=R.parseShort(),O.underlineThickness=R.parseShort(),O.isFixedPitch=R.parseULong(),O.minMemType42=R.parseULong(),O.maxMemType42=R.parseULong(),O.minMemType1=R.parseULong(),O.maxMemType1=R.parseULong(),O.version){case 1:O.names=ve.slice();break;case 2:O.numberOfGlyphs=R.parseUShort(),O.glyphNameIndex=new Array(O.numberOfGlyphs);for(var U=0;U<O.numberOfGlyphs;U++)O.glyphNameIndex[U]=R.parseUShort();O.names=[];for(var q,Y=0;Y<O.numberOfGlyphs;Y++)O.glyphNameIndex[Y]>=ve.length&&(q=R.parseChar(),O.names.push(R.parseString(q)));break;case 2.5:O.numberOfGlyphs=R.parseUShort(),O.offset=new Array(O.numberOfGlyphs);for(var re=0;re<O.numberOfGlyphs;re++)O.offset[re]=R.parseChar()}return O},make:function(){return new Me.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},$r=new Array(9),zo=($r[1]=function(){var j=this.offset+this.relativeOffset,k=this.parseUShort();return k===1?{substFormat:1,coverage:this.parsePointer(je.coverage),deltaGlyphId:this.parseUShort()}:k===2?{substFormat:2,coverage:this.parsePointer(je.coverage),substitute:this.parseOffset16List()}:void A.assert(!1,"0x"+j.toString(16)+": lookup type 1 format must be 1 or 2.")},$r[2]=function(){var j=this.parseUShort();return A.argument(j===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:j,coverage:this.parsePointer(je.coverage),sequences:this.parseListOfLists()}},$r[3]=function(){var j=this.parseUShort();return A.argument(j===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:j,coverage:this.parsePointer(je.coverage),alternateSets:this.parseListOfLists()}},$r[4]=function(){var j=this.parseUShort();return A.argument(j===1,"GSUB ligature table identifier-format must be 1"),{substFormat:j,coverage:this.parsePointer(je.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:je.uShort,lookupListIndex:je.uShort});$r[5]=function(){var j,k,O=this.offset+this.relativeOffset,R=this.parseUShort();return R===1?{substFormat:R,coverage:this.parsePointer(je.coverage),ruleSets:this.parseListOfLists(function(){var U=this.parseUShort(),q=this.parseUShort();return{input:this.parseUShortList(U-1),lookupRecords:this.parseRecordList(q,zo)}})}:R===2?{substFormat:R,coverage:this.parsePointer(je.coverage),classDef:this.parsePointer(je.classDef),classSets:this.parseListOfLists(function(){var U=this.parseUShort(),q=this.parseUShort();return{classes:this.parseUShortList(U-1),lookupRecords:this.parseRecordList(q,zo)}})}:R===3?(j=this.parseUShort(),k=this.parseUShort(),{substFormat:R,coverages:this.parseList(j,je.pointer(je.coverage)),lookupRecords:this.parseRecordList(k,zo)}):void A.assert(!1,"0x"+O.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},$r[6]=function(){var j=this.offset+this.relativeOffset,k=this.parseUShort();return k===1?{substFormat:1,coverage:this.parsePointer(je.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(zo)}})}:k===2?{substFormat:2,coverage:this.parsePointer(je.coverage),backtrackClassDef:this.parsePointer(je.classDef),inputClassDef:this.parsePointer(je.classDef),lookaheadClassDef:this.parsePointer(je.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(zo)}})}:k===3?{substFormat:3,backtrackCoverage:this.parseList(je.pointer(je.coverage)),inputCoverage:this.parseList(je.pointer(je.coverage)),lookaheadCoverage:this.parseList(je.pointer(je.coverage)),lookupRecords:this.parseRecordList(zo)}:void A.assert(!1,"0x"+j.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},$r[7]=function(){var j=this.parseUShort(),j=(A.argument(j===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),k=new je(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:j,extension:$r[j].call(k)}},$r[8]=function(){var j=this.parseUShort();return A.argument(j===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:j,coverage:this.parsePointer(je.coverage),backtrackCoverage:this.parseList(je.pointer(je.coverage)),lookaheadCoverage:this.parseList(je.pointer(je.coverage)),substitutes:this.parseUShortList()}};var Za=new Array(9);Za[1]=function(j){return j.substFormat===1?new Me.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Me.Coverage(j.coverage)},{name:"deltaGlyphID",type:"USHORT",value:j.deltaGlyphId}]):new Me.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Me.Coverage(j.coverage)}].concat(Me.ushortList("substitute",j.substitute)))},Za[3]=function(j){return A.assert(j.substFormat===1,"Lookup type 3 substFormat must be 1."),new Me.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Me.Coverage(j.coverage)}].concat(Me.tableList("altSet",j.alternateSets,function(k){return new Me.Table("alternateSetTable",Me.ushortList("alternate",k))})))},Za[4]=function(j){return A.assert(j.substFormat===1,"Lookup type 4 substFormat must be 1."),new Me.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Me.Coverage(j.coverage)}].concat(Me.tableList("ligSet",j.ligatureSets,function(k){return new Me.Table("ligatureSetTable",Me.tableList("ligature",k,function(O){return new Me.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:O.ligGlyph}].concat(Me.ushortList("component",O.components,O.components.length+1)))}))})))};var ff={parse:function(j,k){return k=(j=new je(j,k=k||0)).parseVersion(1),A.argument(k===1||k===1.1,"Unsupported GSUB table version."),k===1?{version:k,scripts:j.parseScriptList(),features:j.parseFeatureList(),lookups:j.parseLookupList($r)}:{version:k,scripts:j.parseScriptList(),features:j.parseFeatureList(),lookups:j.parseLookupList($r),variations:j.parseFeatureVariationsList()}},make:function(j){return new Me.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Me.ScriptList(j.scripts)},{name:"features",type:"TABLE",value:new Me.FeatureList(j.features)},{name:"lookups",type:"TABLE",value:new Me.LookupList(j.lookups,Za)}])}},hf={parse:function(j,k){for(var O=new Ee.Parser(j,k),R=O.parseULong(),U=(A.argument(R===1,"Unsupported META table version."),O.parseULong(),O.parseULong(),O.parseULong()),q={},Y=0;Y<U;Y++){var re=O.parseTag(),le=O.parseULong(),ue=O.parseULong(),le=z.UTF8(j,k+le,ue);q[re]=le}return q},make:function(j){var k,O=Object.keys(j).length,R="",U=16+12*O,q=new Me.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:U},{name:"numTags",type:"ULONG",value:O}]);for(k in j){var Y=R.length;R+=j[k],q.fields.push({name:"tag "+k,type:"TAG",value:k}),q.fields.push({name:"offset "+k,type:"ULONG",value:U+Y}),q.fields.push({name:"length "+k,type:"ULONG",value:j[k].length})}return q.fields.push({name:"stringPool",type:"CHARARRAY",value:R}),q}};function pf(j){return Math.log(j)/Math.log(2)|0}function Kl(j){for(;j.length%4!=0;)j.push(0);for(var k=0,O=0;O<j.length;O+=4)k+=(j[O]<<24)+(j[O+1]<<16)+(j[O+2]<<8)+j[O+3];return k%=Math.pow(2,32)}function mf(j,k,O,R){return new Me.Record("Table Record",[{name:"tag",type:"TAG",value:j!==void 0?j:""},{name:"checkSum",type:"ULONG",value:k!==void 0?k:0},{name:"offset",type:"ULONG",value:O!==void 0?O:0},{name:"length",type:"ULONG",value:R!==void 0?R:0}])}function yf(j){for(var k=new Me.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),O=(k.tables=j,k.numTables=j.length,Math.pow(2,pf(k.numTables))),R=(k.searchRange=16*O,k.entrySelector=pf(O),k.rangeShift=16*k.numTables-k.searchRange,[]),U=[],q=k.sizeOf()+mf().sizeOf()*k.numTables;q%4!=0;)q+=1,U.push({name:"padding",type:"BYTE",value:0});for(var Y=0;Y<j.length;Y+=1){var re=j[Y],ue=(A.argument(re.tableName.length===4,"Table name"+re.tableName+" is invalid."),re.sizeOf()),le=mf(re.tableName,Kl(re.encode()),q,ue);for(R.push({name:le.tag+" Table Record",type:"RECORD",value:le}),U.push({name:re.tableName+" table",type:"RECORD",value:re}),q+=ue,A.argument(!isNaN(q),"Something went wrong calculating the offset.");q%4!=0;)q+=1,U.push({name:"padding",type:"BYTE",value:0})}return R.sort(function(be,Te){return be.value.tag>Te.value.tag?1:-1}),k.fields=k.fields.concat(R),k.fields=k.fields.concat(U),k}function gf(j,k,O){for(var R=0;R<k.length;R+=1){var U=j.charToGlyphIndex(k[R]);if(0<U)return j.glyphs.get(U).getMetrics()}return O}var iv={make:yf,fontToTable:function(j){for(var k,O=[],R=[],U=[],q=[],Y=[],re=[],ue=[],le=0,be=0,Te=0,_e=0,pe=0,Ie=0;Ie<j.glyphs.length;Ie+=1){var Pe=j.glyphs.get(Ie),Ne=0|Pe.unicode;if(isNaN(Pe.advanceWidth))throw new Error("Glyph "+Pe.name+" ("+Ie+"): advanceWidth is not a number.");(Ne<k||k===void 0)&&0<Ne&&(k=Ne),le<Ne&&(le=Ne);var Ne=er.getUnicodeRange(Ne);if(Ne<32)be|=1<<Ne;else if(Ne<64)Te|=1<<Ne-32;else if(Ne<96)_e|=1<<Ne-64;else{if(!(Ne<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");pe|=1<<Ne-96}Pe.name!==".notdef"&&(Ne=Pe.getMetrics(),O.push(Ne.xMin),R.push(Ne.yMin),U.push(Ne.xMax),q.push(Ne.yMax),re.push(Ne.leftSideBearing),ue.push(Ne.rightSideBearing),Y.push(Pe.advanceWidth))}var Ce,Oe={xMin:Math.min.apply(null,O),yMin:Math.min.apply(null,R),xMax:Math.max.apply(null,U),yMax:Math.max.apply(null,q),advanceWidthMax:Math.max.apply(null,Y),advanceWidthAvg:function(tr){for(var Vs=0,Ho=0;Ho<tr.length;Ho+=1)Vs+=tr[Ho];return Vs/tr.length}(Y),minLeftSideBearing:Math.min.apply(null,re),maxLeftSideBearing:Math.max.apply(null,re),minRightSideBearing:Math.min.apply(null,ue)},nt=(Oe.ascender=j.ascender,Oe.descender=j.descender,Us.make({flags:3,unitsPerEm:j.unitsPerEm,xMin:Oe.xMin,yMin:Oe.yMin,xMax:Oe.xMax,yMax:Oe.yMax,lowestRecPPEM:3,createdTimestamp:j.createdTimestamp})),ct=me.make({ascender:Oe.ascender,descender:Oe.descender,advanceWidthMax:Oe.advanceWidthMax,minLeftSideBearing:Oe.minLeftSideBearing,minRightSideBearing:Oe.minRightSideBearing,xMaxExtent:Oe.maxLeftSideBearing+(Oe.xMax-Oe.xMin),numberOfHMetrics:j.glyphs.length}),ot=Ue.make(j.glyphs.length),st=er.make({xAvgCharWidth:Math.round(Oe.advanceWidthAvg),usWeightClass:j.tables.os2.usWeightClass,usWidthClass:j.tables.os2.usWidthClass,usFirstCharIndex:k,usLastCharIndex:le,ulUnicodeRange1:be,ulUnicodeRange2:Te,ulUnicodeRange3:_e,ulUnicodeRange4:pe,fsSelection:j.tables.os2.fsSelection,sTypoAscender:Oe.ascender,sTypoDescender:Oe.descender,sTypoLineGap:0,usWinAscent:Oe.yMax,usWinDescent:Math.abs(Oe.yMin),ulCodePageRange1:1,sxHeight:gf(j,"xyvw",{yMax:Math.round(Oe.ascender/2)}).yMax,sCapHeight:gf(j,"HIKLEFJMNTZBDPRAGOQSUVWXY",Oe).yMax,usDefaultChar:j.hasChar(" ")?32:0,usBreakChar:j.hasChar(" ")?32:0}),ft=ze.make(j.glyphs),Tt=J.make(j.glyphs),Ot=j.getEnglishName("fontFamily"),xt=j.getEnglishName("fontSubfamily"),kt=Ot+" "+xt,Bt=(Bt=j.getEnglishName("postScriptName"))||Ot.replace(/\s/g,"")+"-"+xt,$t={};for(Ce in j.names)$t[Ce]=j.names[Ce];$t.uniqueID||($t.uniqueID={en:j.getEnglishName("manufacturer")+":"+kt}),$t.postScriptName||($t.postScriptName={en:Bt}),$t.preferredFamily||($t.preferredFamily=j.names.fontFamily),$t.preferredSubfamily||($t.preferredSubfamily=j.names.fontSubfamily);var fr=[],dr=Cr.make($t,fr),fr=0<fr.length?Ze.make(fr):void 0,Xr=df.make(),kt=Fs.make(j.glyphs,{version:j.getEnglishName("version"),fullName:kt,familyName:Ot,weightName:xt,postScriptName:Bt,unitsPerEm:j.unitsPerEm,fontBBox:[0,Oe.yMin,Oe.ascender,Oe.advanceWidthMax]}),Ot=j.metas&&0<Object.keys(j.metas).length?hf.make(j.metas):void 0,xt=[nt,ct,ot,st,dr,Tt,Xr,kt,ft];fr&&xt.push(fr),j.tables.gsub&&xt.push(ff.make(j.tables.gsub)),Ot&&xt.push(Ot);for(var hr=Kl((Bt=yf(xt)).encode()),At=Bt.fields,ar=!1,Pt=0;Pt<At.length;Pt+=1)if(At[Pt].name==="head table"){At[Pt].value.checkSumAdjustment=2981146554-hr,ar=!0;break}if(ar)return Bt;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:Kl};function Ql(j,k){for(var O=0,R=j.length-1;O<=R;){var U=O+R>>>1,q=j[U].tag;if(q===k)return U;q<k?O=1+U:R=U-1}return-O-1}function vf(j,k){for(var O=0,R=j.length-1;O<=R;){var U=O+R>>>1,q=j[U];if(q===k)return U;q<k?O=1+U:R=U-1}return-O-1}function bf(j,k){for(var O=0,R=j.length-1;O<=R;){var U,q=O+R>>>1,Y=(U=j[q]).start;if(Y===k)return U;Y<k?O=1+q:R=q-1}if(0<O)return k>(U=j[O-1]).end?0:U}function Ja(j,k){this.font=j,this.tableName=k}function ei(j){Ja.call(this,j,"gpos")}function un(j){Ja.call(this,j,"gsub")}function xf(j,k,O){for(var R=j.subtables,U=0;U<R.length;U++){var q=R[U];if(q.substFormat===k)return q}if(O)return R.push(O),O}function wf(j){for(var k=new ArrayBuffer(j.length),O=new Uint8Array(k),R=0;R<j.length;++R)O[R]=j[R];return k}function Go(j,k){if(!j)throw k}function jf(j,k,O,R,U){var q=0<(k&R)?(q=j.parseByte(),O+(q=k&U?q:-q)):0<(k&U)?O:O+j.parseShort();return q}function lv(j,k,O){var R,U=new Ee.Parser(k,O);if(j.numberOfContours=U.parseShort(),j._xMin=U.parseShort(),j._yMin=U.parseShort(),j._xMax=U.parseShort(),j._yMax=U.parseShort(),0<j.numberOfContours){for(var q=j.endPointIndices=[],Y=0;Y<j.numberOfContours;Y+=1)q.push(U.parseUShort());j.instructionLength=U.parseUShort(),j.instructions=[];for(var re=0;re<j.instructionLength;re+=1)j.instructions.push(U.parseByte());for(var ue=q[q.length-1]+1,le=[],be=0;be<ue;be+=1)if(R=U.parseByte(),le.push(R),0<(8&R))for(var Te=U.parseByte(),_e=0;_e<Te;_e+=1)le.push(R),be+=1;if(A.argument(le.length===ue,"Bad flags."),0<q.length){var pe,Ie=[];if(0<ue){for(var Pe=0;Pe<ue;Pe+=1)R=le[Pe],(pe={}).onCurve=!!(1&R),pe.lastPointOfContour=0<=q.indexOf(Pe),Ie.push(pe);for(var Ne=0,Ce=0;Ce<ue;Ce+=1)R=le[Ce],(pe=Ie[Ce]).x=jf(U,R,Ne,2,16),Ne=pe.x;for(var Oe=0,nt=0;nt<ue;nt+=1)R=le[nt],(pe=Ie[nt]).y=jf(U,R,Oe,4,32),Oe=pe.y}j.points=Ie}else j.points=[]}else if(j.numberOfContours===0)j.points=[];else{j.isComposite=!0,j.points=[],j.components=[];for(var ct=!0;ct;){le=U.parseUShort();var ot={glyphIndex:U.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&le)?0<(2&le)?(ot.dx=U.parseShort(),ot.dy=U.parseShort()):ot.matchedPoints=[U.parseUShort(),U.parseUShort()]:0<(2&le)?(ot.dx=U.parseChar(),ot.dy=U.parseChar()):ot.matchedPoints=[U.parseByte(),U.parseByte()],0<(8&le)?ot.xScale=ot.yScale=U.parseF2Dot14():0<(64&le)?(ot.xScale=U.parseF2Dot14(),ot.yScale=U.parseF2Dot14()):0<(128&le)&&(ot.xScale=U.parseF2Dot14(),ot.scale01=U.parseF2Dot14(),ot.scale10=U.parseF2Dot14(),ot.yScale=U.parseF2Dot14()),j.components.push(ot),ct=!!(32&le)}if(256&le){j.instructionLength=U.parseUShort(),j.instructions=[];for(var st=0;st<j.instructionLength;st+=1)j.instructions.push(U.parseByte())}}}function Zl(j,k){for(var O=[],R=0;R<j.length;R+=1){var U=j[R],U={x:k.xScale*U.x+k.scale01*U.y+k.dx,y:k.scale10*U.x+k.yScale*U.y+k.dy,onCurve:U.onCurve,lastPointOfContour:U.lastPointOfContour};O.push(U)}return O}function _f(j){var k=new Q;if(j)for(var O=function(Te){for(var _e=[],pe=[],Ie=0;Ie<Te.length;Ie+=1){var Pe=Te[Ie];pe.push(Pe),Pe.lastPointOfContour&&(_e.push(pe),pe=[])}return A.argument(pe.length===0,"There are still points left in the current contour."),_e}(j),R=0;R<O.length;++R){var U,q=O[R],Y=q[q.length-1],re=q[0];Y.onCurve?k.moveTo(Y.x,Y.y):re.onCurve?k.moveTo(re.x,re.y):(U={x:.5*(Y.x+re.x),y:.5*(Y.y+re.y)},k.moveTo(U.x,U.y));for(var ue=0;ue<q.length;++ue){var le,be=Y,Y=re,re=q[(ue+1)%q.length];Y.onCurve?k.lineTo(Y.x,Y.y):(le=re,be.onCurve||(Y.x,be.x,Y.y,be.y),re.onCurve||(le={x:.5*(Y.x+re.x),y:.5*(Y.y+re.y)}),k.quadraticCurveTo(Y.x,Y.y,le.x,le.y))}k.closePath()}return k}function uv(j,k){if(k.isComposite)for(var O=0;O<k.components.length;O+=1){var R=k.components[O],U=j.get(R.glyphIndex);if(U.getPath(),U.points){var q=void 0;if(R.matchedPoints===void 0)q=Zl(U.points,R);else{if(R.matchedPoints[0]>k.points.length-1||R.matchedPoints[1]>U.points.length-1)throw Error("Matched points out of range in "+k.name);var Y=k.points[R.matchedPoints[0]],re=U.points[R.matchedPoints[1]],R={xScale:R.xScale,scale01:R.scale01,scale10:R.scale10,yScale:R.yScale,dx:0,dy:0},re=Zl([re],R)[0];R.dx=Y.x-re.x,R.dy=Y.y-re.y,q=Zl(U.points,R)}k.points=k.points.concat(q)}}return _f(k.points)}(ei.prototype=Ja.prototype={searchTag:Ql,binSearch:vf,getTable:function(j){var k=this.font.tables[this.tableName];return k=!k&&j?this.font.tables[this.tableName]=this.createDefaultTable():k},getScriptNames:function(){var j=this.getTable();return j?j.scripts.map(function(k){return k.tag}):[]},getDefaultScriptName:function(){var j=this.getTable();if(j){for(var k=!1,O=0;O<j.scripts.length;O++){var R=j.scripts[O].tag;if(R==="DFLT")return R;R==="latn"&&(k=!0)}return k?"latn":void 0}},getScriptTable:function(j,k){var O,R=this.getTable(k);if(R)return O=R.scripts,0<=(R=Ql(R.scripts,j=j||"DFLT"))?O[R].script:k?(O.splice(-1-R,0,k={tag:j,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),k.script):void 0},getLangSysTable:function(U,k,O){var R,U=this.getScriptTable(U,O);if(U)return k&&k!=="dflt"&&k!=="DFLT"?0<=(R=Ql(U.langSysRecords,k))?U.langSysRecords[R].langSys:O?(U.langSysRecords.splice(-1-R,0,O={tag:k,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),O.langSys):void 0:U.defaultLangSys},getFeatureTable:function(j,k,O,R){if(j=this.getLangSysTable(j,k,R),j){for(var U,q=j.featureIndexes,Y=this.font.tables[this.tableName].features,re=0;re<q.length;re++)if((U=Y[q[re]]).tag===O)return U.feature;if(R)return k=Y.length,A.assert(k===0||O>=Y[k-1].tag,"Features must be added in alphabetical order."),Y.push(U={tag:O,feature:{params:0,lookupListIndexes:[]}}),q.push(k),U.feature}},getLookupTables:function(q,k,O,R,U){var q=this.getFeatureTable(q,k,O,U),Y=[];if(q){for(var re,ue=q.lookupListIndexes,le=this.font.tables[this.tableName].lookups,be=0;be<ue.length;be++)(re=le[ue[be]]).lookupType===R&&Y.push(re);if(Y.length===0&&U)return k=le.length,le.push(re={lookupType:R,lookupFlag:0,subtables:[],markFilteringSet:void 0}),ue.push(k),[re]}return Y},getGlyphClass:function(j,k){switch(j.format){case 1:return j.startGlyph<=k&&k<j.startGlyph+j.classes.length?j.classes[k-j.startGlyph]:0;case 2:var O=bf(j.ranges,k);return O?O.classId:0}},getCoverageIndex:function(j,k){switch(j.format){case 1:var O=vf(j.glyphs,k);return 0<=O?O:-1;case 2:return O=bf(j.ranges,k),O?O.index+k-O.start:-1}},expandCoverage:function(j){if(j.format===1)return j.glyphs;for(var k=[],O=j.ranges,R=0;R<O.length;R++)for(var U=O[R],q=U.start,Y=U.end,re=q;re<=Y;re++)k.push(re);return k}}).init=function(){var j=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(j)},ei.prototype.getKerningValue=function(j,k,O){for(var R=0;R<j.length;R++)for(var U=j[R].subtables,q=0;q<U.length;q++){var Y=U[q],re=this.getCoverageIndex(Y.coverage,k);if(!(re<0))switch(Y.posFormat){case 1:for(var ue=Y.pairSets[re],le=0;le<ue.length;le++){var be=ue[le];if(be.secondGlyph===O)return be.value1&&be.value1.xAdvance||0}break;case 2:var _e=this.getGlyphClass(Y.classDef1,k),Te=this.getGlyphClass(Y.classDef2,O),_e=Y.classRecords[_e][Te];return _e.value1&&_e.value1.xAdvance||0}}return 0},ei.prototype.getKerningTables=function(j,k){if(this.font.tables.gpos)return this.getLookupTables(j,k,"kern",2)},(un.prototype=Ja.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},un.prototype.getSingle=function(j,k,O){for(var R=[],U=this.getLookupTables(k,O,j,1),q=0;q<U.length;q++)for(var Y=U[q].subtables,re=0;re<Y.length;re++){var ue=Y[re],le=this.expandCoverage(ue.coverage),be=void 0;if(ue.substFormat===1)for(var Te=ue.deltaGlyphId,be=0;be<le.length;be++){var _e=le[be];R.push({sub:_e,by:_e+Te})}else{var pe=ue.substitute;for(be=0;be<le.length;be++)R.push({sub:le[be],by:pe[be]})}}return R},un.prototype.getAlternates=function(j,k,O){for(var R=[],U=this.getLookupTables(k,O,j,3),q=0;q<U.length;q++)for(var Y=U[q].subtables,re=0;re<Y.length;re++)for(var ue=Y[re],le=this.expandCoverage(ue.coverage),be=ue.alternateSets,Te=0;Te<le.length;Te++)R.push({sub:le[Te],by:be[Te]});return R},un.prototype.getLigatures=function(j,k,O){for(var R=[],U=this.getLookupTables(k,O,j,4),q=0;q<U.length;q++)for(var Y=U[q].subtables,re=0;re<Y.length;re++)for(var ue=Y[re],le=this.expandCoverage(ue.coverage),be=ue.ligatureSets,Te=0;Te<le.length;Te++)for(var _e=le[Te],pe=be[Te],Ie=0;Ie<pe.length;Ie++){var Pe=pe[Ie];R.push({sub:[_e].concat(Pe.components),by:Pe.ligGlyph})}return R},un.prototype.addSingle=function(j,k,O,R){O=xf(this.getLookupTables(O,R,j,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),A.assert(O.coverage.format===1,"Ligature: unable to modify coverage table format "+O.coverage.format),R=k.sub,j=this.binSearch(O.coverage.glyphs,R),j<0&&(O.coverage.glyphs.splice(j=-1-j,0,R),O.substitute.splice(j,0,0)),O.substitute[j]=k.by},un.prototype.addAlternate=function(j,k,O,R){O=xf(this.getLookupTables(O,R,j,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),A.assert(O.coverage.format===1,"Ligature: unable to modify coverage table format "+O.coverage.format),R=k.sub,j=this.binSearch(O.coverage.glyphs,R),j<0&&(O.coverage.glyphs.splice(j=-1-j,0,R),O.alternateSets.splice(j,0,0)),O.alternateSets[j]=k.by},un.prototype.addLigature=function(q,ue,re,U){var re=this.getLookupTables(re,U,q,4,!0)[0],U=re.subtables[0],q=(U||(re.subtables[0]=U={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),A.assert(U.coverage.format===1,"Ligature: unable to modify coverage table format "+U.coverage.format),ue.sub[0]),Y=ue.sub.slice(1),re={ligGlyph:ue.by,components:Y},ue=this.binSearch(U.coverage.glyphs,q);if(0<=ue){for(var le=U.ligatureSets[ue],be=0;be<le.length;be++)if(function(Te,_e){var pe=Te.length;if(pe===_e.length){for(var Ie=0;Ie<pe;Ie++)if(Te[Ie]!==_e[Ie])return;return 1}}(le[be].components,Y))return;le.push(re)}else U.coverage.glyphs.splice(ue=-1-ue,0,q),U.ligatureSets.splice(ue,0,[re])},un.prototype.getFeature=function(j,k,O){if(/ss\d\d/.test(j))return this.getSingle(j,k,O);switch(j){case"aalt":case"salt":return this.getSingle(j,k,O).concat(this.getAlternates(j,k,O));case"dlig":case"liga":case"rlig":return this.getLigatures(j,k,O)}},un.prototype.add=function(j,k,O,R){if(/ss\d\d/.test(j))return this.addSingle(j,k,O,R);switch(j){case"aalt":case"salt":return typeof k.by=="number"?this.addSingle(j,k,O,R):this.addAlternate(j,k,O,R);case"dlig":case"liga":case"rlig":return this.addLigature(j,k,O,R)}};var Sf={getPath:_f,parse:function(j,k,O,R){for(var U=new tt.GlyphSet(R),q=0;q<O.length-1;q+=1){var Y=O[q];Y!==O[q+1]?U.push(q,tt.ttfGlyphLoader(R,q,lv,j,k+Y,uv)):U.push(q,tt.glyphLoader(R,q))}return U}};function kf(j){this.font=j,this.getCommands=function(k){return Sf.getPath(k).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function cv(j){return j}function Ef(j){return Math.sign(j)*Math.round(Math.abs(j))}function dv(j){return Math.sign(j)*Math.round(Math.abs(2*j))/2}function fv(j){return Math.sign(j)*(Math.round(Math.abs(j)+.5)-.5)}function hv(j){return Math.sign(j)*Math.ceil(Math.abs(j))}function pv(j){return Math.sign(j)*Math.floor(Math.abs(j))}function Tf(j){var k=this.srPeriod,O=this.srPhase,R=1;return j<0&&(j=-j,R=-1),j+=this.srThreshold-O,j=Math.trunc(j/k)*k,(j+=O)<0?O*R:j*R}var cn={x:1,y:0,axis:"x",distance:function(j,k,O,R){return(O?j.xo:j.x)-(R?k.xo:k.x)},interpolate:function(j,k,O,R){var U,q,Y,re,ue,le,be;if(!R||R===this)return U=j.xo-k.xo,q=j.xo-O.xo,ue=k.x-k.xo,le=O.x-O.xo,(be=(Y=Math.abs(U))+(re=Math.abs(q)))===0?void(j.x=j.xo+(ue+le)/2):void(j.x=j.xo+(ue*re+le*Y)/be);U=R.distance(j,k,!0,!0),q=R.distance(j,O,!0,!0),ue=R.distance(k,k,!1,!0),le=R.distance(O,O,!1,!0),(be=(Y=Math.abs(U))+(re=Math.abs(q)))===0?cn.setRelative(j,j,(ue+le)/2,R,!0):cn.setRelative(j,j,(ue*re+le*Y)/be,R,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(j,k,O,R,U){var q,Y;R&&R!==this?(q=U?k.xo:k.x,Y=U?k.yo:k.y,q+=O*R.x,Y+=O*R.y,j.x=q+(j.y-Y)/R.normalSlope):j.x=(U?k.xo:k.x)+O},slope:0,touch:function(j){j.xTouched=!0},touched:function(j){return j.xTouched},untouch:function(j){j.xTouched=!1}},xn={x:0,y:1,axis:"y",distance:function(j,k,O,R){return(O?j.yo:j.y)-(R?k.yo:k.y)},interpolate:function(j,k,O,R){var U,q,Y,re,ue,le,be;if(!R||R===this)return U=j.yo-k.yo,q=j.yo-O.yo,ue=k.y-k.yo,le=O.y-O.yo,(be=(Y=Math.abs(U))+(re=Math.abs(q)))===0?void(j.y=j.yo+(ue+le)/2):void(j.y=j.yo+(ue*re+le*Y)/be);U=R.distance(j,k,!0,!0),q=R.distance(j,O,!0,!0),ue=R.distance(k,k,!1,!0),le=R.distance(O,O,!1,!0),(be=(Y=Math.abs(U))+(re=Math.abs(q)))===0?xn.setRelative(j,j,(ue+le)/2,R,!0):xn.setRelative(j,j,(ue*re+le*Y)/be,R,!0)},normalSlope:0,setRelative:function(j,k,O,R,U){var q,Y;R&&R!==this?(q=U?k.xo:k.x,Y=U?k.yo:k.y,q+=O*R.x,Y+=O*R.y,j.y=Y+R.normalSlope*(j.x-q)):j.y=(U?k.yo:k.y)+O},slope:Number.POSITIVE_INFINITY,touch:function(j){j.yTouched=!0},touched:function(j){return j.yTouched},untouch:function(j){j.yTouched=!1}};function Bs(j,k){this.x=j,this.y=k,this.axis=void 0,this.slope=k/j,this.normalSlope=-j/k,Object.freeze(this)}function zs(j,k){var O=Math.sqrt(j*j+k*k);return k/=O,(j/=O)===1&&k===0?cn:j===0&&k===1?xn:new Bs(j,k)}function wn(j,k,O,R){this.x=this.xo=Math.round(64*j)/64,this.y=this.yo=Math.round(64*k)/64,this.lastPointOfContour=O,this.onCurve=R,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(cn),Object.freeze(xn),Bs.prototype.distance=function(j,k,O,R){return this.x*cn.distance(j,k,O,R)+this.y*xn.distance(j,k,O,R)},Bs.prototype.interpolate=function(j,U,q,R){var Y=R.distance(j,U,!0,!0),re=R.distance(j,q,!0,!0),U=R.distance(U,U,!1,!0),q=R.distance(q,q,!1,!0),Y=Math.abs(Y),re=Math.abs(re),ue=Y+re;ue===0?this.setRelative(j,j,(U+q)/2,R,!0):this.setRelative(j,j,(U*re+q*Y)/ue,R,!0)},Bs.prototype.setRelative=function(j,q,ue,le,re){var Y=re?q.xo:q.x,re=re?q.yo:q.y,q=Y+ue*(le=le||this).x,Y=re+ue*le.y,re=le.normalSlope,ue=this.slope,le=j.x,be=j.y;j.x=(ue*le-re*q+Y-be)/(ue-re),j.y=ue*(j.x-le)+be},Bs.prototype.touch=function(j){j.xTouched=!0,j.yTouched=!0},wn.prototype.nextTouched=function(j){for(var k=this.nextPointOnContour;!j.touched(k)&&k!==this;)k=k.nextPointOnContour;return k},wn.prototype.prevTouched=function(j){for(var k=this.prevPointOnContour;!j.touched(k)&&k!==this;)k=k.prevPointOnContour;return k};var Gs=Object.freeze(new wn(0,0)),mv={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Rn(j,k){switch(this.env=j,this.stack=[],this.prog=k,j){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=cn,this.round=Ef}}function ti(j){for(var k=j.tZone=new Array(j.gZone.length),O=0;O<k.length;O++)k[O]=new wn(0,0)}function Mf(j,k){var O,R=j.prog,U=j.ip,q=1;do if((O=R[++U])===88)q++;else if(O===89)q--;else if(O===64)U+=R[U+1]+1;else if(O===65)U+=2*R[U+1]+1;else if(176<=O&&O<=183)U+=O-176+1;else if(184<=O&&O<=191)U+=2*(O-184+1);else if(k&&q===1&&O===27)break;while(0<q);j.ip=U}function Cf(j,k){h.DEBUG&&console.log(k.step,"SVTCA["+j.axis+"]"),k.fv=k.pv=k.dpv=j}function Of(j,k){h.DEBUG&&console.log(k.step,"SPVTCA["+j.axis+"]"),k.pv=k.dpv=j}function Pf(j,k){h.DEBUG&&console.log(k.step,"SFVTCA["+j.axis+"]"),k.fv=j}function Lf(j,k){var O,U=k.stack,R=U.pop(),U=U.pop(),q=k.z2[R],Y=k.z1[U];h.DEBUG&&console.log("SPVTL["+j+"]",R,U),R=j?(O=q.y-Y.y,Y.x-q.x):(O=Y.x-q.x,Y.y-q.y),k.pv=k.dpv=zs(O,R)}function Nf(j,k){var O,U=k.stack,R=U.pop(),U=U.pop(),q=k.z2[R],Y=k.z1[U];h.DEBUG&&console.log("SFVTL["+j+"]",R,U),R=j?(O=q.y-Y.y,Y.x-q.x):(O=Y.x-q.x,Y.y-q.y),k.fv=zs(O,R)}function Jl(j){h.DEBUG&&console.log(j.step,"POP[]"),j.stack.pop()}function Rf(j,k){var O=k.stack.pop(),R=k.z0[O],U=k.fv,q=k.pv,Y=(h.DEBUG&&console.log(k.step,"MDAP["+j+"]",O),q.distance(R,Gs));j&&(Y=k.round(Y)),U.setRelative(R,Gs,Y,q),U.touch(R),k.rp0=k.rp1=O}function Af(j,k){var O,R,U,q=k.z2,Y=q.length-2;h.DEBUG&&console.log(k.step,"IUP["+j.axis+"]");for(var re=0;re<Y;re++)O=q[re],j.touched(O)||(R=O.prevTouched(j))!==O&&(R===(U=O.nextTouched(j))&&j.setRelative(O,O,j.distance(R,R,!1,!0),j,!0),j.interpolate(O,R,U,j))}function If(j,k){for(var O=k.stack,R=j?k.rp1:k.rp2,U=(j?k.z0:k.z1)[R],q=k.fv,Y=k.pv,re=k.loop,ue=k.z2;re--;){var le=O.pop(),be=ue[le],Te=Y.distance(U,U,!1,!0);q.setRelative(be,be,Te,Y),q.touch(be),h.DEBUG&&console.log(k.step,(1<k.loop?"loop "+(k.loop-re)+": ":"")+"SHP["+(j?"rp1":"rp2")+"]",le)}k.loop=1}function Df(j,k){for(var O=k.stack,Y=j?k.rp1:k.rp2,R=(j?k.z0:k.z1)[Y],U=k.fv,q=k.pv,Y=O.pop(),re=k.z2[k.contours[Y]],ue=re,le=(h.DEBUG&&console.log(k.step,"SHC["+j+"]",Y),q.distance(R,R,!1,!0));ue!==R&&U.setRelative(ue,ue,le,q),(ue=ue.nextPointOnContour)!==re;);}function Ff(j,k){var O,R,re=k.stack,U=j?k.rp1:k.rp2,U=(j?k.z0:k.z1)[U],q=k.fv,Y=k.pv,re=re.pop();switch(h.DEBUG&&console.log(k.step,"SHZ["+j+"]",re),re){case 0:O=k.tZone;break;case 1:O=k.gZone;break;default:throw new Error("Invalid zone")}for(var ue=Y.distance(U,U,!1,!0),le=O.length-2,be=0;be<le;be++)R=O[be],q.setRelative(R,R,ue,Y)}function Uf(j,k){var R=k.stack,O=R.pop()/64,R=R.pop(),U=k.z1[R],q=k.z0[k.rp0],Y=k.fv,re=k.pv;Y.setRelative(U,q,O,re),Y.touch(U),h.DEBUG&&console.log(k.step,"MSIRP["+j+"]",O,R),k.rp1=k.rp0,k.rp2=R,j&&(k.rp0=R)}function Bf(j,k){var O=k.stack,re=O.pop(),O=O.pop(),R=k.z0[O],U=k.fv,q=k.pv,Y=k.cvt[re],re=(h.DEBUG&&console.log(k.step,"MIAP["+j+"]",re,"(",Y,")",O),q.distance(R,Gs));j&&(Math.abs(re-Y)<k.cvCutIn&&(re=Y),re=k.round(re)),U.setRelative(R,Gs,re,q),k.zp0===0&&(R.xo=R.x,R.yo=R.y),U.touch(R),k.rp0=k.rp1=O}function zf(j,k){var O=k.stack,R=O.pop(),U=k.z2[R];h.DEBUG&&console.log(k.step,"GC["+j+"]",R),O.push(64*k.dpv.distance(U,Gs,j,!1))}function Gf(j,k){var R=k.stack,O=R.pop(),R=R.pop(),U=k.z1[O],q=k.z0[R],q=k.dpv.distance(q,U,j,j);h.DEBUG&&console.log(k.step,"MD["+j+"]",O,R,"->",q),k.stack.push(Math.round(64*q))}function eu(j,k){var O=k.stack,R=O.pop(),U=k.fv,q=k.pv,Y=k.ppem,re=k.deltaBase+16*(j-1),ue=k.deltaShift,le=k.z0;h.DEBUG&&console.log(k.step,"DELTAP["+j+"]",R,O);for(var be=0;be<R;be++){var Te=O.pop(),_e=O.pop();re+((240&_e)>>4)===Y&&(0<=(_e=(15&_e)-8)&&_e++,h.DEBUG&&console.log(k.step,"DELTAPFIX",Te,"by",_e*ue),Te=le[Te],U.setRelative(Te,Te,_e*ue,q))}}function ri(j,k){var O=k.stack,R=O.pop();h.DEBUG&&console.log(k.step,"ROUND[]"),O.push(64*k.round(R/64))}function tu(j,k){var O=k.stack,R=O.pop(),U=k.ppem,q=k.deltaBase+16*(j-1),Y=k.deltaShift;h.DEBUG&&console.log(k.step,"DELTAC["+j+"]",R,O);for(var re=0;re<R;re++){var ue=O.pop(),le=O.pop();q+((240&le)>>4)===U&&(0<=(le=(15&le)-8)&&le++,le=le*Y,h.DEBUG&&console.log(k.step,"DELTACFIX",ue,"by",le),k.cvt[ue]+=le)}}function Vf(j,k){var O,U=k.stack,R=U.pop(),U=U.pop(),q=k.z2[R],Y=k.z1[U];h.DEBUG&&console.log(k.step,"SDPVTL["+j+"]",R,U),R=j?(O=q.y-Y.y,Y.x-q.x):(O=Y.x-q.x,Y.y-q.y),k.dpv=zs(O,R)}function An(j,k){var O=k.stack,R=k.prog,U=k.ip;h.DEBUG&&console.log(k.step,"PUSHB["+j+"]");for(var q=0;q<j;q++)O.push(R[++U]);k.ip=U}function In(j,k){var O=k.ip,R=k.prog,U=k.stack;h.DEBUG&&console.log(k.ip,"PUSHW["+j+"]");for(var q=0;q<j;q++){var Y=R[++O]<<8|R[++O];32768&Y&&(Y=-(1+(65535^Y))),U.push(Y)}k.ip=O}function rt(j,k,O,R,U,q){var Y,re,le=q.stack,ue=j&&le.pop(),le=le.pop(),be=q.rp0,be=q.z0[be],Te=q.z1[le],_e=q.minDis,pe=q.fv,Ie=q.dpv,Pe=Y=Ie.distance(Te,be,!0,!0),Ne=0<=Pe?1:-1;Pe=Math.abs(Pe),j&&(re=q.cvt[ue],R&&Math.abs(Pe-re)<q.cvCutIn&&(Pe=re)),O&&Pe<_e&&(Pe=_e),R&&(Pe=q.round(Pe)),pe.setRelative(Te,be,Ne*Pe,Ie),pe.touch(Te),h.DEBUG&&console.log(q.step,(j?"MIRP[":"MDRP[")+(k?"M":"m")+(O?">":"_")+(R?"R":"_")+(U===0?"Gr":U===1?"Bl":U===2?"Wh":"")+"]",j?ue+"("+q.cvt[ue]+","+re+")":"",le,"(d =",Y,"->",Ne*Pe,")"),q.rp1=q.rp0,q.rp2=le,k&&(q.rp0=le)}kf.prototype.exec=function(j,k){if(typeof k!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var O=this.font,R=this._prepState;if(!R||R.ppem!==k){var U=this._fpgmState;if(!U){Rn.prototype=mv,(U=this._fpgmState=new Rn("fpgm",O.tables.fpgm)).funcs=[],U.font=O,h.DEBUG&&(console.log("---EXEC FPGM---"),U.step=-1);try{Vo(U)}catch(le){return console.log("Hinting error in FPGM:"+le),void(this._errorState=3)}}Rn.prototype=U,(R=this._prepState=new Rn("prep",O.tables.prep)).ppem=k;var q=O.tables.cvt;if(q)for(var Y=R.cvt=new Array(q.length),re=k/O.unitsPerEm,ue=0;ue<q.length;ue++)Y[ue]=q[ue]*re;else R.cvt=[];h.DEBUG&&(console.log("---EXEC PREP---"),R.step=-1);try{Vo(R)}catch(le){this._errorState<2&&console.log("Hinting error in PREP:"+le),this._errorState=2}}if(!(1<this._errorState))try{return yv(j,R)}catch(le){this._errorState<1&&(console.log("Hinting error:"+le),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var yv=function(j,k){var O=k.ppem/k.font.unitsPerEm,R=O,U=j.components;if(Rn.prototype=k,U){for(var q=k.font,Y=[],re=[],ue=0;ue<U.length;ue++){var le=U[ue],be=q.glyphs.get(le.glyphIndex),Te=new Rn("glyf",be.instructions);h.DEBUG&&(console.log("---EXEC COMP "+ue+"---"),Te.step=-1),Hf(be,Te,O,R);for(var _e=Math.round(le.dx*O),pe=Math.round(le.dy*R),Ie=Te.gZone,Pe=Te.contours,Ne=0;Ne<Ie.length;Ne++){var Ce=Ie[Ne];Ce.xTouched=Ce.yTouched=!1,Ce.xo=Ce.x=Ce.x+_e,Ce.yo=Ce.y=Ce.y+pe}var Oe=Y.length;Y.push.apply(Y,Ie);for(var nt=0;nt<Pe.length;nt++)re.push(Pe[nt]+Oe)}j.instructions&&!Te.inhibitGridFit&&((Te=new Rn("glyf",j.instructions)).gZone=Te.z0=Te.z1=Te.z2=Y,Te.contours=re,Y.push(new wn(0,0),new wn(Math.round(j.advanceWidth*O),0)),h.DEBUG&&(console.log("---EXEC COMPOSITE---"),Te.step=-1),Vo(Te),Y.length-=2)}else Te=new Rn("glyf",j.instructions),h.DEBUG&&(console.log("---EXEC GLYPH---"),Te.step=-1),Hf(j,Te,O,R),Y=Te.gZone;return Y},Hf=function(j,k,O,R){for(var U,q,Y,re=j.points||[],ue=re.length,le=k.gZone=k.z0=k.z1=k.z2=[],be=k.contours=[],Te=0;Te<ue;Te++)U=re[Te],le[Te]=new wn(U.x*O,U.y*R,U.lastPointOfContour,U.onCurve);for(var _e=0;_e<ue;_e++)U=le[_e],q||(q=U,be.push(_e)),U.lastPointOfContour?((U.nextPointOnContour=q).prevPointOnContour=U,q=void 0):(Y=le[_e+1],(U.nextPointOnContour=Y).prevPointOnContour=U);if(!k.inhibitGridFit){if(h.DEBUG){console.log("PROCESSING GLYPH",k.stack);for(var pe=0;pe<ue;pe++)console.log(pe,le[pe].x,le[pe].y)}if(le.push(new wn(0,0),new wn(Math.round(j.advanceWidth*O),0)),Vo(k),le.length-=2,h.DEBUG){console.log("FINISHED GLYPH",k.stack);for(var Ie=0;Ie<ue;Ie++)console.log(Ie,le[Ie].x,le[Ie].y)}}},Vo=function(j){var k=j.prog;if(k){var O,R=k.length;for(j.ip=0;j.ip<R;j.ip++){if(h.DEBUG&&j.step++,!(O=gv[k[j.ip]]))throw new Error("unknown instruction: 0x"+Number(k[j.ip]).toString(16));O(j)}}},gv=[Cf.bind(void 0,xn),Cf.bind(void 0,cn),Of.bind(void 0,xn),Of.bind(void 0,cn),Pf.bind(void 0,xn),Pf.bind(void 0,cn),Lf.bind(void 0,0),Lf.bind(void 0,1),Nf.bind(void 0,0),Nf.bind(void 0,1),function(j){var k=(O=j.stack).pop(),O=O.pop();h.DEBUG&&console.log(j.step,"SPVFS[]",k,O),j.pv=j.dpv=zs(O,k)},function(j){var k=(O=j.stack).pop(),O=O.pop();h.DEBUG&&console.log(j.step,"SPVFS[]",k,O),j.fv=zs(O,k)},function(j){var k=j.stack,O=j.pv;h.DEBUG&&console.log(j.step,"GPV[]"),k.push(16384*O.x),k.push(16384*O.y)},function(j){var k=j.stack,O=j.fv;h.DEBUG&&console.log(j.step,"GFV[]"),k.push(16384*O.x),k.push(16384*O.y)},function(j){j.fv=j.pv,h.DEBUG&&console.log(j.step,"SFVTPV[]")},function(k){var O=(Y=k.stack).pop(),R=Y.pop(),U=Y.pop(),q=Y.pop(),Y=Y.pop(),ue=k.z0,be=k.z1,re=ue[O],ue=ue[R],le=be[U],be=be[q],k=k.z2[Y],O=(h.DEBUG&&console.log("ISECT[], ",O,R,U,q,Y),re.x),R=re.y,U=ue.x,q=ue.y,Y=le.x,re=le.y,ue=be.x,le=be.y,be=(O-U)*(re-le)-(R-q)*(Y-ue),Te=O*q-R*U,_e=Y*le-re*ue;k.x=(Te*(Y-ue)-_e*(O-U))/be,k.y=(Te*(re-le)-_e*(R-q))/be},function(j){j.rp0=j.stack.pop(),h.DEBUG&&console.log(j.step,"SRP0[]",j.rp0)},function(j){j.rp1=j.stack.pop(),h.DEBUG&&console.log(j.step,"SRP1[]",j.rp1)},function(j){j.rp2=j.stack.pop(),h.DEBUG&&console.log(j.step,"SRP2[]",j.rp2)},function(j){var k=j.stack.pop();switch(h.DEBUG&&console.log(j.step,"SZP0[]",k),j.zp0=k){case 0:j.tZone||ti(j),j.z0=j.tZone;break;case 1:j.z0=j.gZone;break;default:throw new Error("Invalid zone pointer")}},function(j){var k=j.stack.pop();switch(h.DEBUG&&console.log(j.step,"SZP1[]",k),j.zp1=k){case 0:j.tZone||ti(j),j.z1=j.tZone;break;case 1:j.z1=j.gZone;break;default:throw new Error("Invalid zone pointer")}},function(j){var k=j.stack.pop();switch(h.DEBUG&&console.log(j.step,"SZP2[]",k),j.zp2=k){case 0:j.tZone||ti(j),j.z2=j.tZone;break;case 1:j.z2=j.gZone;break;default:throw new Error("Invalid zone pointer")}},function(j){var k=j.stack.pop();switch(h.DEBUG&&console.log(j.step,"SZPS[]",k),j.zp0=j.zp1=j.zp2=k){case 0:j.tZone||ti(j),j.z0=j.z1=j.z2=j.tZone;break;case 1:j.z0=j.z1=j.z2=j.gZone;break;default:throw new Error("Invalid zone pointer")}},function(j){j.loop=j.stack.pop(),h.DEBUG&&console.log(j.step,"SLOOP[]",j.loop)},function(j){h.DEBUG&&console.log(j.step,"RTG[]"),j.round=Ef},function(j){h.DEBUG&&console.log(j.step,"RTHG[]"),j.round=fv},function(j){var k=j.stack.pop();h.DEBUG&&console.log(j.step,"SMD[]",k),j.minDis=k/64},function(j){h.DEBUG&&console.log(j.step,"ELSE[]"),Mf(j,!1)},function(j){var k=j.stack.pop();h.DEBUG&&console.log(j.step,"JMPR[]",k),j.ip+=k-1},function(j){var k=j.stack.pop();h.DEBUG&&console.log(j.step,"SCVTCI[]",k),j.cvCutIn=k/64},void 0,void 0,function(j){var k=j.stack;h.DEBUG&&console.log(j.step,"DUP[]"),k.push(k[k.length-1])},Jl,function(j){h.DEBUG&&console.log(j.step,"CLEAR[]"),j.stack.length=0},function(j){var k=j.stack,O=k.pop(),R=k.pop();h.DEBUG&&console.log(j.step,"SWAP[]"),k.push(O),k.push(R)},function(j){var k=j.stack;h.DEBUG&&console.log(j.step,"DEPTH[]"),k.push(k.length)},function(j){var k=j.stack,O=k.pop();h.DEBUG&&console.log(j.step,"CINDEX[]",O),k.push(k[k.length-O])},function(j){var k=j.stack,O=k.pop();h.DEBUG&&console.log(j.step,"MINDEX[]",O),k.push(k.splice(k.length-O,1)[0])},void 0,void 0,void 0,function(j){var k=(R=j.stack).pop(),O=R.pop(),R=(h.DEBUG&&console.log(j.step,"LOOPCALL[]",k,O),j.ip),U=j.prog;j.prog=j.funcs[k];for(var q=0;q<O;q++)Vo(j),h.DEBUG&&console.log(++j.step,q+1<O?"next loopcall":"done loopcall",q);j.ip=R,j.prog=U},function(j){var k=j.stack.pop(),O=(h.DEBUG&&console.log(j.step,"CALL[]",k),j.ip),R=j.prog;j.prog=j.funcs[k],Vo(j),j.ip=O,j.prog=R,h.DEBUG&&console.log(++j.step,"returning from",k)},function(j){if(j.env!=="fpgm")throw new Error("FDEF not allowed here");var R=j.stack,k=j.prog,O=j.ip,R=R.pop(),U=O;for(h.DEBUG&&console.log(j.step,"FDEF[]",R);k[++O]!==45;);j.ip=O,j.funcs[R]=k.slice(U+1,O)},void 0,Rf.bind(void 0,0),Rf.bind(void 0,1),Af.bind(void 0,xn),Af.bind(void 0,cn),If.bind(void 0,0),If.bind(void 0,1),Df.bind(void 0,0),Df.bind(void 0,1),Ff.bind(void 0,0),Ff.bind(void 0,1),function(j){for(var k=j.stack,O=j.loop,R=j.fv,U=k.pop()/64,q=j.z2;O--;){var Y=k.pop(),re=q[Y];h.DEBUG&&console.log(j.step,(1<j.loop?"loop "+(j.loop-O)+": ":"")+"SHPIX[]",Y,U),R.setRelative(re,re,U),R.touch(re)}j.loop=1},function(j){for(var k=j.stack,O=j.rp1,R=j.rp2,U=j.loop,q=j.z0[O],Y=j.z1[R],re=j.fv,ue=j.dpv,le=j.z2;U--;){var be=k.pop(),Te=le[be];h.DEBUG&&console.log(j.step,(1<j.loop?"loop "+(j.loop-U)+": ":"")+"IP[]",be,O,"<->",R),re.interpolate(Te,q,Y,ue),re.touch(Te)}j.loop=1},Uf.bind(void 0,0),Uf.bind(void 0,1),function(j){for(var k=j.stack,O=j.rp0,R=j.z0[O],U=j.loop,q=j.fv,Y=j.pv,re=j.z1;U--;){var ue=k.pop(),le=re[ue];h.DEBUG&&console.log(j.step,(1<j.loop?"loop "+(j.loop-U)+": ":"")+"ALIGNRP[]",ue),q.setRelative(le,R,0,Y),q.touch(le)}j.loop=1},function(j){h.DEBUG&&console.log(j.step,"RTDG[]"),j.round=dv},Bf.bind(void 0,0),Bf.bind(void 0,1),function(j){var k=j.prog,O=j.ip,R=j.stack,U=k[++O];h.DEBUG&&console.log(j.step,"NPUSHB[]",U);for(var q=0;q<U;q++)R.push(k[++O]);j.ip=O},function(j){var k=j.ip,O=j.prog,R=j.stack,U=O[++k];h.DEBUG&&console.log(j.step,"NPUSHW[]",U);for(var q=0;q<U;q++){var Y=O[++k]<<8|O[++k];32768&Y&&(Y=-(1+(65535^Y))),R.push(Y)}j.ip=k},function(j){var R=j.stack,k=(k=j.store)||(j.store=[]),O=R.pop(),R=R.pop();h.DEBUG&&console.log(j.step,"WS",O,R),k[R]=O},function(U){var k=U.stack,O=U.store,R=k.pop(),U=(h.DEBUG&&console.log(U.step,"RS",R),O&&O[R]||0);k.push(U)},function(j){var k=(O=j.stack).pop(),O=O.pop();h.DEBUG&&console.log(j.step,"WCVTP",k,O),j.cvt[O]=k/64},function(j){var k=j.stack,O=k.pop();h.DEBUG&&console.log(j.step,"RCVT",O),k.push(64*j.cvt[O])},zf.bind(void 0,0),zf.bind(void 0,1),void 0,Gf.bind(void 0,0),Gf.bind(void 0,1),function(j){h.DEBUG&&console.log(j.step,"MPPEM[]"),j.stack.push(j.ppem)},void 0,function(j){h.DEBUG&&console.log(j.step,"FLIPON[]"),j.autoFlip=!0},void 0,void 0,function(j){var k=j.stack,O=k.pop(),R=k.pop();h.DEBUG&&console.log(j.step,"LT[]",O,R),k.push(R<O?1:0)},function(j){var k=j.stack,O=k.pop(),R=k.pop();h.DEBUG&&console.log(j.step,"LTEQ[]",O,R),k.push(R<=O?1:0)},function(j){var k=j.stack,O=k.pop(),R=k.pop();h.DEBUG&&console.log(j.step,"GT[]",O,R),k.push(O<R?1:0)},function(j){var k=j.stack,O=k.pop(),R=k.pop();h.DEBUG&&console.log(j.step,"GTEQ[]",O,R),k.push(O<=R?1:0)},function(j){var k=j.stack,O=k.pop(),R=k.pop();h.DEBUG&&console.log(j.step,"EQ[]",O,R),k.push(O===R?1:0)},function(j){var k=j.stack,O=k.pop(),R=k.pop();h.DEBUG&&console.log(j.step,"NEQ[]",O,R),k.push(O!==R?1:0)},function(j){var k=j.stack,O=k.pop();h.DEBUG&&console.log(j.step,"ODD[]",O),k.push(Math.trunc(O)%2?1:0)},function(j){var k=j.stack,O=k.pop();h.DEBUG&&console.log(j.step,"EVEN[]",O),k.push(Math.trunc(O)%2?0:1)},function(j){var k=j.stack.pop();h.DEBUG&&console.log(j.step,"IF[]",k),k||(Mf(j,!0),h.DEBUG&&console.log(j.step,"EIF[]"))},function(j){h.DEBUG&&console.log(j.step,"EIF[]")},function(j){var k=j.stack,O=k.pop(),R=k.pop();h.DEBUG&&console.log(j.step,"AND[]",O,R),k.push(O&&R?1:0)},function(j){var k=j.stack,O=k.pop(),R=k.pop();h.DEBUG&&console.log(j.step,"OR[]",O,R),k.push(O||R?1:0)},function(j){var k=j.stack,O=k.pop();h.DEBUG&&console.log(j.step,"NOT[]",O),k.push(O?0:1)},eu.bind(void 0,1),function(j){var k=j.stack.pop();h.DEBUG&&console.log(j.step,"SDB[]",k),j.deltaBase=k},function(j){var k=j.stack.pop();h.DEBUG&&console.log(j.step,"SDS[]",k),j.deltaShift=Math.pow(.5,k)},function(j){var k=j.stack,O=k.pop(),R=k.pop();h.DEBUG&&console.log(j.step,"ADD[]",O,R),k.push(R+O)},function(j){var k=j.stack,O=k.pop(),R=k.pop();h.DEBUG&&console.log(j.step,"SUB[]",O,R),k.push(R-O)},function(j){var k=j.stack,O=k.pop(),R=k.pop();h.DEBUG&&console.log(j.step,"DIV[]",O,R),k.push(64*R/O)},function(j){var k=j.stack,O=k.pop(),R=k.pop();h.DEBUG&&console.log(j.step,"MUL[]",O,R),k.push(R*O/64)},function(j){var k=j.stack,O=k.pop();h.DEBUG&&console.log(j.step,"ABS[]",O),k.push(Math.abs(O))},function(j){var k=j.stack,O=k.pop();h.DEBUG&&console.log(j.step,"NEG[]",O),k.push(-O)},function(j){var k=j.stack,O=k.pop();h.DEBUG&&console.log(j.step,"FLOOR[]",O),k.push(64*Math.floor(O/64))},function(j){var k=j.stack,O=k.pop();h.DEBUG&&console.log(j.step,"CEILING[]",O),k.push(64*Math.ceil(O/64))},ri.bind(void 0,0),ri.bind(void 0,1),ri.bind(void 0,2),ri.bind(void 0,3),void 0,void 0,void 0,void 0,function(j){var k=(O=j.stack).pop(),O=O.pop();h.DEBUG&&console.log(j.step,"WCVTF[]",k,O),j.cvt[O]=k*j.ppem/j.font.unitsPerEm},eu.bind(void 0,2),eu.bind(void 0,3),tu.bind(void 0,1),tu.bind(void 0,2),tu.bind(void 0,3),function(j){var k,O=j.stack.pop();switch(h.DEBUG&&console.log(j.step,"SROUND[]",O),j.round=Tf,192&O){case 0:k=.5;break;case 64:k=1;break;case 128:k=2;break;default:throw new Error("invalid SROUND value")}switch(j.srPeriod=k,48&O){case 0:j.srPhase=0;break;case 16:j.srPhase=.25*k;break;case 32:j.srPhase=.5*k;break;case 48:j.srPhase=.75*k;break;default:throw new Error("invalid SROUND value")}j.srThreshold=(O&=15)===0?0:(O/8-.5)*k},function(j){var k,O=j.stack.pop();switch(h.DEBUG&&console.log(j.step,"S45ROUND[]",O),j.round=Tf,192&O){case 0:k=Math.sqrt(2)/2;break;case 64:k=Math.sqrt(2);break;case 128:k=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(j.srPeriod=k,48&O){case 0:j.srPhase=0;break;case 16:j.srPhase=.25*k;break;case 32:j.srPhase=.5*k;break;case 48:j.srPhase=.75*k;break;default:throw new Error("invalid S45ROUND value")}j.srThreshold=(O&=15)===0?0:(O/8-.5)*k},void 0,void 0,function(j){h.DEBUG&&console.log(j.step,"ROFF[]"),j.round=cv},void 0,function(j){h.DEBUG&&console.log(j.step,"RUTG[]"),j.round=hv},function(j){h.DEBUG&&console.log(j.step,"RDTG[]"),j.round=pv},Jl,Jl,void 0,void 0,void 0,void 0,void 0,function(j){var k=j.stack.pop();h.DEBUG&&console.log(j.step,"SCANCTRL[]",k)},Vf.bind(void 0,0),Vf.bind(void 0,1),function(j){var k=j.stack,O=k.pop(),R=0;h.DEBUG&&console.log(j.step,"GETINFO[]",O),1&O&&(R=35),32&O&&(R|=4096),k.push(R)},void 0,function(j){var k=j.stack,O=k.pop(),R=k.pop(),U=k.pop();h.DEBUG&&console.log(j.step,"ROLL[]"),k.push(R),k.push(O),k.push(U)},function(j){var k=j.stack,O=k.pop(),R=k.pop();h.DEBUG&&console.log(j.step,"MAX[]",O,R),k.push(Math.max(R,O))},function(j){var k=j.stack,O=k.pop(),R=k.pop();h.DEBUG&&console.log(j.step,"MIN[]",O,R),k.push(Math.min(R,O))},function(j){var k=j.stack.pop();h.DEBUG&&console.log(j.step,"SCANTYPE[]",k)},function(j){var k=j.stack.pop(),O=j.stack.pop();switch(h.DEBUG&&console.log(j.step,"INSTCTRL[]",k,O),k){case 1:return void(j.inhibitGridFit=!!O);case 2:return void(j.ignoreCvt=!!O);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,An.bind(void 0,1),An.bind(void 0,2),An.bind(void 0,3),An.bind(void 0,4),An.bind(void 0,5),An.bind(void 0,6),An.bind(void 0,7),An.bind(void 0,8),In.bind(void 0,1),In.bind(void 0,2),In.bind(void 0,3),In.bind(void 0,4),In.bind(void 0,5),In.bind(void 0,6),In.bind(void 0,7),In.bind(void 0,8),rt.bind(void 0,0,0,0,0,0),rt.bind(void 0,0,0,0,0,1),rt.bind(void 0,0,0,0,0,2),rt.bind(void 0,0,0,0,0,3),rt.bind(void 0,0,0,0,1,0),rt.bind(void 0,0,0,0,1,1),rt.bind(void 0,0,0,0,1,2),rt.bind(void 0,0,0,0,1,3),rt.bind(void 0,0,0,1,0,0),rt.bind(void 0,0,0,1,0,1),rt.bind(void 0,0,0,1,0,2),rt.bind(void 0,0,0,1,0,3),rt.bind(void 0,0,0,1,1,0),rt.bind(void 0,0,0,1,1,1),rt.bind(void 0,0,0,1,1,2),rt.bind(void 0,0,0,1,1,3),rt.bind(void 0,0,1,0,0,0),rt.bind(void 0,0,1,0,0,1),rt.bind(void 0,0,1,0,0,2),rt.bind(void 0,0,1,0,0,3),rt.bind(void 0,0,1,0,1,0),rt.bind(void 0,0,1,0,1,1),rt.bind(void 0,0,1,0,1,2),rt.bind(void 0,0,1,0,1,3),rt.bind(void 0,0,1,1,0,0),rt.bind(void 0,0,1,1,0,1),rt.bind(void 0,0,1,1,0,2),rt.bind(void 0,0,1,1,0,3),rt.bind(void 0,0,1,1,1,0),rt.bind(void 0,0,1,1,1,1),rt.bind(void 0,0,1,1,1,2),rt.bind(void 0,0,1,1,1,3),rt.bind(void 0,1,0,0,0,0),rt.bind(void 0,1,0,0,0,1),rt.bind(void 0,1,0,0,0,2),rt.bind(void 0,1,0,0,0,3),rt.bind(void 0,1,0,0,1,0),rt.bind(void 0,1,0,0,1,1),rt.bind(void 0,1,0,0,1,2),rt.bind(void 0,1,0,0,1,3),rt.bind(void 0,1,0,1,0,0),rt.bind(void 0,1,0,1,0,1),rt.bind(void 0,1,0,1,0,2),rt.bind(void 0,1,0,1,0,3),rt.bind(void 0,1,0,1,1,0),rt.bind(void 0,1,0,1,1,1),rt.bind(void 0,1,0,1,1,2),rt.bind(void 0,1,0,1,1,3),rt.bind(void 0,1,1,0,0,0),rt.bind(void 0,1,1,0,0,1),rt.bind(void 0,1,1,0,0,2),rt.bind(void 0,1,1,0,0,3),rt.bind(void 0,1,1,0,1,0),rt.bind(void 0,1,1,0,1,1),rt.bind(void 0,1,1,0,1,2),rt.bind(void 0,1,1,0,1,3),rt.bind(void 0,1,1,1,0,0),rt.bind(void 0,1,1,1,0,1),rt.bind(void 0,1,1,1,0,2),rt.bind(void 0,1,1,1,0,3),rt.bind(void 0,1,1,1,1,0),rt.bind(void 0,1,1,1,1,1),rt.bind(void 0,1,1,1,1,2),rt.bind(void 0,1,1,1,1,3)],vv=Array.from||function(j){return j.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function St(j){(j=j||{}).empty||(Go(j.familyName,"When creating a new Font object, familyName is required."),Go(j.styleName,"When creating a new Font object, styleName is required."),Go(j.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Go(j.ascender,"When creating a new Font object, ascender is required."),Go(j.descender,"When creating a new Font object, descender is required."),Go(j.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:j.familyName||" "},fontSubfamily:{en:j.styleName||" "},fullName:{en:j.fullName||j.familyName+" "+j.styleName},postScriptName:{en:j.postScriptName||(j.familyName+j.styleName).replace(/\s/g,"")},designer:{en:j.designer||" "},designerURL:{en:j.designerURL||" "},manufacturer:{en:j.manufacturer||" "},manufacturerURL:{en:j.manufacturerURL||" "},license:{en:j.license||" "},licenseURL:{en:j.licenseURL||" "},version:{en:j.version||"Version 0.1"},description:{en:j.description||" "},copyright:{en:j.copyright||" "},trademark:{en:j.trademark||" "}},this.unitsPerEm=j.unitsPerEm||1e3,this.ascender=j.ascender,this.descender=j.descender,this.createdTimestamp=j.createdTimestamp,this.tables={os2:{usWeightClass:j.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:j.widthClass||this.usWidthClasses.MEDIUM,fsSelection:j.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new tt.GlyphSet(this,j.glyphs||[]),this.encoding=new Se(this),this.position=new ei(this),this.substitution=new un(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new kf(this):void 0)}})}function Wf(j,k){var O,R=JSON.stringify(j),U=256;for(O in k){var q=parseInt(O);if(q&&!(q<256)){if(JSON.stringify(k[O])===R)return q;U<=q&&(U=q+1)}}return k[U]=j,U}St.prototype.hasChar=function(j){return this.encoding.charToGlyphIndex(j)!==null},St.prototype.charToGlyphIndex=function(j){return this.encoding.charToGlyphIndex(j)},St.prototype.charToGlyph=function(j){return j=this.charToGlyphIndex(j),this.glyphs.get(j)||this.glyphs.get(0)},St.prototype.stringToGlyphs=function(j,k){k=k||this.defaultRenderOptions;for(var O=vv(j),R=[],U=0;U<O.length;U+=1){var q=O[U];R.push(this.charToGlyphIndex(q))}var Y=R.length;if(k.features){var j=k.script||this.substitution.getDefaultScriptName(),re=[];k.features.liga&&(re=re.concat(this.substitution.getFeature("liga",j,k.language))),k.features.rlig&&(re=re.concat(this.substitution.getFeature("rlig",j,k.language)));for(var ue=0;ue<Y;ue+=1)for(var le=0;le<re.length;le++){for(var be=re[le],Te=be.sub,_e=Te.length,pe=0;pe<_e&&Te[pe]===R[ue+pe];)pe++;pe===_e&&(R.splice(ue,_e,be.by),Y=Y-_e+1)}}for(var Ie=new Array(Y),Pe=this.glyphs.get(0),Ne=0;Ne<Y;Ne+=1)Ie[Ne]=this.glyphs.get(R[Ne])||Pe;return Ie},St.prototype.nameToGlyphIndex=function(j){return this.glyphNames.nameToGlyphIndex(j)},St.prototype.nameToGlyph=function(j){return j=this.nameToGlyphIndex(j),this.glyphs.get(j)||this.glyphs.get(0)},St.prototype.glyphIndexToName=function(j){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(j):""},St.prototype.getKerningValue=function(j,k){j=j.index||j,k=k.index||k;var O=this.position.defaultKerningTables;return O?this.position.getKerningValue(O,j,k):this.kerningPairs[j+","+k]||0},St.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},St.prototype.forEachGlyph=function(j,k,O,R,U,q){k=k!==void 0?k:0,O=O!==void 0?O:0,U=U||this.defaultRenderOptions;var Y,re=1/this.unitsPerEm*(R=R!==void 0?R:72),ue=this.stringToGlyphs(j,U);U.kerning&&(j=U.script||this.position.getDefaultScriptName(),Y=this.position.getKerningTables(j,U.language));for(var le=0;le<ue.length;le+=1){var be=ue[le];q.call(this,be,k,O,R,U),be.advanceWidth&&(k+=be.advanceWidth*re),U.kerning&&le<ue.length-1&&(k+=(Y?this.position.getKerningValue(Y,be.index,ue[le+1].index):this.getKerningValue(be,ue[le+1]))*re),U.letterSpacing?k+=U.letterSpacing*R:U.tracking&&(k+=U.tracking/1e3*R)}return k},St.prototype.getPath=function(j,k,O,R,U){var q=new Q;return this.forEachGlyph(j,k,O,R,U,function(Y,re,ue,le){Y=Y.getPath(re,ue,le,U,this),q.extend(Y)}),q},St.prototype.getPaths=function(j,k,O,R,U){var q=[];return this.forEachGlyph(j,k,O,R,U,function(Y,re,ue,le){Y=Y.getPath(re,ue,le,U,this),q.push(Y)}),q},St.prototype.getAdvanceWidth=function(j,k,O){return this.forEachGlyph(j,0,0,k,O,function(){})},St.prototype.draw=function(j,k,O,R,U,q){this.getPath(k,O,R,U,q).draw(j)},St.prototype.drawPoints=function(j,k,O,R,U,q){this.forEachGlyph(k,O,R,U,q,function(Y,re,ue,le){Y.drawPoints(j,re,ue,le)})},St.prototype.drawMetrics=function(j,k,O,R,U,q){this.forEachGlyph(k,O,R,U,q,function(Y,re,ue,le){Y.drawMetrics(j,re,ue,le)})},St.prototype.getEnglishName=function(j){if(j=this.names[j],j)return j.en},St.prototype.validate=function(){var j=this;function k(O){O=j.getEnglishName(O),O&&O.trim().length}k("fontFamily"),k("weightName"),k("manufacturer"),k("copyright"),k("version"),this.unitsPerEm},St.prototype.toTables=function(){return iv.fontToTable(this)},St.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},St.prototype.toArrayBuffer=function(){for(var j=this.toTables().encode(),k=new ArrayBuffer(j.length),O=new Uint8Array(k),R=0;R<j.length;R++)O[R]=j[R];return k},St.prototype.download=function(j){var k=this.getEnglishName("fontFamily"),O=this.getEnglishName("fontSubfamily"),R=(j=j||k.replace(/\s/g,"")+"-"+O+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,R.byteLength,function(U){U.root.getFile(j,{create:!0},function(q){q.createWriter(function(Y){var re=new DataView(R),re=new Blob([re],{type:"font/opentype"});Y.write(re),Y.addEventListener("writeend",function(){location.href=q.toURL()},!1)})})},function(U){throw new Error(U.name+": "+U.message)})):(k=t("fs"),O=function(U){for(var q=new a(U.byteLength),Y=new Uint8Array(U),re=0;re<q.length;++re)q[re]=Y[re];return q}(R),k.writeFileSync(j,O))},St.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},St.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},St.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var bv={make:function(j,k){var O=new Me.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:j.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:j.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*j.axes.length}]);O.offsetToData=O.sizeOf();for(var R,U,q,Y=0;Y<j.axes.length;Y++)O.fields=O.fields.concat((R=Y,U=j.axes[Y],q=k,q=Wf(U.name,k),[{name:"tag_"+R,type:"TAG",value:U.tag},{name:"minValue_"+R,type:"FIXED",value:U.minValue<<16},{name:"defaultValue_"+R,type:"FIXED",value:U.defaultValue<<16},{name:"maxValue_"+R,type:"FIXED",value:U.maxValue<<16},{name:"flags_"+R,type:"USHORT",value:0},{name:"nameID_"+R,type:"USHORT",value:q}]));for(var re=0;re<j.instances.length;re++)O.fields=O.fields.concat(function(ue,le,be,Te){for(var _e=[{name:"nameID_"+ue,type:"USHORT",value:Wf(le.name,Te)},{name:"flags_"+ue,type:"USHORT",value:0}],pe=0;pe<be.length;++pe){var Ie=be[pe].tag;_e.push({name:"axis_"+ue+" "+Ie,type:"FIXED",value:le.coordinates[Ie]<<16})}return _e}(re,j.instances[re],j.axes,k));return O},parse:function(j,k,O){for(var R,U,q,Y,re=new Ee.Parser(j,k),ue=re.parseULong(),le=(A.argument(ue===65536,"Unsupported fvar table version."),re.parseOffset16()),be=(re.skip("uShort",1),re.parseUShort()),Te=re.parseUShort(),_e=re.parseUShort(),pe=re.parseUShort(),Ie=[],Pe=0;Pe<be;Pe++)Ie.push((R=j,U=k+le+Pe*Te,q=O,Y={},R=new Ee.Parser(R,U),Y.tag=R.parseTag(),Y.minValue=R.parseFixed(),Y.defaultValue=R.parseFixed(),Y.maxValue=R.parseFixed(),R.skip("uShort",1),Y.name=q[R.parseUShort()]||{},Y));for(var Ne=[],Ce=k+le+be*Te,Oe=0;Oe<_e;Oe++)Ne.push(function(nt,ct,ot,st){var ft={},Tt=new Ee.Parser(nt,ct);ft.name=st[Tt.parseUShort()]||{},Tt.skip("uShort",1),ft.coordinates={};for(var Bt=0;Bt<ot.length;++Bt)ft.coordinates[ot[Bt].tag]=Tt.parseFixed();return ft}(j,Ce+Oe*pe,Ie,O));return{axes:Ie,instances:Ne}}},Yr=new Array(10);Yr[1]=function(){var j=this.offset+this.relativeOffset,k=this.parseUShort();return k===1?{posFormat:1,coverage:this.parsePointer(je.coverage),value:this.parseValueRecord()}:k===2?{posFormat:2,coverage:this.parsePointer(je.coverage),values:this.parseValueRecordList()}:void A.assert(!1,"0x"+j.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},Yr[2]=function(){var j,k,O,R,q=this.offset+this.relativeOffset,U=this.parseUShort(),q=(A.assert(U===1||U===2,"0x"+q.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(je.coverage)),Y=this.parseUShort(),re=this.parseUShort();return U===1?{posFormat:U,coverage:q,valueFormat1:Y,valueFormat2:re,pairSets:this.parseList(je.pointer(je.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(Y),value2:this.parseValueRecord(re)}})))}:U===2?(j=this.parsePointer(je.classDef),k=this.parsePointer(je.classDef),O=this.parseUShort(),R=this.parseUShort(),{posFormat:U,coverage:q,valueFormat1:Y,valueFormat2:re,classDef1:j,classDef2:k,class1Count:O,class2Count:R,classRecords:this.parseList(O,je.list(R,function(){return{value1:this.parseValueRecord(Y),value2:this.parseValueRecord(re)}}))}):void 0},Yr[3]=function(){return{error:"GPOS Lookup 3 not supported"}},Yr[4]=function(){return{error:"GPOS Lookup 4 not supported"}},Yr[5]=function(){return{error:"GPOS Lookup 5 not supported"}},Yr[6]=function(){return{error:"GPOS Lookup 6 not supported"}},Yr[7]=function(){return{error:"GPOS Lookup 7 not supported"}},Yr[8]=function(){return{error:"GPOS Lookup 8 not supported"}},Yr[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var xv=new Array(10),wv={parse:function(j,k){return k=(j=new je(j,k=k||0)).parseVersion(1),A.argument(k===1||k===1.1,"Unsupported GPOS table version "+k),k===1?{version:k,scripts:j.parseScriptList(),features:j.parseFeatureList(),lookups:j.parseLookupList(Yr)}:{version:k,scripts:j.parseScriptList(),features:j.parseFeatureList(),lookups:j.parseLookupList(Yr),variations:j.parseFeatureVariationsList()}},make:function(j){return new Me.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Me.ScriptList(j.scripts)},{name:"features",type:"TABLE",value:new Me.FeatureList(j.features)},{name:"lookups",type:"TABLE",value:new Me.LookupList(j.lookups,xv)}])}},jv={parse:function(j,k){if(j=new Ee.Parser(j,k),(k=j.parseUShort())===0){var O=j,R={},Te=(O.skip("uShort"),O.parseUShort()),U=(A.argument(Te===0,"Unsupported kern sub-table version."),O.skip("uShort",2),O.parseUShort());O.skip("uShort",3);for(var q=0;q<U;q+=1){var Y=O.parseUShort(),re=O.parseUShort(),ue=O.parseShort();R[Y+","+re]=ue}return R}if(k!==1)throw new Error("Unsupported kern table version ("+k+").");var le=j,be={},Te=(le.skip("uShort"),1<le.parseULong()&&console.warn("Only the first kern subtable is supported."),le.skip("uLong"),255&le.parseUShort());if(le.skip("uShort"),Te==0){var _e=le.parseUShort();le.skip("uShort",3);for(var pe=0;pe<_e;pe+=1){var Ie=le.parseUShort(),Pe=le.parseUShort(),Ne=le.parseShort();be[Ie+","+Pe]=Ne}}return be}},_v={parse:function(j,k,O,R){for(var U=new Ee.Parser(j,k),q=R?U.parseUShort:U.parseULong,Y=[],re=0;re<O+1;re+=1){var ue=q.call(U);R&&(ue*=2),Y.push(ue)}return Y}};function Sv(j,k){t("fs").readFile(j,function(O,R){if(O)return k(O.message);k(null,wf(R))})}function kv(j,k){var O=new XMLHttpRequest;O.open("get",j,!0),O.responseType="arraybuffer",O.onload=function(){return O.response?k(null,O.response):k("Font could not be loaded: "+O.statusText)},O.onerror=function(){k("Font could not be loaded")},O.send()}function qf(j,k){for(var O=[],R=12,U=0;U<k;U+=1){var q=Ee.getTag(j,R),Y=Ee.getULong(j,R+4),re=Ee.getULong(j,R+8),ue=Ee.getULong(j,R+12);O.push({tag:q,checksum:Y,offset:re,length:ue,compression:!1}),R+=16}return O}function qt(O,k){if(k.compression!=="WOFF")return{data:O,offset:k.offset};var O=new Uint8Array(O.buffer,k.offset+2,k.compressedLength-2),R=new Uint8Array(k.length);if(G(O,R),R.byteLength!==k.length)throw new Error("Decompression error: "+k.tag+" decompressed length doesn't match recorded length");return{data:new DataView(R.buffer,0),offset:0}}function ru(Oe){var k,O,R,U,q,Y,re,ue,le,be,Te,_e,pe,Ie,Pe=new St({empty:!0}),Ne=new DataView(Oe,0),Ce=[],Oe=Ee.getTag(Ne,0);if(Oe==="\0\0\0"||Oe==="true"||Oe==="typ1")Pe.outlinesFormat="truetype",Ce=qf(Ne,R=Ee.getUShort(Ne,4));else if(Oe==="OTTO")Pe.outlinesFormat="cff",Ce=qf(Ne,R=Ee.getUShort(Ne,4));else{if(Oe!=="wOFF")throw new Error("Unsupported OpenType signature "+Oe);var nt=Ee.getTag(Ne,4);if(nt==="\0\0\0")Pe.outlinesFormat="truetype";else{if(nt!=="OTTO")throw new Error("Unsupported OpenType flavor "+Oe);Pe.outlinesFormat="cff"}Ce=function(Ot,xt){for(var hr=[],At=44,ar=0;ar<xt;ar+=1){var Pt=Ee.getTag(Ot,At),tr=Ee.getULong(Ot,At+4),Vs=Ee.getULong(Ot,At+8),Ho=Ee.getULong(Ot,At+12),$f=void 0,$f=Vs<Ho&&"WOFF";hr.push({tag:Pt,offset:tr,compression:$f,compressedLength:Vs,length:Ho}),At+=20}return hr}(Ne,R=Ee.getUShort(Ne,12))}for(var ct=0;ct<R;ct+=1){var ot=Ce[ct],st=void 0;switch(ot.tag){case"cmap":st=qt(Ne,ot),Pe.tables.cmap=J.parse(st.data,st.offset),Pe.encoding=new Le(Pe.tables.cmap);break;case"cvt ":st=qt(Ne,ot),Ie=new Ee.Parser(st.data,st.offset),Pe.tables.cvt=Ie.parseShortList(ot.length/2);break;case"fvar":q=ot;break;case"fpgm":st=qt(Ne,ot),Ie=new Ee.Parser(st.data,st.offset),Pe.tables.fpgm=Ie.parseByteList(ot.length);break;case"head":st=qt(Ne,ot),Pe.tables.head=Us.parse(st.data,st.offset),Pe.unitsPerEm=Pe.tables.head.unitsPerEm,k=Pe.tables.head.indexToLocFormat;break;case"hhea":st=qt(Ne,ot),Pe.tables.hhea=me.parse(st.data,st.offset),Pe.ascender=Pe.tables.hhea.ascender,Pe.descender=Pe.tables.hhea.descender,Pe.numberOfHMetrics=Pe.tables.hhea.numberOfHMetrics;break;case"hmtx":le=ot;break;case"ltag":st=qt(Ne,ot),O=Ze.parse(st.data,st.offset);break;case"maxp":st=qt(Ne,ot),Pe.tables.maxp=Ue.parse(st.data,st.offset),Pe.numGlyphs=Pe.tables.maxp.numGlyphs;break;case"name":_e=ot;break;case"OS/2":st=qt(Ne,ot),Pe.tables.os2=er.parse(st.data,st.offset);break;case"post":st=qt(Ne,ot),Pe.tables.post=df.parse(st.data,st.offset),Pe.glyphNames=new Ve(Pe.tables.post);break;case"prep":st=qt(Ne,ot),Ie=new Ee.Parser(st.data,st.offset),Pe.tables.prep=Ie.parseByteList(ot.length);break;case"glyf":Y=ot;break;case"loca":Te=ot;break;case"CFF ":U=ot;break;case"kern":be=ot;break;case"GPOS":re=ot;break;case"GSUB":ue=ot;break;case"meta":pe=ot}}if(nt=qt(Ne,_e),Pe.tables.name=Cr.parse(nt.data,nt.offset,O),Pe.names=Pe.tables.name,Y&&Te)Oe=k===0,nt=qt(Ne,Te),nt=_v.parse(nt.data,nt.offset,Pe.numGlyphs,Oe),Oe=qt(Ne,Y),Pe.glyphs=Sf.parse(Oe.data,Oe.offset,nt,Pe);else{if(!U)throw new Error("Font doesn't contain TrueType or CFF outlines.");Oe=qt(Ne,U),Fs.parse(Oe.data,Oe.offset,Pe)}for(var nt=qt(Ne,le),ft=(ze.parse(nt.data,nt.offset,Pe.numberOfHMetrics,Pe.numGlyphs,Pe.glyphs),Pe),Tt=ft.tables.cmap.glyphIndexMap,Bt=Object.keys(Tt),$t=0;$t<Bt.length;$t+=1){var dr,fr=Bt[$t],Xr=Tt[fr];(dr=ft.glyphs.get(Xr)).addUnicode(parseInt(fr))}for(var kt=0;kt<ft.glyphs.length;kt+=1)dr=ft.glyphs.get(kt),ft.cffEncoding?ft.isCIDFont?dr.name="gid"+kt:dr.name=ft.cffEncoding.charset[kt]:ft.glyphNames.names&&(dr.name=ft.glyphNames.glyphIndexToName(kt));return be?(Oe=qt(Ne,be),Pe.kerningPairs=jv.parse(Oe.data,Oe.offset)):Pe.kerningPairs={},re&&(nt=qt(Ne,re),Pe.tables.gpos=wv.parse(nt.data,nt.offset),Pe.position.init()),ue&&(Oe=qt(Ne,ue),Pe.tables.gsub=ff.parse(Oe.data,Oe.offset)),q&&(nt=qt(Ne,q),Pe.tables.fvar=bv.parse(nt.data,nt.offset,Pe.names)),pe&&(Oe=qt(Ne,pe),Pe.tables.meta=hf.parse(Oe.data,Oe.offset),Pe.metas=Pe.tables.meta),Pe}h.Font=St,h.Glyph=Ke,h.Path=Q,h.BoundingBox=X,h._parse=Ee,h.parse=ru,h.load=function(j,k){(typeof window>"u"?Sv:kv)(j,function(O,R){if(O)return k(O);var U;try{U=ru(R)}catch(q){return k(q,null)}return k(null,U)})},h.loadSync=function(j){return ru(wf(t("fs").readFileSync(j)))},Object.defineProperty(h,"__esModule",{value:!0})},s(typeof u=="object"&&m!==void 0?u:p.opentype={})}).call(this,t("buffer").Buffer)},{buffer:4,fs:2}],258:[function(t,m,u){(function(a){function p(b,v){for(var i=0,d=b.length-1;0<=d;d--){var f=b[d];f==="."?b.splice(d,1):f===".."?(b.splice(d,1),i++):i&&(b.splice(d,1),i--)}if(v)for(;i--;)b.unshift("..");return b}function s(b,v){if(b.filter)return b.filter(v);for(var i=[],d=0;d<b.length;d++)v(b[d],d,b)&&i.push(b[d]);return i}u.resolve=function(){for(var b="",v=!1,i=arguments.length-1;-1<=i&&!v;i--){var d=0<=i?arguments[i]:a.cwd();if(typeof d!="string")throw new TypeError("Arguments to path.resolve must be strings");d&&(b=d+"/"+b,v=d.charAt(0)==="/")}return(v?"/":"")+(b=p(s(b.split("/"),function(f){return!!f}),!v).join("/"))||"."},u.normalize=function(b){var v=u.isAbsolute(b),i=h(b,-1)==="/";return(b=(b=p(s(b.split("/"),function(d){return!!d}),!v).join("/"))||v?b:".")&&i&&(b+="/"),(v?"/":"")+b},u.isAbsolute=function(b){return b.charAt(0)==="/"},u.join=function(){var b=Array.prototype.slice.call(arguments,0);return u.normalize(s(b,function(v,i){if(typeof v!="string")throw new TypeError("Arguments to path.join must be strings");return v}).join("/"))},u.relative=function(b,v){function i(w){for(var x=0;x<w.length&&w[x]==="";x++);for(var _=w.length-1;0<=_&&w[_]==="";_--);return _<x?[]:w.slice(x,_-x+1)}b=u.resolve(b).substr(1),v=u.resolve(v).substr(1);for(var d=i(b.split("/")),f=i(v.split("/")),y=Math.min(d.length,f.length),g=y,c=0;c<y;c++)if(d[c]!==f[c]){g=c;break}for(var l=[],c=g;c<d.length;c++)l.push("..");return(l=l.concat(f.slice(g))).join("/")},u.sep="/",u.delimiter=":",u.dirname=function(b){if(typeof b!="string"&&(b+=""),b.length===0)return".";for(var v=b.charCodeAt(0)===47,i=-1,d=!0,f=b.length-1;1<=f;--f)if(b.charCodeAt(f)===47){if(!d){i=f;break}}else d=!1;return i===-1?v?"/":".":v&&i===1?"/":b.slice(0,i)},u.basename=function(b,v){return b=function(i){typeof i!="string"&&(i+="");for(var d=0,f=-1,y=!0,g=i.length-1;0<=g;--g)if(i.charCodeAt(g)===47){if(!y){d=g+1;break}}else f===-1&&(y=!1,f=g+1);return f===-1?"":i.slice(d,f)}(b),b=v&&b.substr(-1*v.length)===v?b.substr(0,b.length-v.length):b},u.extname=function(b){typeof b!="string"&&(b+="");for(var v=-1,i=0,d=-1,f=!0,y=0,g=b.length-1;0<=g;--g){var c=b.charCodeAt(g);if(c===47){if(f)continue;i=g+1;break}d===-1&&(f=!1,d=g+1),c===46?v===-1?v=g:y!==1&&(y=1):v!==-1&&(y=-1)}return v===-1||d===-1||y===0||y===1&&v===d-1&&v===i+1?"":b.slice(v,d)};var h="ab".substr(-1)==="b"?function(b,v,i){return b.substr(v,i)}:function(b,v,i){return v<0&&(v=b.length+v),b.substr(v,i)}}).call(this,t("_process"))},{_process:259}],259:[function(t,s,u){var a,p,s=s.exports={};function h(){throw new Error("setTimeout has not been defined")}function b(){throw new Error("clearTimeout has not been defined")}try{a=typeof setTimeout=="function"?setTimeout:h}catch{a=h}try{p=typeof clearTimeout=="function"?clearTimeout:b}catch{p=b}function v(x){if(a===setTimeout)return setTimeout(x,0);if((a===h||!a)&&setTimeout)return(a=setTimeout)(x,0);try{return a(x,0)}catch{try{return a.call(null,x,0)}catch{return a.call(this,x,0)}}}var i,d=[],f=!1,y=-1;function g(){f&&i&&(f=!1,i.length?d=i.concat(d):y=-1,d.length&&c())}function c(){if(!f){for(var x=v(g),_=(f=!0,d.length);_;){for(i=d,d=[];++y<_;)i&&i[y].run();y=-1,_=d.length}i=null,f=!1,function(T){if(p===clearTimeout)return clearTimeout(T);if((p===b||!p)&&clearTimeout)return(p=clearTimeout)(T);try{p(T)}catch{try{return p.call(null,T)}catch{return p.call(this,T)}}}(x)}}function l(x,_){this.fun=x,this.array=_}function w(){}s.nextTick=function(x){var _=new Array(arguments.length-1);if(1<arguments.length)for(var T=1;T<arguments.length;T++)_[T-1]=arguments[T];d.push(new l(x,_)),d.length!==1||f||v(c)},l.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=w,s.addListener=w,s.once=w,s.off=w,s.removeListener=w,s.removeAllListeners=w,s.emit=w,s.prependListener=w,s.prependOnceListener=w,s.listeners=function(x){return[]},s.binding=function(x){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(x){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],260:[function(t,m,u){m=function(a){var p,s=Object.prototype,h=s.hasOwnProperty,E=typeof Symbol=="function"?Symbol:{},b=E.iterator||"@@iterator",v=E.asyncIterator||"@@asyncIterator",i=E.toStringTag||"@@toStringTag";function d(W,z,V,$){var Q,se,M,A,z=z&&z.prototype instanceof x?z:x,z=Object.create(z.prototype),$=new F($||[]);return z._invoke=(Q=W,se=V,M=$,A=y,function(Z,te){if(A===c)throw new Error("Generator is already running");if(A===l){if(Z==="throw")throw te;return B()}for(M.method=Z,M.arg=te;;){var ie=M.delegate;if(ie&&(ie=function he(oe,ce){var fe=oe.iterator[ce.method];if(fe===p){if(ce.delegate=null,ce.method==="throw"){if(oe.iterator.return&&(ce.method="return",ce.arg=p,he(oe,ce),ce.method==="throw"))return w;ce.method="throw",ce.arg=new TypeError("The iterator does not provide a 'throw' method")}return w}if(fe=f(fe,oe.iterator,ce.arg),fe.type==="throw")return ce.method="throw",ce.arg=fe.arg,ce.delegate=null,w;if(fe=fe.arg,!fe)return ce.method="throw",ce.arg=new TypeError("iterator result is not an object"),ce.delegate=null,w;{if(!fe.done)return fe;ce[oe.resultName]=fe.value,ce.next=oe.nextLoc,ce.method!=="return"&&(ce.method="next",ce.arg=p)}return ce.delegate=null,w}(ie,M),ie)){if(ie===w)continue;return ie}if(M.method==="next")M.sent=M._sent=M.arg;else if(M.method==="throw"){if(A===y)throw A=l,M.arg;M.dispatchException(M.arg)}else M.method==="return"&&M.abrupt("return",M.arg);if(A=c,ie=f(Q,se,M),ie.type==="normal"){if(A=M.done?l:g,ie.arg!==w)return{value:ie.arg,done:M.done}}else ie.type==="throw"&&(A=l,M.method="throw",M.arg=ie.arg)}}),z}function f(W,G,V){try{return{type:"normal",arg:W.call(G,V)}}catch(X){return{type:"throw",arg:X}}}a.wrap=d;var y="suspendedStart",g="suspendedYield",c="executing",l="completed",w={};function x(){}function _(){}function T(){}var E={},S=(E[b]=function(){return this},Object.getPrototypeOf),S=S&&S(S(I([]))),P=(S&&S!==s&&h.call(S,b)&&(E=S),T.prototype=x.prototype=Object.create(E));function N(W){["next","throw","return"].forEach(function(G){W[G]=function(V){return this._invoke(G,V)}})}function C(W){var G;this._invoke=function(V,X){function Q(){return new Promise(function(se,M){(function A(he,$,Z,te){var ie,he=f(W[he],W,$);if(he.type!=="throw")return($=(ie=he.arg).value)&&typeof $=="object"&&h.call($,"__await")?Promise.resolve($.__await).then(function(oe){A("next",oe,Z,te)},function(oe){A("throw",oe,Z,te)}):Promise.resolve($).then(function(oe){ie.value=oe,Z(ie)},function(oe){return A("throw",oe,Z,te)});te(he.arg)})(V,X,se,M)})}return G=G?G.then(Q,Q):Q()}}function D(W){var G={tryLoc:W[0]};1 in W&&(G.catchLoc=W[1]),2 in W&&(G.finallyLoc=W[2],G.afterLoc=W[3]),this.tryEntries.push(G)}function L(W){var G=W.completion||{};G.type="normal",delete G.arg,W.completion=G}function F(W){this.tryEntries=[{tryLoc:"root"}],W.forEach(D,this),this.reset(!0)}function I(W){if(W){var G,V=W[b];if(V)return V.call(W);if(typeof W.next=="function")return W;if(!isNaN(W.length))return G=-1,(V=function X(){for(;++G<W.length;)if(h.call(W,G))return X.value=W[G],X.done=!1,X;return X.value=p,X.done=!0,X}).next=V}return{next:B}}function B(){return{value:p,done:!0}}return(_.prototype=P.constructor=T).constructor=_,T[i]=_.displayName="GeneratorFunction",a.isGeneratorFunction=function(W){return W=typeof W=="function"&&W.constructor,!!W&&(W===_||(W.displayName||W.name)==="GeneratorFunction")},a.mark=function(W){return Object.setPrototypeOf?Object.setPrototypeOf(W,T):(W.__proto__=T,i in W||(W[i]="GeneratorFunction")),W.prototype=Object.create(P),W},a.awrap=function(W){return{__await:W}},N(C.prototype),C.prototype[v]=function(){return this},a.AsyncIterator=C,a.async=function(W,G,V,X){var Q=new C(d(W,G,V,X));return a.isGeneratorFunction(G)?Q:Q.next().then(function(se){return se.done?se.value:Q.next()})},N(P),P[i]="Generator",P[b]=function(){return this},P.toString=function(){return"[object Generator]"},a.keys=function(W){var G,V=[];for(G in W)V.push(G);return V.reverse(),function X(){for(;V.length;){var Q=V.pop();if(Q in W)return X.value=Q,X.done=!1,X}return X.done=!0,X}},a.values=I,F.prototype={constructor:F,reset:function(W){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(L),!W)for(var G in this)G.charAt(0)==="t"&&h.call(this,G)&&!isNaN(+G.slice(1))&&(this[G]=p)},stop:function(){this.done=!0;var W=this.tryEntries[0].completion;if(W.type==="throw")throw W.arg;return this.rval},dispatchException:function(W){if(this.done)throw W;var G=this;function V(z,$){return se.type="throw",se.arg=W,G.next=z,$&&(G.method="next",G.arg=p),!!$}for(var X=this.tryEntries.length-1;0<=X;--X){var Q=this.tryEntries[X],se=Q.completion;if(Q.tryLoc==="root")return V("end");if(Q.tryLoc<=this.prev){var M=h.call(Q,"catchLoc"),A=h.call(Q,"finallyLoc");if(M&&A){if(this.prev<Q.catchLoc)return V(Q.catchLoc,!0);if(this.prev<Q.finallyLoc)return V(Q.finallyLoc)}else if(M){if(this.prev<Q.catchLoc)return V(Q.catchLoc,!0)}else{if(!A)throw new Error("try statement without catch or finally");if(this.prev<Q.finallyLoc)return V(Q.finallyLoc)}}}},abrupt:function(W,G){for(var V=this.tryEntries.length-1;0<=V;--V){var X=this.tryEntries[V];if(X.tryLoc<=this.prev&&h.call(X,"finallyLoc")&&this.prev<X.finallyLoc){var Q=X;break}}var se=(Q=Q&&(W==="break"||W==="continue")&&Q.tryLoc<=G&&G<=Q.finallyLoc?null:Q)?Q.completion:{};return se.type=W,se.arg=G,Q?(this.method="next",this.next=Q.finallyLoc,w):this.complete(se)},complete:function(W,G){if(W.type==="throw")throw W.arg;return W.type==="break"||W.type==="continue"?this.next=W.arg:W.type==="return"?(this.rval=this.arg=W.arg,this.method="return",this.next="end"):W.type==="normal"&&G&&(this.next=G),w},finish:function(W){for(var G=this.tryEntries.length-1;0<=G;--G){var V=this.tryEntries[G];if(V.finallyLoc===W)return this.complete(V.completion,V.afterLoc),L(V),w}},catch:function(W){for(var G=this.tryEntries.length-1;0<=G;--G){var V,X,Q=this.tryEntries[G];if(Q.tryLoc===W)return(V=Q.completion).type==="throw"&&(X=V.arg,L(Q)),X}throw new Error("illegal catch attempt")},delegateYield:function(W,G,V){return this.delegate={iterator:I(W),resultName:G,nextLoc:V},this.method==="next"&&(this.arg=p),w}},a}(typeof m=="object"?m.exports:{});try{regeneratorRuntime=m}catch{Function("r","regeneratorRuntime = r")(m)}},{}],261:[function(t,m,u){(function(a){var p,s,h,b,v,i,d,f,y,g;function c(L){if(typeof L!="string"&&(L=String(L)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(L))throw new TypeError("Invalid character in header field name");return L.toLowerCase()}function l(L){return L=typeof L!="string"?String(L):L}function w(L){var F={next:function(){var I=L.shift();return{done:I===void 0,value:I}}};return s&&(F[Symbol.iterator]=function(){return F}),F}function x(L){this.map={},L instanceof x?L.forEach(function(F,I){this.append(I,F)},this):Array.isArray(L)?L.forEach(function(F){this.append(F[0],F[1])},this):L&&Object.getOwnPropertyNames(L).forEach(function(F){this.append(F,L[F])},this)}function _(L){if(L.bodyUsed)return Promise.reject(new TypeError("Already read"));L.bodyUsed=!0}function T(L){return new Promise(function(F,I){L.onload=function(){F(L.result)},L.onerror=function(){I(L.error)}})}function E(L){var F=new FileReader,I=T(F);return F.readAsArrayBuffer(L),I}function S(L){var F;return L.slice?L.slice(0):((F=new Uint8Array(L.byteLength)).set(new Uint8Array(L)),F.buffer)}function P(){return this.bodyUsed=!1,this._initBody=function(L){if(this._bodyInit=L)if(typeof L=="string")this._bodyText=L;else if(h&&Blob.prototype.isPrototypeOf(L))this._bodyBlob=L;else if(b&&FormData.prototype.isPrototypeOf(L))this._bodyFormData=L;else if(p&&URLSearchParams.prototype.isPrototypeOf(L))this._bodyText=L.toString();else if(v&&h&&d(L))this._bodyArrayBuffer=S(L.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v||!ArrayBuffer.prototype.isPrototypeOf(L)&&!f(L))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=S(L)}else this._bodyText="";this.headers.get("content-type")||(typeof L=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):p&&URLSearchParams.prototype.isPrototypeOf(L)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h&&(this.blob=function(){var L=_(this);if(L)return L;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?_(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(E)}),this.text=function(){var L,F,I=_(this);if(I)return I;if(this._bodyBlob)return I=this._bodyBlob,L=new FileReader,F=T(L),L.readAsText(I),F;if(this._bodyArrayBuffer)return Promise.resolve(function(B){for(var W=new Uint8Array(B),G=new Array(W.length),V=0;V<W.length;V++)G[V]=String.fromCharCode(W[V]);return G.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},b&&(this.formData=function(){return this.text().then(C)}),this.json=function(){return this.text().then(JSON.parse)},this}function N(L,F){var I,B=(F=F||{}).body;if(L instanceof N){if(L.bodyUsed)throw new TypeError("Already read");this.url=L.url,this.credentials=L.credentials,F.headers||(this.headers=new x(L.headers)),this.method=L.method,this.mode=L.mode,B||L._bodyInit==null||(B=L._bodyInit,L.bodyUsed=!0)}else this.url=String(L);if(this.credentials=F.credentials||this.credentials||"omit",!F.headers&&this.headers||(this.headers=new x(F.headers)),this.method=(L=F.method||this.method||"GET",I=L.toUpperCase(),-1<y.indexOf(I)?I:L),this.mode=F.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&B)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(B)}function C(L){var F=new FormData;return L.trim().split("&").forEach(function(I){var B;I&&(B=(I=I.split("=")).shift().replace(/\+/g," "),I=I.join("=").replace(/\+/g," "),F.append(decodeURIComponent(B),decodeURIComponent(I)))}),F}function D(L,F){F=F||{},this.type="default",this.status=F.status===void 0?200:F.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in F?F.statusText:"OK",this.headers=new x(F.headers),this.url=F.url||"",this._initBody(L)}a.fetch||(p="URLSearchParams"in a,s="Symbol"in a&&"iterator"in Symbol,h="FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),b="FormData"in a,(v="ArrayBuffer"in a)&&(i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=function(L){return L&&DataView.prototype.isPrototypeOf(L)},f=ArrayBuffer.isView||function(L){return L&&-1<i.indexOf(Object.prototype.toString.call(L))}),x.prototype.append=function(L,F){L=c(L),F=l(F);var I=this.map[L];this.map[L]=I?I+","+F:F},x.prototype.delete=function(L){delete this.map[c(L)]},x.prototype.get=function(L){return L=c(L),this.has(L)?this.map[L]:null},x.prototype.has=function(L){return this.map.hasOwnProperty(c(L))},x.prototype.set=function(L,F){this.map[c(L)]=l(F)},x.prototype.forEach=function(L,F){for(var I in this.map)this.map.hasOwnProperty(I)&&L.call(F,this.map[I],I,this)},x.prototype.keys=function(){var L=[];return this.forEach(function(F,I){L.push(I)}),w(L)},x.prototype.values=function(){var L=[];return this.forEach(function(F){L.push(F)}),w(L)},x.prototype.entries=function(){var L=[];return this.forEach(function(F,I){L.push([I,F])}),w(L)},s&&(x.prototype[Symbol.iterator]=x.prototype.entries),y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],N.prototype.clone=function(){return new N(this,{body:this._bodyInit})},P.call(N.prototype),P.call(D.prototype),D.prototype.clone=function(){return new D(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new x(this.headers),url:this.url})},D.error=function(){var L=new D(null,{status:0,statusText:""});return L.type="error",L},g=[301,302,303,307,308],D.redirect=function(L,F){if(g.indexOf(F)===-1)throw new RangeError("Invalid status code");return new D(null,{status:F,headers:{location:L}})},a.Headers=x,a.Request=N,a.Response=D,a.fetch=function(L,F){return new Promise(function(I,B){var W=new N(L,F),G=new XMLHttpRequest;G.onload=function(){var V,X={status:G.status,statusText:G.statusText,headers:(X=G.getAllResponseHeaders()||"",V=new x,X.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(M){var M=M.split(":"),A=M.shift().trim();A&&(M=M.join(":").trim(),V.append(A,M))}),V)},Q=(X.url="responseURL"in G?G.responseURL:X.headers.get("X-Request-URL"),"response"in G?G.response:G.responseText);I(new D(Q,X))},G.onerror=function(){B(new TypeError("Network request failed"))},G.ontimeout=function(){B(new TypeError("Network request failed"))},G.open(W.method,W.url,!0),W.credentials==="include"?G.withCredentials=!0:W.credentials==="omit"&&(G.withCredentials=!1),"responseType"in G&&h&&(G.responseType="blob"),W.headers.forEach(function(V,X){G.setRequestHeader(X,V)}),G.send(W._bodyInit===void 0?null:W._bodyInit)})},a.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],262:[function(t,m,u){t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a,p=h(t("../core/main")),s=h(t("../color/color_conversion"));function h(i){return i&&i.__esModule?i:{default:i}}var b=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],v=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];p.default.prototype._rgbColorName=function(y){var d,f,y=s.default._rgbaToHSBA(y),g=[(a=y)[0],y[1],y[2]];g[0]!==0&&(g[0]=Math.round(100*g[0]),(y=g[0].toString().split(""))[f=y.length-1]=parseInt(y[f]),y[f]<2.5?y[f]=0:2.5<=y[f]&&y[f]<7.5&&(y[f]=5),y.length===2?(y[0]=parseInt(y[0]),7.5<=y[f]&&(y[f]=0,y[0]=y[0]+1),g[0]=10*y[0]+y[1]):7.5<=y[f]?g[0]=10:g[0]=y[f]),g[2]=g[2]/255;for(var c=g.length-1;1<=c;c--)g[c]<=.25?g[c]=0:.25<g[c]&&g[c]<.75?g[c]=.5:g[c]=1;if(g[0]===0&&g[1]===0&&g[2]===1){for(var l=2;0<=l;l--)a[l]=Math.round(1e4*a[l])/1e4;for(var w=0;w<b.length;w++){if(b[w].h===a[0]&&b[w].s===a[1]&&b[w].b===a[2]){d=b[w].name;break}d="white"}}else for(var x=0;x<v.length;x++)if(v[x].h===g[0]&&v[x].s===g[1]&&v[x].b===g[2]){d=v[x].name;break}return d},t=p.default,u.default=t},{"../color/color_conversion":268,"../core/main":283,"core-js/modules/es.function.name":174,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206}],263:[function(t,m,u){t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(t=t("../core/main"))&&t.__esModule?t:{default:t},p="_Description",s="_fallbackDesc",h="_fallbackTable",b="_Label",v="_labelDesc",i="_labelTable";function d(f){if(f==="label"||f==="fallback")throw new Error("description should not be LABEL or FALLBACK");return f.endsWith(".")||f.endsWith(";")||f.endsWith(",")||f.endsWith("?")||f.endsWith("!")||(f+="."),f}a.default.prototype.describe=function(f,y){var g;a.default._validateParameters("describe",arguments),typeof f=="string"&&(g=this.canvas.id,f=d(f),this.dummyDOM||(this.dummyDOM=document.getElementById(g).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==f&&(this.descriptions.fallback.innerHTML=f):this._describeHTML("fallback",f),y===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==f&&(this.descriptions.label.innerHTML=f):this._describeHTML("label",f)))},a.default.prototype.describeElement=function(f,y,g){var c,l;a.default._validateParameters("describeElement",arguments),typeof y=="string"&&typeof f=="string"&&(c=this.canvas.id,y=d(y),l=function(w){if(w==="label"||w==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return w.endsWith(".")||w.endsWith(";")||w.endsWith(",")?w=w.replace(/.$/,":"):w.endsWith(":")||(w+=":"),w}(f),f=f.replace(/[^a-zA-Z0-9]/g,""),l='<th scope="row">'.concat(l,"</th><td>").concat(y,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(c).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[f]?this.descriptions.fallbackElements[f].innerHTML!==l&&(this.descriptions.fallbackElements[f].innerHTML=l):this._describeElementHTML("fallback",f,l),g===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[f]?this.descriptions.labelElements[f].innerHTML!==l&&(this.descriptions.labelElements[f].innerHTML=l):this._describeElementHTML("label",f,l)))},a.default.prototype._describeHTML=function(f,y){var g,c=this.canvas.id;f==="fallback"?(this.dummyDOM.querySelector("#".concat(c+p))?this.dummyDOM.querySelector("#"+c+h).insertAdjacentHTML("beforebegin",'<p id="'.concat(c+s,'"></p>')):(g='<div id="'.concat(c).concat(p,'" role="region" aria-label="Canvas Description"><p id="').concat(c).concat(s,'"></p></div>'),this.dummyDOM.querySelector("#".concat(c,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(c,"accessibleOutput")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#".concat(c)).innerHTML=g),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(c).concat(s)),this.descriptions.fallback.innerHTML=y):f==="label"&&(this.dummyDOM.querySelector("#".concat(c+b))?this.dummyDOM.querySelector("#".concat(c+i))&&this.dummyDOM.querySelector("#".concat(c+i)).insertAdjacentHTML("beforebegin",'<p id="'.concat(c).concat(v,'"></p>')):(g='<div id="'.concat(c).concat(b,'" class="p5Label"><p id="').concat(c).concat(v,'"></p></div>'),this.dummyDOM.querySelector("#".concat(c,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(c,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#"+c).insertAdjacentHTML("afterend",g)),this.descriptions.label=this.dummyDOM.querySelector("#"+c+v),this.descriptions.label.innerHTML=y)},a.default.prototype._describeElementHTML=function(f,y,g){var c,l=this.canvas.id;f==="fallback"?(this.dummyDOM.querySelector("#".concat(l+p))?this.dummyDOM.querySelector("#"+l+h)||this.dummyDOM.querySelector("#"+l+s).insertAdjacentHTML("afterend",'<table id="'.concat(l).concat(h,'"><caption>Canvas elements and their descriptions</caption></table>')):(c='<div id="'.concat(l).concat(p,'" role="region" aria-label="Canvas Description"><table id="').concat(l).concat(h,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(l,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(l,"accessibleOutput")).insertAdjacentHTML("beforebegin",c):this.dummyDOM.querySelector("#"+l).innerHTML=c),(c=document.createElement("tr")).id=l+"_fte_"+y,this.dummyDOM.querySelector("#"+l+h).appendChild(c),this.descriptions.fallbackElements[y]=this.dummyDOM.querySelector("#".concat(l).concat("_fte_").concat(y)),this.descriptions.fallbackElements[y].innerHTML=g):f==="label"&&(this.dummyDOM.querySelector("#".concat(l+b))?this.dummyDOM.querySelector("#".concat(l+i))||this.dummyDOM.querySelector("#"+l+v).insertAdjacentHTML("afterend",'<table id="'.concat(l+i,'"></table>')):(c='<div id="'.concat(l).concat(b,'" class="p5Label"><table id="').concat(l).concat(i,'"></table></div>'),this.dummyDOM.querySelector("#".concat(l,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(l,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",c):this.dummyDOM.querySelector("#"+l).insertAdjacentHTML("afterend",c)),(f=document.createElement("tr")).id=l+"_lte_"+y,this.dummyDOM.querySelector("#"+l+i).appendChild(f),this.descriptions.labelElements[y]=this.dummyDOM.querySelector("#".concat(l).concat("_lte_").concat(y)),this.descriptions.labelElements[y].innerHTML=g)},t=a.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.replace":204}],264:[function(t,m,u){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype._updateGridOutput=function(a){var p,s,h,b;this.dummyDOM.querySelector("#".concat(a,"_summary"))&&(p=this._accessibleOutputs[a],h=function(v,i,d,f){return i="".concat(i," canvas, ").concat(d," by ").concat(f," pixels, contains ").concat(v[0]),i=(v[0]===1?"".concat(i," shape: "):"".concat(i," shapes: ")).concat(v[1]),i}((s=function(v,i){var d,f="",y="",g=0;for(d in i){var c,l=0;for(c in i[d]){var w='<li id="'.concat(v,"shape").concat(g,'">').concat(i[d][c].color," ").concat(d,",");d==="line"?w+=" location = ".concat(i[d][c].pos,", length = ").concat(i[d][c].length," pixels"):(w+=" location = ".concat(i[d][c].pos),d!=="point"&&(w+=", area = ".concat(i[d][c].area," %")),w+="</li>"),f+=w,l++,g++}y=1<l?"".concat(y," ").concat(l," ").concat(d,"s"):"".concat(y," ").concat(l," ").concat(d)}return{numShapes:[g,y],details:f}}(a,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),b=function(v,i){var d,f,y=0,g="",c=Array.from(Array(10),function(){return Array(10)});for(d in i)for(var l in i[d]){var w=void 0;w=d!=="line"?'<a href="#'.concat(v,"shape").concat(y,'">').concat(i[d][l].color," ").concat(d,"</a>"):'<a href="#'.concat(v,"shape").concat(y,'">').concat(i[d][l].color," ").concat(d," midpoint</a>"),i[d][l].loc.locY<c.length&&i[d][l].loc.locX<c[i[d][l].loc.locY].length&&(c[i[d][l].loc.locY][i[d][l].loc.locX]?c[i[d][l].loc.locY][i[d][l].loc.locX]=c[i[d][l].loc.locY][i[d][l].loc.locX]+"  "+w:c[i[d][l].loc.locY][i[d][l].loc.locX]=w,y++)}for(f in c){var x,_="<tr>";for(x in c[f])_+="<td>",c[f][x]!==void 0&&(_+=c[f][x]),_+="</td>";g=g+_+"</tr>"}return g}(a,this.ingredients.shapes),h!==p.summary.innerHTML&&(p.summary.innerHTML=h),b!==p.map.innerHTML&&(p.map.innerHTML=b),s.details!==p.shapeDetails.innerHTML&&(p.shapeDetails.innerHTML=s.details),this._accessibleOutputs[a]=p)},t=t.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.map":168,"core-js/modules/es.string.iterator":200}],265:[function(t,m,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(t=t("../core/main"))&&t.__esModule?t:{default:t};function p(h){return function(b){if(Array.isArray(b)){for(var v=0,i=new Array(b.length);v<b.length;v++)i[v]=b[v];return i}}(h)||function(b){if(Symbol.iterator in Object(b)||Object.prototype.toString.call(b)==="[object Arguments]")return Array.from(b)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(i,f,v){var d=i[0],i=i[1],d=Math.floor(d/f*10),f=Math.floor(i/v*10);return{locX:Math.min(Math.max(d,0),9),locY:Math.min(Math.max(f,0),9)}}a.default.prototype.textOutput=function(h){a.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),h===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},a.default.prototype.gridOutput=function(h){a.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),h===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},a.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},a.default.prototype._createOutput=function(h,b){var v,i,d,f=this.canvas.id,y=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:"",pBackground:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(f).parentNode),"");b==="Fallback"?(v=f+h,this.dummyDOM.querySelector("#".concat(i=f+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(f,"_Description"))?this.dummyDOM.querySelector("#".concat(f,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(i,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(f)).innerHTML='<div id="'.concat(i,'" role="region" aria-label="Canvas Outputs"></div>'))):b==="Label"&&(v=f+h+(y=b),this.dummyDOM.querySelector("#".concat(i=f+"accessibleOutput"+b))||(this.dummyDOM.querySelector("#".concat(f,"_Label"))?this.dummyDOM.querySelector("#".concat(f,"_Label")):this.dummyDOM.querySelector("#".concat(f))).insertAdjacentHTML("afterend",'<div id="'.concat(i,'"></div>'))),this._accessibleOutputs[v]={},h==="textOutput"?(y="#".concat(f,"gridOutput").concat(y),d='<div id="'.concat(v,'">Text Output<div id="').concat(v,'Summary" aria-label="text output summary"><p id="').concat(v,'_summary"></p><ul id="').concat(v,'_list"></ul></div><table id="').concat(v,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(y)?this.dummyDOM.querySelector(y).insertAdjacentHTML("beforebegin",d):this.dummyDOM.querySelector("#".concat(i)).innerHTML=d,this._accessibleOutputs[v].list=this.dummyDOM.querySelector("#".concat(v,"_list"))):h==="gridOutput"&&(y="#".concat(f,"textOutput").concat(y),d='<div id="'.concat(v,'">Grid Output<p id="').concat(v,'_summary" aria-label="grid output summary"><table id="').concat(v,'_map" summary="grid output content"></table><ul id="').concat(v,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(y)?this.dummyDOM.querySelector(y).insertAdjacentHTML("afterend",d):this.dummyDOM.querySelector("#".concat(i)).innerHTML=d,this._accessibleOutputs[v].map=this.dummyDOM.querySelector("#".concat(v,"_map"))),this._accessibleOutputs[v].shapeDetails=this.dummyDOM.querySelector("#".concat(v,"_shapeDetails")),this._accessibleOutputs[v].summary=this.dummyDOM.querySelector("#".concat(v,"_summary"))},a.default.prototype._updateAccsOutput=function(){var h=this.canvas.id;JSON.stringify(this.ingredients.shapes)===this.ingredients.pShapes&&this.ingredients.colors.background===this.ingredients.pBackground||(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(h+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(h+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(h+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(h+"gridOutputLabel"))},a.default.prototype._accsBackground=function(h){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.pBackground=this.ingredients.colors.background,this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==h&&(this.ingredients.colors.backgroundRGBA=h,this.ingredients.colors.background=this._rgbColorName(h))},a.default.prototype._accsCanvasColors=function(h,b){h==="fill"?this.ingredients.colors.fillRGBA!==b&&(this.ingredients.colors.fillRGBA=b,this.ingredients.colors.fill=this._rgbColorName(b)):h==="stroke"&&this.ingredients.colors.strokeRGBA!==b&&(this.ingredients.colors.strokeRGBA=b,this.ingredients.colors.stroke=this._rgbColorName(b))},a.default.prototype._accsOutput=function(h,b){h==="ellipse"&&b[2]===b[3]?h="circle":h==="rectangle"&&b[2]===b[3]&&(h="square");var v,i,d={},f=!0,y=function(c,l){var w;return c=c==="rectangle"||c==="ellipse"||c==="arc"||c==="circle"||c==="square"?(w=Math.round(l[0]+l[2]/2),Math.round(l[1]+l[3]/2)):c==="triangle"?(w=(l[0]+l[2]+l[4])/3,(l[1]+l[3]+l[5])/3):c==="quadrilateral"?(w=(l[0]+l[2]+l[4]+l[6])/4,(l[1]+l[3]+l[5]+l[7])/4):c==="line"?(w=(l[0]+l[2])/2,(l[1]+l[3])/2):(w=l[0],l[1]),[w,c]}(h,b);if(h==="line"?(d.color=this.ingredients.colors.stroke,d.length=Math.round(this.dist(b[0],b[1],b[2],b[3])),v=this._getPos(b[0],[1]),i=this._getPos(b[2],[3]),d.loc=s(y,this.width,this.height),d.pos=v===i?"at ".concat(v):"from ".concat(v," to ").concat(i)):(h==="point"?d.color=this.ingredients.colors.stroke:(d.color=this.ingredients.colors.fill,d.area=this._getArea(h,b)),d.pos=this._getPos.apply(this,p(y)),d.loc=s(y,this.width,this.height)),this.ingredients.shapes[h]){if(this.ingredients.shapes[h]!==[d]){for(var g in this.ingredients.shapes[h])JSON.stringify(this.ingredients.shapes[h][g])===JSON.stringify(d)&&(f=!1);f===!0&&this.ingredients.shapes[h].push(d)}}else this.ingredients.shapes[h]=[d]},a.default.prototype._getPos=function(i,v){var i=new DOMPointReadOnly(i,v),v=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),i=i.matrixTransform(v),v=i.x,i=i.y,d=this.width*this._pixelDensity,f=this.height*this._pixelDensity;return v<.4*d?i<.4*f?"top left":.6*f<i?"bottom left":"mid left":.6*d<v?i<.4*f?"top right":.6*f<i?"bottom right":"mid right":i<.4*f?"top middle":.6*f<i?"bottom middle":"middle"},a.default.prototype._getArea=function(h,b){var v,i,d=0,f=(h==="arc"?(d=(v=((b[5]-b[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*b[2]*b[3]/8,b[6]!=="open"&&b[6]!=="chord"||(i=b[0],l=b[1],f=b[0]+b[2]/2*Math.cos(b[4]).toFixed(2),w=b[1]+b[3]/2*Math.sin(b[4]).toFixed(2),g=b[0]+b[2]/2*Math.cos(b[5]).toFixed(2),y=b[1]+b[3]/2*Math.sin(b[5]).toFixed(2),i=Math.abs(i*(w-y)+f*(y-l)+g*(l-w))/2,v>Math.PI?d+=i:d-=i)):h==="ellipse"||h==="circle"?d=3.14*b[2]/2*b[3]/2:h==="line"||h==="point"?d=0:h==="quadrilateral"?d=Math.abs((b[6]+b[0])*(b[7]-b[1])+(b[0]+b[2])*(b[1]-b[3])+(b[2]+b[4])*(b[3]-b[5])+(b[4]+b[6])*(b[5]-b[7]))/2:h==="rectangle"||h==="square"?d=b[2]*b[3]:h==="triangle"&&(d=Math.abs(b[0]*(b[3]-b[5])+b[2]*(b[5]-b[1])+b[4]*(b[1]-b[3]))/2),this.width*this._pixelDensity),y=this.height*this._pixelDensity,g=[new DOMPoint(0,0),new DOMPoint(f,0),new DOMPoint(f,y),new DOMPoint(0,y)],c=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),l=g.map(function(x){return x.matrixTransform(c)}),w=Math.abs((l[3].x+l[0].x)*(l[3].y-l[0].y)+(l[0].x+l[1].x)*(l[0].y-l[1].y)+(l[1].x+l[2].x)*(l[1].y-l[2].y)+(l[2].x+l[3].x)*(l[2].y-l[3].y))/2;return Math.round(100*d/w)},t=a.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],266:[function(t,m,u){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.concat"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype._updateTextOutput=function(a){var p,s,h,b;this.dummyDOM.querySelector("#".concat(a,"_summary"))&&(p=this._accessibleOutputs[a],h=function(v,i,d,f){return d="Your output is a, ".concat(d," by ").concat(f," pixels, ").concat(i," canvas containing the following"),d=v===1?"".concat(d," shape:"):"".concat(d," ").concat(v," shapes:"),d}((s=function(v,i){var d,f="",y=0;for(d in i)for(var g in i[d]){var c='<li><a href="#'.concat(v,"shape").concat(y,'">').concat(i[d][g].color," ").concat(d,"</a>");d==="line"?c+=", ".concat(i[d][g].pos,", ").concat(i[d][g].length," pixels long.</li>"):(c+=", at ".concat(i[d][g].pos),d!=="point"&&(c+=", covering ".concat(i[d][g].area,"% of the canvas")),c+=".</li>"),f+=c,y++}return{numShapes:y,listShapes:f}}(a,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),b=function(v,i){var d,f="",y=0;for(d in i)for(var g in i[d]){var c='<tr id="'.concat(v,"shape").concat(y,'"><th>').concat(i[d][g].color," ").concat(d,"</th>");d==="line"?c+="<td>location = ".concat(i[d][g].pos,"</td><td>length = ").concat(i[d][g].length," pixels</td></tr>"):(c+="<td>location = ".concat(i[d][g].pos,"</td>"),d!=="point"&&(c+="<td> area = ".concat(i[d][g].area,"%</td>")),c+="</tr>"),f+=c,y++}return f}(a,this.ingredients.shapes),h!==p.summary.innerHTML&&(p.summary.innerHTML=h),s.listShapes!==p.list.innerHTML&&(p.list.innerHTML=s.listShapes),b!==p.shapeDetails.innerHTML&&(p.shapeDetails.innerHTML=b),this._accessibleOutputs[a]=p)},t=t.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153}],267:[function(t,m,u){var a=(a=t("./core/main"))&&a.__esModule?a:{default:a};t("./core/constants"),t("./core/environment"),t("./core/friendly_errors/stacktrace"),t("./core/friendly_errors/validate_params"),t("./core/friendly_errors/file_errors"),t("./core/friendly_errors/fes_core"),t("./core/friendly_errors/sketch_reader"),t("./core/helpers"),t("./core/legacy"),t("./core/preload"),t("./core/p5.Element"),t("./core/p5.Graphics"),t("./core/p5.Renderer"),t("./core/p5.Renderer2D"),t("./core/rendering"),t("./core/shim"),t("./core/structure"),t("./core/transform"),t("./core/shape/2d_primitives"),t("./core/shape/attributes"),t("./core/shape/curves"),t("./core/shape/vertex"),t("./accessibility/outputs"),t("./accessibility/textOutput"),t("./accessibility/gridOutput"),t("./accessibility/color_namer"),t("./color/color_conversion"),t("./color/creating_reading"),t("./color/p5.Color"),t("./color/setting"),t("./data/p5.TypedDict"),t("./data/local_storage.js"),t("./dom/dom"),t("./accessibility/describe"),t("./events/acceleration"),t("./events/keyboard"),t("./events/mouse"),t("./events/touch"),t("./image/filters"),t("./image/image"),t("./image/loading_displaying"),t("./image/p5.Image"),t("./image/pixels"),t("./io/files"),t("./io/p5.Table"),t("./io/p5.TableRow"),t("./io/p5.XML"),t("./math/calculation"),t("./math/math"),t("./math/noise"),t("./math/p5.Vector"),t("./math/random"),t("./math/trigonometry"),t("./typography/attributes"),t("./typography/loading_displaying"),t("./typography/p5.Font"),t("./utilities/array_functions"),t("./utilities/conversion"),t("./utilities/string_functions"),t("./utilities/time_date"),t("./webgl/3d_primitives"),t("./webgl/interaction"),t("./webgl/light"),t("./webgl/loading"),t("./webgl/material"),t("./webgl/p5.Camera"),t("./webgl/p5.DataArray"),t("./webgl/p5.Geometry"),t("./webgl/p5.Matrix"),t("./webgl/p5.Quat"),t("./webgl/p5.RendererGL.Immediate"),t("./webgl/p5.RendererGL"),t("./webgl/p5.RendererGL.Retained"),t("./webgl/p5.Framebuffer"),t("./webgl/p5.Shader"),t("./webgl/p5.RenderBuffer"),t("./webgl/p5.Texture"),t("./webgl/text"),t("./core/init"),m.exports=a.default},{"./accessibility/color_namer":262,"./accessibility/describe":263,"./accessibility/gridOutput":264,"./accessibility/outputs":265,"./accessibility/textOutput":266,"./color/color_conversion":268,"./color/creating_reading":269,"./color/p5.Color":270,"./color/setting":271,"./core/constants":272,"./core/environment":273,"./core/friendly_errors/fes_core":274,"./core/friendly_errors/file_errors":275,"./core/friendly_errors/sketch_reader":276,"./core/friendly_errors/stacktrace":277,"./core/friendly_errors/validate_params":278,"./core/helpers":279,"./core/init":280,"./core/legacy":282,"./core/main":283,"./core/p5.Element":284,"./core/p5.Graphics":285,"./core/p5.Renderer":286,"./core/p5.Renderer2D":287,"./core/preload":288,"./core/rendering":289,"./core/shape/2d_primitives":290,"./core/shape/attributes":291,"./core/shape/curves":292,"./core/shape/vertex":293,"./core/shim":294,"./core/structure":295,"./core/transform":296,"./data/local_storage.js":297,"./data/p5.TypedDict":298,"./dom/dom":299,"./events/acceleration":300,"./events/keyboard":301,"./events/mouse":302,"./events/touch":303,"./image/filters":304,"./image/image":305,"./image/loading_displaying":306,"./image/p5.Image":307,"./image/pixels":308,"./io/files":309,"./io/p5.Table":310,"./io/p5.TableRow":311,"./io/p5.XML":312,"./math/calculation":313,"./math/math":314,"./math/noise":315,"./math/p5.Vector":316,"./math/random":317,"./math/trigonometry":318,"./typography/attributes":319,"./typography/loading_displaying":320,"./typography/p5.Font":321,"./utilities/array_functions":322,"./utilities/conversion":323,"./utilities/string_functions":324,"./utilities/time_date":325,"./webgl/3d_primitives":326,"./webgl/interaction":328,"./webgl/light":329,"./webgl/loading":330,"./webgl/material":331,"./webgl/p5.Camera":332,"./webgl/p5.DataArray":333,"./webgl/p5.Framebuffer":334,"./webgl/p5.Geometry":335,"./webgl/p5.Matrix":336,"./webgl/p5.Quat":337,"./webgl/p5.RenderBuffer":338,"./webgl/p5.RendererGL":341,"./webgl/p5.RendererGL.Immediate":339,"./webgl/p5.RendererGL.Retained":340,"./webgl/p5.Shader":342,"./webgl/p5.Texture":343,"./webgl/text":344}],268:[function(t,m,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.ColorConversion={_hsbaToHSLA:function(a){var p=a[0],s=a[1],h=a[2],b=(2-s)*h/2;return b!=0&&(b==1?s=0:b<.5?s/=2-s:s=s*h/(2-2*b)),[p,s,b,a[3]]},_hsbaToRGBA:function(a){var p,s,h,b,v,i=6*a[0],d=a[1],f=a[2];return d===0?[f,f,f,a[3]]:(s=f*(1-d),h=f*(1-d*(i-(p=Math.floor(i)))),d=f*(1-d*(1+p-i)),i=p===1?(b=h,v=f,s):p===2?(b=s,v=f,d):p===3?(b=s,v=h,f):p===4?(b=d,v=s,f):p===5?(b=f,v=s,h):(b=f,v=d,s),[b,v,i,a[3]])},_hslaToHSBA:function(a){var p=a[0],s=a[1],h=a[2],b=h<.5?(1+s)*h:h+s-h*s;return[p,s=2*(b-h)/b,b,a[3]]},_hslaToRGBA:function(a){var p,s=6*a[0],h=a[1],b=a[2];return h===0?[b,b,b,a[3]]:[(p=function(v,i,d){return v<0?v+=6:6<=v&&(v-=6),v<1?i+(d-i)*v:v<3?d:v<4?i+(d-i)*(4-v):i})(2+s,h=2*b-(b=b<.5?(1+h)*b:b+h-b*h),b),p(s,h,b),p(s-2,h,b),a[3]]},_rgbaToHSBA:function(a){var p,s,h=a[0],b=a[1],v=a[2],i=Math.max(h,b,v),d=i-Math.min(h,b,v);return d==0?s=p=0:(s=d/i,h===i?p=(b-v)/d:b===i?p=2+(v-h)/d:v===i&&(p=4+(h-b)/d),p<0?p+=6:6<=p&&(p-=6)),[p/6,s,i,a[3]]},_rgbaToHSLA:function(a){var p,s,h=a[0],b=a[1],v=a[2],i=Math.max(h,b,v),f=Math.min(h,b,v),d=i+f,f=i-f;return f==0?s=p=0:(s=d<1?f/d:f/(2-d),h===i?p=(b-v)/f:b===i?p=2+(v-h)/f:v===i&&(p=4+(h-b)/f),p<0?p+=6:6<=p&&(p-=6)),[p/6,s,d/2,a[3]]}},t=t.default.ColorConversion,u.default=t},{"../core/main":283}],269:[function(t,m,u){function a(i){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(i)}function p(i){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(d){return a(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":a(d)})(i)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.map"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(v=t("../core/main"))&&v.__esModule?v:{default:v},h=function(i){if(i&&i.__esModule)return i;if(i===null||p(i)!=="object"&&typeof i!="function")return{default:i};var d=b();if(d&&d.has(i))return d.get(i);var f,y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in i){var c;Object.prototype.hasOwnProperty.call(i,f)&&((c=g?Object.getOwnPropertyDescriptor(i,f):null)&&(c.get||c.set)?Object.defineProperty(y,f,c):y[f]=i[f])}return y.default=i,d&&d.set(i,y),y}(t("../core/constants"));function b(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,b=function(){return i},i)}t("./p5.Color"),t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),s.default.prototype.alpha=function(i){return s.default._validateParameters("alpha",arguments),this.color(i)._getAlpha()},s.default.prototype.blue=function(i){return s.default._validateParameters("blue",arguments),this.color(i)._getBlue()},s.default.prototype.brightness=function(i){return s.default._validateParameters("brightness",arguments),this.color(i)._getBrightness()},s.default.prototype.color=function(){for(var i,d=arguments.length,f=new Array(d),y=0;y<d;y++)f[y]=arguments[y];return s.default._validateParameters("color",f),f[0]instanceof s.default.Color?f[0]:(i=Array.isArray(f[0])?f[0]:f,new s.default.Color(this,i))},s.default.prototype.green=function(i){return s.default._validateParameters("green",arguments),this.color(i)._getGreen()},s.default.prototype.hue=function(i){return s.default._validateParameters("hue",arguments),this.color(i)._getHue()},s.default.prototype.lerpColor=function(i,d,f){s.default._validateParameters("lerpColor",arguments),i instanceof s.default.Color||(i=color(i)),d instanceof s.default.Color||(d=color(d));var y,g,c,l=this._colorMode,w=this._colorMaxes;if(l===h.RGB)g=i.levels.map(function(x){return x/255}),c=d.levels.map(function(x){return x/255});else if(l===h.HSB)i._getBrightness(),d._getBrightness(),g=i.hsba,c=d.hsba;else{if(l!==h.HSL)throw new Error("".concat(l," cannot be used for interpolation."));i._getLightness(),d._getLightness(),g=i.hsla,c=d.hsla}return f=Math.max(Math.min(f,1),0),this.lerp===void 0&&(this.lerp=function(x,_,T){return T*(_-x)+x}),l===h.RGB?y=this.lerp(g[0],c[0],f):(.5<Math.abs(g[0]-c[0])&&(g[0]>c[0]?c[0]+=1:g[0]+=1),1<=(y=this.lerp(g[0],c[0],f))&&--y),i=this.lerp(g[1],c[1],f),d=this.lerp(g[2],c[2],f),g=this.lerp(g[3],c[3],f),y*=w[l][0],i*=w[l][1],d*=w[l][2],g*=w[l][3],this.color(y,i,d,g)},s.default.prototype.paletteLerp=function(i,d){var f=i[0];if(d<f[1])return this.color(f[0]);for(var y=1;y<i.length;y++){var g,c=i[y];if(d<c[1])return g=i[y-1],this.lerpColor(this.color(g[0]),this.color(c[0]),(d-g[1])/(c[1]-g[1]))}return this.color(i[i.length-1][0])},s.default.prototype.lightness=function(i){return s.default._validateParameters("lightness",arguments),this.color(i)._getLightness()},s.default.prototype.red=function(i){return s.default._validateParameters("red",arguments),this.color(i)._getRed()},s.default.prototype.saturation=function(i){return s.default._validateParameters("saturation",arguments),this.color(i)._getSaturation()};var v=s.default;u.default=v},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],270:[function(y,m,u){function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(x)}function p(x){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(_){return a(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":a(_)})(x)}y("core-js/modules/es.symbol"),y("core-js/modules/es.symbol.description"),y("core-js/modules/es.symbol.iterator"),y("core-js/modules/es.array.includes"),y("core-js/modules/es.array.iterator"),y("core-js/modules/es.array.join"),y("core-js/modules/es.array.map"),y("core-js/modules/es.array.slice"),y("core-js/modules/es.object.get-own-property-descriptor"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.regexp.constructor"),y("core-js/modules/es.regexp.exec"),y("core-js/modules/es.regexp.to-string"),y("core-js/modules/es.string.includes"),y("core-js/modules/es.string.iterator"),y("core-js/modules/es.string.trim"),y("core-js/modules/es.weak-map"),y("core-js/modules/web.dom-collections.iterator"),y("core-js/modules/es.array.includes"),y("core-js/modules/es.array.join"),y("core-js/modules/es.array.map"),y("core-js/modules/es.array.slice"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.regexp.constructor"),y("core-js/modules/es.regexp.exec"),y("core-js/modules/es.regexp.to-string"),y("core-js/modules/es.string.includes"),y("core-js/modules/es.string.trim"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=i(y("../core/main")),h=function(x){if(x&&x.__esModule)return x;if(x===null||p(x)!=="object"&&typeof x!="function")return{default:x};var _=v();if(_&&_.has(x))return _.get(x);var T,E={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(T in x){var P;Object.prototype.hasOwnProperty.call(x,T)&&((P=S?Object.getOwnPropertyDescriptor(x,T):null)&&(P.get||P.set)?Object.defineProperty(E,T,P):E[T]=x[T])}return E.default=x,_&&_.set(x,E),E}(y("../core/constants")),b=i(y("./color_conversion"));function v(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,v=function(){return x},x)}function i(x){return x&&x.__esModule?x:{default:x}}function d(x,_){for(var T=0;T<_.length;T++){var E=_[T];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(x,E.key,E)}}var f={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},y=/\s*/,w=/(\d{1,3})/,g=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,c=new RegExp("".concat(g.source,"%")),l={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",w.source,",",w.source,",",w.source,"\\)$"].join(y.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",c.source,",",c.source,",",c.source,"\\)$"].join(y.source),"i"),RGBA:new RegExp(["^rgba\\(",w.source,",",w.source,",",w.source,",",g.source,"\\)$"].join(y.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",c.source,",",c.source,",",c.source,",",g.source,"\\)$"].join(y.source),"i"),HSL:new RegExp(["^hsl\\(",w.source,",",c.source,",",c.source,"\\)$"].join(y.source),"i"),HSLA:new RegExp(["^hsla\\(",w.source,",",c.source,",",c.source,",",g.source,"\\)$"].join(y.source),"i"),HSB:new RegExp(["^hsb\\(",w.source,",",c.source,",",c.source,"\\)$"].join(y.source),"i"),HSBA:new RegExp(["^hsba\\(",w.source,",",c.source,",",c.source,",",g.source,"\\)$"].join(y.source),"i")},w=(s.default.Color=function(){function x(S,P){if(!(this instanceof x))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(S._colorMode,S._colorMaxes),![h.RGB,h.HSL,h.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=x._parseInputs.apply(this,P),this._calculateLevels()}var _,T,E;return _=x,E=[{key:"_parseInputs",value:function(S,P,N,C){var D,L=arguments.length,F=this.mode,I=this.maxes[F],B=[];if(3<=L){for(B[0]=S/I[0],B[1]=P/I[1],B[2]=N/I[2],B[3]=typeof C=="number"?C/I[3]:1,D=B.length-1;0<=D;--D){var W=B[D];W<0?B[D]=0:1<W&&(B[D]=1)}return F===h.HSL?b.default._hslaToRGBA(B):F===h.HSB?b.default._hsbaToRGBA(B):B}if(L===1&&typeof S=="string"){if(N=S.trim().toLowerCase(),f[N])return x._parseInputs.call(this,f[N]);if(l.HEX3.test(N))return(B=l.HEX3.exec(N).slice(1).map(function(G){return parseInt(G+G,16)/255}))[3]=1,B;if(l.HEX6.test(N))return(B=l.HEX6.exec(N).slice(1).map(function(G){return parseInt(G,16)/255}))[3]=1,B;if(l.HEX4.test(N))return B=l.HEX4.exec(N).slice(1).map(function(G){return parseInt(G+G,16)/255});if(l.HEX8.test(N))return B=l.HEX8.exec(N).slice(1).map(function(G){return parseInt(G,16)/255});if(l.RGB.test(N))return(B=l.RGB.exec(N).slice(1).map(function(G){return G/255}))[3]=1,B;if(l.RGB_PERCENT.test(N))return(B=l.RGB_PERCENT.exec(N).slice(1).map(function(G){return parseFloat(G)/100}))[3]=1,B;if(l.RGBA.test(N))return B=l.RGBA.exec(N).slice(1).map(function(G,V){return V===3?parseFloat(G):G/255});if(l.RGBA_PERCENT.test(N))return B=l.RGBA_PERCENT.exec(N).slice(1).map(function(G,V){return V===3?parseFloat(G):parseFloat(G)/100});if(l.HSL.test(N)?(B=l.HSL.exec(N).slice(1).map(function(G,V){return V===0?parseInt(G,10)/360:parseInt(G,10)/100}))[3]=1:l.HSLA.test(N)&&(B=l.HSLA.exec(N).slice(1).map(function(G,V){return V===0?parseInt(G,10)/360:V===3?parseFloat(G):parseInt(G,10)/100})),(B=B.map(function(G){return Math.max(Math.min(G,1),0)})).length)return b.default._hslaToRGBA(B);if(l.HSB.test(N)?(B=l.HSB.exec(N).slice(1).map(function(G,V){return V===0?parseInt(G,10)/360:parseInt(G,10)/100}))[3]=1:l.HSBA.test(N)&&(B=l.HSBA.exec(N).slice(1).map(function(G,V){return V===0?parseInt(G,10)/360:V===3?parseFloat(G):parseInt(G,10)/100})),B.length){for(D=B.length-1;0<=D;--D)B[D]=Math.max(Math.min(B[D],1),0);return b.default._hsbaToRGBA(B)}B=[1,1,1,1]}else{if(L!==1&&L!==2||typeof S!="number")throw new Error("".concat(arguments,"is not a valid color representation."));B[0]=S/I[2],B[1]=S/I[2],B[2]=S/I[2],B[3]=typeof P=="number"?P/I[3]:1,B=B.map(function(G){return Math.max(Math.min(G,1),0)})}return B}}],(T=[{key:"toString",value:function(S){var P=this.levels,N=this._array,C=N[3];switch(S){case"#rrggbb":return"#".concat(P[0]<16?"0".concat(P[0].toString(16)):P[0].toString(16),P[1]<16?"0".concat(P[1].toString(16)):P[1].toString(16),P[2]<16?"0".concat(P[2].toString(16)):P[2].toString(16));case"#rrggbbaa":return"#".concat(P[0]<16?"0".concat(P[0].toString(16)):P[0].toString(16),P[1]<16?"0".concat(P[1].toString(16)):P[1].toString(16),P[2]<16?"0".concat(P[2].toString(16)):P[2].toString(16),P[3]<16?"0".concat(P[3].toString(16)):P[3].toString(16));case"#rgb":return"#".concat(Math.round(15*N[0]).toString(16),Math.round(15*N[1]).toString(16),Math.round(15*N[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*N[0]).toString(16),Math.round(15*N[1]).toString(16),Math.round(15*N[2]).toString(16),Math.round(15*N[3]).toString(16));case"rgb":return"rgb(".concat(P[0],", ",P[1],", ",P[2],")");case"rgb%":return"rgb(".concat((100*N[0]).toPrecision(3),"%, ",(100*N[1]).toPrecision(3),"%, ",(100*N[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*N[0]).toPrecision(3),"%, ",(100*N[1]).toPrecision(3),"%, ",(100*N[2]).toPrecision(3),"%, ",(100*N[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=b.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[h.HSB][0],", ",this.hsba[1]*this.maxes[h.HSB][1],", ",this.hsba[2]*this.maxes[h.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=b.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=b.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[h.HSB][0],", ",this.hsba[1]*this.maxes[h.HSB][1],", ",this.hsba[2]*this.maxes[h.HSB][2],", ",C,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=b.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*C).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=b.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[h.HSL][0],", ",this.hsla[1]*this.maxes[h.HSL][1],", ",this.hsla[2]*this.maxes[h.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=b.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=b.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[h.HSL][0],", ",this.hsla[1]*this.maxes[h.HSL][1],", ",this.hsla[2]*this.maxes[h.HSL][2],", ",C,")");case"hsla%":return this.hsla||(this.hsla=b.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*C).toPrecision(3),"%)");default:return"rgba(".concat(P[0],",",P[1],",",P[2],",",C,")")}}},{key:"setRed",value:function(S){this._array[0]=S/this.maxes[h.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(S){this._array[1]=S/this.maxes[h.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(S){this._array[2]=S/this.maxes[h.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(S){this._array[3]=S/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var S=this._array,P=this.levels=new Array(S.length),N=S.length-1;0<=N;--N)P[N]=Math.round(255*S[N]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(S,P){this.mode=S,this.maxes=P}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[h.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=b.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[h.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[h.RGB][1]}},{key:"_getHue",value:function(){return this.mode===h.HSB?(this.hsba||(this.hsba=b.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[h.HSB][0]):(this.hsla||(this.hsla=b.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[h.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=b.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[h.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[h.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===h.HSB?(this.hsba||(this.hsba=b.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[h.HSB][1]):(this.hsla||(this.hsla=b.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[h.HSL][1])}}])&&d(_.prototype,T),E&&d(_,E),x}(),s.default.Color);u.default=w},{"../core/constants":272,"../core/main":283,"./color_conversion":268,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],271:[function(t,m,u){function a(i){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(i)}function p(i){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(d){return a(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":a(d)})(i)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.fill"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(v=t("../core/main"))&&v.__esModule?v:{default:v},h=function(i){if(i&&i.__esModule)return i;if(i===null||p(i)!=="object"&&typeof i!="function")return{default:i};var d=b();if(d&&d.has(i))return d.get(i);var f,y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in i){var c;Object.prototype.hasOwnProperty.call(i,f)&&((c=g?Object.getOwnPropertyDescriptor(i,f):null)&&(c.get||c.set)?Object.defineProperty(y,f,c):y[f]=i[f])}return y.default=i,d&&d.set(i,y),y}(t("../core/constants"));function b(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,b=function(){return i},i)}t("./p5.Color"),s.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{})},s.default.prototype.endClip=function(){this._renderer.endClip()},s.default.prototype.clip=function(i,d){this._renderer.beginClip(d),i(),this._renderer.endClip(d)},s.default.prototype.background=function(){var i;return(i=this._renderer).background.apply(i,arguments),this},s.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},s.default.prototype.colorMode=function(i,d,f,y,g){return s.default._validateParameters("colorMode",arguments),i!==h.RGB&&i!==h.HSB&&i!==h.HSL||(this._colorMode=i,i=this._colorMaxes[i],arguments.length===2?(i[0]=d,i[1]=d,i[2]=d,i[3]=d):arguments.length===4?(i[0]=d,i[1]=f,i[2]=y):arguments.length===5&&(i[0]=d,i[1]=f,i[2]=y,i[3]=g)),this},s.default.prototype.fill=function(){var i;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(i=this._renderer).fill.apply(i,arguments),this},s.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},s.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},s.default.prototype.stroke=function(){var i;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(i=this._renderer).stroke.apply(i,arguments),this},s.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},s.default.prototype.noErase=function(){return this._renderer.noErase(),this};var v=s.default;u.default=v},{"../core/constants":272,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],272:[function(t,m,u){Object.defineProperty(u,"__esModule",{value:!0}),u.QUADRATIC=u.LINEAR=u._CTX_MIDDLE=u._DEFAULT_LEADMULT=u._DEFAULT_TEXT_FILL=u.WORD=u.CHAR=u.BOLDITALIC=u.BOLD=u.ITALIC=u.NORMAL=u.BLUR=u.ERODE=u.DILATE=u.POSTERIZE=u.INVERT=u.OPAQUE=u.GRAY=u.THRESHOLD=u.BURN=u.DODGE=u.SOFT_LIGHT=u.HARD_LIGHT=u.OVERLAY=u.REPLACE=u.SCREEN=u.MULTIPLY=u.EXCLUSION=u.SUBTRACT=u.DIFFERENCE=u.LIGHTEST=u.DARKEST=u.ADD=u.REMOVE=u.BLEND=u.UP_ARROW=u.TAB=u.SHIFT=u.RIGHT_ARROW=u.RETURN=u.OPTION=u.LEFT_ARROW=u.ESCAPE=u.ENTER=u.DOWN_ARROW=u.DELETE=u.CONTROL=u.BACKSPACE=u.ALT=u.AUTO=u.HSL=u.HSB=u.RGB=u.MITER=u.BEVEL=u.ROUND=u.SQUARE=u.PROJECT=u.PIE=u.CHORD=u.OPEN=u.CLOSE=u.TESS=u.QUAD_STRIP=u.QUADS=u.TRIANGLE_STRIP=u.TRIANGLE_FAN=u.TRIANGLES=u.LINE_LOOP=u.LINE_STRIP=u.LINES=u.POINTS=u.BASELINE=u.BOTTOM=u.TOP=u.CENTER=u.LEFT=u.RIGHT=u.RADIUS=u.CORNERS=u.CORNER=u.RAD_TO_DEG=u.DEG_TO_RAD=u.RADIANS=u.DEGREES=u.TWO_PI=u.TAU=u.QUARTER_PI=u.PI=u.HALF_PI=u.WAIT=u.TEXT=u.MOVE=u.HAND=u.CROSS=u.ARROW=u.WEBGL2=u.WEBGL=u.P2D=u.VERSION=void 0,u.RGBA=u.HALF_FLOAT=u.FLOAT=u.UNSIGNED_INT=u.UNSIGNED_BYTE=u.COVER=u.CONTAIN=u.FALLBACK=u.LABEL=u.AXES=u.GRID=u._DEFAULT_FILL=u._DEFAULT_STROKE=u.PORTRAIT=u.LANDSCAPE=u.SMOOTH=u.FLAT=u.MIRROR=u.CLAMP=u.REPEAT=u.NEAREST=u.IMAGE=u.IMMEDIATE=u.TEXTURE=u.FILL=u.STROKE=u.CURVE=u.BEZIER=void 0;var a=Math.PI,p=(u.VERSION="1.11.10",u.P2D="p2d",u.WEBGL="webgl",u.WEBGL2="webgl2",u.ARROW="default",u.CROSS="crosshair",u.HAND="pointer",u.MOVE="move",u.TEXT="text",u.WAIT="wait",a/2),p=(u.HALF_PI=p,a),p=(u.PI=p,a/4),p=(u.QUARTER_PI=p,2*a),p=(u.TAU=p,2*a),p=(u.TWO_PI=p,u.DEGREES="degrees",u.RADIANS="radians",a/180),p=(u.DEG_TO_RAD=p,180/a);u.RAD_TO_DEG=p,u.CORNER="corner",u.CORNERS="corners",u.RADIUS="radius",u.RIGHT="right",u.LEFT="left",u.CENTER="center",u.TOP="top",u.BOTTOM="bottom",u.BASELINE="alphabetic",u.POINTS=0,u.LINES=1,u.LINE_STRIP=3,u.LINE_LOOP=2,u.TRIANGLES=4,u.TRIANGLE_FAN=6,u.TRIANGLE_STRIP=5,u.QUADS="quads",u.QUAD_STRIP="quad_strip",u.TESS="tess",u.CLOSE="close",u.OPEN="open",u.CHORD="chord",u.PIE="pie",u.PROJECT="square",u.SQUARE="butt",u.ROUND="round",u.BEVEL="bevel",u.MITER="miter",u.RGB="rgb",u.HSB="hsb",u.HSL="hsl",u.AUTO="auto",u.ALT=18,u.BACKSPACE=8,u.CONTROL=17,u.DELETE=46,u.DOWN_ARROW=40,u.ENTER=13,u.ESCAPE=27,u.LEFT_ARROW=37,u.OPTION=18,u.RETURN=13,u.RIGHT_ARROW=39,u.SHIFT=16,u.TAB=9,u.UP_ARROW=38,u.BLEND="source-over",u.REMOVE="destination-out",u.ADD="lighter",u.DARKEST="darken",u.LIGHTEST="lighten",u.DIFFERENCE="difference",u.SUBTRACT="subtract",u.EXCLUSION="exclusion",u.MULTIPLY="multiply",u.SCREEN="screen",u.REPLACE="copy",u.OVERLAY="overlay",u.HARD_LIGHT="hard-light",u.SOFT_LIGHT="soft-light",u.DODGE="color-dodge",u.BURN="color-burn",u.THRESHOLD="threshold",u.GRAY="gray",u.OPAQUE="opaque",u.INVERT="invert",u.POSTERIZE="posterize",u.DILATE="dilate",u.ERODE="erode",u.BLUR="blur",u.NORMAL="normal",u.ITALIC="italic",u.BOLD="bold",u.BOLDITALIC="bold italic",u.CHAR="CHAR",u.WORD="WORD",u._DEFAULT_TEXT_FILL="#000000",u._DEFAULT_LEADMULT=1.25,u._CTX_MIDDLE="middle",u.LINEAR="linear",u.QUADRATIC="quadratic",u.BEZIER="bezier",u.CURVE="curve",u.STROKE="stroke",u.FILL="fill",u.TEXTURE="texture",u.IMMEDIATE="immediate",u.IMAGE="image",u.NEAREST="nearest",u.REPEAT="repeat",u.CLAMP="clamp",u.MIRROR="mirror",u.FLAT="flat",u.SMOOTH="smooth",u.LANDSCAPE="landscape",u.PORTRAIT="portrait",u._DEFAULT_STROKE="#000000",u._DEFAULT_FILL="#FFFFFF",u.GRID="grid",u.AXES="axes",u.LABEL="label",u.FALLBACK="fallback",u.CONTAIN="contain",u.COVER="cover",u.UNSIGNED_BYTE="unsigned-byte",u.UNSIGNED_INT="unsigned-int",u.FLOAT="float",u.HALF_FLOAT="half-float",u.RGBA="rgba"},{}],273:[function(t,m,u){function a(g){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(g)}function p(g){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(c){return a(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":a(c)})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(h=t("./main"))&&h.__esModule?h:{default:h},h=function(g){if(g&&g.__esModule)return g;if(g===null||p(g)!=="object"&&typeof g!="function")return{default:g};var c=b();if(c&&c.has(g))return c.get(g);var l,w={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(l in g){var _;Object.prototype.hasOwnProperty.call(g,l)&&((_=x?Object.getOwnPropertyDescriptor(g,l):null)&&(_.get||_.set)?Object.defineProperty(w,l,_):w[l]=g[l])}return w.default=g,c&&c.set(g,w),w}(t("./constants"));function b(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,b=function(){return g},g)}var v=[h.ARROW,h.CROSS,h.HAND,h.MOVE,h.TEXT,h.WAIT],i=(s.default.prototype._frameRate=0,s.default.prototype._lastFrameTime=window.performance.now(),s.default.prototype._targetFrameRate=60,window.print),d=!1;function f(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function y(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}s.default.prototype.print=function(){var g;arguments.length?(g=console).log.apply(g,arguments):d||(i(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(d=!0))},s.default.prototype.frameCount=0,s.default.prototype.deltaTime=0,s.default.prototype.focused=document.hasFocus(),s.default.prototype.cursor=function(g,c,l){var w,x="auto",_=this._curElement.elt;v.includes(g)?x=g:typeof g=="string"&&(w="",c&&l&&typeof c=="number"&&typeof l=="number"&&(w="".concat(c," ").concat(l)),x=g.substring(0,7)==="http://"||g.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(g)?"url(".concat(g,") ").concat(w,", auto"):g),_.style.cursor=x},s.default.prototype.frameRate=function(g){return s.default._validateParameters("frameRate",arguments),typeof g!="number"||g<0?this._frameRate:(this._setProperty("_targetFrameRate",g),g===0&&this._setProperty("_frameRate",g),this)},s.default.prototype.getFrameRate=function(){return this.frameRate()},s.default.prototype.setFrameRate=function(g){return this.frameRate(g)},s.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},s.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},s.default.prototype.webglVersion=h.P2D,s.default.prototype.displayWidth=screen.width,s.default.prototype.displayHeight=screen.height,s.default.prototype.windowWidth=0,s.default.prototype.windowHeight=0,s.default.prototype._onresize=function(g){this._setProperty("windowWidth",f()),this._setProperty("windowHeight",y());var c=this._isGlobal?window:this;typeof c.windowResized!="function"||(c=c.windowResized(g))===void 0||c||g.preventDefault()},s.default.prototype._updateWindowSize=function(){this._setProperty("windowWidth",f()),this._setProperty("windowHeight",y())},s.default.prototype.width=0,s.default.prototype.height=0,s.default.prototype.fullscreen=function(g){if(s.default._validateParameters("fullscreen",arguments),g===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(g){if(g=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");g.requestFullscreen?g.requestFullscreen():g.mozRequestFullScreen?g.mozRequestFullScreen():g.webkitRequestFullscreen?g.webkitRequestFullscreen():g.msRequestFullscreen&&g.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},s.default.prototype.pixelDensity=function(g){var c;return s.default._validateParameters("pixelDensity",arguments),typeof g=="number"?(g!==this._pixelDensity&&(this._pixelDensity=this._maxAllowedPixelDimensions=g),(c=this).resizeCanvas(this.width,this.height,!0)):c=this._pixelDensity,c},s.default.prototype.displayDensity=function(){return window.devicePixelRatio},s.default.prototype.getURL=function(){return location.href},s.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(g){return g!==""})},s.default.prototype.getURLParams=function(){for(var g,c=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,l={};(g=c.exec(location.search))!=null;)g.index===c.lastIndex&&c.lastIndex++,l[g[1]]=g[2];return l},t=s.default,u.default=t},{"./constants":272,"./main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.search":205,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],274:[function(t,m,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(v=t("../main"))&&v.__esModule?v:{default:v};t("../internationalization");function p(i,d){d=d||console.log.bind(console),s||b(),s.some(function(f){var y;if(i.message&&i.message.match("\\W?".concat(f.name,"\\W"))!==null)return y=f.type==="function"?"".concat(f.name,"()"):f.name,d("Did you just try to use p5.js's ".concat(y," ").concat(f.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(h)),!0})}var s=null,b=null,h=(a.default._friendlyError=a.default._checkForUserDefinedFunctions=a.default._fesErrorMonitor=function(){},s=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),b=function(){function i(f){return Object.getOwnPropertyNames(f).filter(function(y){return y[0]!=="_"&&!(y in d)&&(d[y]=!0)}).map(function(y){var g=typeof f[y]=="function"?"function":y===y.toUpperCase()?"constant":"variable";return{name:y,type:g}})}var d={};(s=[].concat(i(a.default.prototype),i(t("../constants")))).sort(function(f,y){return y.name.length-f.name.length})},v=(a.default.prototype._helpForMisusedAtTopLevelCode=p,document.readyState!=="complete"&&(window.addEventListener("error",p,!1),window.addEventListener("load",function(){window.removeEventListener("error",p,!1)})),a.default);u.default=v},{"../constants":272,"../internationalization":281,"../main":283,"./browser_errors":void 0,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.starts-with":207,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],275:[function(t,m,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(a=t("../main"))&&a.__esModule?a:{default:a};t("../internationalization"),a.default._friendlyFileLoadError=function(){},t=a.default,u.default=t},{"../internationalization":281,"../main":283}],276:[function(t,m,u){function a(d){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function p(d){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(f){return a(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":a(f)})(d)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=v(t("../main"));t("../internationalization"),b(t("../constants"));function h(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,h=function(){return d},d)}function b(d){if(d&&d.__esModule)return d;if(d===null||p(d)!=="object"&&typeof d!="function")return{default:d};var f=h();if(f&&f.has(d))return f.get(d);var y,g,c={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in d)Object.prototype.hasOwnProperty.call(d,y)&&((g=l?Object.getOwnPropertyDescriptor(d,y):null)&&(g.get||g.set)?Object.defineProperty(c,y,g):c[y]=d[y]);return c.default=d,f&&f.set(d,c),c}function v(d){return d&&d.__esModule?d:{default:d}}s.default._fesCodeReader=function(){};var i=s.default;u.default=i},{"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],277:[function(t,m,u){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../main"))&&t.__esModule?t:{default:t};function a(){var p=/(^|@)\S+:\d+/,s=/^\s*at .*(\S+:\d+|\(native\))/m,h=/^(eval@)?(\[native code])?$/;return{parse:function(b){return b.stacktrace!==void 0||b["opera#sourceloc"]!==void 0?this.parseOpera(b):b.stack&&b.stack.match(s)?this.parseV8OrIE(b):b.stack?this.parseFFOrSafari(b):void 0},extractLocation:function(b){return b.indexOf(":")===-1?[b]:[(b=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(b.replace(/[()]/g,"")))[1],b[2]||void 0,b[3]||void 0]},parseV8OrIE:function(b){return b.stack.split(`
`).filter(function(v){return!!v.match(s)},this).map(function(v){var i=(v=-1<v.indexOf("(eval ")?v.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):v).replace(/^\s+/,"").replace(/\(eval code/g,"("),d=i.match(/ (\((.+):(\d+):(\d+)\)$)/),i=(i=d?i.replace(d[0],""):i).split(/\s+/).slice(1),d=this.extractLocation(d?d[1]:i.pop());return{functionName:i.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(d[0])?void 0:d[0],lineNumber:d[1],columnNumber:d[2],source:v}},this)},parseFFOrSafari:function(b){return b.stack.split(`
`).filter(function(v){return!v.match(h)},this).map(function(v){var i,d;return(v=-1<v.indexOf(" > eval")?v.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):v).indexOf("@")===-1&&v.indexOf(":")===-1?{functionName:v}:{functionName:(d=v.match(i=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&d[1]?d[1]:void 0,fileName:(d=this.extractLocation(v.replace(i,"")))[0],lineNumber:d[1],columnNumber:d[2],source:v}},this)},parseOpera:function(b){return!b.stacktrace||-1<b.message.indexOf(`
`)&&b.message.split(`
`).length>b.stacktrace.split(`
`).length?this.parseOpera9(b):b.stack?this.parseOpera11(b):this.parseOpera10(b)},parseOpera9:function(b){for(var v=/Line (\d+).*script (?:in )?(\S+)/i,i=b.message.split(`
`),d=[],f=2,y=i.length;f<y;f+=2){var g=v.exec(i[f]);g&&d.push({fileName:g[2],lineNumber:g[1],source:i[f]})}return d},parseOpera10:function(b){for(var v=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,i=b.stacktrace.split(`
`),d=[],f=0,y=i.length;f<y;f+=2){var g=v.exec(i[f]);g&&d.push({functionName:g[3]||void 0,fileName:g[2],lineNumber:g[1],source:i[f]})}return d},parseOpera11:function(b){return b.stack.split(`
`).filter(function(v){return!!v.match(p)&&!v.match(/^Error created at/)},this).map(function(v){var i,f=v.split("@"),d=this.extractLocation(f.pop()),f=f.shift()||"";return{functionName:f.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(i=f.match(/\(([^)]*)\)/)?f.replace(/^[^(]+\(([^)]*)\)$/,"$1"):i)===void 0||i==="[arguments not available]"?void 0:i.split(","),fileName:d[0],lineNumber:d[1],columnNumber:d[2],source:v}},this)}}}t.default._getErrorStackParser=function(){return new a},t=t.default,u.default=t},{"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],278:[function(t,m,u){function a(b){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var p=(p=t("../main"))&&p.__esModule?p:{default:p};(function(b){if(!(b&&b.__esModule)&&!(b===null||h(b)!=="object"&&typeof b!="function")){var v=s();if(v&&v.has(b))return v.get(b);var i,d={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in b){var y;Object.prototype.hasOwnProperty.call(b,i)&&((y=f?Object.getOwnPropertyDescriptor(b,i):null)&&(y.get||y.set)?Object.defineProperty(d,i,y):d[i]=b[i])}d.default=b,v&&v.set(b,d)}})(t("../constants")),t("../internationalization");function s(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,s=function(){return b},b)}function h(b){return(h=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(v){return a(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":a(v)})(b)}p.default._validateParameters=p.default._clearValidateParamsCache=function(){},t=p.default,u.default=t},{"../../../docs/parameterData.json":void 0,"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],279:[function(t,m,u){function a(b){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(b)}function p(b){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(v){return a(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":a(v)})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=function(b){if(b&&b.__esModule)return b;if(b===null||p(b)!=="object"&&typeof b!="function")return{default:b};var v=h();if(v&&v.has(b))return v.get(b);var i,d={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in b){var y;Object.prototype.hasOwnProperty.call(b,i)&&((y=f?Object.getOwnPropertyDescriptor(b,i):null)&&(y.get||y.set)?Object.defineProperty(d,i,y):d[i]=b[i])}return d.default=b,v&&v.set(b,d),d}(t("./constants"));function h(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,h=function(){return b},b)}u.default={modeAdjust:function(b,v,i,d,f){var y;return f===s.CORNER?y={x:b,y:v,w:Math.abs(i),h:Math.abs(d)}:f===s.CORNERS?y={x:Math.min(b,i),y:Math.min(v,d),w:Math.abs(i-b),h:Math.abs(d-v)}:f===s.RADIUS?y={x:b-(i=Math.abs(i)),y:v-(d=Math.abs(d)),w:2*i,h:2*d}:f===s.CENTER&&(y={x:b-.5*(i=Math.abs(i)),y:v-.5*(d=Math.abs(d)),w:i,h:d}),y}}},{"./constants":272,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],280:[function(t,m,u){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var a=(p=t("../core/main"))&&p.__esModule?p:{default:p};t("./internationalization");var p=Promise.resolve();Promise.all([new Promise(function(s,h){document.readyState==="complete"?s():window.addEventListener("load",s,!1)}),p]).then(function(){var s;window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(s=new Event("p5Ready"),window.dispatchEvent(s),(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!a.default.instance&&new a.default)})},{"../core/main":283,"./internationalization":281,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/web.dom-collections.iterator":246}],281:[function(t,m,u){t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.setTranslatorLanguage=u.currentTranslatorLanguage=u.availableTranslatorLanguages=u.initialize=u.translator=void 0;var a,p,s=b(t("i18next")),h=b(t("i18next-browser-languagedetector"));function b(d){return d&&d.__esModule?d:{default:d}}function v(d,f){for(var y=0;y<f.length;y++){var g=f[y];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,g.key,g)}}var i=function(){function d(g,c){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.init(g,c)}var f,y;return f=d,(y=[{key:"fetchWithTimeout",value:function(g,c){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(g,c),new Promise(function(w,x){return setTimeout(function(){return x(new Error("timeout"))},l)})])}},{key:"init",value:function(g){var c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=g,this.options=c}},{key:"read",value:function(g,c,l){var w=this.options.loadPath;g===this.options.fallback?l(null,a[g][c]):p.includes(g)?(w=this.services.interpolator.interpolate(w,{lng:g,ns:c}),this.loadUrl(w,l)):l("Not found",!1)}},{key:"loadUrl",value:function(g,c){this.fetchWithTimeout(g).then(function(l){if(l.ok)return l.json();throw new Error("failed loading ".concat(g))},function(){throw new Error("failed loading ".concat(g))}).then(function(l){return c(null,l)}).catch(c)}}])&&v(f.prototype,y),d}();i.type="backend",u.translator=function(d,f){console.debug("p5.js translator called before translations were loaded"),s.default.t(d,f)},u.initialize=function(){return s.default.use(h.default).use(i).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:a}).then(function(d){u.translator=d},function(d){return console.debug("Translations failed to load (".concat(d,")"))})},u.availableTranslatorLanguages=function(){return s.default.languages},u.currentTranslatorLanguage=function(d){return s.default.language},u.setTranslatorLanguage=function(d){return s.default.changeLanguage(d||void 0,function(f){return console.debug("Translations failed to load (".concat(f,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246,i18next:3,"i18next-browser-languagedetector":3}],282:[function(t,m,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("./main"))&&t.__esModule?t:{default:t},t.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},t.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},t.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},t.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},t=t.default,u.default=t},{"./main":283}],283:[function(t,m,u){function a(d){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function p(d){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(f){return a(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":a(f)})(d)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t("./shim");var s=function(d){if(d&&d.__esModule)return d;if(d===null||p(d)!=="object"&&typeof d!="function")return{default:d};var f=h();if(f&&f.has(d))return f.get(d);var y,g={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in d){var l;Object.prototype.hasOwnProperty.call(d,y)&&((l=c?Object.getOwnPropertyDescriptor(d,y):null)&&(l.get||l.set)?Object.defineProperty(g,y,l):g[y]=d[y])}return g.default=d,f&&f.set(d,g),g}(t("./constants"));function h(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,h=function(){return d},d)}function b(d,f){for(var y=0;y<f.length;y++){var g=f[y];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,g.key,g)}}var v,i=function(){function d(g,w){var l=this;if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this._isGlobal=!g,this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._maxAllowedPixelDimensions=0,this._userNode=w,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this.touchstart=!1,this.touchend=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var w=Object.getOwnPropertyNames(d.prototype._registeredMethods),x=!0,_=!1,T=void 0;try{for(var E,S=w[Symbol.iterator]();!(x=(E=S.next()).done);x=!0){var P=E.value;this._registeredMethods[P]=d.prototype._registeredMethods[P].slice()}}catch(G){_=!0,T=G}finally{try{x||S.return==null||S.return()}finally{if(_)throw T}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),d.prototype.callRegisteredHooksFor=function(G){var V=this||d.prototype,X=this._isGlobal?window:this;if(V._registeredMethods.hasOwnProperty(G)){var V=V._registeredMethods[G],Q=!0,G=!1,se=void 0;try{for(var M,A=V[Symbol.iterator]();!(Q=(M=A.next()).done);Q=!0){var z=M.value;typeof z=="function"&&z.call(X)}}catch(te){G=!0,se=te}finally{try{Q||A.return==null||A.return()}finally{if(G)throw se}}}},this._start=function(){l._userNode&&typeof l._userNode=="string"&&(l._userNode=document.getElementById(l._userNode));var G=l._isGlobal?window:l;if(G.preload){l.callRegisteredHooksFor("beforePreload");var V,X=document.getElementById(l._loadingScreenId),Q=(X||((X=document.createElement("div")).innerHTML="Loading...",X.style.position="absolute",X.id=l._loadingScreenId,(l._userNode||document.body).appendChild(X)),l._preloadMethods);for(V in Q){Q[V]=Q[V]||d;var se=Q[V];se!==d.prototype&&se!==d||(l._isGlobal&&(window[V]=l._wrapPreload(l,V)),se=l),l._registeredPreloadMethods[V]=se[V],se[V]=l._wrapPreload(se,V)}G.preload(),l._runIfPreloadsAreDone()}else l._setup(),l._recording||l._draw()},this._runIfPreloadsAreDone=function(){var G,V=this._isGlobal?window:this;V._preloadCount===0&&((G=document.getElementById(V._loadingScreenId))&&G.parentNode.removeChild(G),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),V._setup(),this._recording||V._draw()))},this._decrementPreload=function(){var G=this._isGlobal?window:this;G._preloadDone||typeof G.preload!="function"||(G._setProperty("_preloadCount",G._preloadCount-1),G._runIfPreloadsAreDone())},this._wrapPreload=function(G,V){var X=this;return function(){X._incrementPreload();for(var Q=arguments.length,se=new Array(Q),M=0;M<Q;M++)se[M]=arguments[M];return X._registeredPreloadMethods[V].apply(G,se)}},this._incrementPreload=function(){var G=this._isGlobal?window:this;G._preloadDone||G._setProperty("_preloadCount",G._preloadCount+1)},this._setup=function(){l.callRegisteredHooksFor("beforeSetup"),l.createCanvas(l._defaultCanvasSize.width,l._defaultCanvasSize.height,"p2d");var G=l._isGlobal?window:l;if(typeof G.preload=="function")for(var V in l._preloadMethods)G[V]=l._preloadMethods[V][V],G[V]&&l&&(G[V]=G[V].bind(l));l._millisStart=window.performance.now(),G._preloadDone=!0,typeof G.setup=="function"&&G.setup();var X=document.getElementsByTagName("canvas"),Q=!0,se=!1,M=void 0;try{for(var A,z=X[Symbol.iterator]();!(Q=(A=z.next()).done);Q=!0){var $=A.value;$.dataset.hidden==="true"&&($.style.visibility="",delete $.dataset.hidden)}}catch(Z){se=!0,M=Z}finally{try{Q||z.return==null||z.return()}finally{if(se)throw M}}l._lastTargetFrameTime=window.performance.now(),l._lastRealFrameTime=window.performance.now(),l._setupDone=!0,(l._accessibleOutputs.grid||l._accessibleOutputs.text)&&l._updateAccsOutput(),l.callRegisteredHooksFor("afterSetup")},this._draw=function(V){var V=V||window.performance.now(),X=V-l._lastTargetFrameTime,Q=1e3/l._targetFrameRate;(!l._loop||Q-5<=X)&&(l.deltaTime=V-l._lastRealFrameTime,l._setProperty("deltaTime",l.deltaTime),l._frameRate=1e3/l.deltaTime,l.redraw(),l._lastTargetFrameTime=Math.max(l._lastTargetFrameTime+Q,V),l._lastRealFrameTime=V,l._updateMouseCoords!==void 0&&(l._updateMouseCoords(),l._setProperty("movedX",0),l._setProperty("movedY",0))),l._loop&&(l._requestAnimId=window.requestAnimationFrame(l._draw))},this._setProperty=function(G,V){l[G]=V,l._isGlobal&&(window[G]=V)},this.remove=function(){l._startListener&&window.removeEventListener("load",l._startListener,!1);var G=document.getElementById(l._loadingScreenId);if(G&&(G.parentNode.removeChild(G),l._incrementPreload()),l._curElement){for(var V in l._loop=!1,l._requestAnimId&&window.cancelAnimationFrame(l._requestAnimId),l._events)window.removeEventListener(V,l._events[V]);var X=!0,G=!1,Q=void 0;try{for(var se,M=l._elements[Symbol.iterator]();!(X=(se=M.next()).done);X=!0){var A,z=se.value;for(A in z.elt&&z.elt.parentNode&&z.elt.parentNode.removeChild(z.elt),z._events)z.elt.removeEventListener(A,z._events[A])}}catch(he){G=!0,Q=he}finally{try{X||M.return==null||M.return()}finally{if(G)throw Q}}var $=l;l._registeredMethods.remove.forEach(function(he){he!==void 0&&he.call($)})}if(l._isGlobal){for(var Z in d.prototype)try{delete window[Z]}catch{window[Z]=void 0}for(var te in l)if(l.hasOwnProperty(te))try{delete window[te]}catch{window[te]=void 0}d.instance=null}};var N,C,D=this._createFriendlyGlobalFunctionBinder();if(this._isGlobal){for(var L in d.instance=this,d.prototype)typeof d.prototype[L]=="function"?(N=L.substring(2),this._events.hasOwnProperty(N)||(Math.hasOwnProperty(L)&&Math[L]===d.prototype[L]?D(L,d.prototype[L]):D(L,d.prototype[L].bind(this)))):D(L,d.prototype[L]);for(var F in this)this.hasOwnProperty(F)&&D(F,this[F])}else g(this),d._checkForUserDefinedFunctions(this);for(C in this._updateWindowSize(),this.callRegisteredHooksFor("init"),this._setupPromisePreloads(),this._events){var I=this["_on".concat(C)];I&&(I=I.bind(this),window.addEventListener(C,I,{passive:!1}),this._events[C]=I)}function B(){l._setProperty("focused",!0)}function W(){l._setProperty("focused",!1)}window.addEventListener("focus",B),window.addEventListener("blur",W),this.registerMethod("remove",function(){window.removeEventListener("focus",B),window.removeEventListener("blur",W)}),document.readyState==="complete"?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var f,y;return f=d,(y=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=s.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(g,c){d.prototype._preloadMethods.hasOwnProperty(g)||(d.prototype._preloadMethods[g]=c)}},{key:"registerMethod",value:function(g,c){var l=this||d.prototype;l._registeredMethods.hasOwnProperty(g)||(l._registeredMethods[g]=[]),l._registeredMethods[g].push(c)}},{key:"unregisterMethod",value:function(g,c){var l=this||d.prototype;if(l._registeredMethods.hasOwnProperty(g)){for(var w=l._registeredMethods[g],x=[],_=0;_<w.length;_++)w[_]===c&&x.push(_);for(var T=x.length-1;0<=T;T--)w.splice(x[T],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var g=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},c=g.globalObject||window;return g.log||console.log.bind(console),function(l,w){d.disableFriendlyErrors,c[l]=w}}}])&&b(f.prototype,y),d}();for(v in i.instance=null,i.disableFriendlyErrors=!1,s)i.prototype[v]=s[v];i.VERSION=s.VERSION,i.prototype._preloadMethods={loadJSON:i.prototype,loadImage:i.prototype,loadStrings:i.prototype,loadXML:i.prototype,loadBytes:i.prototype,loadTable:i.prototype,loadFont:i.prototype,loadModel:i.prototype,loadShader:i.prototype},i.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},i.prototype._registeredPreloadMethods={},u.default=i},{"./constants":272,"./shim":294,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],284:[function(t,m,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(t=t("./main"))&&t.__esModule?t:{default:t};function p(s,h){for(var b=0;b<h.length;b++){var v=h[b];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(s,v.key,v)}}a.default.Element=function(){function s(i,d){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");this.elt=i,this._pInst=this._pixelsState=d,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var h,b,v;return h=s,v=[{key:"_adjustListener",value:function(i,d,f){return d===!1?a.default.Element._detachListener(i,f):a.default.Element._attachListener(i,d,f),this}},{key:"_attachListener",value:function(i,d,f){f._events[i]&&a.default.Element._detachListener(i,f),d=d.bind(f),f.elt.addEventListener(i,d,!1),f._events[i]=d}},{key:"_detachListener",value:function(i,d){var f=d._events[i];d.elt.removeEventListener(i,f,!1),d._events[i]=null}}],(b=[{key:"parent",value:function(i){return i===void 0?this.elt.parentNode:(typeof i=="string"?(i[0]==="#"&&(i=i.substring(1)),i=document.getElementById(i)):i instanceof a.default.Element&&(i=i.elt),i.appendChild(this.elt),this)}},{key:"id",value:function(i){return i===void 0?this.elt.id:(this.elt.id=i,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(i){return i===void 0?this.elt.className:(this.elt.className=i,this)}},{key:"mousePressed",value:function(i){return a.default.Element._adjustListener("mousedown",function(d){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(d),i.call(this,d)},this),this}},{key:"doubleClicked",value:function(i){return a.default.Element._adjustListener("dblclick",i,this),this}},{key:"mouseWheel",value:function(i){return a.default.Element._adjustListener("wheel",i,this),this}},{key:"mouseReleased",value:function(i){return a.default.Element._adjustListener("mouseup",i,this),this}},{key:"mouseClicked",value:function(i){return a.default.Element._adjustListener("click",i,this),this}},{key:"mouseMoved",value:function(i){return a.default.Element._adjustListener("mousemove",i,this),this}},{key:"mouseOver",value:function(i){return a.default.Element._adjustListener("mouseover",i,this),this}},{key:"mouseOut",value:function(i){return a.default.Element._adjustListener("mouseout",i,this),this}},{key:"touchStarted",value:function(i){return a.default.Element._adjustListener("touchstart",i,this),this}},{key:"touchMoved",value:function(i){return a.default.Element._adjustListener("touchmove",i,this),this}},{key:"touchEnded",value:function(i){return a.default.Element._adjustListener("touchend",i,this),this}},{key:"dragOver",value:function(i){return a.default.Element._adjustListener("dragover",i,this),this}},{key:"dragLeave",value:function(i){return a.default.Element._adjustListener("dragleave",i,this),this}},{key:"_setProperty",value:function(i,d){this[i]=d}}])&&p(h.prototype,b),v&&p(h,v),s}(),t=a.default.Element,u.default=t},{"./main":283}],285:[function(t,m,u){function a(l){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(l)}function p(l){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(l)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(c=t("./main"))&&c.__esModule?c:{default:c},h=function(l){if(l&&l.__esModule)return l;if(l===null||p(l)!=="object"&&typeof l!="function")return{default:l};var w=b();if(w&&w.has(l))return w.get(l);var x,_={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in l){var E;Object.prototype.hasOwnProperty.call(l,x)&&((E=T?Object.getOwnPropertyDescriptor(l,x):null)&&(E.get||E.set)?Object.defineProperty(_,x,E):_[x]=l[x])}return _.default=l,w&&w.set(l,_),_}(t("./constants"));function b(){var l;return typeof WeakMap!="function"?null:(l=new WeakMap,b=function(){return l},l)}function v(l,w){for(var x=0;x<w.length;x++){var _=w[x];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(l,_.key,_)}}function i(l,w){return(i=Object.setPrototypeOf||function(x,_){return x.__proto__=_,x})(l,w)}function d(l){return function(){var w,x=g(l);return f(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=g(this).constructor,Reflect.construct(x,arguments,w)):x.apply(this,arguments))}}function f(l,w){return!w||p(w)!=="object"&&typeof w!="function"?y(l):w}function y(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function g(l){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(l)}s.default.Graphics=function(l){var w=_;if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(l&&l.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),l&&i(w,l);var x=d(_);function _(T,E,F,P,N){var C;if(!(this instanceof _))throw new TypeError("Cannot call a class as a function");L=N||document.createElement("canvas"),(C=x.call(this,L,P)).canvas=L;var D,L=F||h.P2D,F=P._userNode||document.body;for(D in N||F.appendChild(C.canvas),s.default.prototype)C[D]||(typeof s.default.prototype[D]=="function"?C[D]=s.default.prototype[D].bind(y(C)):C[D]=s.default.prototype[D]);return s.default.prototype._initializeInstanceVariables.apply(y(C)),C.width=T,C.height=E,C._pixelDensity=P._pixelDensity,L===h.WEBGL?(C._renderer=new s.default.RendererGL(C.canvas,y(C),!1),T=(N=C._renderer._adjustDimensions(T,E)).adjustedWidth,E=N.adjustedHeight):C._renderer=new s.default.Renderer2D(C.canvas,y(C),!1),P._elements.push(y(C)),Object.defineProperty(y(C),"deltaTime",{get:function(){return this._pInst.deltaTime}}),C._renderer.resize(T,E),C._renderer._applyDefaults(),f(C,y(C))}return w=_,(l=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var T,E=this._pInst._elements.indexOf(this);for(T in E!==-1&&this._pInst._elements.splice(E,1),this._events)this.elt.removeEventListener(T,this._events[T]);this._renderer=void 0,this.canvas=void 0,this.elt=void 0}},{key:"createFramebuffer",value:function(T){return new s.default.Framebuffer(this,T)}}])&&v(w.prototype,l),_}(s.default.Element);var c=s.default.Graphics;u.default=c},{"./constants":272,"./main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],286:[function(t,m,u){function a(l){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(l)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var p=(g=t("./main"))&&g.__esModule?g:{default:g},s=function(l){if(l&&l.__esModule)return l;if(l===null||b(l)!=="object"&&typeof l!="function")return{default:l};var w=h();if(w&&w.has(l))return w.get(l);var x,_={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in l){var E;Object.prototype.hasOwnProperty.call(l,x)&&((E=T?Object.getOwnPropertyDescriptor(l,x):null)&&(E.get||E.set)?Object.defineProperty(_,x,E):_[x]=l[x])}return _.default=l,w&&w.set(l,_),_}(t("../core/constants"));function h(){var l;return typeof WeakMap!="function"?null:(l=new WeakMap,h=function(){return l},l)}function b(l){return(b=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(l)}function v(l,w){for(var x=0;x<w.length;x++){var _=w[x];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(l,_.key,_)}}function i(l,w){return(i=Object.setPrototypeOf||function(x,_){return x.__proto__=_,x})(l,w)}function d(l){return function(){var w,x,_=y(l);return w=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=y(this).constructor,Reflect.construct(_,arguments,w)):_.apply(this,arguments),_=this,!(x=w)||b(x)!=="object"&&typeof x!="function"?f(_):x}}function f(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function y(l){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(l)}var g=function(l){var w=_;if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(l&&l.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),l&&i(w,l);var x=d(_);function _(T,E,S){var P;if(this instanceof _)return(P=x.call(this,T,E)).canvas=T,P._pixelsState=E,S?(P._isMainCanvas=!0,P._pInst._setProperty("_curElement",f(P)),P._pInst._setProperty("canvas",P.canvas),P._pInst._setProperty("width",P.width),P._pInst._setProperty("height",P.height)):(P.canvas.style.display="none",P._styles=[]),P._clipping=!1,P._clipInvert=!1,P._textSize=12,P._textLeading=15,P._textFont="sans-serif",P._textStyle=s.NORMAL,P._textAscent=null,P._textDescent=null,P._textAlign=s.LEFT,P._textBaseline=s.BASELINE,P._textWrap=s.WORD,P._rectMode=s.CORNER,P._ellipseMode=s.CENTER,P._curveTightness=0,P._imageMode=s.CORNER,P._tint=null,P._doStroke=!0,P._doFill=!0,P._strokeSet=!1,P._fillSet=!1,P._leadingSet=!1,P._pushPopDepth=0,P;throw new TypeError("Cannot call a class as a function")}return w=_,(l=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(T){this._pushPopDepth--,T.properties&&Object.assign(this,T.properties)}},{key:"beginClip",value:function(){var T=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=T.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(T,E){this.width=T,this.height=E,this.elt.width=T*this._pInst._pixelDensity,this.elt.height=E*this._pInst._pixelDensity,this.elt.style.width="".concat(T,"px"),this.elt.style.height="".concat(E,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(T,E,S,P){var N=this._pixelsState,C=N._pixelDensity,D=this.canvas;if(T===void 0&&E===void 0)T=E=0,S=N.width,P=N.height;else if(T*=C,E*=C,S===void 0&&P===void 0)return T<0||E<0||T>=D.width||E>=D.height?[0,0,0,0]:this._getPixel(T,E);return N=new p.default.Image(S*C,P*C),N.pixelDensity(C),N.canvas.getContext("2d").drawImage(D,T,E,S*C,P*C,0,0,S*C,P*C),N}},{key:"textLeading",value:function(T){return typeof T=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",T),this._pInst):this._textLeading}},{key:"textStyle",value:function(T){return T?(T!==s.NORMAL&&T!==s.ITALIC&&T!==s.BOLD&&T!==s.BOLDITALIC||this._setProperty("_textStyle",T),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(T,E){return T!==void 0?(this._setProperty("_textAlign",T),E!==void 0&&this._setProperty("_textBaseline",E),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(T){return this._setProperty("_textWrap",T),this._textWrap}},{key:"text",value:function(T,E,S,P,N){var C,D,L,F,I=this._pInst,B=this._textWrap,W=Number.MAX_VALUE,G=S;if((this._doFill||this._doStroke)&&T!==void 0){if(C=(T=(T=typeof T!="string"?T.toString():T).replace(/(\t)/g,"  ")).split(`
`),P!==void 0){switch(this._rectMode===s.CENTER&&(E-=P/2),this._textAlign){case s.CENTER:E+=P/2;break;case s.RIGHT:E+=P}if(N!==void 0){this._rectMode===s.CENTER&&(S-=N/2,G-=N/2);var T=S,V=I.textAscent();switch(this._textBaseline){case s.BOTTOM:F=S+N,S=Math.max(F,S),G+=V;break;case s.CENTER:F=S+N/2,S=Math.max(F,S),G+=V/2}W=S+N-V,this._textBaseline===s.CENTER&&(W=T+N-V/2)}else this._textBaseline!==s.BOTTOM&&this._textBaseline!==s.CENTER||(G=S-(T=I.textSize()*this._textLeading)/2,W=S+T/2);if(B===s.WORD){for(var X=[],Q=0;Q<C.length;Q++){for(var se="",M=C[Q].split(" "),A=0;A<M.length;A++)D="".concat(se+M[A])+" ",se=P<(L=this.textWidth(D))&&0<se.length?(X.push(se),"".concat(M[A])+" "):D;X.push(se)}var z=0;this._textBaseline===s.CENTER?z=(X.length-1)*I.textLeading()/2:this._textBaseline===s.BOTTOM&&(z=(X.length-1)*I.textLeading());for(var $=0;$<C.length;$++){se="",M=C[$].split(" ");for(var Z=0;Z<M.length;Z++)D="".concat(se+M[Z])+" ",P<(L=this.textWidth(D))&&0<se.length?(this._renderText(I,se.trim(),E,S-z,W,G),se="".concat(M[Z])+" ",S+=I.textLeading()):se=D;this._renderText(I,se.trim(),E,S-z,W,G),S+=I.textLeading()}}else{for(var te=[],ie=0;ie<C.length;ie++)for(var he=C[ie].split(se=""),oe=0;oe<he.length;oe++)D="".concat(se+he[oe]),(L=this.textWidth(D))<=P?se+=he[oe]:P<L&&0<se.length&&(te.push(se),se="".concat(he[oe]));te.push(se);var ce=0;this._textBaseline===s.CENTER?ce=(te.length-1)*I.textLeading()/2:this._textBaseline===s.BOTTOM&&(ce=(te.length-1)*I.textLeading());for(var fe=0;fe<C.length;fe++){he=C[fe].split(se="");for(var ee=0;ee<he.length;ee++)D="".concat(se+he[ee]),(L=this.textWidth(D))<=P?se+=he[ee]:P<L&&0<se.length&&(this._renderText(I,se.trim(),E,S-ce,W,G),S+=I.textLeading(),se="".concat(he[ee]))}this._renderText(I,se.trim(),E,S-ce,W,G),S+=I.textLeading()}}else{var de=0;this._textBaseline===s.CENTER?de=(C.length-1)*I.textLeading()/2:this._textBaseline===s.BOTTOM&&(de=(C.length-1)*I.textLeading());for(var ye=0;ye<C.length;ye++)this._renderText(I,C[ye],E,S-de,W,G-de),S+=I.textLeading()}return I}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var T=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return b(T)==="object"&&T.font&&T.font.supported}},{key:"_updateTextMetrics",value:function(){var T,E,S,P,N,C;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((T=document.createElement("span")).style.fontFamily=this._textFont,T.style.fontSize="".concat(this._textSize,"px"),T.innerHTML="ABCjgq|",(C=document.createElement("div")).style.display="inline-block",C.style.width="1px",C.style.height="0px",P=((E=document.createElement("div")).appendChild(T),E.appendChild(C),E.style.height="0px",E.style.overflow="hidden",document.body.appendChild(E),C.style.verticalAlign="baseline",c(C)),N=c(T),S=P[1]-N[1],P=(C.style.verticalAlign="bottom",c(C)),N=c(T),C=P[1]-N[1]-S,document.body.removeChild(E),this._setProperty("_textAscent",S),this._setProperty("_textDescent",C)),this}}])&&v(w.prototype,l),_}(p.default.Element);function c(l){var w=0,x=0;if(l.offsetParent)for(;w+=l.offsetLeft,x+=l.offsetTop,l=l.offsetParent;);else w+=l.offsetLeft,x+=l.offsetTop;return[w,x]}g.prototype.textSize=function(l){return typeof l=="number"?(this._setProperty("_textSize",l),this._leadingSet||this._setProperty("_textLeading",l*s._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},p.default.Renderer=g,t=p.default.Renderer,u.default=t},{"../core/constants":272,"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],287:[function(l,m,u){function a(w){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(w)}function p(w){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(x){return a(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":a(x)})(w)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.reflect.construct"),l("core-js/modules/es.reflect.get"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(c=l("./main"))&&c.__esModule?c:{default:c},h=function(w){if(w&&w.__esModule)return w;if(w===null||p(w)!=="object"&&typeof w!="function")return{default:w};var x=b();if(x&&x.has(w))return x.get(w);var _,T={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in w){var S;Object.prototype.hasOwnProperty.call(w,_)&&((S=E?Object.getOwnPropertyDescriptor(w,_):null)&&(S.get||S.set)?Object.defineProperty(T,_,S):T[_]=w[_])}return T.default=w,x&&x.set(w,T),T}(l("./constants"));function b(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,b=function(){return w},w)}function v(w,x){for(var _=0;_<x.length;_++){var T=x[_];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(w,T.key,T)}}function i(w,x,_){return(i=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(P,E,S){var P=function(N,C){for(;!Object.prototype.hasOwnProperty.call(N,C)&&(N=y(N))!==null;);return N}(P,E);if(P)return(P=Object.getOwnPropertyDescriptor(P,E)).get?P.get.call(S):P.value})(w,x,_||w)}function d(w,x){return(d=Object.setPrototypeOf||function(_,T){return _.__proto__=T,_})(w,x)}function f(w){return function(){var x,_=y(w),_=(x=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(x=y(this).constructor,Reflect.construct(_,arguments,x)):_.apply(this,arguments),this);if(!x||p(x)!=="object"&&typeof x!="function"){if(_!==void 0)return _;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return x}}function y(w){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)})(w)}l("./p5.Renderer");var g="rgba(0,0,0,0)",c=function(w){var x=T;if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(w&&w.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),w&&d(x,w);var _=f(T);function T(E,S,P){if(this instanceof T)return(E=_.call(this,E,S,P)).drawingContext=E.canvas.getContext("2d"),E._pInst._setProperty("drawingContext",E.drawingContext),E;throw new TypeError("Cannot call a class as a function")}return x=T,(w=[{key:"getFilterGraphicsLayer",value:function(){var E;return this.filterGraphicsLayer||(E=(this._pInst instanceof s.default.Graphics?this._pInst:this)._pInst,this.filterGraphicsLayer=new s.default.Graphics(this.width,this.height,h.WEBGL,E)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=h.BLEND,this._setFill(h._DEFAULT_FILL),this._setStroke(h._DEFAULT_STROKE),this.drawingContext.lineCap=h.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(E,S){i(y(T.prototype),"resize",this).call(this,E,S),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var E,S;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof s.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(E=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(E,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(E=this._getFill(),S=(S=this._pInst).color.apply(S,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(S.levels),S=S.toString(),this._setFill(S),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(E),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var E=(E=this._pInst).color.apply(E,arguments);this._setFill(E.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",E.levels)}},{key:"stroke",value:function(){var E=(E=this._pInst).color.apply(E,arguments);this._setStroke(E.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",E.levels)}},{key:"erase",value:function(E,S){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,E=this._pInst.color(255,E).toString(),this.drawingContext.fillStyle=E,this._cachedStrokeStyle=this.drawingContext.strokeStyle,E=this._pInst.color(255,S).toString(),this.drawingContext.strokeStyle=E,S=this._cachedBlendMode,this.blendMode(h.REMOVE),this._cachedBlendMode=S,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var E=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},E=(i(y(T.prototype),"beginClip",this).call(this,E),this._cachedFillStyle=this.drawingContext.fillStyle,this._pInst.color(255,0).toString()),E=(this.drawingContext.fillStyle=E,this._cachedStrokeStyle=this.drawingContext.strokeStyle,this._pInst.color(255,0).toString()),E=(this.drawingContext.strokeStyle=E,this._cachedBlendMode);this.blendMode(h.BLEND),this._cachedBlendMode=E,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),i(y(T.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(E,S,P,N,C,D,L,F,I){E.gifProperties&&E._animateGif(this._pInst);try{s.default.MediaElement&&E instanceof s.default.MediaElement&&E._ensureCanvas();var B=(B=this._tint&&E.canvas?this._getTintedImageCanvas(E):B)||E.canvas||E.elt,W=1;E.width&&0<E.width&&(W=B.width/E.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(B,W*S,W*P,W*N,W*C,D,L,F,I),this._isErasing&&this._pInst.erase()}catch(G){if(G.name!=="NS_ERROR_NOT_AVAILABLE")throw G}}},{key:"_getTintedImageCanvas",value:function(E){if(!E.canvas)return E;E.tintCanvas||(E.tintCanvas=document.createElement("canvas")),E.tintCanvas.width!==E.canvas.width&&(E.tintCanvas.width=E.canvas.width),E.tintCanvas.height!==E.canvas.height&&(E.tintCanvas.height=E.canvas.height);var S=E.tintCanvas.getContext("2d");return S.save(),S.clearRect(0,0,E.canvas.width,E.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(S.drawImage(E.canvas,0,0),S.globalCompositeOperation="luminosity",S.drawImage(E.canvas,0,0),S.globalCompositeOperation="color",S.drawImage(E.canvas,0,0),S.globalCompositeOperation="multiply",S.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),S.fillRect(0,0,E.canvas.width,E.canvas.height),S.globalCompositeOperation="destination-in"),S.globalAlpha=this._tint[3]/255,S.drawImage(E.canvas,0,0),S.restore(),E.tintCanvas}},{key:"blendMode",value:function(E){if(E===h.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(E!==h.BLEND&&E!==h.REMOVE&&E!==h.DARKEST&&E!==h.LIGHTEST&&E!==h.DIFFERENCE&&E!==h.MULTIPLY&&E!==h.EXCLUSION&&E!==h.SCREEN&&E!==h.REPLACE&&E!==h.OVERLAY&&E!==h.HARD_LIGHT&&E!==h.SOFT_LIGHT&&E!==h.DODGE&&E!==h.BURN&&E!==h.ADD)throw new Error("Mode ".concat(E," not recognized."));this._cachedBlendMode=E,this.drawingContext.globalCompositeOperation=E}}},{key:"blend",value:function(){for(var E=this.drawingContext.globalCompositeOperation,S=arguments.length,P=new Array(S),N=0;N<S;N++)P[N]=arguments[N];var C=P[P.length-1],D=Array.prototype.slice.call(P,0,P.length-1);this.drawingContext.globalCompositeOperation=C,s.default.prototype.copy.apply(this,D),this.drawingContext.globalCompositeOperation=E}},{key:"_getPixel",value:function(E,S){return E=this.drawingContext.getImageData(E,S,1,1).data,[E[0],E[1],E[2],E[3]]}},{key:"loadPixels",value:function(){var E=this._pixelsState,S=E._pixelDensity,P=this.width*S,S=this.height*S,P=this.drawingContext.getImageData(0,0,P,S);E._setProperty("imageData",P),E._setProperty("pixels",P.data)}},{key:"set",value:function(E,S,P){E=Math.floor(E),S=Math.floor(S);var N=this._pixelsState;if(P instanceof s.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(N._pixelDensity,N._pixelDensity),this.drawingContext.clearRect(E,S,P.width,P.height),this.drawingContext.drawImage(P.canvas,E,S),this.drawingContext.restore();else{var C=0,D=0,L=0,F=0,I=4*(S*N._pixelDensity*(this.width*N._pixelDensity)+E*N._pixelDensity);if(N.imageData||N.loadPixels(),typeof P=="number")I<N.pixels.length&&(L=D=C=P,F=255);else if(Array.isArray(P)){if(P.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");I<N.pixels.length&&(C=P[0],D=P[1],L=P[2],F=P[3])}else P instanceof s.default.Color&&I<N.pixels.length&&(C=P.levels[0],D=P.levels[1],L=P.levels[2],F=P.levels[3]);for(var B=0;B<N._pixelDensity;B++)for(var W=0;W<N._pixelDensity;W++)I=4*((S*N._pixelDensity+W)*this.width*N._pixelDensity+(E*N._pixelDensity+B)),N.pixels[I]=C,N.pixels[I+1]=D,N.pixels[I+2]=L,N.pixels[I+3]=F}}},{key:"updatePixels",value:function(E,S,P,N){var C=this._pixelsState,D=C._pixelDensity;E===void 0&&S===void 0&&P===void 0&&N===void 0&&(S=E=0,P=this.width,N=this.height),E*=D,S*=D,P*=D,N*=D,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=C.imageData),this.drawingContext.putImageData(C.imageData,0,0,E,S,P,N)}},{key:"arc",value:function(I,B,W,G,C,D,L){var F=this.drawingContext,I=I+W/2,B=B+G/2,W=W/2,G=G/2,V=!(L===h.CHORD||L===h.OPEN||(D-C)%h.TWO_PI==0);return this._doFill&&(this._clipping||F.beginPath(),F.ellipse(I,B,W,G,0,C,D),V&&F.lineTo(I,B),F.closePath(),this._clipping||F.fill()),this._doStroke&&(this._clipping||F.beginPath(),F.ellipse(I,B,W,G,0,C,D),L===h.PIE&&V&&F.lineTo(I,B),L!==h.PIE&&L!==h.CHORD||F.closePath(),this._clipping||F.stroke()),this}},{key:"ellipse",value:function(F){var S=this.drawingContext,P=this._doFill,N=this._doStroke,C=parseFloat(F[0]),D=parseFloat(F[1]),L=parseFloat(F[2]),F=parseFloat(F[3]);if(P&&!N){if(this._getFill()===g)return this}else if(!P&&N&&this._getStroke()===g)return this;C+=L/2,D+=F/2,L/=2,F/=2,this._clipping||S.beginPath(),S.ellipse(C,D,L,F,0,0,2*Math.PI),S.closePath(),!this._clipping&&P&&S.fill(),!this._clipping&&N&&S.stroke()}},{key:"line",value:function(E,S,P,N){var C=this.drawingContext;return this._doStroke&&this._getStroke()!==g&&(this._clipping||C.beginPath(),C.moveTo(E,S),C.lineTo(P,N),C.stroke()),this}},{key:"point",value:function(E,S){var P,N,C=this.drawingContext;return!this._doStroke||this._getStroke()===g?this:(P=this._getStroke(),N=this._getFill(),this._clipping||this._setFill(P),this._clipping||C.beginPath(),C.arc(E,S,C.lineWidth/2,0,h.TWO_PI,!1),void(this._clipping||(C.fill(),this._setFill(N))))}},{key:"quad",value:function(E,S,P,N,C,D,L,F){var I=this.drawingContext,B=this._doFill,W=this._doStroke;if(B&&!W){if(this._getFill()===g)return this}else if(!B&&W&&this._getStroke()===g)return this;return this._clipping||I.beginPath(),I.moveTo(E,S),I.lineTo(P,N),I.lineTo(C,D),I.lineTo(L,F),I.closePath(),!this._clipping&&B&&I.fill(),!this._clipping&&W&&I.stroke(),this}},{key:"rect",value:function(W){var S,P,N=W[0],C=W[1],D=W[2],L=W[3],F=W[4],I=W[5],B=W[6],W=W[7],G=this.drawingContext,V=this._doFill,X=this._doStroke;if(V&&!X){if(this._getFill()===g)return this}else if(!V&&X&&this._getStroke()===g)return this;return this._clipping||G.beginPath(),F===void 0?G.rect(N,C,D,L):(I===void 0&&(I=F),B===void 0&&(B=I),W===void 0&&(W=B),X=(V=Math.abs(D))/2,P=(S=Math.abs(L))/2,G.roundRect(N,C,D,L,[F=S<2*(F=V<2*F?X:F)?P:F,I=S<2*(I=V<2*I?X:I)?P:I,B=S<2*(B=V<2*B?X:B)?P:B,W=S<2*(W=V<2*W?X:W)?P:W])),!this._clipping&&this._doFill&&G.fill(),!this._clipping&&this._doStroke&&G.stroke(),this}},{key:"triangle",value:function(B){var S=this.drawingContext,P=this._doFill,N=this._doStroke,C=B[0],D=B[1],L=B[2],F=B[3],I=B[4],B=B[5];if(P&&!N){if(this._getFill()===g)return this}else if(!P&&N&&this._getStroke()===g)return this;this._clipping||S.beginPath(),S.moveTo(C,D),S.lineTo(L,F),S.lineTo(I,B),S.closePath(),!this._clipping&&P&&S.fill(),!this._clipping&&N&&S.stroke()}},{key:"endShape",value:function(E,S,P,N,C,D,L){if(S.length!==0&&(this._doStroke||this._doFill)){var F,I,B,W=E===h.CLOSE,G=(W&&!D&&S.push(S[0]),S.length);if(P&&L===null){if(3<G){var V=[],X=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(S[1][0],S[1][1]),I=1;I+2<G;I++)F=S[I],V[0]=[F[0],F[1]],V[1]=[F[0]+(X*S[I+1][0]-X*S[I-1][0])/6,F[1]+(X*S[I+1][1]-X*S[I-1][1])/6],V[2]=[S[I+1][0]+(X*S[I][0]-X*S[I+2][0])/6,S[I+1][1]+(X*S[I][1]-X*S[I+2][1])/6],V[3]=[S[I+1][0],S[I+1][1]],this.drawingContext.bezierCurveTo(V[1][0],V[1][1],V[2][0],V[2][1],V[3][0],V[3][1]);W&&this.drawingContext.lineTo(S[I+1][0],S[I+1][1]),this._doFillStrokeClose(W)}}else if(N&&L===null){for(this._clipping||this.drawingContext.beginPath(),I=0;I<G;I++)S[I].isVert?S[I].moveTo?this.drawingContext.moveTo(S[I][0],S[I][1]):this.drawingContext.lineTo(S[I][0],S[I][1]):this.drawingContext.bezierCurveTo(S[I][0],S[I][1],S[I][2],S[I][3],S[I][4],S[I][5]);this._doFillStrokeClose(W)}else if(C&&L===null){for(this._clipping||this.drawingContext.beginPath(),I=0;I<G;I++)S[I].isVert?S[I].moveTo?this.drawingContext.moveTo(S[I][0],S[I][1]):this.drawingContext.lineTo(S[I][0],S[I][1]):this.drawingContext.quadraticCurveTo(S[I][0],S[I][1],S[I][2],S[I][3]);this._doFillStrokeClose(W)}else if(L===h.POINTS)for(I=0;I<G;I++)F=S[I],this._doStroke&&this._pInst.stroke(F[6]),this._pInst.point(F[0],F[1]);else if(L===h.LINES)for(I=0;I+1<G;I+=2)F=S[I],this._doStroke&&this._pInst.stroke(S[I+1][6]),this._pInst.line(F[0],F[1],S[I+1][0],S[I+1][1]);else if(L===h.TRIANGLES)for(I=0;I+2<G;I+=3)F=S[I],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(F[0],F[1]),this.drawingContext.lineTo(S[I+1][0],S[I+1][1]),this.drawingContext.lineTo(S[I+2][0],S[I+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(S[I+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(S[I+2][6]),this.drawingContext.stroke());else if(L===h.TRIANGLE_STRIP)for(I=0;I+1<G;I++)F=S[I],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(S[I+1][0],S[I+1][1]),this.drawingContext.lineTo(F[0],F[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(S[I+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(S[I+1][5]),I+2<G&&(this.drawingContext.lineTo(S[I+2][0],S[I+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(S[I+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(S[I+2][5])),this._doFillStrokeClose(W);else if(L===h.TRIANGLE_FAN){if(2<G){for(this._clipping||this.drawingContext.beginPath(),I=2;I<G;I++)F=S[I],this.drawingContext.moveTo(S[0][0],S[0][1]),this.drawingContext.lineTo(S[I-1][0],S[I-1][1]),this.drawingContext.lineTo(F[0],F[1]),this.drawingContext.lineTo(S[0][0],S[0][1]),I<G-1&&(this._doFill&&F[5]!==S[I+1][5]||this._doStroke&&F[6]!==S[I+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(F[5]),this.drawingContext.fill(),this._pInst.fill(S[I+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(F[6]),this.drawingContext.stroke(),this._pInst.stroke(S[I+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(W)}}else if(L===h.QUADS)for(I=0;I+3<G;I+=4){for(F=S[I],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(F[0],F[1]),B=1;B<4;B++)this.drawingContext.lineTo(S[I+B][0],S[I+B][1]);this.drawingContext.lineTo(F[0],F[1]),!this._clipping&&this._doFill&&this._pInst.fill(S[I+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(S[I+3][6]),this._doFillStrokeClose(W)}else if(L===h.QUAD_STRIP){if(3<G)for(I=0;I+1<G;I+=2)F=S[I],this._clipping||this.drawingContext.beginPath(),I+3<G?(this.drawingContext.moveTo(S[I+2][0],S[I+2][1]),this.drawingContext.lineTo(F[0],F[1]),this.drawingContext.lineTo(S[I+1][0],S[I+1][1]),this.drawingContext.lineTo(S[I+3][0],S[I+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(S[I+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(S[I+3][6])):(this.drawingContext.moveTo(F[0],F[1]),this.drawingContext.lineTo(S[I+1][0],S[I+1][1])),this._doFillStrokeClose(W)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(S[0][0],S[0][1]),I=1;I<G;I++)(F=S[I]).isVert&&(F.moveTo?(W&&this.drawingContext.closePath(),this.drawingContext.moveTo(F[0],F[1])):this.drawingContext.lineTo(F[0],F[1]));this._doFillStrokeClose(W),this.drawingContext.closePath()}D=C=N=P=!1,W&&S.pop()}return this}},{key:"strokeCap",value:function(E){return E!==h.ROUND&&E!==h.SQUARE&&E!==h.PROJECT||(this.drawingContext.lineCap=E),this}},{key:"strokeJoin",value:function(E){return E!==h.ROUND&&E!==h.BEVEL&&E!==h.MITER||(this.drawingContext.lineJoin=E),this}},{key:"strokeWeight",value:function(E){return this.drawingContext.lineWidth=E===void 0||E===0?1e-4:E,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(E){E!==this._cachedFillStyle&&(this.drawingContext.fillStyle=E,this._cachedFillStyle=E)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(E){E!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=E,this._cachedStrokeStyle=E)}},{key:"bezier",value:function(E,S,P,N,C,D,L,F){return this._pInst.beginShape(),this._pInst.vertex(E,S),this._pInst.bezierVertex(P,N,C,D,L,F),this._pInst.endShape(),this}},{key:"curve",value:function(E,S,P,N,C,D,L,F){return this._pInst.beginShape(),this._pInst.curveVertex(E,S),this._pInst.curveVertex(P,N),this._pInst.curveVertex(C,D),this._pInst.curveVertex(L,F),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(E){E&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(E,S,P,N,C,D){this.drawingContext.transform(E,S,P,N,C,D)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(E){this.drawingContext.rotate(E)}},{key:"scale",value:function(E,S){return this.drawingContext.scale(E,S),this}},{key:"translate",value:function(E,S){return E instanceof s.default.Vector&&(S=E.y,E=E.x),this.drawingContext.translate(E,S),this}},{key:"_renderText",value:function(E,S,P,N,C,D){if(!(N<D||C<=N))return E.push(),this._isOpenType()?this._textFont._renderPath(S,P,N,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(S,P,N),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(h._DEFAULT_TEXT_FILL),this.drawingContext.fillText(S,P,N))),E.pop(),E}},{key:"textWidth",value:function(E){return this._isOpenType()?this._textFont._textWidth(E,this._textSize):this.drawingContext.measureText(E).width}},{key:"_applyTextProperties",value:function(){var E=this._pInst,S=(this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),S=this._textFont,this._isOpenType()&&(S=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),S||"sans-serif");return/\s/.exec(S)&&(S='"'.concat(S,'"')),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(S),this.drawingContext.textAlign=this._textAlign,this._textBaseline===h.CENTER?this.drawingContext.textBaseline=h._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,E}},{key:"push",value:function(){return this.drawingContext.save(),i(y(T.prototype),"push",this).call(this)}},{key:"pop",value:function(E){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,i(y(T.prototype),"pop",this).call(this,E)}}])&&v(x.prototype,w),T}(s.default.Renderer),l=(c.prototype.text=function(w,x,_,P,E){P!==void 0&&this.drawingContext.textBaseline===h.BASELINE&&(S=!0,this.drawingContext.textBaseline=h.TOP);var S,P=s.default.Renderer.prototype.text.apply(this,arguments);return S&&(this.drawingContext.textBaseline=h.BASELINE),P},s.default.Renderer2D=c,s.default.Renderer2D);u.default=l},{"./constants":272,"./main":283,"./p5.Renderer":286,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],288:[function(t,m,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var a=(t=t("./main"))&&t.__esModule?t:{default:t};a.default.prototype._promisePreloads=[];function p(){return{}}var s=!(a.default.prototype.registerPromisePreload=function(h){a.default.prototype._promisePreloads.push(h)});a.default.prototype._setupPromisePreloads=function(){var h=!0,b=!1,v=void 0;try{for(var i,d=this._promisePreloads[Symbol.iterator]();!(h=(i=d.next()).done);h=!0){var f=i.value,y=this,g=f.method,c=f.addCallbacks,l=f.legacyPreloadSetup,w=f.target||this,x=w[g].bind(w);if(w===a.default.prototype){if(s)continue;y=null,x=w[g]}w[g]=this._wrapPromisePreload(y,x,c),l&&(w[l.method]=this._legacyPreloadGenerator(y,l,w[g]))}}catch(_){b=!0,v=_}finally{try{h||d.return==null||d.return()}finally{if(b)throw v}}s=!0},a.default.prototype._wrapPromisePreload=function(h,b,v){var i=function(){for(var d=this,f=(this._incrementPreload(),null),y=null,g=arguments.length,c=new Array(g),l=0;l<g;l++)c[l]=arguments[l];if(v)for(var w=c.length-1;0<=w&&!y&&typeof c[w]=="function";w--)y=f,f=c.pop();var x=Promise.resolve(b.apply(this,c));return f&&x.then(f),y&&x.catch(y),x.then(function(){return d._decrementPreload()}),x};return i=h?i.bind(h):i},a.default.prototype._legacyPreloadGenerator=function(h,d,v){var i=d.createBaseObject||p,d=function(){var f=this;this._incrementPreload();for(var y=arguments.length,g=new Array(y),c=0;c<y;c++)g[c]=arguments[c];var l=i.apply(this,g);return v.apply(this,g).then(function(w){Object.assign(l,w),f._decrementPreload()}),l};return d=h?d.bind(h):d}},{"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],289:[function(t,m,u){function a(d){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var p=(i=t("./main"))&&i.__esModule?i:{default:i},s=function(d){if(d&&d.__esModule)return d;if(d===null||b(d)!=="object"&&typeof d!="function")return{default:d};var f=h();if(f&&f.has(d))return f.get(d);var y,g={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in d){var l;Object.prototype.hasOwnProperty.call(d,y)&&((l=c?Object.getOwnPropertyDescriptor(d,y):null)&&(l.get||l.set)?Object.defineProperty(g,y,l):g[y]=d[y])}return g.default=d,f&&f.set(d,g),g}(t("./constants"));function h(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,h=function(){return d},d)}function b(d){return(b=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(f){return a(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":a(f)})(d)}t("./p5.Graphics"),t("./p5.Renderer2D"),t("../webgl/p5.RendererGL");var v="defaultCanvas0",i=(p.default.prototype.createCanvas=function(d,f,y,g){var c,l,w;if(p.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(y=s.P2D,g=arguments[2]):c=y||s.P2D,g)(w=document.getElementById(v))&&w.parentNode.removeChild(w),w=g,this._defaultGraphicsCreated=!1;else{if(c===s.WEBGL)(w=document.getElementById(v))&&(w.parentNode.removeChild(w),l=this._renderer,this._elements=this._elements.filter(function(_){return _!==l})),(w=document.createElement("canvas")).id=v,w.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)w=this.canvas;else{w=g||document.createElement("canvas");for(var x=0;document.getElementById("defaultCanvas".concat(x));)x++;v="defaultCanvas".concat(x),w.id=v,w.classList.add("p5Canvas")}this._setupDone||(w.dataset.hidden=!0,w.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(y=document.createElement("main"),document.body.appendChild(y)),document.getElementsByTagName("main")[0])).appendChild(w)}return c===s.WEBGL?(this._setProperty("_renderer",new p.default.RendererGL(w,this,!0)),this._elements.push(this._renderer),d=(g=this._renderer._adjustDimensions(d,f)).adjustedWidth,f=g.adjustedHeight):this._defaultGraphicsCreated||(this._setProperty("_renderer",new p.default.Renderer2D(w,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(d,f),this._renderer._applyDefaults(),this._renderer},p.default.prototype.resizeCanvas=function(d,f,y){if(p.default._validateParameters("resizeCanvas",arguments),this._renderer){var g,c,l,w={};for(g in this.drawingContext){var x=this.drawingContext[g];b(x)!=="object"&&typeof x!="function"&&(w[g]=x)}for(l in this._renderer instanceof p.default.RendererGL&&(d=(c=this._renderer._adjustDimensions(d,f)).adjustedWidth,f=c.adjustedHeight),this.width=d,this.height=f,this._renderer.resize(d,f),w)try{this.drawingContext[l]=w[l]}catch{}y||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},p.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},p.default.prototype.createGraphics=function(d,f){for(var y=arguments.length,g=new Array(2<y?y-2:0),c=2;c<y;c++)g[c-2]=arguments[c];return g[0]instanceof HTMLCanvasElement&&(g[1]=g[0],g[0]=s.P2D),p.default._validateParameters("createGraphics",arguments),new p.default.Graphics(d,f,g[0],this,g[1])},p.default.prototype.createFramebuffer=function(d){return new p.default.Framebuffer(this,d)},p.default.prototype.clearDepth=function(d){this._assert3d("clearDepth"),this._renderer.clearDepth(d)},p.default.prototype.blendMode=function(d){p.default._validateParameters("blendMode",arguments),d===s.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),d=s.BLEND),this._renderer.blendMode(d)},p.default);u.default=i},{"../webgl/p5.RendererGL":341,"./constants":272,"./main":283,"./p5.Graphics":285,"./p5.Renderer2D":287,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],290:[function(t,m,u){function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(f)}function p(f){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(y){return a(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":a(y)})(f)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=i(t("../main")),h=function(f){if(f&&f.__esModule)return f;if(f===null||p(f)!=="object"&&typeof f!="function")return{default:f};var y=v();if(y&&y.has(f))return y.get(f);var g,c={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in f){var w;Object.prototype.hasOwnProperty.call(f,g)&&((w=l?Object.getOwnPropertyDescriptor(f,g):null)&&(w.get||w.set)?Object.defineProperty(c,g,w):c[g]=f[g])}return c.default=f,y&&y.set(f,c),c}(t("../constants")),b=i(t("../helpers"));function v(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,v=function(){return f},f)}function i(f){return f&&f.__esModule?f:{default:f}}function d(f){return function(y){if(Array.isArray(y)){for(var g=0,c=new Array(y.length);g<y.length;g++)c[g]=y[g];return c}}(f)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),s.default.prototype._normalizeArcAngles=function(f,y,g,c,l){var w;return f-=h.TWO_PI*Math.floor(f/h.TWO_PI),y-=h.TWO_PI*Math.floor(y/h.TWO_PI),w=Math.min(Math.abs(f-y),h.TWO_PI-Math.abs(f-y)),l&&(f=f<=h.HALF_PI?Math.atan(g/c*Math.tan(f)):f>h.HALF_PI&&f<=3*h.HALF_PI?Math.atan(g/c*Math.tan(f))+h.PI:Math.atan(g/c*Math.tan(f))+h.TWO_PI,y=y<=h.HALF_PI?Math.atan(g/c*Math.tan(y)):y>h.HALF_PI&&y<=3*h.HALF_PI?Math.atan(g/c*Math.tan(y))+h.PI:Math.atan(g/c*Math.tan(y))+h.TWO_PI),y<f&&(y+=h.TWO_PI),{start:f,stop:y,correspondToSamePoint:w<1e-5}},s.default.prototype.arc=function(f,y,g,c,l,w,x,_){return s.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&l!==w&&(l=this._toRadians(l),w=this._toRadians(w),f=b.default.modeAdjust(f,y,g,c,this._renderer._ellipseMode),(y=this._normalizeArcAngles(l,w,f.w,f.h,!0)).correspondToSamePoint?this._renderer.ellipse([f.x,f.y,f.w,f.h,_]):(this._renderer.arc(f.x,f.y,f.w,f.h,y.start,y.stop,x,_),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[f.x,f.y,f.w,f.h,y.start,y.stop,x]))),this},s.default.prototype.ellipse=function(f,y,g,c,l){return s.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},s.default.prototype.circle=function(){for(var f=arguments.length,y=new Array(f),g=0;g<f;g++)y[g]=arguments[g];s.default._validateParameters("circle",y);var c=y.slice(0,2);return c.push(y[2],y[2]),this._renderEllipse.apply(this,d(c))},s.default.prototype._renderEllipse=function(f,y,g,c,l){return(this._renderer._doStroke||this._renderer._doFill)&&(f=b.default.modeAdjust(f,y,g,c=c===void 0?g:c,this._renderer._ellipseMode),this._renderer.ellipse([f.x,f.y,f.w,f.h,l]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[f.x,f.y,f.w,f.h])),this},s.default.prototype.line=function(){for(var f,y=arguments.length,g=new Array(y),c=0;c<y;c++)g[c]=arguments[c];return s.default._validateParameters("line",g),this._renderer._doStroke&&(f=this._renderer).line.apply(f,g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",g),this},s.default.prototype.point=function(){for(var f,y=arguments.length,g=new Array(y),c=0;c<y;c++)g[c]=arguments[c];return s.default._validateParameters("point",g),this._renderer._doStroke&&(g.length===1&&g[0]instanceof s.default.Vector?this._renderer.point.call(this._renderer,g[0].x,g[0].y,g[0].z):((f=this._renderer).point.apply(f,g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",g))),this},s.default.prototype.quad=function(){for(var f,y=arguments.length,g=new Array(y),c=0;c<y;c++)g[c]=arguments[c];return s.default._validateParameters("quad",g),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&g.length<12?this._renderer.quad.call(this._renderer,g[0],g[1],0,g[2],g[3],0,g[4],g[5],0,g[6],g[7],0,g[8],g[9]):((f=this._renderer).quad.apply(f,g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",g))),this},s.default.prototype.rect=function(){for(var f=arguments.length,y=new Array(f),g=0;g<f;g++)y[g]=arguments[g];return s.default._validateParameters("rect",y),this._renderRect.apply(this,y)},s.default.prototype.square=function(f,y,g,c,l,w,x){return s.default._validateParameters("square",arguments),this._renderRect.call(this,f,y,g,g,c,l,w,x)},s.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var f=b.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),y=(this._renderer._rectMode===h.CORNER&&(f.w=arguments[2],f.h=arguments[3]),[f.x,f.y,f.w,f.h]),g=4;g<arguments.length;g++)y[g]=arguments[g];this._renderer.rect(y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[f.x,f.y,f.w,f.h])}return this},s.default.prototype.triangle=function(){for(var f=arguments.length,y=new Array(f),g=0;g<f;g++)y[g]=arguments[g];return s.default._validateParameters("triangle",y),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",y),this},t=s.default,u.default=t},{"../constants":272,"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../helpers":279,"../main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],291:[function(t,m,u){function a(i){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(i)}function p(i){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(d){return a(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":a(d)})(i)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(v=t("../main"))&&v.__esModule?v:{default:v},h=function(i){if(i&&i.__esModule)return i;if(i===null||p(i)!=="object"&&typeof i!="function")return{default:i};var d=b();if(d&&d.has(i))return d.get(i);var f,y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in i){var c;Object.prototype.hasOwnProperty.call(i,f)&&((c=g?Object.getOwnPropertyDescriptor(i,f):null)&&(c.get||c.set)?Object.defineProperty(y,f,c):y[f]=i[f])}return y.default=i,d&&d.set(i,y),y}(t("../constants"));function b(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,b=function(){return i},i)}s.default.prototype.ellipseMode=function(i){return s.default._validateParameters("ellipseMode",arguments),i!==h.CORNER&&i!==h.CORNERS&&i!==h.RADIUS&&i!==h.CENTER||(this._renderer._ellipseMode=i),this},s.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},s.default.prototype.rectMode=function(i){return s.default._validateParameters("rectMode",arguments),i!==h.CORNER&&i!==h.CORNERS&&i!==h.RADIUS&&i!==h.CENTER||(this._renderer._rectMode=i),this},s.default.prototype.smooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!0):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},s.default.prototype.strokeCap=function(i){return s.default._validateParameters("strokeCap",arguments),i!==h.ROUND&&i!==h.SQUARE&&i!==h.PROJECT||this._renderer.strokeCap(i),this},s.default.prototype.strokeJoin=function(i){return s.default._validateParameters("strokeJoin",arguments),i!==h.ROUND&&i!==h.BEVEL&&i!==h.MITER||this._renderer.strokeJoin(i),this},s.default.prototype.strokeWeight=function(i){return s.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(i),this};var v=s.default;u.default=v},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],292:[function(t,m,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(p=t("../main"))&&p.__esModule?p:{default:p};t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),a.default.prototype.bezier=function(){for(var s,h=arguments.length,b=new Array(h),v=0;v<h;v++)b[v]=arguments[v];return a.default._validateParameters("bezier",b),(this._renderer._doStroke||this._renderer._doFill)&&(s=this._renderer).bezier.apply(s,b),this},a.default.prototype.bezierDetail=function(s){return a.default._validateParameters("bezierDetail",arguments),this._bezierDetail=s,this},a.default.prototype.bezierPoint=function(s,h,b,v,i){a.default._validateParameters("bezierPoint",arguments);var d=1-i;return Math.pow(d,3)*s+3*Math.pow(d,2)*i*h+3*d*Math.pow(i,2)*b+Math.pow(i,3)*v},a.default.prototype.bezierTangent=function(s,h,b,v,i){a.default._validateParameters("bezierTangent",arguments);var d=1-i;return 3*v*Math.pow(i,2)-3*b*Math.pow(i,2)+6*b*d*i-6*h*d*i+3*h*Math.pow(d,2)-3*s*Math.pow(d,2)},a.default.prototype.curve=function(){for(var s,h=arguments.length,b=new Array(h),v=0;v<h;v++)b[v]=arguments[v];return a.default._validateParameters("curve",b),this._renderer._doStroke&&(s=this._renderer).curve.apply(s,b),this},a.default.prototype.curveDetail=function(s){return a.default._validateParameters("curveDetail",arguments),this._curveDetail=s<3?3:s,this},a.default.prototype.curveTightness=function(s){return a.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=s,this},a.default.prototype.curvePoint=function(s,h,b,v,i){a.default._validateParameters("curvePoint",arguments);var d=this._renderer._curveTightness,f=i*i*i,y=i*i;return s*((d-1)/2*f+(1-d)*y+(d-1)/2*i)+h*((d+3)/2*f+(-5-d)/2*y+1)+b*((-3-d)/2*f+(d+2)*y+(1-d)/2*i)+v*((1-d)/2*f+(d-1)/2*y)},a.default.prototype.curveTangent=function(s,h,b,v,y){a.default._validateParameters("curveTangent",arguments);var d=this._renderer._curveTightness,f=y*y*3,y=2*y;return s*((d-1)/2*f+(1-d)*y+(d-1)/2)+h*((d+3)/2*f+(-5-d)/2*y)+b*((-3-d)/2*f+(d+2)*y+(1-d)/2)+v*((1-d)/2*f+(d-1)/2*y)};var p=a.default;u.default=p},{"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../main":283}],293:[function(t,m,u){function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(x)}function p(x){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(_){return a(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":a(_)})(x)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(w=t("../main"))&&w.__esModule?w:{default:w},h=function(x){if(x&&x.__esModule)return x;if(x===null||p(x)!=="object"&&typeof x!="function")return{default:x};var _=b();if(_&&_.has(x))return _.get(x);var T,E={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(T in x){var P;Object.prototype.hasOwnProperty.call(x,T)&&((P=S?Object.getOwnPropertyDescriptor(x,T):null)&&(P.get||P.set)?Object.defineProperty(E,T,P):E[T]=x[T])}return E.default=x,_&&_.set(x,E),E}(t("../constants"));function b(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,b=function(){return x},x)}var v=null,i=[],d=[],f=!1,y=!1,g=!1,c=!1,l=!0,w=(s.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(d=[],c=!0),this},s.default.prototype.beginShape=function(x){var _;return s.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(_=this._renderer).beginShape.apply(_,arguments):(v=x===h.POINTS||x===h.LINES||x===h.TRIANGLES||x===h.TRIANGLE_FAN||x===h.TRIANGLE_STRIP||x===h.QUADS||x===h.QUAD_STRIP?x:null,i=[],d=[]),this},s.default.prototype.bezierVertex=function(){for(var x,_=arguments.length,T=new Array(_),E=0;E<_;E++)T[E]=arguments[E];if(s.default._validateParameters("bezierVertex",T),this._renderer.isP3D)(x=this._renderer).bezierVertex.apply(x,T);else if(i.length===0)s.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{f=!0;for(var S=[],P=0;P<T.length;P++)S[P]=T[P];S.isVert=!1,(c?d:i).push(S)}return this},s.default.prototype.curveVertex=function(){for(var x,_=arguments.length,T=new Array(_),E=0;E<_;E++)T[E]=arguments[E];return s.default._validateParameters("curveVertex",T),this._renderer.isP3D?(x=this._renderer).curveVertex.apply(x,T):(y=!0,this.vertex(T[0],T[1])),this},s.default.prototype.endContour=function(){if(!this._renderer.isP3D){var x=d[0].slice();x.isVert=d[0].isVert,x.moveTo=!1,d.push(x),l&&(i.push(i[0]),l=!1);for(var _=0;_<d.length;_++)i.push(d[_])}return this},s.default.prototype.endShape=function(x){var _=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(s.default._validateParameters("endShape",arguments),_<1&&(console.log(" p5.js says: You can not have less than one instance"),_=1),this._renderer.isP3D)this._renderer.endShape(x,y,f,g,c,v,_);else{if(_!==1&&console.log(" p5.js says: Instancing is only supported in WebGL2 mode"),i.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;_=x===h.CLOSE,_&&!c&&i.push(i[0]),this._renderer.endShape(x,i,y,f,g,c,v),l=!(c=g=f=y=!1),_&&i.pop()}return this},s.default.prototype.quadraticVertex=function(){for(var x,_=arguments.length,T=new Array(_),E=0;E<_;E++)T[E]=arguments[E];if(s.default._validateParameters("quadraticVertex",T),this._renderer.isP3D)(x=this._renderer).quadraticVertex.apply(x,T);else{if(this._contourInited)return(x={}).x=T[0],x.y=T[1],x.x3=T[2],x.y3=T[3],x.type=h.QUADRATIC,this._contourVertices.push(x),this;if(0<i.length){g=!0;for(var S=[],P=0;P<T.length;P++)S[P]=T[P];S.isVert=!1,(c?d:i).push(S)}else s.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},s.default.prototype.vertex=function(x,_,T,E,S){var P;return this._renderer.isP3D?(P=this._renderer).vertex.apply(P,arguments):((P=[]).isVert=!0,P[0]=x,P[1]=_,P[2]=0,P[3]=0,P[4]=0,P[5]=this._renderer._getFill(),P[6]=this._renderer._getStroke(),T&&(P.moveTo=T),(c?(d.length===0&&(P.moveTo=!0),d):i).push(P)),this},s.default.prototype.normal=function(x,_,T){var E;return this._assert3d("normal"),s.default._validateParameters("normal",arguments),(E=this._renderer).normal.apply(E,arguments),this},s.default);u.default=w},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],294:[function(t,m,u){},{}],295:[function(t,m,u){t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.assign"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("./main"))&&t.__esModule?t:{default:t},t.default.prototype.noLoop=function(){this._loop=!1},t.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},t.default.prototype.isLooping=function(){return this._loop},t.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},t.default.prototype.pop=function(){var a=this._styles.pop();a?(this._renderer.pop(a.renderer),Object.assign(this,a.props)):console.warn("pop() was called without matching push()")},t.default.prototype.redraw=function(a){if(!this._inUserDraw&&this._setupDone){var p=parseInt(a),s=((isNaN(p)||p<1)&&(p=1),this._isGlobal?window:this);if(typeof s.draw=="function"){s.setup===void 0&&s.scale(s._pixelDensity,s._pixelDensity);for(var h=0;h<p;h++){s.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),s._renderer.isP3D&&s._renderer._update(),s._setProperty("frameCount",s.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{s.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},t=t.default,u.default=t},{"./main":283,"core-js/modules/es.object.assign":183}],296:[function(t,m,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(t=t("./main"))&&t.__esModule?t:{default:t};function p(s){return function(h){if(Array.isArray(h)){for(var b=0,v=new Array(h.length);b<h.length;b++)v[b]=h[b];return v}}(s)||function(h){if(Symbol.iterator in Object(h)||Object.prototype.toString.call(h)==="[object Arguments]")return Array.from(h)}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.applyMatrix=function(){var s=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||s?(s=this._renderer).applyMatrix.apply(s,p(arguments.length<=0?void 0:arguments[0])):(s=this._renderer).applyMatrix.apply(s,arguments),this},a.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},a.default.prototype.rotate=function(s,h){return a.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(s),h),this},a.default.prototype.rotateX=function(s){return this._assert3d("rotateX"),a.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(s)),this},a.default.prototype.rotateY=function(s){return this._assert3d("rotateY"),a.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(s)),this},a.default.prototype.rotateZ=function(s){return this._assert3d("rotateZ"),a.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(s)),this},a.default.prototype.scale=function(s,h,b){var v;return a.default._validateParameters("scale",arguments),s instanceof a.default.Vector?(s=(v=s).x,h=v.y,b=v.z):Array.isArray(s)&&(s=(v=s)[0],h=v[1],b=v[2]||1),isNaN(h)?h=b=s:isNaN(b)&&(b=1),this._renderer.scale(s,h,b),this},a.default.prototype.shearX=function(s){return a.default._validateParameters("shearX",arguments),s=this._toRadians(s),this._renderer.applyMatrix(1,0,Math.tan(s),1,0,0),this},a.default.prototype.shearY=function(s){return a.default._validateParameters("shearY",arguments),s=this._toRadians(s),this._renderer.applyMatrix(1,Math.tan(s),0,1,0,0),this},a.default.prototype.translate=function(s,h,b){return a.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(s,h,b):this._renderer.translate(s,h),this},t=a.default,u.default=t},{"./main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246}],297:[function(t,m,u){function a(b){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator");var p=(t=t("../core/main"))&&t.__esModule?t:{default:t};function s(b){return function(v){if(Array.isArray(v)){for(var i=0,d=new Array(v.length);i<v.length;i++)d[i]=v[i];return d}}(b)||function(v){if(Symbol.iterator in Object(v)||Object.prototype.toString.call(v)==="[object Arguments]")return Array.from(v)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(b){return(h=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(v){return a(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":a(v)})(b)}p.default.prototype.storeItem=function(b,v){typeof b!="string"&&console.log("The argument that you passed to storeItem() - ".concat(b," is not a string.")),b.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(b," must not end with 'p5TypeID'.")),v===void 0&&console.log("You cannot store undefined variables using storeItem().");var i=h(v);switch(i){case"number":case"boolean":v=v.toString();break;case"object":v instanceof p.default.Color?i="p5.Color":v instanceof p.default.Vector&&(i="p5.Vector",v=[v.x,v.y,v.z]),v=JSON.stringify(v)}localStorage.setItem(b,v),b="".concat(b,"p5TypeID"),localStorage.setItem(b,i)},p.default.prototype.getItem=function(b){var v=localStorage.getItem(b),i=localStorage.getItem("".concat(b,"p5TypeID"));if(i===void 0)console.log("Unable to determine type of item stored under ".concat(b,"in local storage. Did you save the item with something other than setItem()?"));else if(v!==null)switch(i){case"number":v=parseFloat(v);break;case"boolean":v=v==="true";break;case"object":v=JSON.parse(v);break;case"p5.Color":v=JSON.parse(v),v=this.color.apply(this,s(v.levels));break;case"p5.Vector":v=JSON.parse(v),v=this.createVector.apply(this,s(v))}return v},p.default.prototype.clearStorage=function(){var b=this;Object.keys(localStorage).forEach(function(v){v.endsWith("p5TypeID")&&b.removeItem(v.replace("p5TypeID",""))})},p.default.prototype.removeItem=function(b){typeof b!="string"&&console.log("The argument that you passed to removeItem() - ".concat(b," is not a string.")),localStorage.removeItem(b),localStorage.removeItem("".concat(b,"p5TypeID"))}},{"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],298:[function(t,m,u){function a(g){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(g)}function p(g){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(c){return a(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":a(c)})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.object.keys"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(t=t("../core/main"))&&t.__esModule?t:{default:t};function h(g,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(c&&c.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),c&&b(g,c)}function b(g,c){return(b=Object.setPrototypeOf||function(l,w){return l.__proto__=w,l})(g,c)}function v(g){return function(){var c,l=i(g),l=(c=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(c=i(this).constructor,Reflect.construct(l,arguments,c)):l.apply(this,arguments),this);if(!c||p(c)!=="object"&&typeof c!="function"){if(l!==void 0)return l;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return c}}function i(g){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)})(g)}function d(g,c){if(!(g instanceof c))throw new TypeError("Cannot call a class as a function")}function f(g,c){for(var l=0;l<c.length;l++){var w=c[l];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(g,w.key,w)}}function y(g,c,l){c&&f(g.prototype,c)}s.default.prototype.createStringDict=function(g,c){return s.default._validateParameters("createStringDict",arguments),new s.default.StringDict(g,c)},s.default.prototype.createNumberDict=function(g,c){return s.default._validateParameters("createNumberDict",arguments),new s.default.NumberDict(g,c)},s.default.TypedDict=function(){function g(c,l){return d(this,g),c instanceof Object?this.data=c:(this.data={},this.data[c]=l),this}return y(g,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(c){return this.data.hasOwnProperty(c)}},{key:"get",value:function(c){if(this.data.hasOwnProperty(c))return this.data[c];console.log("".concat(c," does not exist in this Dictionary"))}},{key:"set",value:function(c,l){this._validate(l)?this.data[c]=l:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(c){for(var l in c)this.set(l,c[l])}},{key:"create",value:function(c,l){c instanceof Object&&l===void 0?this._addObj(c):c!==void 0?this.set(c,l):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(c){if(!this.data.hasOwnProperty(c))throw new Error("".concat(c," does not exist in this Dictionary"));delete this.data[c]}},{key:"print",value:function(){for(var c in this.data)console.log("key:".concat(c," value:").concat(this.data[c]))}},{key:"saveTable",value:function(c){var l,w="";for(l in this.data)w+="".concat(l,",").concat(this.data[l],`
`);var x=new Blob([w],{type:"text/csv"});s.default.prototype.downloadFile(x,c||"mycsv","csv")}},{key:"saveJSON",value:function(c,l){s.default.prototype.saveJSON(this.data,c,l)}},{key:"_validate",value:function(c){return!0}}]),g}(),s.default.StringDict=function(){h(c,s.default.TypedDict);var g=v(c);function c(){d(this,c);for(var l=arguments.length,w=new Array(l),x=0;x<l;x++)w[x]=arguments[x];return g.call.apply(g,[this].concat(w))}return y(c,[{key:"_validate",value:function(l){return typeof l=="string"}}]),c}(),s.default.NumberDict=function(){h(c,s.default.TypedDict);var g=v(c);function c(){d(this,c);for(var l=arguments.length,w=new Array(l),x=0;x<l;x++)w[x]=arguments[x];return g.call.apply(g,[this].concat(w))}return y(c,[{key:"_validate",value:function(l){return typeof l=="number"}},{key:"add",value:function(l,w){this.data.hasOwnProperty(l)?this.data[l]+=w:console.log("The key - ".concat(l," does not exist in this dictionary."))}},{key:"sub",value:function(l,w){this.add(l,-w)}},{key:"mult",value:function(l,w){this.data.hasOwnProperty(l)?this.data[l]*=w:console.log("The key - ".concat(l," does not exist in this dictionary."))}},{key:"div",value:function(l,w){this.data.hasOwnProperty(l)?this.data[l]/=w:console.log("The key - ".concat(l," does not exist in this dictionary."))}},{key:"_valueTest",value:function(l){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var w,x=this.data[Object.keys(this.data)[0]];for(w in this.data)this.data[w]*l<x*l&&(x=this.data[w]);return x}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(l){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var w=Object.keys(this.data)[0],x=1;x<Object.keys(this.data).length;x++)Object.keys(this.data)[x]*l<w*l&&(w=Object.keys(this.data)[x]);return w}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),c}(),t=s.default.TypedDict,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],299:[function(t,m,u){function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(x)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var p=(t=t("../core/main"))&&t.__esModule?t:{default:t};function s(x,_){for(var T=0;T<_.length;T++){var E=_[T];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(x,E.key,E)}}function h(x,_,T){_&&s(x.prototype,_),T&&s(x,T)}function b(x,_){return(b=Object.setPrototypeOf||function(T,E){return T.__proto__=E,T})(x,_)}function v(x){return function(){var _,T,E=d(x);return _=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(_=d(this).constructor,Reflect.construct(E,arguments,_)):E.apply(this,arguments),E=this,!(T=_)||y(T)!=="object"&&typeof T!="function"?i(E):T}}function i(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function d(x){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(x)}function f(x,_){if(!(x instanceof _))throw new TypeError("Cannot call a class as a function")}function y(x){return(y=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(_){return a(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":a(_)})(x)}function g(x,_,T){return(_._userNode||document.body).appendChild(x),T=new(T?p.default.MediaElement:p.default.Element)(x,_),_._elements.push(T),T}p.default.prototype.select=function(x,_){return p.default._validateParameters("select",arguments),_=this._getContainer(_).querySelector(x),_?this._wrapElement(_):null},p.default.prototype.selectAll=function(x,_){p.default._validateParameters("selectAll",arguments);var T=[],E=this._getContainer(_).querySelectorAll(x);if(E)for(var S=0;S<E.length;S++){var P=this._wrapElement(E[S]);T.push(P)}return T},p.default.prototype._getContainer=function(x){var _=document;return typeof x=="string"?_=document.querySelector(x)||document:x instanceof p.default.Element?_=x.elt:x instanceof HTMLElement&&(_=x),_},p.default.prototype._wrapElement=function(x){var _,T=Array.prototype.slice.call(x.children);return x.tagName==="INPUT"&&x.type==="checkbox"?((_=new p.default.Element(x,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},_):x.tagName==="VIDEO"||x.tagName==="AUDIO"?new p.default.MediaElement(x,this):x.tagName==="SELECT"?this.createSelect(new p.default.Element(x,this)):0<T.length&&T.every(function(E){return E.tagName==="INPUT"||E.tagName==="LABEL"})&&(x.tagName==="DIV"||x.tagName==="SPAN")?this.createRadio(new p.default.Element(x,this)):new p.default.Element(x,this)},p.default.prototype.removeElements=function(x){p.default._validateParameters("removeElements",arguments),this._elements.filter(function(_){return!(_.elt instanceof HTMLCanvasElement)}).map(function(_){return _.remove()})},p.default.Element.prototype.changed=function(x){return p.default.Element._adjustListener("change",x,this),this},p.default.Element.prototype.input=function(x){return p.default.Element._adjustListener("input",x,this),this},p.default.prototype.createDiv=function(){var x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",_=document.createElement("div");return _.innerHTML=x,g(_,this)},p.default.prototype.createP=function(){var x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",_=document.createElement("p");return _.innerHTML=x,g(_,this)},p.default.prototype.createSpan=function(){var x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",_=document.createElement("span");return _.innerHTML=x,g(_,this)},p.default.prototype.createImg=function(){p.default._validateParameters("createImg",arguments);var x,_=document.createElement("img"),T=arguments;return 1<T.length&&typeof T[1]=="string"&&(_.alt=T[1]),2<T.length&&typeof T[2]=="string"&&(_.crossOrigin=T[2]),_.src=T[0],x=g(_,this),_.addEventListener("load",function(){x.width=_.offsetWidth||_.width,x.height=_.offsetHeight||_.height;var E=T[T.length-1];typeof E=="function"&&E(x)}),x},p.default.prototype.createA=function(x,_,T){p.default._validateParameters("createA",arguments);var E=document.createElement("a");return E.href=x,E.innerHTML=_,T&&(E.target=T),g(E,this)},p.default.prototype.createSlider=function(x,_,T,E){p.default._validateParameters("createSlider",arguments);var S=document.createElement("input");return S.type="range",S.min=x,S.max=_,E===0?S.step=1e-18:E&&(S.step=E),typeof T=="number"&&(S.value=T),g(S,this)},p.default.prototype.createButton=function(x,_){p.default._validateParameters("createButton",arguments);var T=document.createElement("button");return T.innerHTML=x,_&&(T.value=_),g(T,this)},p.default.prototype.createCheckbox=function(){for(var x=arguments.length,_=new Array(x),T=0;T<x;T++)_[T]=arguments[T];p.default._validateParameters("createCheckbox",_);var E=document.createElement("div"),S=document.createElement("input"),P=(S.type="checkbox",document.createElement("label")),N=(P.appendChild(S),E.appendChild(P),g(E,this));return N.checked=function(){var C=N.elt.firstElementChild.getElementsByTagName("input")[0];if(C){if(arguments.length===0)return C.checked;C.checked=!(arguments.length<=0||!arguments[0])}return N},this.value=function(C){return N.value=C,this},_[0]&&(N.value(_[0]),(E=document.createElement("span")).innerHTML=_[0],P.appendChild(E)),_[1]&&(S.checked=!0),N},p.default.prototype.createSelect=function(){for(var x,_=arguments.length,T=new Array(_),E=0;E<_;E++)T[E]=arguments[E];p.default._validateParameters("createSelect",T);var S,P=T[0];return P instanceof p.default.Element&&P.elt instanceof HTMLSelectElement?this.elt=(x=P).elt:P instanceof HTMLSelectElement?(x=g(P,this),this.elt=P):(S=document.createElement("select"),P&&typeof P=="boolean"&&S.setAttribute("multiple","true"),x=g(S,this),this.elt=S),x.option=function(N,C){var D;if(N!==void 0){for(var L,F=0;F<this.elt.length;F+=1)if(this.elt[F].textContent===N){D=F;break}D!==void 0?C===!1?this.elt.remove(D):this.elt[D].value=C:((L=document.createElement("option")).textContent=N,L.value=C===void 0?N:C,this.elt.appendChild(L),this._pInst._elements.push(L))}},x.selected=function(N){if(N!==void 0){for(var C=0;C<this.elt.length;C+=1)this.elt[C].value.toString()===N.toString()&&(this.elt.selectedIndex=C);return this}if(this.elt.getAttribute("multiple")){var D=[],L=!0,F=!1,I=void 0;try{for(var B,W=this.elt.selectedOptions[Symbol.iterator]();!(L=(B=W.next()).done);L=!0){var G=B.value;D.push(G.value)}}catch(V){F=!0,I=V}finally{try{L||W.return==null||W.return()}finally{if(F)throw I}}return D}return this.elt.value},x.disable=function(N){if(typeof N=="string")for(var C=0;C<this.elt.length;C++)this.elt[C].value.toString()===N&&(this.elt[C].disabled=!0,this.elt[C].selected=!1);else this.elt.disabled=!0;return this},x.enable=function(N){if(typeof N=="string")for(var C=0;C<this.elt.length;C++)this.elt[C].value.toString()===N&&(this.elt[C].disabled=!1,this.elt[C].selected=!1);else{this.elt.disabled=!1;for(var D=0;D<this.elt.length;D++)this.elt[D].disabled=!1,this.elt[D].selected=!1}return this},x};var c=0;function l(x,N,T,E){var S=document.createElement(N),P=(typeof(T=T||"")=="string"&&(T=[T]),!0),N=!1,C=void 0;try{for(var D,L=T[Symbol.iterator]();!(P=(D=L.next()).done);P=!0){var F=D.value,I=document.createElement("source");I.setAttribute("src",F),S.appendChild(I)}}catch(W){N=!0,C=W}finally{try{P||L.return==null||L.return()}finally{if(N)throw C}}var B=g(S,x,!0);return B.loadedmetadata=!1,S.addEventListener("loadedmetadata",function(){B.width=S.videoWidth,B.height=S.videoHeight,B.elt.width===0&&(B.elt.width=S.videoWidth),B.elt.height===0&&(B.elt.height=S.videoHeight),B.presetPlaybackRate&&(B.elt.playbackRate=B.presetPlaybackRate,delete B.presetPlaybackRate),B.loadedmetadata=!0}),typeof E=="function"&&S.addEventListener("canplaythrough",function W(){E(B),S.removeEventListener("canplaythrough",W)}),B}p.default.prototype.createRadio=function(){function x(N){return N instanceof HTMLInputElement&&N.type==="radio"}function _(N){return N instanceof HTMLLabelElement}var T,E,S,P=arguments.length<=0?void 0:arguments[0];return P instanceof p.default.Element&&(P.elt instanceof HTMLDivElement||P.elt instanceof HTMLSpanElement)?(T=P,this.elt=P.elt):P instanceof HTMLDivElement||P instanceof HTMLSpanElement?(T=g(P,this),E=this.elt=P,typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(S=arguments.length<=1?void 0:arguments[1])):(typeof P=="string"&&(S=P),E=document.createElement("div"),T=g(E,this),this.elt=E),T._name=S||"radioOption_".concat(c++),T._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(N){return x(N)||_(N)&&x(N.firstElementChild)}).map(function(N){return x(N)?N:N.firstElementChild})},T.option=function(N,C){var D,L,F,I=!0,B=!1,W=void 0;try{for(var G,V=T._getOptionsArray()[Symbol.iterator]();!(I=(G=V.next()).done);I=!0){var X=G.value;if(X.value===N){D=X;break}}}catch(Q){B=!0,W=Q}finally{try{I||V.return==null||V.return()}finally{if(B)throw W}}return D===void 0&&((D=document.createElement("input")).setAttribute("type","radio"),D.setAttribute("value",N)),D.setAttribute("name",T._name),_(D.parentElement)?L=D.parentElement:(L=document.createElement("label")).insertAdjacentElement("afterbegin",D),L.lastElementChild instanceof HTMLSpanElement?F=L.lastElementChild:(F=document.createElement("span"),D.insertAdjacentElement("afterend",F)),F.innerHTML=C===void 0?N:C,this.elt.appendChild(L),D},T.remove=function(N){var C=!0,D=!1,L=void 0;try{for(var F,I=T._getOptionsArray()[Symbol.iterator]();!(C=(F=I.next()).done);C=!0){var B=F.value;if(B.value===N)return void(_(B.parentElement)?B.parentElement:B).remove()}}catch(W){D=!0,L=W}finally{try{C||I.return==null||I.return()}finally{if(D)throw L}}},T.value=function(){var N="",C=!0,D=!1,L=void 0;try{for(var F,I=T._getOptionsArray()[Symbol.iterator]();!(C=(F=I.next()).done);C=!0){var B=F.value;if(B.checked){N=B.value;break}}}catch(W){D=!0,L=W}finally{try{C||I.return==null||I.return()}finally{if(D)throw L}}return N},T.selected=function(N){var C=null;if(N===void 0){var D=!0,L=!1,F=void 0;try{for(var I,B=T._getOptionsArray()[Symbol.iterator]();!(D=(I=B.next()).done);D=!0){var W=I.value;if(W.checked){C=W;break}}}catch(se){L=!0,F=se}finally{try{D||B.return==null||B.return()}finally{if(L)throw F}}}else{T._getOptionsArray().forEach(function(A){A.checked=!1,A.removeAttribute("checked")});var G=!0,L=!1,F=void 0;try{for(var V,X=T._getOptionsArray()[Symbol.iterator]();!(G=(V=X.next()).done);G=!0){var Q=V.value;Q.value===N&&(Q.setAttribute("checked",!0),Q.checked=!0,C=Q)}}catch(A){L=!0,F=A}finally{try{G||X.return==null||X.return()}finally{if(L)throw F}}}return C},T.disable=function(){var N=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],C=!0,D=!1,L=void 0;try{for(var F,I=T._getOptionsArray()[Symbol.iterator]();!(C=(F=I.next()).done);C=!0)F.value.setAttribute("disabled",N)}catch(B){D=!0,L=B}finally{try{C||I.return==null||I.return()}finally{if(D)throw L}}},T},p.default.prototype.createColorPicker=function(x){p.default._validateParameters("createColorPicker",arguments);var _=document.createElement("input");return _.type="color",x?x instanceof p.default.Color?_.value=x.toString("#rrggbb"):(p.default.prototype._colorMode="rgb",p.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},_.value=p.default.prototype.color(x).toString("#rrggbb")):_.value="#000000",(_=g(_,this)).color=function(){return x&&(x.mode&&(p.default.prototype._colorMode=x.mode),x.maxes&&(p.default.prototype._colorMaxes=x.maxes)),p.default.prototype.color(this.elt.value)},_},p.default.prototype.createInput=function(){var x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",_=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",T=(p.default._validateParameters("createInput",arguments),document.createElement("input"));return T.setAttribute("value",x),T.setAttribute("type",_),g(T,this)},p.default.prototype.createFileInput=function(x){var _,T=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(p.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(_=document.createElement("input")).setAttribute("type","file"),T&&_.setAttribute("multiple",!0),_.addEventListener("change",function(E){var S=!0,P=!1,N=void 0;try{for(var C,D=E.target.files[Symbol.iterator]();!(S=(C=D.next()).done);S=!0){var L=C.value;p.default.File._load(L,x)}}catch(F){P=!0,N=F}finally{try{S||D.return==null||D.return()}finally{if(P)throw N}}},!1),g(_,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},p.default.prototype.createVideo=function(x,_){return p.default._validateParameters("createVideo",arguments),l(this,"video",x,_)},p.default.prototype.createAudio=function(x,_){return p.default._validateParameters("createAudio",arguments),l(this,"audio",x,_)},p.default.prototype.VIDEO="video",p.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(x){var _=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return _?new Promise(function(T,E){_.call(navigator,x,T,E)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),p.default.prototype.createCapture=function(){for(var x=arguments.length,_=new Array(x),T=0;T<x;T++)_[T]=arguments[T];if(p.default._validateParameters("createCapture",_),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var E,S=!0,P=!0,N=!1,C=0,D=_;C<D.length;C++){var L=D[C];L===p.default.prototype.VIDEO?P=!1:L===p.default.prototype.AUDIO?S=!1:y(L)==="object"?(L.flipped!==void 0&&(N=L.flipped,delete L.flipped),F=Object.assign({},F,L)):typeof L=="function"&&(E=L)}var F=Object.assign({},{video:S,audio:P},F),I=document.createElement("video"),B=(I.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(F).then(function(W){try{"srcObject"in I?I.srcObject=W:I.src=window.URL.createObjectURL(W)}catch{I.src=W}}).catch(function(W){W.name==="NotFoundError"&&p.default._friendlyError("No webcam found on this device","createCapture"),W.name==="NotAllowedError"&&p.default._friendlyError("Access to the camera was denied","createCapture"),console.error(W)}),g(I,this,!0));return B.loadedmetadata=!1,I.addEventListener("loadedmetadata",function(){I.play(),I.width?(B.width=I.width,B.height=I.height,N&&(B.elt.style.transform="scaleX(-1)")):(B.width=B.elt.width=I.videoWidth,B.height=B.elt.height=I.videoHeight),B.loadedmetadata=!0,E&&E(I.srcObject)}),B.flipped=N,B},p.default.prototype.createElement=function(x,_){return p.default._validateParameters("createElement",arguments),x=document.createElement(x),_!==void 0&&(x.innerHTML=_),g(x,this)},p.default.Element.prototype.addClass=function(x){return this.elt.className?this.hasClass(x)||(this.elt.className=this.elt.className+" "+x):this.elt.className=x,this},p.default.Element.prototype.removeClass=function(x){return this.elt.classList.remove(x),this},p.default.Element.prototype.hasClass=function(x){return this.elt.classList.contains(x)},p.default.Element.prototype.toggleClass=function(x){return this.elt.classList.contains(x)?this.elt.classList.remove(x):this.elt.classList.add(x),this},p.default.Element.prototype.child=function(x){return x===void 0?this.elt.childNodes:(typeof x=="string"?(x[0]==="#"&&(x=x.substring(1)),x=document.getElementById(x)):x instanceof p.default.Element&&(x=x.elt),x instanceof HTMLElement&&this.elt.appendChild(x),this)},p.default.Element.prototype.center=function(x){var _=this.elt.style.display,T=this.elt.style.display==="none",E=this.parent().style.display==="none",S={x:this.elt.offsetLeft,y:this.elt.offsetTop},P=(T&&this.show(),E&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),N=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return x==="both"||x===void 0?this.position(P/2+this.parent().offsetLeft,N/2+this.parent().offsetTop):x==="horizontal"?this.position(P/2+this.parent().offsetLeft,S.y):x==="vertical"&&this.position(S.x,N/2+this.parent().offsetTop),this.style("display",_),T&&this.hide(),E&&this.parent().hide(),this},p.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},p.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=(arguments.length<=2?void 0:arguments[2])!=="static"&&(arguments.length<=2?void 0:arguments[2])!=="fixed"&&(arguments.length<=2?void 0:arguments[2])!=="relative"&&(arguments.length<=2?void 0:arguments[2])!=="sticky"&&(arguments.length<=2?void 0:arguments[2])!=="initial"&&(arguments.length<=2?void 0:arguments[2])!=="inherit"?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},p.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var x="";return this.elt.style.transform&&(x=(x=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=x,this},p.default.Element.prototype._rotate=function(){var x="";return this.elt.style.transform&&(x=(x=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":arguments.length===2?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=x,this},p.default.Element.prototype.style=function(x,_){if((_=_ instanceof p.default.Color?"rgba("+_.levels[0]+","+_.levels[1]+","+_.levels[2]+","+_.levels[3]/255+")":_)===void 0){if(x.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(x);for(var T=x.split(";"),E=0;E<T.length;E++){var S=T[E].split(":");S[0]&&S[1]&&(this.elt.style[S[0].trim()]=S[1].trim())}}else this.elt.style[x]=_,x!=="width"&&x!=="height"&&x!=="left"&&x!=="top"||(_=window.getComputedStyle(this.elt).getPropertyValue(x).replace(/[^\d.]/g,""),this[x]=Math.round(parseFloat(_,10)));return this},p.default.Element.prototype.attribute=function(x,_){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return _===void 0?this.elt.getAttribute(x):(this.elt.setAttribute(x,_),this);if(_===void 0)return this.elt.firstChild.getAttribute(x);for(var T=0;T<this.elt.childNodes.length;T++)this.elt.childNodes[T].setAttribute(x,_)},p.default.Element.prototype.removeAttribute=function(x){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var _=0;_<this.elt.childNodes.length;_++)this.elt.childNodes[_].removeAttribute(x);return this.elt.removeAttribute(x),this},p.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},p.default.Element.prototype.show=function(){return this.elt.style.display="block",this},p.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},p.default.Element.prototype.size=function(x,_){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var T=x,E=_,S=p.default.prototype.AUTO;if(T!==S||E!==S){if(T===S?T=_*this.width/this.height:E===S&&(E=x*this.height/this.width),this.elt instanceof HTMLCanvasElement){var P,N={},C=this.elt.getContext("2d");for(P in C)N[P]=C[P];for(P in this.elt.setAttribute("width",T*this._pInst._pixelDensity),this.elt.setAttribute("height",E*this._pInst._pixelDensity),this.elt.style.width=T+"px",this.elt.style.height=E+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),N)this.elt.getContext("2d")[P]=N[P]}else this.elt.style.width=T+"px",this.elt.style.height=E+"px",this.elt.width=T,this.elt.height=E;this.width=T,this.height=E,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",T),this._pInst._setProperty("height",E))}return this},p.default.Element.prototype.remove=function(){this instanceof p.default.MediaElement&&(this.stop(),(_=this.elt.srcObject)!==null&&_.getTracks().forEach(function(T){T.stop()}));var x,_=this._pInst._elements.indexOf(this);for(x in _!==-1&&this._pInst._elements.splice(_,1),this._events)this.elt.removeEventListener(x,this._events[x]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},p.default.Element.prototype.drop=function(x,_){var T;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",T=function(E){E.preventDefault()}),this.elt.addEventListener("dragleave",T)),p.default.Element._attachListener("drop",function(S){S.preventDefault(),typeof _=="function"&&_.call(this,S);var S=S.dataTransfer.files,P=!0,N=!1,C=void 0;try{for(var D,L=S[Symbol.iterator]();!(P=(D=L.next()).done);P=!0){var F=D.value;p.default.File._load(F,x)}}catch(I){N=!0,C=I}finally{try{P||L.return==null||L.return()}finally{if(N)throw C}}},this)):console.log("The File APIs are not fully supported in this browser."),this},p.default.Element.prototype.draggable=function(x){var _,T="ontouchstart"in window,E=0,S=0,P=0,N=0,C=T?"touchend":"mouseup",D=T?"touchmove":"mousemove";function L(I){var B;I=I||window.event,N=T?(B=I.changedTouches,E=P-parseInt(B[0].clientX),S=N-parseInt(B[0].clientY),P=parseInt(B[0].clientX),parseInt(B[0].clientY)):(E=P-parseInt(I.clientX),S=N-parseInt(I.clientY),P=parseInt(I.clientX),parseInt(I.clientY)),x.style.left=x.offsetLeft-E+"px",x.style.top=x.offsetTop-S+"px"}function F(){document.removeEventListener(C,F,!1),document.removeEventListener(D,L,!1)}return x===void 0?_=x=this.elt:x!==this.elt&&x.elt!==this.elt&&(x=x.elt,_=this.elt),_.addEventListener(T?"touchstart":"mousedown",function(I){{var B;I=I||window.event,N=T?(B=I.changedTouches,P=parseInt(B[0].clientX),parseInt(B[0].clientY)):(P=parseInt(I.clientX),parseInt(I.clientY))}return document.addEventListener(C,F,!1),document.addEventListener(D,L,!1),!1},!1),_.style.cursor="move",this};function w(x,_,T,E){f(this,w),this.callback=x,this.time=_,this.id=T,this.val=E}t=function(x){var _=E;if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(x&&x.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),x&&b(_,x);var T=v(E);function E(S,P){f(this,E);var N=i(P=T.call(this,S,P));return P.elt.crossOrigin="anonymous",P._prevTime=0,P._cueIDCounter=0,P._cues=[],P.pixels=[],P._pixelsState=i(P),P._pixelDensity=1,P._modified=!1,P._frameOnCanvas=-1,Object.defineProperty(N,"src",{get:function(){var C=N.elt.children[0].src,D=N.elt.src===window.location.href?"":N.elt.src;return C===window.location.href?D:C},set:function(C){for(var D=0;D<N.elt.children.length;D++)N.elt.removeChild(N.elt.children[D]);var L=document.createElement("source");L.src=C,S.appendChild(L),N.elt.src=C,N.modified=!0}}),N._onended=function(){},N.elt.onended=function(){N._onended(N)},P}return h(E,[{key:"play",value:function(){var S;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(S=this.elt.play())&&S.catch&&S.catch(function(P){P.name==="NotAllowedError"?console.error(P):console.error("Media play method encountered an unexpected error",P)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var S=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(S)},{passive:!0,once:!0})}},{key:"autoplay",value:function(S){var P=this,N=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",S),S&&!N&&(S=function(){return P._setupAutoplayFailDetection()},this.elt.readyState===4?S():this.elt.addEventListener("canplay",S,{passive:!0,once:!0})),this}},{key:"volume",value:function(S){if(S===void 0)return this.elt.volume;this.elt.volume=S}},{key:"speed",value:function(S){if(S===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=S:this.presetPlaybackRate=S}},{key:"time",value:function(S){return S===void 0?this.elt.currentTime:(this.elt.currentTime=S,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var S=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&S&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&(this.drawingContext.save(),this.drawingContext.scale(-1,1),this.drawingContext.translate(-this.canvas.width,0)),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&this.drawingContext.restore(),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var S=arguments.length,P=new Array(S),N=0;N<S;N++)P[N]=arguments[N];return p.default.Renderer2D.prototype.loadPixels.apply(this,P)}},{key:"updatePixels",value:function(S,P,N,C){return this.loadedmetadata&&(this._ensureCanvas(),p.default.Renderer2D.prototype.updatePixels.call(this,S,P,N,C)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var S=arguments.length,P=new Array(S),N=0;N<S;N++)P[N]=arguments[N];return p.default.Renderer2D.prototype.get.apply(this,P)}},{key:"_getPixel",value:function(){this.loadPixels();for(var S=arguments.length,P=new Array(S),N=0;N<S;N++)P[N]=arguments[N];return p.default.Renderer2D.prototype._getPixel.apply(this,P)}},{key:"set",value:function(S,P,N){this.loadedmetadata&&(this._ensureCanvas(),p.default.Renderer2D.prototype.set.call(this,S,P,N),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var S=arguments.length,P=new Array(S),N=0;N<S;N++)P[N]=arguments[N];p.default.prototype.copy.apply(this,P)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var S=arguments.length,P=new Array(S),N=0;N<S;N++)P[N]=arguments[N];p.default.Image.prototype.mask.apply(this,P)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(S){this._modified=S}},{key:"onended",value:function(S){return this._onended=S,this}},{key:"connect",value:function(S){var P,N;if(typeof p.default.prototype.getAudioContext=="function")P=p.default.prototype.getAudioContext(),N=p.default.soundOut.input;else try{N=(P=S.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=P.createMediaElementSource(this.elt),this.audioSourceNode.connect(N)),S?S.input?this.audioSourceNode.connect(S.input):this.audioSourceNode.connect(S):this.audioSourceNode.connect(N)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(S,D,N){var C=this._cueIDCounter++,D=new w(D,S,C,N);return this._cues.push(D),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),C}},{key:"removeCue",value:function(S){for(var P=0;P<this._cues.length;P++)this._cues[P].id===S&&(console.log(S),this._cues.splice(P,1));this._cues.length===0&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var S=this.time(),P=0;P<this._cues.length;P++){var N=this._cues[P].time,C=this._cues[P].val;this._prevTime<N&&N<=S&&this._cues[P].callback(C)}this._prevTime=S}}]),E}(p.default.Element),p.default.MediaElement=t,t=function(){function x(_,T){f(this,x),this.file=_,this._pInst=T,T=_.type.split("/"),this.type=T[0],this.subtype=T[1],this.name=_.name,this.size=_.size,this.data=void 0}return h(x,null,[{key:"_createLoader",value:function(_,T){var E=new FileReader;return E.onload=function(S){var P,N=new p.default.File(_);N.file.type==="application/json"?N.data=JSON.parse(S.target.result):N.file.type==="text/xml"?(P=new DOMParser().parseFromString(S.target.result,"text/xml"),N.data=new p.default.XML(P.documentElement)):N.data=S.target.result,T(N)},E}},{key:"_load",value:function(_,T){var E;/^text\//.test(_.type)||_.type==="application/json"?p.default.File._createLoader(_,T).readAsText(_):/^(video|audio)\//.test(_.type)?((E=new p.default.File(_)).data=URL.createObjectURL(_),T(E)):p.default.File._createLoader(_,T).readAsDataURL(_)}}]),x}(),p.default.File=t,t=p.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248}],300:[function(y,m,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(y=y("../core/main"))&&y.__esModule?y:{default:y};a.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",a.default.prototype.accelerationX=0,a.default.prototype.accelerationY=0,a.default.prototype.accelerationZ=0,a.default.prototype.pAccelerationX=0,a.default.prototype.pAccelerationY=0,a.default.prototype.pAccelerationZ=0,a.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},a.default.prototype.rotationX=0,a.default.prototype.rotationY=0,a.default.prototype.rotationZ=0,a.default.prototype.pRotationX=0,a.default.prototype.pRotationY=0;var p=a.default.prototype.pRotationZ=0,s=0,h=0,b="clockwise",v="clockwise",i="clockwise",d=(a.default.prototype.pRotateDirectionX=void 0,a.default.prototype.pRotateDirectionY=void 0,a.default.prototype.pRotateDirectionZ=void 0,a.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},a.default.prototype.turnAxis=void 0,.5),f=30,y=(a.default.prototype.setMoveThreshold=function(g){a.default._validateParameters("setMoveThreshold",arguments),d=g},a.default.prototype.setShakeThreshold=function(g){a.default._validateParameters("setShakeThreshold",arguments),f=g},a.default.prototype._ondeviceorientation=function(g){this._updatePRotations(),this._setProperty("rotationX",this._fromDegrees(g.beta)),this._setProperty("rotationY",this._fromDegrees(g.gamma)),this._setProperty("rotationZ",this._fromDegrees(g.alpha)),this._handleMotion()},a.default.prototype._ondevicemotion=function(g){this._updatePAccelerations(),this._setProperty("accelerationX",2*g.acceleration.x),this._setProperty("accelerationY",2*g.acceleration.y),this._setProperty("accelerationZ",2*g.acceleration.z),this._handleMotion()},a.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var g,c,l,w,x,_=this._isGlobal?window:this;typeof _.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>d||Math.abs(this.accelerationY-this.pAccelerationY)>d||Math.abs(this.accelerationZ-this.pAccelerationZ)>d)&&_.deviceMoved(),typeof _.deviceTurned=="function"&&(c=this._toDegrees(this.rotationX)+180,l=this._toDegrees(this.pRotationX)+180,g=p+180,0<c-l&&c-l<270||c-l<-270?b="clockwise":(c-l<0||270<c-l)&&(b="counter-clockwise"),b!==this.pRotateDirectionX&&(g=c),90<Math.abs(c-g)&&Math.abs(c-g)<270&&(g=c,this._setProperty("turnAxis","X"),_.deviceTurned()),this.pRotateDirectionX=b,p=g-180,l=this._toDegrees(this.rotationY)+180,c=this._toDegrees(this.pRotationY)+180,g=s+180,0<l-c&&l-c<270||l-c<-270?v="clockwise":(l-c<0||270<l-this.pRotationY)&&(v="counter-clockwise"),v!==this.pRotateDirectionY&&(g=l),90<Math.abs(l-g)&&Math.abs(l-g)<270&&(g=l,this._setProperty("turnAxis","Y"),_.deviceTurned()),this.pRotateDirectionY=v,s=g-180,0<(c=this._toDegrees(this.rotationZ))-(l=this._toDegrees(this.pRotationZ))&&c-l<270||c-l<-270?i="clockwise":(c-l<0||270<c-l)&&(i="counter-clockwise"),i!==this.pRotateDirectionZ&&(h=c),90<Math.abs(c-h)&&Math.abs(c-h)<270&&(h=c,this._setProperty("turnAxis","Z"),_.deviceTurned()),this.pRotateDirectionZ=i,this._setProperty("turnAxis",void 0)),typeof _.deviceShaken=="function"&&(this.pAccelerationX!==null&&(w=Math.abs(this.accelerationX-this.pAccelerationX),x=Math.abs(this.accelerationY-this.pAccelerationY)),f<w+x&&_.deviceShaken())},a.default);u.default=y},{"../core/main":283}],301:[function(t,m,u){t("core-js/modules/es.array.for-each"),t("core-js/modules/es.string.repeat"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.string.repeat"),t("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(t=t("../core/main"))&&t.__esModule?t:{default:t};a.default.prototype.isKeyPressed=!1,a.default.prototype.keyIsPressed=!1,a.default.prototype.key="",a.default.prototype.keyCode=0,a.default.prototype._onkeydown=function(p){var s;p.repeat?this._setProperty("isKeyRepeated",!0):(this._setProperty("isKeyRepeated",!1),this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",p.which),this._downKeys[p.which]=!0,this._setProperty("key",p.key||String.fromCharCode(p.which)||p.which),p.metaKey&&(this._metaKeys||(this._metaKeys=[]),this._metaKeys.push(p.which)),typeof(s=this._isGlobal?window:this).keyPressed!="function"||p.charCode||s.keyPressed(p)===!1&&p.preventDefault())},a.default.prototype._onkeyup=function(p){var s=this,h=(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1),this._setProperty("_lastKeyCodePressed",this._keyCode),this._downKeys[p.which]=!1,p.key==="Meta"&&this._metaKeys&&(this._metaKeys.forEach(function(b){s._downKeys[b]=!1}),this._metaKeys=[]),this._isGlobal?window:this);typeof h.keyReleased=="function"&&h.keyReleased(p)===!1&&p.preventDefault()},a.default.prototype._onkeypress=function(p){var s;p.which===this._lastKeyCodeTyped&&this.isKeyRepeated||(this._setProperty("_lastKeyCodeTyped",p.which),this._setProperty("key",p.key||String.fromCharCode(p.which)||p.which),typeof(s=this._isGlobal?window:this).keyTyped=="function"&&s.keyTyped(p)===!1&&p.preventDefault())},a.default.prototype._onblur=function(p){this._downKeys={}},a.default.prototype.keyIsDown=function(p){return a.default._validateParameters("keyIsDown",arguments),this._downKeys[p]||!1},a.default.prototype._areDownKeys=function(){for(var p in this._downKeys)if(this._downKeys.hasOwnProperty(p)&&this._downKeys[p]===!0)return!0;return!1},t=a.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.string.repeat":203,"core-js/modules/web.dom-collections.for-each":245}],302:[function(t,m,u){function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(v)}function p(v){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(i){return a(i)}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":a(i)})(v)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(s=t("../core/main"))&&s.__esModule?s:{default:s},h=function(v){if(v&&v.__esModule)return v;if(v===null||p(v)!=="object"&&typeof v!="function")return{default:v};var i=b();if(i&&i.has(v))return i.get(v);var d,f={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in v){var g;Object.prototype.hasOwnProperty.call(v,d)&&((g=y?Object.getOwnPropertyDescriptor(v,d):null)&&(g.get||g.set)?Object.defineProperty(f,d,g):f[d]=v[d])}return f.default=v,i&&i.set(v,f),f}(t("../core/constants"));function b(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,b=function(){return v},v)}s.default.prototype.movedX=0,s.default.prototype.movedY=0,s.default.prototype._hasMouseInteracted=!1,s.default.prototype.mouseX=0,s.default.prototype.mouseY=0,s.default.prototype.pmouseX=0,s.default.prototype.pmouseY=0,s.default.prototype.winMouseX=0,s.default.prototype.winMouseY=0,s.default.prototype.pwinMouseX=0,s.default.prototype.pwinMouseY=0,s.default.prototype.mouseButton=0,s.default.prototype.mouseIsPressed=!1,s.default.prototype._updateNextMouseCoords=function(v){var i,d,f,y,g;this._curElement!==null&&(!v.touches||0<v.touches.length)&&(i=this._curElement.elt,d=this.width,f=this.height,(y=v)&&!y.clientX&&(y.touches?y=y.touches[0]:y.changedTouches&&(y=y.changedTouches[0])),g=i.getBoundingClientRect(),d=i.scrollWidth/d||1,i=i.scrollHeight/f||1,f={x:(y.clientX-g.left)/d,y:(y.clientY-g.top)/i,winX:y.clientX,winY:y.clientY,id:y.identifier},this._setProperty("mouseX",f.x),this._setProperty("mouseY",f.y),this._setProperty("winMouseX",f.winX),this._setProperty("winMouseY",f.winY),document.pointerLockElement===null?(d=this.mouseX-this.pmouseX,g=this.mouseY-this.pmouseY,this._setProperty("movedX",d),this._setProperty("movedY",g)):(this._setProperty("movedX",v.movementX),this._setProperty("movedY",v.movementY))),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},s.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},s.default.prototype._setMouseButton=function(v){v.button===1?this._setProperty("mouseButton",h.CENTER):v.button===2?this._setProperty("mouseButton",h.RIGHT):this._setProperty("mouseButton",h.LEFT)},s.default.prototype._onmousemove=function(v){var i=this._isGlobal?window:this;this._updateNextMouseCoords(v),this.mouseIsPressed?typeof i.mouseDragged=="function"?i.mouseDragged(v)===!1&&v.preventDefault():typeof i.touchMoved=="function"&&i.touchMoved(v)===!1&&v.preventDefault():typeof i.mouseMoved=="function"&&i.mouseMoved(v)===!1&&v.preventDefault()},s.default.prototype._onmousedown=function(v){var i=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(v),this._updateNextMouseCoords(v),this.touchstart||(typeof i.mousePressed=="function"?i.mousePressed(v)===!1&&v.preventDefault():typeof i.touchStarted=="function"&&i.touchStarted(v)===!1&&v.preventDefault(),this.touchstart=!1)},s.default.prototype._onmouseup=function(v){var i=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),this.touchend||(typeof i.mouseReleased=="function"?i.mouseReleased(v)===!1&&v.preventDefault():typeof i.touchEnded=="function"&&i.touchEnded(v)===!1&&v.preventDefault(),this.touchend=!1)},s.default.prototype._ondragend=s.default.prototype._onmouseup,s.default.prototype._ondragover=s.default.prototype._onmousemove,s.default.prototype._onclick=function(v){var i=this._isGlobal?window:this;typeof i.mouseClicked=="function"&&i.mouseClicked(v)===!1&&v.preventDefault()},s.default.prototype._ondblclick=function(v){var i=this._isGlobal?window:this;typeof i.doubleClicked=="function"&&i.doubleClicked(v)===!1&&v.preventDefault()},s.default.prototype._mouseWheelDeltaY=0,s.default.prototype._pmouseWheelDeltaY=0,s.default.prototype._onwheel=function(v){var i=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",v.deltaY),typeof i.mouseWheel=="function"&&(v.delta=v.deltaY,i.mouseWheel(v)===!1&&v.preventDefault())},s.default.prototype.requestPointerLock=function(){var v=this._curElement.elt;return v.requestPointerLock=v.requestPointerLock||v.mozRequestPointerLock,v.requestPointerLock?(v.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},s.default.prototype.exitPointerLock=function(){document.exitPointerLock()},t=s.default,u.default=t},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],303:[function(t,m,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.touches=[],t.default.prototype._updateTouchCoords=function(a){if(this._curElement!==null){for(var p=[],s=0;s<a.touches.length;s++)p[s]=function(g,y,c,i){var d=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,f=g.getBoundingClientRect(),y=g.scrollWidth/y||1,g=g.scrollHeight/c||1,c=i.touches[d]||i.changedTouches[d];return{x:(c.clientX-f.left)/y,y:(c.clientY-f.top)/g,winX:c.clientX,winY:c.clientY,id:c.identifier}}(this._curElement.elt,this.width,this.height,a,s);this._setProperty("touches",p)}},t.default.prototype._ontouchstart=function(a){var p=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(a),this._updateNextMouseCoords(a),this._updateMouseCoords(),typeof p.touchStarted=="function"&&(p.touchStarted(a)===!1&&a.preventDefault(),this.touchstart=!0)},t.default.prototype._ontouchmove=function(a){var p=this._isGlobal?window:this;this._updateTouchCoords(a),this._updateNextMouseCoords(a),typeof p.touchMoved=="function"?p.touchMoved(a)===!1&&a.preventDefault():typeof p.mouseDragged=="function"&&p.mouseDragged(a)===!1&&a.preventDefault()},t.default.prototype._ontouchend=function(a){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(a),this._updateNextMouseCoords(a);var p=this._isGlobal?window:this;typeof p.touchEnded=="function"&&(p.touchEnded(a)===!1&&a.preventDefault(),this.touchend=!0)},t=t.default,u.default=t},{"../core/main":283}],304:[function(t,m,u){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a,p,s,h,b={_toPixels:function(v){var i,d;return v instanceof ImageData?v.data:v.getContext("2d")?v.getContext("2d").getImageData(0,0,v.width,v.height).data:v.getContext("webgl")?(d=(i=v.getContext("webgl")).drawingBufferWidth*i.drawingBufferHeight*4,d=new Uint8Array(d),i.readPixels(0,0,v.width,v.height,i.RGBA,i.UNSIGNED_BYTE,d),d):void 0},_getARGB:function(v,i){return i*=4,v[3+i]<<24&4278190080|v[i]<<16&16711680|v[1+i]<<8&65280|255&v[2+i]},_setPixels:function(v,i){for(var d,f=0,y=v.length;f<y;f++)v[0+(d=4*f)]=(16711680&i[f])>>>16,v[1+d]=(65280&i[f])>>>8,v[2+d]=255&i[f],v[3+d]=(4278190080&i[f])>>>24},_toImageData:function(v){return v instanceof ImageData?v:v.getContext("2d").getImageData(0,0,v.width,v.height)},_createImageData:function(v,i){return b._tmpCanvas=document.createElement("canvas"),b._tmpCtx=b._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(v,i)},apply:function(v,g,d){var f=v.getContext("2d"),y=f.getImageData(0,0,v.width,v.height),g=g(y,d);g instanceof ImageData?f.putImageData(g,0,0,0,0,v.width,v.height):f.putImageData(y,0,0,0,0,v.width,v.height)},threshold:function(v){for(var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:.5,d=b._toPixels(v),f=Math.floor(255*i),y=0;y<d.length;y+=4){var g=void 0,g=f<=.2126*d[y]+.7152*d[y+1]+.0722*d[y+2]?255:0;d[y]=d[y+1]=d[y+2]=g}},gray:function(v){for(var i=b._toPixels(v),d=0;d<i.length;d+=4){var f=i[d],y=i[d+1],g=i[d+2];i[d]=i[d+1]=i[d+2]=.2126*f+.7152*y+.0722*g}},opaque:function(v){for(var i=b._toPixels(v),d=0;d<i.length;d+=4)i[d+3]=255;return i},invert:function(v){for(var i=b._toPixels(v),d=0;d<i.length;d+=4)i[d]=255-i[d],i[d+1]=255-i[d+1],i[d+2]=255-i[d+2]},posterize:function(v){var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:4,d=b._toPixels(v);if(i<2||255<i)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var f=i-1,y=0;y<d.length;y+=4){var g=d[y],c=d[y+1],l=d[y+2];d[y]=255*(g*i>>8)/f,d[y+1]=255*(c*i>>8)/f,d[y+2]=255*(l*i>>8)/f}},dilate:function(v){for(var i,d,f,y,g,c,l,w,x,_=b._toPixels(v),T=0,E=_.length?_.length/4:0,S=new Int32Array(E);T<E;)for(d=(i=T)+v.width;T<d;)y=f=b._getARGB(_,T),(x=T-1)<i&&(x=T),d<=(w=T+1)&&(w=T),(g=T-v.width)<0&&(g=0),E<=(c=T+v.width)&&(c=T),g=b._getARGB(_,g),x=b._getARGB(_,x),c=b._getARGB(_,c),(y=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))<(l=77*(x>>16&255)+151*(x>>8&255)+28*(255&x))&&(f=x,y=l),y<(l=77*((x=b._getARGB(_,w))>>16&255)+151*(x>>8&255)+28*(255&x))&&(f=x,y=l),y<(w=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))&&(f=g,y=w),y<(x=77*(c>>16&255)+151*(c>>8&255)+28*(255&c))&&(f=c,y=x),S[T++]=f;b._setPixels(_,S)},erode:function(v){for(var i,d,f,y,g,c,l,w,x,_=b._toPixels(v),T=0,E=_.length?_.length/4:0,S=new Int32Array(E);T<E;)for(d=(i=T)+v.width;T<d;)y=f=b._getARGB(_,T),(x=T-1)<i&&(x=T),d<=(w=T+1)&&(w=T),(g=T-v.width)<0&&(g=0),E<=(c=T+v.width)&&(c=T),g=b._getARGB(_,g),x=b._getARGB(_,x),c=b._getARGB(_,c),(l=77*(x>>16&255)+151*(x>>8&255)+28*(255&x))<(y=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))&&(f=x,y=l),(l=77*((x=b._getARGB(_,w))>>16&255)+151*(x>>8&255)+28*(255&x))<y&&(f=x,y=l),(w=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))<y&&(f=g,y=w),(x=77*(c>>16&255)+151*(c>>8&255)+28*(255&c))<y&&(f=c,y=x),S[T++]=f;b._setPixels(_,S)},blur:function(v,i){for(var d,f,y,g,c,l,w,x,_,T,E=b._toPixels(v),S=v.width,P=v.height,N=S*P,C=new Int32Array(N),D=0;D<N;D++)C[D]=b._getARGB(E,D);var L,F,I,B,W,G,V,X,Q=new Int32Array(N),se=new Int32Array(N),M=new Int32Array(N),A=new Int32Array(N),z=0,$=3.5*i|0;if(a!==($=$<1?1:$<248?$:248)){p=1+(a=$)<<1,s=new Int32Array(p),h=new Array(p);for(var Z=0;Z<p;Z++)h[Z]=new Int32Array(256);for(var te=1,ie=$-1;te<$;te++){s[$+te]=s[ie]=G=ie*ie,V=h[$+te],X=h[ie--];for(var he=0;he<256;he++)V[he]=X[he]=G*he}W=s[$]=$*$,V=h[$];for(var oe=0;oe<256;oe++)V[oe]=W*oe}for(F=0;F<P;F++){for(L=0;L<S;L++){if(g=y=f=c=d=0,(l=L-a)<0)T=-l,l=0;else{if(S<=l)break;T=0}for(I=T;I<p&&!(S<=l);I++){var ce=C[l+z];B=h[I],c+=B[(-16777216&ce)>>>24],f+=B[(16711680&ce)>>16],y+=B[(65280&ce)>>8],g+=B[255&ce],d+=s[I],l++}Q[w=z+L]=c/d,se[w]=f/d,M[w]=y/d,A[w]=g/d}z+=S}for(_=(x=-a)*S,F=z=0;F<P;F++){for(L=0;L<S;L++){if(g=y=f=c=d=0,x<0)T=w=-x,l=L;else{if(P<=x)break;T=0,w=x,l=L+_}for(I=T;I<p&&!(P<=w);I++)B=h[I],c+=B[Q[l]],f+=B[se[l]],y+=B[M[l]],g+=B[A[l]],d+=s[I],w++,l+=S;C[L+z]=c/d<<24|f/d<<16|y/d<<8|g/d}z+=S,_+=S,x++}b._setPixels(E,C)}};u.default=b},{"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int32-array":225,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242}],305:[function(t,m,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=s(t("../core/main")),p=s(t("omggif"));function s(b){return b&&b.__esModule?b:{default:b}}function h(b){return function(v){if(Array.isArray(v)){for(var i=0,d=new Array(v.length);i<v.length;i++)d[i]=v[i];return d}}(b)||function(v){if(Symbol.iterator in Object(v)||Object.prototype.toString.call(v)==="[object Arguments]")return Array.from(v)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.createImage=function(b,v){return a.default._validateParameters("createImage",arguments),new a.default.Image(b,v)},a.default.prototype.saveCanvas=function(){for(var b,v,i,d,f,y,g=arguments.length,c=new Array(g),l=0;l<g;l++)c[l]=arguments[l];switch(a.default._validateParameters("saveCanvas",c),c[0]instanceof HTMLCanvasElement?(b=c[0],c.shift()):c[0]instanceof a.default.Element?(b=c[0].elt,c.shift()):c[0]instanceof a.default.Framebuffer?(d=c[0],(f=this.createGraphics(d.width,d.height)).pixelDensity(pixelDensity()),d.loadPixels(),f.loadPixels(),f.pixels.set(d.pixels),f.updatePixels(),b=f.elt,c.shift()):b=this._curElement&&this._curElement.elt,1<=c.length&&(v=c[0]),i=(i=2<=c.length?c[1]:i)||a.default.prototype._checkFileExtension(v,i)[1]||"png"){default:y="image/png";break;case"webp":y="image/webp";break;case"jpeg":case"jpg":y="image/jpeg"}b.toBlob(function(w){a.default.prototype.downloadFile(w,v,i),f&&f.remove()},y)},a.default.prototype.encodeAndDownloadGif=function(b,v){for(var i=b.gifProperties,d=i.loopLimit,f=(d===1?d=null:d===null&&(d=0),new Uint8Array(b.width*b.height*i.numFrames)),y=[],g={},c=0;c<i.numFrames;c++){for(var l=new Set,w=i.frames[c].image.data,x=w.length,_=new Uint32Array(b.width*b.height),T=0,E=0;T<x;T+=4,E++){var S=w[T+0]<<16|w[T+1]<<8|w[T+2]<<0;l.add(S),_[E]=S}var P=h(l).sort().toString();g[P]===void 0?g[P]={freq:1,frames:[c]}:(g[P].freq+=1,g[P].frames.push(c)),y.push(_)}for(var D=[],N=Object.keys(g).sort(function(M,A){return g[A].freq-g[M].freq}),C=N[0].split(",").map(function(M){return parseInt(M)}),D=D.concat(g[C].frames),L=new Set(C),F=1;F<N.length;F++){var I=N[F].split(",").map(function(M){return parseInt(M)}).filter(function(M){return!L.has(M)});if(C.length+I.length<=256){for(var B=0;B<I.length;B++)C.push(I[B]),L.add(I[B]);D=D.concat(g[N[F]].frames)}}D=new Set(D);for(var W={},G=0;G<C.length;G++)W[C[G]]||(W[C[G]]=G);for(var V=1;V<C.length;)V<<=1;C.length=V;for(var d={loop:d,palette:new Uint32Array(C)},X=new p.default.GifWriter(f,b.width,b.height,d),Q={},se=0;se<i.numFrames;se++)(function(A){var z=!D.has(A),$=z?[]:C,Z=new Uint8Array(b.width*b.height),te={},ie=new Set,he=(y[A].forEach(function(de,ye){z?(te[de]===void 0&&(te[de]=$.length,$.push(de)),Z[ye]=te[de]):Z[ye]=W[de],0<A&&y[A-1][ye]!==de&&ie.add(de)}),{}),oe=$.filter(function(de){return!ie.has(de)});if(0<oe.length){var oe=oe[0],ce=(z?te:W)[oe];if(0<A){for(var fe=0;fe<y[A].length;fe++)y[A-1][fe]===y[A][fe]&&(Z[fe]=ce);he.transparent=ce,Q.frameOpts.disposal=1}}if(he.delay=i.frames[A].delay/10,z){for(var ee=1;ee<$.length;)ee<<=1;$.length=ee,he.palette=new Uint32Array($)}0<A&&X.addFrame(0,0,b.width,b.height,Q.pixelPaletteIndex,Q.frameOpts),Q={pixelPaletteIndex:Z,frameOpts:he}})(se);Q.frameOpts.disposal=1,X.addFrame(0,0,b.width,b.height,Q.pixelPaletteIndex,Q.frameOpts),d=new Blob([f.slice(0,X.end())],{type:"image/gif"}),a.default.prototype.downloadFile(d,v,"gif")},a.default.prototype.saveFrames=function(b,v,i,y,f){a.default._validateParameters("saveFrames",arguments),i=a.default.prototype.constrain(i=i||3,0,15),i*=1e3;var y=a.default.prototype.constrain(y||15,0,22),g=0,c=a.default.prototype._makeFrame,l=this._curElement.elt,w=[],x=setInterval(function(){w.push(c(b+g,v,l)),g++},1e3/y);setTimeout(function(){if(clearInterval(x),f)f(w);else for(var _=0,T=w;_<T.length;_++){var E=T[_];a.default.prototype.downloadFile(E.imageData,E.filename,E.ext)}w=[]},.01+i)},a.default.prototype._makeFrame=function(b,v,f){var d,f=this?this._curElement.elt:f;if(v)switch(v.toLowerCase()){case"png":d="image/png";break;case"jpeg":case"jpg":d="image/jpeg";break;default:d="image/png"}else v="png",d="image/png";var f=(f=f.toDataURL(d)).replace(d,"image/octet-stream"),y={};return y.imageData=f,y.filename=b,y.ext=v,y},t=a.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,omggif:256}],306:[function(t,m,u){function a(l){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(l)}function p(l){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(l)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t("regenerator-runtime/runtime");var s=f(t("../core/main")),h=f(t("../core/helpers")),b=function(l){if(l&&l.__esModule)return l;if(l===null||p(l)!=="object"&&typeof l!="function")return{default:l};var w=d();if(w&&w.has(l))return w.get(l);var x,_={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in l){var E;Object.prototype.hasOwnProperty.call(l,x)&&((E=T?Object.getOwnPropertyDescriptor(l,x):null)&&(E.get||E.set)?Object.defineProperty(_,x,E):_[x]=l[x])}return _.default=l,w&&w.set(l,_),_}(t("../core/constants")),v=f(t("omggif")),i=t("gifenc");function d(){var l;return typeof WeakMap!="function"?null:(l=new WeakMap,d=function(){return l},l)}function f(l){return l&&l.__esModule?l:{default:l}}function y(l,w,x,_,T,E,S){try{var P=l[E](S),N=P.value}catch(C){return void x(C)}P.done?w(N):Promise.resolve(N).then(_,T)}function g(l,w,x,_,T,E,S,P,N,C,D){var L,F,I,B,W,G,V,X,Q;return l===b.COVER&&(L=w,I=x,V=E,X=S,G=P,Q=N,F=C,B=D,W=Math.max(V/F,X/B),V/=W,X/=W,W=G,G=Q,L===b.CENTER?W+=(F-V)/2:L===b.RIGHT&&(W+=F-V),I===b.CENTER?G+=(B-X)/2:I===b.BOTTOM&&(G+=B-X),P=(Q={x:W,y:G,w:V,h:X}).x,N=Q.y,C=Q.w,D=Q.h),l===b.CONTAIN&&(L=w,F=x,I=_,B=T,W=E,G=S,V=C,X=D,Q=Math.max(V/W,X/G),V/=Q,X/=Q,Q=I,I=B,L===b.CENTER?Q+=(W-V)/2:L===b.RIGHT&&(Q+=W-V),F===b.CENTER?I+=(G-X)/2:F===b.BOTTOM&&(I+=G-X),_=(l={x:Q,y:I,w:V,h:X}).x,T=l.y,E=l.w,S=l.h),{sx:P,sy:N,sw:C,sh:D,dx:_,dy:T,dw:E,dh:S}}function c(l,w){return 0<l&&l<w?l:w}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),s.default.prototype.loadImage=function(l,w,x){s.default._validateParameters("loadImage",arguments);var _=new s.default.Image(1,1,this),T=this,E=new Request(l,{method:"GET",mode:"cors"});return fetch(l,E).then(function(S){var P,N=S.headers.get("content-type");N===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),N&&N.includes("image/gif")?S.arrayBuffer().then(function(C){if(C){for(var C=new Uint8Array(C),D=_,L=w,F=x,I=(function(z){T._decrementPreload()}).bind(T),B=new v.default.GifReader(C),W=(D.width=D.canvas.width=B.width,D.height=D.canvas.height=B.height,[]),G=B.numFrames(),V=new Uint8ClampedArray(D.width*D.height*4),X=0;X<G;X++){var Q=B.frameInfo(X),se=D.drawingContext.getImageData(0,0,D.width,D.height),M=(V=se.data.slice(),function(z,$){try{$.decodeAndBlitFrameRGBA(z,V)}catch(Z){s.default._friendlyFileLoadError(8,D.src),typeof F=="function"?F(Z):console.error(Z)}}(X,B),new ImageData(V,D.width,D.height)),M=(D.drawingContext.putImageData(M,0,0),Q.delay);M===0&&(M=10),W.push({image:D.drawingContext.getImageData(0,0,D.width,D.height),delay:10*M}),Q.disposal===2?D.drawingContext.clearRect(Q.x,Q.y,Q.width,Q.height):Q.disposal===3&&D.drawingContext.putImageData(se,0,0,Q.x,Q.y,Q.width,Q.height)}(C=B.loopCount())===null?C=1:C===0&&(C=null),D.drawingContext.putImageData(W[0].image,0,0),1<W.length&&(D.gifProperties={displayIndex:0,loopLimit:C,loopCount:0,frames:W,numFrames:G,playing:!0,timeDisplayed:0,lastChangeTime:0}),typeof L=="function"&&L(D),I()}},function(C){typeof x=="function"?(x(C),T._decrementPreload()):console.error(C)}):((P=new Image).onload=function(){_.width=_.canvas.width=P.width,_.height=_.canvas.height=P.height,_.drawingContext.drawImage(P,0,0),_.modified=!0,typeof w=="function"&&w(_),T._decrementPreload()},P.onerror=function(C){s.default._friendlyFileLoadError(0,P.src),typeof x=="function"?(x(C),T._decrementPreload()):console.error(C)},l.indexOf("data:image/")!==0&&(P.crossOrigin="Anonymous"),P.src=l),_.modified=!0}).catch(function(S){s.default._friendlyFileLoadError(0,l),typeof x=="function"?(x(S),T._decrementPreload()):console.error(S)}),_},s.default.prototype.saveGif=function(){l=regeneratorRuntime.mark(function x(_,T){var E,S,P,N,C,D,L,F,I,B,W,G,V,X,Q,se,M,A,z,$,Z,te,ie,he,oe,ce,fe=arguments;return regeneratorRuntime.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(E=2<fe.length&&fe[2]!==void 0?fe[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},typeof _!="string")throw TypeError("fileName parameter must be a string");ee.next=3;break;case 3:if(typeof T!="number")throw TypeError("Duration parameter must be a number");ee.next=5;break;case 5:if(S=E&&E.delay||0,P=E&&E.units||"seconds",N=E&&E.silent||!1,C=E&&E.notificationDuration||0,D=E&&E.notificationID||"progressBar",typeof S!="number")throw TypeError("Delay parameter must be a number");ee.next=12;break;case 12:if(P!=="seconds"&&P!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');ee.next=14;break;case 14:if(typeof N!="boolean")throw TypeError("Silent parameter must be a boolean");ee.next=16;break;case 16:if(typeof C!="number")throw TypeError("Notification duration parameter must be a number");ee.next=18;break;case 18:if(typeof D!="string")throw TypeError("Notification ID parameter must be a string");ee.next=20;break;case 20:return this._recording=!0,B=this._targetFrameRate,L=(L=1/(B=B!==1/0&&B!==void 0&&B!==0?B:60)*1e3)<20?20:L,I=(F=P==="seconds"?T*B:T)+(B=P==="seconds"?S*B:S),B=B,this.frameCount=B,W=this._pixelDensity,this.pixelDensity(1),G=[],document.getElementById(D)!==null&&document.getElementById(D).remove(),N||((V=this.createP("")).id(D),V.style("font-size","16px"),V.style("font-family","Montserrat"),V.style("background-color","#ffffffa0"),V.style("padding","8px"),V.style("border-radius","10px"),V.position(0,0)),this._renderer instanceof s.default.RendererGL&&(Q=this.drawingContext,X=new Uint8Array(Q.drawingBufferWidth*Q.drawingBufferHeight*4)),this.noLoop(),ee.next=39,Promise.resolve();case 39:if(B<I)return this.redraw(),he=void 0,he=this._renderer instanceof s.default.RendererGL?(X=new Uint8Array(Q.drawingBufferWidth*Q.drawingBufferHeight*4),Q.readPixels(0,0,Q.drawingBufferWidth,Q.drawingBufferHeight,Q.RGBA,Q.UNSIGNED_BYTE,X),function(de,ye,we){for(var ge=parseInt(we/2),xe=4*ye,ke=new Uint8Array(4*ye),Fe=0;Fe<ge;++Fe){var Me=Fe*xe,Je=(we-Fe-1)*xe;ke.set(de.subarray(Me,Me+xe)),de.copyWithin(Me,Je,Je+xe),de.set(ke,Je)}return de}(X,this.width,this.height)):this.drawingContext.getImageData(0,0,this.width,this.height).data,G.push(he),B++,N||V.html("Saved frame <b>"+G.length.toString()+"</b> out of "+F.toString()),ee.next=48,new Promise(function(de){return setTimeout(de,0)});ee.next=50;break;case 48:ee.next=39;break;case 50:N||V.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(W),se=(0,i.GIFEncoder)(),M=function(de){for(var ye=new Uint8Array(de.length*de[0].length),we=0;we<de.length;we++)ye.set(de[we],we*de[0].length);var ge=(0,i.quantize)(ye,256,{format:"rgba4444",oneBitAlpha:!0});return ge.length===256?ge[ge.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:ge.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),ge}(G),A={},z=function(de){for(var ye=de.length/4,we=new Uint8Array(ye),ge=0;ge<ye;ge++){var xe=de[4*ge]<<24|de[4*ge+1]<<16|de[4*ge+2]<<8|de[4*ge+3];A[xe]===void 0&&(A[xe]=(0,i.nearestColorIndex)(M,de.slice(4*ge,4*(ge+1)))),we[ge]=A[xe]}return we},$=M.length-1,Z=[],te=0;case 60:if(!(te<G.length)){ee.next=71;break}if(ie=z(G[te]),he=ie.slice(),te===0)se.writeFrame(ie,this.width,this.height,{palette:M,delay:L,dispose:1});else{for(oe=0;oe<ie.length;oe++)ie[oe]===Z[oe]&&(ie[oe]=$);se.writeFrame(ie,this.width,this.height,{delay:L,transparent:!0,transparentIndex:$,dispose:1})}return Z=he,N||V.html("Rendered frame <b>"+te.toString()+"</b> out of "+F.toString()),ee.next=68,new Promise(function(de){return setTimeout(de,0)});case 68:te++,ee.next=60;break;case 71:se.finish(),ce=se.bytesView(),ce=new Blob([ce],{type:"image/gif"}),G=[],this._recording=!1,this.loop(),N||(V.html("Done. Downloading your gif!"),0<C&&setTimeout(function(){return V.remove()},1e3*C)),s.default.prototype.downloadFile(ce,_,"gif");case 80:case"end":return ee.stop()}},x,this)});var l,w=function(){var x=this,_=arguments;return new Promise(function(T,E){var S=l.apply(x,_);function P(C){y(S,T,E,P,N,"next",C)}function N(C){y(S,T,E,P,N,"throw",C)}P(void 0)})};return function(x,_){return w.apply(this,arguments)}}(),s.default.prototype.image=function(l,w,x,_,B,W,G,V,Q,C,D,L){s.default._validateParameters("image",arguments);var X=l.width,F=l.height,I=(L=L||b.CENTER,D=D||b.CENTER,l.elt&&(X=X!==void 0?X:l.elt.width,F=F!==void 0?F:l.elt.height),l.elt&&l.elt.videoWidth&&!l.canvas&&(X=X!==void 0?X:l.elt.videoWidth,F=F!==void 0?F:l.elt.videoHeight),_||X),B=B||F,W=W||0,G=G||0,V=c(V!==void 0?V:X,X),X=c(Q!==void 0?Q:F,F),Q=1;l.elt&&!l.canvas&&l.elt.style.width&&(Q=l.elt.videoWidth&&!_?l.elt.videoWidth:l.elt.width,Q/=parseInt(l.elt.style.width,10)),W*=Q,G*=Q,X*=Q,V*=Q,F=g(C,D,L,(F=h.default.modeAdjust(w,x,I,B,this._renderer._imageMode)).x,F.y,F.w,F.h,W,G,V,X),this._renderer.image(l,F.sx,F.sy,F.sw,F.sh,F.dx,F.dy,F.dw,F.dh)},s.default.prototype.tint=function(){for(var l=arguments.length,w=new Array(l),x=0;x<l;x++)w[x]=arguments[x];s.default._validateParameters("tint",w);var _=this.color.apply(this,w);this._renderer._tint=_.levels},s.default.prototype.noTint=function(){this._renderer._tint=null},s.default.prototype._getTintedImageCanvas=s.default.Renderer2D.prototype._getTintedImageCanvas,s.default.prototype.imageMode=function(l){s.default._validateParameters("imageMode",arguments),l!==b.CORNER&&l!==b.CORNERS&&l!==b.CENTER||(this._renderer._imageMode=l)},t=s.default,u.default=t},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/helpers":279,"../core/main":283,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,gifenc:253,omggif:256,"regenerator-runtime/runtime":260}],307:[function(t,m,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=s(t("../core/main")),p=s(t("./filters"));function s(b){return b&&b.__esModule?b:{default:b}}function h(b,v){for(var i=0;i<v.length;i++){var d=v[i];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(b,d.key,d)}}a.default.Image=function(){function b(d,f){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.width=d,this.height=f,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var v,i;return v=b,(i=[{key:"pixelDensity",value:function(d){return d!==void 0?(d<=0&&(a.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),d=1),this._pixelDensity=d,this.width/=d,this.height/=d,this):this._pixelDensity}},{key:"_animateGif",value:function(g){var f,y=this.gifProperties,g=g._lastRealFrameTime||window.performance.now();y.lastChangeTime===0&&(y.lastChangeTime=g),y.playing&&(y.timeDisplayed=g-y.lastChangeTime,f=y.frames[y.displayIndex].delay,y.timeDisplayed>=f&&(f=Math.floor(y.timeDisplayed/f),y.timeDisplayed=0,y.lastChangeTime=g,y.displayIndex+=f,y.loopCount=Math.floor(y.displayIndex/y.numFrames),y.loopLimit!==null&&y.loopCount>=y.loopLimit?y.playing=!1:(g=y.displayIndex%y.numFrames,this.drawingContext.putImageData(y.frames[g].image,0,0),y.displayIndex=g,this.setModified(!0))))}},{key:"_setProperty",value:function(d,f){this[d]=f,this.setModified(!0)}},{key:"loadPixels",value:function(){a.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(d,f,y,g){a.default.Renderer2D.prototype.updatePixels.call(this,d,f,y,g),this.setModified(!0)}},{key:"get",value:function(d,f,y,g){return a.default._validateParameters("p5.Image.get",arguments),a.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var d=arguments.length,f=new Array(d),y=0;y<d;y++)f[y]=arguments[y];return a.default.Renderer2D.prototype._getPixel.apply(this,f)}},{key:"set",value:function(d,f,y){a.default.Renderer2D.prototype.set.call(this,d,f,y),this.setModified(!0)}},{key:"resize",value:function(d,f){d===0&&f===0?(d=this.canvas.width,f=this.canvas.height):d===0?d=this.canvas.width*f/this.canvas.height:f===0&&(f=this.canvas.height*d/this.canvas.width),d=Math.floor(d),f=Math.floor(f);var y=document.createElement("canvas");if(y.width=d,y.height=f,this.gifProperties)for(var g=this.gifProperties,c=0;c<g.numFrames;c++){for(var l=this.drawingContext.createImageData(d,f),w=(S=S=E=T=_=void 0,g.frames[c].image),x=l,_=0,T=0;T<x.height;T++)for(var E=0;E<x.width;E++){var S=Math.floor(E*w.width/x.width),S=4*(Math.floor(T*w.height/x.height)*w.width+S);x.data[_++]=w.data[S++],x.data[_++]=w.data[S++],x.data[_++]=w.data[S++],x.data[_++]=w.data[+S]}g.frames[c].image=l}y.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,y.width,y.height),this.canvas.width=this.width=d,this.canvas.height=this.height=f,this.drawingContext.drawImage(y,0,0,d,f,0,0,d,f),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var d=arguments.length,f=new Array(d),y=0;y<d;y++)f[y]=arguments[y];a.default.prototype.copy.apply(this,f)}},{key:"mask",value:function(d){var f=this.drawingContext.globalCompositeOperation,y=this._pixelDensity,g=1,c=[d=d===void 0?this:d,0,0,(g=d instanceof a.default.Renderer?d._pInst._pixelDensity:g)*d.width,g*d.height,0,0,y*this.width,y*this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var l=0;l<this.gifProperties.frames.length;l++)this.drawingContext.putImageData(this.gifProperties.frames[l].image,0,0),this.copy.apply(this,c),this.gifProperties.frames[l].image=this.drawingContext.getImageData(0,0,y*this.width,y*this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,c);this.drawingContext.globalCompositeOperation=f,this.setModified(!0)}},{key:"filter",value:function(d,f){p.default.apply(this.canvas,p.default[d],f),this.setModified(!0)}},{key:"blend",value:function(){for(var d=arguments.length,f=new Array(d),y=0;y<d;y++)f[y]=arguments[y];a.default._validateParameters("p5.Image.blend",arguments),a.default.prototype.blend.apply(this,f),this.setModified(!0)}},{key:"setModified",value:function(d){this._modified=d}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(d,f){this.gifProperties?a.default.prototype.encodeAndDownloadGif(this,d):a.default.prototype.saveCanvas(this.canvas,d,f)}},{key:"reset",value:function(){var d;this.gifProperties&&((d=this.gifProperties).playing=!0,d.timeSinceStart=0,d.timeDisplayed=0,d.lastChangeTime=0,d.loopCount=0,d.displayIndex=0,this.drawingContext.putImageData(d.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var d;if(this.gifProperties)return(d=this.gifProperties).displayIndex%d.numFrames}},{key:"setFrame",value:function(d){var f;this.gifProperties&&(d<(f=this.gifProperties).numFrames&&0<=d?(f.timeDisplayed=0,f.lastChangeTime=0,f.displayIndex=d,this.drawingContext.putImageData(f.frames[d].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(d,f){if(this.gifProperties){var y=this.gifProperties;if(f<y.numFrames&&0<=f)y.frames[f].delay=d;else{var g=!0,f=!1,c=void 0;try{for(var l,w=y.frames[Symbol.iterator]();!(g=(l=w.next()).done);g=!0)l.value.delay=d}catch(_){f=!0,c=_}finally{try{g||w.return==null||w.return()}finally{if(f)throw c}}}}}}])&&h(v.prototype,i),b}(),t=a.default.Image,u.default=t},{"../core/main":283,"./filters":304,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],308:[function(t,m,u){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.filter"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=s(t("../core/main")),p=s(t("./filters"));function s(h){return h&&h.__esModule?h:{default:h}}t("../color/p5.Color"),a.default.prototype.pixels=[],a.default.prototype.blend=function(){for(var h,b=arguments.length,v=new Array(b),i=0;i<b;i++)v[i]=arguments[i];a.default._validateParameters("blend",v),this._renderer?(h=this._renderer).blend.apply(h,v):a.default.Renderer2D.prototype.blend.apply(this,v)},a.default.prototype.copy=function(){for(var h,b,v,i,d,f,y,g,c,l=arguments.length,w=new Array(l),x=0;x<l;x++)w[x]=arguments[x];if(a.default._validateParameters("copy",w),w.length===9)h=w[0],b=w[1],v=w[2],i=w[3],d=w[4],f=w[5],y=w[6],g=w[7],c=w[8];else{if(w.length!==8)throw new Error("Signature not supported");h=this,b=w[0],v=w[1],i=w[2],d=w[3],f=w[4],y=w[5],g=w[6],c=w[7]}a.default.prototype._copyHelper(this,h,b,v,i,d,f,y,g,c)},a.default.prototype._copyHelper=function(h,b,v,i,d,f,y,g,c,l){var w=b.canvas.width/b.width,x=0,_=0;b._renderer&&b._renderer.isP3D&&(x=b.width/2,_=b.height/2),h._renderer&&h._renderer.isP3D?(h.push(),h.resetMatrix(),h.noLights(),h.blendMode(h.BLEND),h.imageMode(h.CORNER),a.default.RendererGL.prototype.image.call(h._renderer,b,v+x,i+_,d,f,y,g,c,l),h.pop()):h.drawingContext.drawImage(b.canvas,w*(v+x),w*(i+_),w*d,w*f,y,g,c,l)},a.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},a.default.prototype.filter=function(){for(var h=arguments.length,b=new Array(h),v=0;v<h;v++)b[v]=arguments[v];a.default._validateParameters("filter",b);var y=(function(){var g,c={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof a.default.Shader?c.shader=arguments.length<=0?void 0:arguments[0]:(c.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&typeof(arguments.length<=1?void 0:arguments[1])=="number"&&(c.value=arguments.length<=1?void 0:arguments[1]),((g=arguments.length-1)<0||arguments.length<=g?void 0:arguments[g])===!1&&(c.useWebGL=!1)),c}).apply(void 0,b),i=y.shader,d=y.operation,f=y.value,y=y.useWebGL;this._renderer.isP3D&&i?a.default.RendererGL.prototype.filter.call(this._renderer,i):y||this._renderer.isP3D?(!y&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?a.default.RendererGL.prototype.filter.call(this._renderer,d,f):((i=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),i.filter.apply(i,b),this.copy(i._renderer,0,0,this.width,this.height,0,0,this.width,this.height),i.clear())):this.canvas!==void 0?p.default.apply(this.canvas,p.default[d],f):p.default.apply(this.elt,p.default[d],f)},a.default.prototype.get=function(h,b,v,i){var d;return a.default._validateParameters("get",arguments),(d=this._renderer).get.apply(d,arguments)},a.default.prototype.loadPixels=function(){for(var h=arguments.length,b=new Array(h),v=0;v<h;v++)b[v]=arguments[v];a.default._validateParameters("loadPixels",b),this._renderer.loadPixels()},a.default.prototype.set=function(h,b,v){this._renderer.set(h,b,v)},a.default.prototype.updatePixels=function(h,b,v,i){a.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(h,b,v,i)},t=a.default,u.default=t},{"../color/p5.Color":270,"../core/main":283,"./filters":304,"core-js/modules/es.array.filter":157}],309:[function(t,m,u){function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(f)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var p=b(t("../core/main")),s=(t("whatwg-fetch"),t("es6-promise/auto"),b(t("fetch-jsonp"))),h=b(t("file-saver"));function b(f){return f&&f.__esModule?f:{default:f}}function v(f){return(v=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(y){return a(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":a(y)})(f)}function i(f){return f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function d(f,y){y&&y!==!0&&y!=="true"||(y="");var g="";return(f=f||"untitled")&&f.includes(".")&&(g=f.split(".").pop()),y&&g!==y&&(g=y,f="".concat(f,".").concat(g)),[f,g]}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),p.default.prototype.loadJSON=function(){for(var f=arguments.length,y=new Array(f),g=0;g<f;g++)y[g]=arguments[g];p.default._validateParameters("loadJSON",y);for(var c,l,w,x=y[0],_={},T="json",E=1;E<y.length;E++){var S=y[E];typeof S=="string"?S!=="jsonp"&&S!=="json"||(T=S):typeof S=="function"?c?l=S:c=S:v(S)==="object"&&(S.hasOwnProperty("jsonpCallback")||S.hasOwnProperty("jsonpCallbackFunction"))&&(T="jsonp",w=S)}var P=this;return this.httpDo(x,"GET",w,T,function(N){for(var C in N)_[C]=N[C];c!==void 0&&c(N),P._decrementPreload()},function(N){if(p.default._friendlyFileLoadError(5,x),!l)throw N;l(N)}),_},p.default.prototype.loadStrings=function(){for(var f=arguments.length,y=new Array(f),g=0;g<f;g++)y[g]=arguments[g];p.default._validateParameters("loadStrings",y);for(var c,l,w=[],x=1;x<y.length;x++){var _=y[x];typeof _=="function"&&(c===void 0?c=_:l===void 0&&(l=_))}var T=this;return p.default.prototype.httpDo.call(this,y[0],"GET","text",function(E){for(var S=E.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),P=0,N=S.length;P<N;P+=32768)Array.prototype.push.apply(w,S.slice(P,Math.min(P+32768,N)));c!==void 0&&c(w),T._decrementPreload()},function(E){if(p.default._friendlyFileLoadError(3,E),!l)throw E;l(E)}),w},p.default.prototype.loadTable=function(f){var y,g,c,l=!1,w=f.substring(f.lastIndexOf(".")+1,f.length);w==="csv"?c=",":w==="ssv"?c=";":w==="tsv"&&(c="	");for(var x=1;x<arguments.length;x++)typeof arguments[x]=="function"?y===void 0?y=arguments[x]:g===void 0&&(g=arguments[x]):typeof arguments[x]=="string"&&(arguments[x]==="header"&&(l=!0),arguments[x]==="csv"?c=",":arguments[x]==="ssv"?c=";":arguments[x]==="tsv"&&(c="	"));var _=new p.default.Table,T=this;return this.httpDo(f,"GET","table",function(E){for(var S,P,N={},C=0,D=[],L=0,F=null,I=function(){N.currentState=C,N.token=""},B=function(){F.push(N.token),I()},W=function(){N.currentState=4,D.push(F),F=null};;){if((S=E[L++])==null){if(N.escaped)throw new Error("Unclosed quote in file.");if(F){B(),W();break}}if(F===null&&(N.escaped=!1,F=[],I()),N.currentState===C){if(S==='"'){N.escaped=!0,N.currentState=1;continue}N.currentState=1}if(N.currentState===1&&N.escaped)if(S==='"')E[L]==='"'?(N.token+='"',L++):(N.escaped=!1,N.currentState=2);else{if(S==="\r")continue;N.token+=S}else S==="\r"?(E[L]===`
`&&L++,B(),W()):S===`
`?(B(),W()):S===c?B():N.currentState===1&&(N.token+=S)}if(l)_.columns=D.shift();else for(var G=0;G<D[0].length;G++)_.columns[G]="null";for(var V=0;V<D.length;V++)(D[V].length!==1||D[V][0]!=="undefined"&&D[V][0]!=="")&&((P=new p.default.TableRow).arr=D[V],P.obj=function(X,Q){if((Q=Q||[])===void 0)for(var se=0;se<X.length;se++)Q[se.toString()]=se;return Object.fromEntries(Q.map(function(M,A){return[M,X[A]]}))}(D[V],_.columns),_.addRow(P));typeof y=="function"&&y(_),T._decrementPreload()},function(E){p.default._friendlyFileLoadError(2,f),g?g(E):console.error(E)}),_},p.default.prototype.loadXML=function(){for(var f=arguments.length,y=new Array(f),g=0;g<f;g++)y[g]=arguments[g];for(var c,l,w=new p.default.XML,x=1;x<y.length;x++){var _=y[x];typeof _=="function"&&(c===void 0?c=_:l===void 0&&(l=_))}var T=this;return this.httpDo(y[0],"GET","xml",function(E){for(var S in E)w[S]=E[S];c!==void 0&&c(w),T._decrementPreload()},function(E){if(p.default._friendlyFileLoadError(1,E),!l)throw E;l(E)}),w},p.default.prototype.loadBytes=function(f,y,g){var c={},l=this;return this.httpDo(f,"GET","arrayBuffer",function(w){c.bytes=new Uint8Array(w),typeof y=="function"&&y(c),l._decrementPreload()},function(w){if(p.default._friendlyFileLoadError(6,f),!g)throw w;g(w)}),c},p.default.prototype.httpGet=function(){for(var f=arguments.length,y=new Array(f),g=0;g<f;g++)y[g]=arguments[g];return p.default._validateParameters("httpGet",y),y.splice(1,0,"GET"),p.default.prototype.httpDo.apply(this,y)},p.default.prototype.httpPost=function(){for(var f=arguments.length,y=new Array(f),g=0;g<f;g++)y[g]=arguments[g];return p.default._validateParameters("httpPost",y),y.splice(1,0,"POST"),p.default.prototype.httpDo.apply(this,y)},p.default.prototype.httpDo=function(){for(var f,y,g,c={},l=0,w="text/plain",x=arguments.length-1;0<x&&typeof(x<0||arguments.length<=x?void 0:arguments[x])=="function";x--)l++;var _=arguments.length-l,T=arguments.length<=0?void 0:arguments[0];if(_==2&&typeof T=="string"&&v(arguments.length<=1?void 0:arguments[1])==="object")D=new Request(T,arguments.length<=1?void 0:arguments[1]),y=arguments.length<=2?void 0:arguments[2],g=arguments.length<=3?void 0:arguments[3];else{for(var E,S="GET",P=1;P<arguments.length;P++){var N=P<0||arguments.length<=P?void 0:arguments[P];if(typeof N=="string")N==="GET"||N==="POST"||N==="PUT"||N==="DELETE"?S=N:N==="json"||N==="jsonp"||N==="binary"||N==="arrayBuffer"||N==="xml"||N==="text"||N==="table"?f=N:E=N;else if(typeof N=="number")E=N.toString();else if(v(N)==="object")if(N.hasOwnProperty("jsonpCallback")||N.hasOwnProperty("jsonpCallbackFunction"))for(var C in N)c[C]=N[C];else w=N instanceof p.default.XML?(E=N.serialize(),"application/xml"):(E=JSON.stringify(N),"application/json");else typeof N=="function"&&(y?g=N:y=N)}var _=S==="GET"?new Headers:new Headers({"Content-Type":w}),D=new Request(T,{method:S,mode:"cors",body:E,headers:_})}return(_=(_=(f=f||(T.includes("json")?"json":T.includes("xml")?"xml":"text"))==="jsonp"?(0,s.default)(T,c):fetch(D)).then(function(L){if(!L.ok)throw(F=new Error(L.body)).status=L.status,F.ok=!1,F;var F=0;switch((F=f!=="jsonp"?L.headers.get("content-length"):F)&&64e6<F&&p.default._friendlyFileLoadError(7,T),f){case"json":case"jsonp":return L.json();case"binary":return L.blob();case"arrayBuffer":return L.arrayBuffer();case"xml":return L.text().then(function(I){return I=new DOMParser().parseFromString(I,"text/xml"),new p.default.XML(I.documentElement)});default:return L.text()}})).then(y||function(){}),_.catch(g||console.error),_},window.URL=window.URL||window.webkitURL,p.default.prototype._pWriters=[],p.default.prototype.createWriter=function(f,y){var g,c;for(c in p.default.prototype._pWriters)if(p.default.prototype._pWriters[c].name===f)return g=new p.default.PrintWriter(f+this.millis(),y),p.default.prototype._pWriters.push(g),g;return g=new p.default.PrintWriter(f,y),p.default.prototype._pWriters.push(g),g},p.default.PrintWriter=function(f,y){var g=this;this.name=f,this.content="",this.write=function(c){this.content+=c},this.print=function(c){this.content+="".concat(c,`
`)},this.clear=function(){this.content=""},this.close=function(){var c,l=[];for(c in l.push(this.content),p.default.prototype.writeFile(l,f,y),p.default.prototype._pWriters)p.default.prototype._pWriters[c].name===this.name&&p.default.prototype._pWriters.splice(c,1);g.clear(),g={}}},p.default.prototype.save=function(f,y,g){var c=arguments,l=(this._curElement||this).elt;if(c.length===0)p.default.prototype.saveCanvas(l);else if(c[0]instanceof p.default.Renderer||c[0]instanceof p.default.Graphics)p.default.prototype.saveCanvas(c[0].elt,c[1],c[2]);else if(c.length===1&&typeof c[0]=="string")p.default.prototype.saveCanvas(l,c[0]);else switch(d(c[1],c[2])[1]){case"json":return void p.default.prototype.saveJSON(c[0],c[1],c[2]);case"txt":return void p.default.prototype.saveStrings(c[0],c[1],c[2]);default:c[0]instanceof Array?p.default.prototype.saveStrings(c[0],c[1],c[2]):c[0]instanceof p.default.Table?p.default.prototype.saveTable(c[0],c[1],c[2]):c[0]instanceof p.default.Image?p.default.prototype.saveCanvas(c[0].canvas,c[1]):c[0]instanceof p.default.SoundFile&&p.default.prototype.saveSound(c[0],c[1],c[2],c[3])}},p.default.prototype.saveJSON=function(f,y,g){p.default._validateParameters("saveJSON",arguments),g=g?JSON.stringify(f):JSON.stringify(f,void 0,2),this.saveStrings(g.split(`
`),y,"json")},p.default.prototype.saveJSONObject=p.default.prototype.saveJSON,p.default.prototype.saveJSONArray=p.default.prototype.saveJSON,p.default.prototype.saveStrings=function(f,y,g,c){p.default._validateParameters("saveStrings",arguments);for(var l=this.createWriter(y,g||"txt"),w=0;w<f.length;w++)c?l.write(f[w]+`\r
`):l.write(f[w]+`
`);l.close(),l.clear()},p.default.prototype.saveTable=function(f,y,g){p.default._validateParameters("saveTable",arguments),c=g===void 0?y.substring(y.lastIndexOf(".")+1,y.length):g;var c,l=this.createWriter(y,c),w=f.columns,x=c==="tsv"?"	":",";if(c!=="html"){if(w[0]!=="0"){for(var _=0;_<w.length;_++)_<w.length-1?l.write(w[_]+x):l.write(w[_]);l.write(`
`)}for(var T=0;T<f.rows.length;T++){for(var E=void 0,E=0;E<f.rows[T].arr.length;E++)E<f.rows[T].arr.length-1?c==="csv"&&String(f.rows[T].arr[E]).includes(",")?l.write('"'+f.rows[T].arr[E]+'"'+x):l.write(f.rows[T].arr[E]+x):c==="csv"&&String(f.rows[T].arr[E]).includes(",")?l.write('"'+f.rows[T].arr[E]+'"'):l.write(f.rows[T].arr[E]);l.write(`
`)}}else{if(l.print("<html>"),l.print("<head>"),l.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),l.print("</head>"),l.print("<body>"),l.print("  <table>"),w[0]!=="0"){l.print("    <tr>");for(var S=0;S<w.length;S++){var P=i(w[S]);l.print("      <td>".concat(P)),l.print("      </td>")}l.print("    </tr>")}for(var N=0;N<f.rows.length;N++){l.print("    <tr>");for(var C=0;C<f.columns.length;C++){var D=i(f.rows[N].getString(C));l.print("      <td>".concat(D)),l.print("      </td>")}l.print("    </tr>")}l.print("  </table>"),l.print("</body>"),l.print("</html>")}l.close(),l.clear()},p.default.prototype.writeFile=function(l,y,g){var c="application/octet-stream",l=(p.default.prototype._isSafari()&&(c="text/plain"),new Blob(l,{type:c}));p.default.prototype.downloadFile(l,y,g)},p.default.prototype.downloadFile=function(f,l,w){var c,l=d(l,w),w=l[0];f instanceof Blob?h.default.saveAs(f,w):((c=document.createElement("a")).href=f,c.download=w,c.onclick=function(x){document.body.removeChild(x.target),x.stopPropagation()},c.style.display="none",document.body.appendChild(c),p.default.prototype._isSafari()&&(f=(f=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(l[1],'"'),alert(f)),c.click())},p.default.prototype._checkFileExtension=d,p.default.prototype._isSafari=function(){return window.HTMLElement.toString().includes("Constructor")},t=p.default,u.default=t},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248,"es6-promise/auto":249,"fetch-jsonp":251,"file-saver":252,"whatwg-fetch":261}],310:[function(t,m,u){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(t=t("../core/main"))&&t.__esModule?t:{default:t};function p(s,h){for(var b=0;b<h.length;b++){var v=h[b];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(s,v.key,v)}}a.default.Table=function(){function s(){var v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],i=this,d=s;if(!(i instanceof d))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=v}var h,b;return h=s,(b=[{key:"addRow",value:function(v){if(v=v||new a.default.TableRow,v.arr===void 0||v.obj===void 0)throw new Error("invalid TableRow: ".concat(v));return(v.table=this).rows.push(v),v}},{key:"removeRow",value:function(v){this.rows[v].table=null,v=this.rows.splice(v+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(v)}},{key:"getRow",value:function(v){return this.rows[v]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(v,i){if(typeof i=="string"){for(var d=0;d<this.rows.length;d++)if(this.rows[d].obj[i]===v)return this.rows[d]}else for(var f=0;f<this.rows.length;f++)if(this.rows[f].arr[i]===v)return this.rows[f];return null}},{key:"findRows",value:function(v,i){var d=[];if(typeof i=="string")for(var f=0;f<this.rows.length;f++)this.rows[f].obj[i]===v&&d.push(this.rows[f]);else for(var y=0;y<this.rows.length;y++)this.rows[y].arr[i]===v&&d.push(this.rows[y]);return d}},{key:"matchRow",value:function(v,i){if(typeof i=="number"){for(var d=0;d<this.rows.length;d++)if(this.rows[d].arr[i].match(v))return this.rows[d]}else for(var f=0;f<this.rows.length;f++)if(this.rows[f].obj[i].match(v))return this.rows[f];return null}},{key:"matchRows",value:function(v,i){var d=[];if(typeof i=="number")for(var f=0;f<this.rows.length;f++)this.rows[f].arr[i].match(v)&&d.push(this.rows[f]);else for(var y=0;y<this.rows.length;y++)this.rows[y].obj[i].match(v)&&d.push(this.rows[y]);return d}},{key:"getColumn",value:function(v){var i=[];if(typeof v=="string")for(var d=0;d<this.rows.length;d++)i.push(this.rows[d].obj[v]);else for(var f=0;f<this.rows.length;f++)i.push(this.rows[f].arr[v]);return i}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(v){this.columns.push(v||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(v,i){for(var d=[],f=0;f<v.length;f++)d.push(v.charAt(f).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var y=new RegExp(d.join("|"),"g");if(i===void 0)for(var g=0;g<this.columns.length;g++)for(var c=0;c<this.rows.length;c++){var l=(l=this.rows[c].arr[g]).replace(y,"");this.rows[c].arr[g]=l,this.rows[c].obj[this.columns[g]]=l}else if(typeof i=="string")for(var w=0;w<this.rows.length;w++){var x=(x=this.rows[w].obj[i]).replace(y,""),_=(this.rows[w].obj[i]=x,this.columns.indexOf(i));this.rows[w].arr[_]=x}else for(var T=0;T<this.rows.length;T++){var E=(E=this.rows[T].arr[i]).replace(y,"");this.rows[T].arr[i]=E,this.rows[T].obj[this.columns[i]]=E}}},{key:"trim",value:function(v){var i=new RegExp(" ","g");if(v===void 0)for(var d=0;d<this.columns.length;d++)for(var f=0;f<this.rows.length;f++){var y=(y=this.rows[f].arr[d]).replace(i,"");this.rows[f].arr[d]=y,this.rows[f].obj[this.columns[d]]=y}else if(typeof v=="string")for(var g=0;g<this.rows.length;g++){var c=(c=this.rows[g].obj[v]).replace(i,""),l=(this.rows[g].obj[v]=c,this.columns.indexOf(v));this.rows[g].arr[l]=c}else for(var w=0;w<this.rows.length;w++){var x=(x=this.rows[w].arr[v]).replace(i,"");this.rows[w].arr[v]=x,this.rows[w].obj[this.columns[v]]=x}}},{key:"removeColumn",value:function(f){typeof f=="string"?d=this.columns.indexOf(i=f):i=this.columns[d=f];var i,d,f=this.columns.splice(d+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(f);for(var y=0;y<this.rows.length;y++){var g=this.rows[y].arr,c=g.splice(d+1,g.length);g.pop(),this.rows[y].arr=g.concat(c),delete this.rows[y].obj[i]}}},{key:"set",value:function(v,i,d){this.rows[v].set(i,d)}},{key:"setNum",value:function(v,i,d){this.rows[v].setNum(i,d)}},{key:"setString",value:function(v,i,d){this.rows[v].setString(i,d)}},{key:"get",value:function(v,i){return this.rows[v].get(i)}},{key:"getNum",value:function(v,i){return this.rows[v].getNum(i)}},{key:"getString",value:function(v,i){return this.rows[v].getString(i)}},{key:"getObject",value:function(v){for(var i,d={},f=0;f<this.rows.length;f++)if(i=this.rows[f].obj,typeof v=="string"){if(!(0<=this.columns.indexOf(v)))throw new Error('This table has no column named "'.concat(v,'"'));d[i[v]]=i}else d[f]=this.rows[f].obj;return d}},{key:"getArray",value:function(){for(var v=[],i=0;i<this.rows.length;i++)v.push(this.rows[i].arr);return v}}])&&p(h.prototype,b),s}(),t=a.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.splice":171,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204}],311:[function(t,m,u){t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function a(p,s){for(var h=0;h<s.length;h++){var b=s[h];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(p,b.key,b)}}t.default.TableRow=function(){function p(b,v){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");var i=[];b&&(i=b.split(v=v||",")),this.arr=i,this.obj=Object.fromEntries(i.entries()),this.table=null}var s,h;return s=p,(h=[{key:"set",value:function(b,v){if(typeof b=="string"){var i=this.table.columns.indexOf(b);if(!(0<=i))throw new Error('This table has no column named "'.concat(b,'"'));this.obj[b]=v,this.arr[i]=v}else{if(!(b<this.table.columns.length))throw new Error("Column #".concat(b," is out of the range of this table"));this.arr[b]=v,i=this.table.columns[b],this.obj[i]=v}}},{key:"setNum",value:function(b,v){v=parseFloat(v),this.set(b,v)}},{key:"setString",value:function(b,v){v=v.toString(),this.set(b,v)}},{key:"get",value:function(b){return(typeof b=="string"?this.obj:this.arr)[b]}},{key:"getNum",value:function(b){var v=parseFloat(typeof b=="string"?this.obj[b]:this.arr[b]);if(v.toString()==="NaN")throw"Error: ".concat(this.obj[b]," is NaN (Not a Number)");return v}},{key:"getString",value:function(b){return(typeof b=="string"?this.obj:this.arr)[b].toString()}}])&&a(s.prototype,h),p}(),t=t.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246}],312:[function(t,m,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(t=t("../core/main"))&&t.__esModule?t:{default:t};function p(h,b){for(var v=0;v<b.length;v++){var i=b[v];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(h,i.key,i)}}function s(h){for(var b=[],v=0;v<h.length;v++)b.push(new a.default.XML(h[v]));return b}a.default.XML=function(){function h(i){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");i?this.DOM=i:(i=document.implementation.createDocument(null,"doc"),this.DOM=i.createElement("root"))}var b,v;return b=h,(v=[{key:"getParent",value:function(){return new a.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(i){var d=this.DOM.innerHTML,f=this.DOM.attributes,y=document.implementation.createDocument(null,"default").createElement(i);y.innerHTML=d;for(var g=0;g<f.length;g++)y.setAttribute(f[g].nodeName,f[g].nodeValue);this.DOM=y}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var i=[],d=0;d<this.DOM.childNodes.length;d++)i.push(this.DOM.childNodes[d].nodeName);return i}},{key:"getChildren",value:function(i){return s(i?this.DOM.getElementsByTagName(i):this.DOM.children)}},{key:"getChild",value:function(i){if(typeof i!="string")return new a.default.XML(this.DOM.children[i]);var d=!0,f=!1,y=void 0;try{for(var g,c=this.DOM.children[Symbol.iterator]();!(d=(g=c.next()).done);d=!0){var l=g.value;if(l.tagName===i)return new a.default.XML(l)}}catch(w){f=!0,y=w}finally{try{d||c.return==null||c.return()}finally{if(f)throw y}}}},{key:"addChild",value:function(i){i instanceof a.default.XML&&this.DOM.appendChild(i.DOM)}},{key:"removeChild",value:function(i){var d=-1;if(typeof i=="string"){for(var f=0;f<this.DOM.children.length;f++)if(this.DOM.children[f].tagName===i){d=f;break}}else d=i;d!==-1&&this.DOM.removeChild(this.DOM.children[d])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var i=[],d=!0,f=!1,y=void 0;try{for(var g,c=this.DOM.attributes[Symbol.iterator]();!(d=(g=c.next()).done);d=!0){var l=g.value;i.push(l.nodeName)}}catch(w){f=!0,y=w}finally{try{d||c.return==null||c.return()}finally{if(f)throw y}}return i}},{key:"hasAttribute",value:function(i){var d={},f=!0,y=!1,g=void 0;try{for(var c,l=this.DOM.attributes[Symbol.iterator]();!(f=(c=l.next()).done);f=!0){var w=c.value;d[w.nodeName]=w.nodeValue}}catch(x){y=!0,g=x}finally{try{f||l.return==null||l.return()}finally{if(y)throw g}}return!!d[i]}},{key:"getNum",value:function(i,d){var f={},y=!0,g=!1,c=void 0;try{for(var l,w=this.DOM.attributes[Symbol.iterator]();!(y=(l=w.next()).done);y=!0){var x=l.value;f[x.nodeName]=x.nodeValue}}catch(_){g=!0,c=_}finally{try{y||w.return==null||w.return()}finally{if(g)throw c}}return Number(f[i])||d||0}},{key:"getString",value:function(i,d){var f={},y=!0,g=!1,c=void 0;try{for(var l,w=this.DOM.attributes[Symbol.iterator]();!(y=(l=w.next()).done);y=!0){var x=l.value;f[x.nodeName]=x.nodeValue}}catch(_){g=!0,c=_}finally{try{y||w.return==null||w.return()}finally{if(g)throw c}}return f[i]?String(f[i]):d||null}},{key:"setAttribute",value:function(i,d){this.DOM.setAttribute(i,d)}},{key:"getContent",value:function(i){var d=this.DOM.textContent;return(d=d.replace(/\s\s+/g,","))||i||null}},{key:"setContent",value:function(i){this.DOM.children.length||(this.DOM.textContent=i)}},{key:"serialize",value:function(){return new XMLSerializer().serializeToString(this.DOM)}}])&&p(b.prototype,v),h}(),t=a.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],313:[function(t,m,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.string.includes"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(t=t("../core/main"))&&t.__esModule?t:{default:t};function p(s){return function(h){if(Array.isArray(h)){for(var b=0,v=new Array(h.length);b<h.length;b++)v[b]=h[b];return v}}(s)||function(h){if(Symbol.iterator in Object(h)||Object.prototype.toString.call(h)==="[object Arguments]")return Array.from(h)}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.abs=Math.abs,a.default.prototype.ceil=Math.ceil,a.default.prototype.constrain=function(s,h,b){return a.default._validateParameters("constrain",arguments),Math.max(Math.min(s,b),h)},a.default.prototype.dist=function(){for(var s=arguments.length,h=new Array(s),b=0;b<s;b++)h[b]=arguments[b];return a.default._validateParameters("dist",h),h.length===4?Math.hypot(h[2]-h[0],h[3]-h[1]):h.length===6?Math.hypot(h[3]-h[0],h[4]-h[1],h[5]-h[2]):void 0},a.default.prototype.exp=Math.exp,a.default.prototype.floor=Math.floor,a.default.prototype.lerp=function(s,h,b){return a.default._validateParameters("lerp",arguments),b*(h-s)+s},a.default.prototype.log=Math.log,a.default.prototype.mag=function(s,h){return a.default._validateParameters("mag",arguments),Math.hypot(s,h)},a.default.prototype.map=function(s,h,b,v,i,d){return a.default._validateParameters("map",arguments),s=(s-h)/(b-h)*(i-v)+v,d?v<i?this.constrain(s,v,i):this.constrain(s,i,v):s},a.default.prototype.max=function(){for(var s=function(i){return Math.max.apply(Math,p(i))},h=arguments.length,b=new Array(h),v=0;v<h;v++)b[v]=arguments[v];return Array.isArray(b[0])?s(b[0]):s(b)},a.default.prototype.min=function(){for(var s=function(i){return Math.min.apply(Math,p(i))},h=arguments.length,b=new Array(h),v=0;v<h;v++)b[v]=arguments[v];return Array.isArray(b[0])?s(b[0]):s(b)},a.default.prototype.norm=function(s,h,b){return a.default._validateParameters("norm",arguments),this.map(s,h,b,0,1)},a.default.prototype.pow=Math.pow,a.default.prototype.round=function(s,h){return h?(h=Math.pow(10,h),Math.round(s*h)/h):Math.round(s)},a.default.prototype.sq=function(s){return s*s},a.default.prototype.sqrt=Math.sqrt,a.default.prototype.fract=function(v){a.default._validateParameters("fract",arguments);var h,b=0,v=Number(v);return isNaN(v)||Math.abs(v)===1/0?v:(v<0&&(v=-v,b=1),String(v).includes(".")&&!String(v).includes("e")?(h=String(v),h=+("0"+h.slice(h.indexOf("."))),Math.abs(b-h)):v<1?Math.abs(b-v):0)},t=a.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],314:[function(t,m,u){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(t=t("../core/main"))&&t.__esModule?t:{default:t};function p(h,b,v){return(p=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(i,d,f){var y=[null];return y.push.apply(y,d),d=new(Function.bind.apply(i,y)),f&&s(d,f.prototype),d}).apply(null,arguments)}function s(h,b){return(s=Object.setPrototypeOf||function(v,i){return v.__proto__=i,v})(h,b)}a.default.prototype.createVector=function(h,b,v){return this instanceof a.default?p(a.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new a.default.Vector(h,b,v)},t=a.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196}],315:[function(v,m,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,v=(v=v("../core/main"))&&v.__esModule?v:{default:v};function a(i){return .5*(1-Math.cos(i*Math.PI))}var p,s=4095,h=4,b=.5,v=(v.default.prototype.noise=function(i){var d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(p==null){p=new Array(4096);for(var y=0;y<4096;y++)p[y]=Math.random()}i<0&&(i=-i),d<0&&(d=-d),f<0&&(f=-f);for(var g,c,l=Math.floor(i),w=Math.floor(d),x=Math.floor(f),_=i-l,T=d-w,E=f-x,S=0,P=.5,N=0;N<h;N++){var C=l+(w<<4)+(x<<8),D=a(_),L=a(T),F=p[C&s];F+=D*(p[C+1&s]-F),g=p[C+16&s],F+=L*((g+=D*(p[C+16+1&s]-g))-F),g=p[(C+=256)&s],g+=D*(p[C+1&s]-g),c=p[C+16&s],g+=L*((c+=D*(p[C+16+1&s]-c))-g),S+=(F+=a(E)*(g-F))*P,P*=b,l<<=1,w<<=1,x<<=1,1<=(_*=2)&&(l++,_--),1<=(T*=2)&&(w++,T--),1<=(E*=2)&&(x++,E--)}return S},v.default.prototype.noiseDetail=function(i,d){0<i&&(h=i),0<d&&(b=d)},v.default.prototype.noiseSeed=function(i){y=4294967296;var d,f,y,g={setSeed:function(l){f=d=(l??Math.random()*y)>>>0},getSeed:function(){return d},rand:function(){return(f=(1664525*f+1013904223)%y)/y}};g.setSeed(i),p=new Array(4096);for(var c=0;c<4096;c++)p[c]=g.rand()},v.default);u.default=v},{"../core/main":283}],316:[function(t,m,u){function a(d){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function p(d){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(f){return a(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":a(f)})(d)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.epsilon"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.epsilon"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.string.sub"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(i=t("../core/main"))&&i.__esModule?i:{default:i},h=function(d){if(d&&d.__esModule)return d;if(d===null||p(d)!=="object"&&typeof d!="function")return{default:d};var f=b();if(f&&f.has(d))return f.get(d);var y,g={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in d){var l;Object.prototype.hasOwnProperty.call(d,y)&&((l=c?Object.getOwnPropertyDescriptor(d,y):null)&&(l.get||l.set)?Object.defineProperty(g,y,l):g[y]=d[y])}return g.default=d,f&&f.set(d,g),g}(t("../core/constants"));function b(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,b=function(){return d},d)}function v(d,f){for(var y=0;y<f.length;y++){var g=f[y];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,g.key,g)}}s.default.Vector=function(){function d(){var x=this,c=d;if(!(x instanceof c))throw new TypeError("Cannot call a class as a function");var l,w,x=typeof(arguments.length<=0?void 0:arguments[0])=="function"?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],l=(arguments.length<=2?void 0:arguments[2])||0,w=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(l=(arguments.length<=0?void 0:arguments[0])||0,w=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=l,this.y=w,this.z=x}var f,y,g;return f=d,g=[{key:"fromAngle",value:function(c){var l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;return new s.default.Vector(l*Math.cos(c),l*Math.sin(c),0)}},{key:"fromAngles",value:function(E,_){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,x=Math.cos(_),_=Math.sin(_),T=Math.cos(E),E=Math.sin(E);return new s.default.Vector(w*E*_,-w*T,w*E*x)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*h.TWO_PI)}},{key:"random3D",value:function(){var c=Math.random()*h.TWO_PI,l=2*Math.random()-1,x=Math.sqrt(1-l*l),w=x*Math.cos(c),x=x*Math.sin(c);return new s.default.Vector(w,x,l)}},{key:"copy",value:function(c){return c.copy(c)}},{key:"add",value:function(){for(var c=arguments.length,l=new Array(c),w=0;w<c;w++)l[w]=arguments[w];var x=l[0],_=l[1],T=l[2];return T?T.set(x):(T=x.copy(),l.length===3&&s.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),T.add(_),T}},{key:"rem",value:function(c,l){if(c instanceof s.default.Vector&&l instanceof s.default.Vector)return(c=c.copy()).rem(l),c}},{key:"sub",value:function(){for(var c=arguments.length,l=new Array(c),w=0;w<c;w++)l[w]=arguments[w];var x=l[0],_=l[1],T=l[2];return T?T.set(x):(T=x.copy(),l.length===3&&s.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),T.sub(_),T}},{key:"mult",value:function(){for(var c=arguments.length,l=new Array(c),w=0;w<c;w++)l[w]=arguments[w];var x=l[0],_=l[1],T=l[2];return T?T.set(x):(T=x.copy(),l.length===3&&s.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),T.mult(_),T}},{key:"rotate",value:function(){for(var c=arguments.length,l=new Array(c),w=0;w<c;w++)l[w]=arguments[w];var x=l[0],_=l[1],T=l[2];return l.length===2?T=x.copy():(T instanceof s.default.Vector||s.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),T.set(x)),T.rotate(_),T}},{key:"div",value:function(){for(var c=arguments.length,l=new Array(c),w=0;w<c;w++)l[w]=arguments[w];var x=l[0],_=l[1],T=l[2];return T?T.set(x):(T=x.copy(),l.length===3&&s.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),T.div(_),T}},{key:"dot",value:function(c,l){return c.dot(l)}},{key:"cross",value:function(c,l){return c.cross(l)}},{key:"dist",value:function(c,l){return c.dist(l)}},{key:"lerp",value:function(){for(var c=arguments.length,l=new Array(c),w=0;w<c;w++)l[w]=arguments[w];var x=l[0],_=l[1],T=l[2],E=l[3];return E?E.set(x):(E=x.copy(),l.length===4&&s.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),E.lerp(_,T),E}},{key:"slerp",value:function(){for(var c=arguments.length,l=new Array(c),w=0;w<c;w++)l[w]=arguments[w];var x=l[0],_=l[1],T=l[2],E=l[3];return E?E.set(x):(E=x.copy(),l.length===4&&s.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),E.slerp(_,T),E}},{key:"mag",value:function(c){return c.mag()}},{key:"magSq",value:function(c){return c.magSq()}},{key:"normalize",value:function(){for(var c=arguments.length,l=new Array(c),w=0;w<c;w++)l[w]=arguments[w];var x=l[0],_=l[1];return l.length<2?_=x.copy():(_ instanceof s.default.Vector||s.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),_.set(x)),_.normalize()}},{key:"limit",value:function(){for(var c=arguments.length,l=new Array(c),w=0;w<c;w++)l[w]=arguments[w];var x=l[0],_=l[1],T=l[2];return l.length<3?T=x.copy():(T instanceof s.default.Vector||s.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),T.set(x)),T.limit(_)}},{key:"setMag",value:function(){for(var c=arguments.length,l=new Array(c),w=0;w<c;w++)l[w]=arguments[w];var x=l[0],_=l[1],T=l[2];return l.length<3?T=x.copy():(T instanceof s.default.Vector||s.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),T.set(x)),T.setMag(_)}},{key:"heading",value:function(c){return c.heading()}},{key:"angleBetween",value:function(c,l){return c.angleBetween(l)}},{key:"reflect",value:function(){for(var c=arguments.length,l=new Array(c),w=0;w<c;w++)l[w]=arguments[w];var x=l[0],_=l[1],T=l[2];return l.length<3?T=x.copy():(T instanceof s.default.Vector||s.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),T.set(x)),T.reflect(_)}},{key:"array",value:function(c){return c.array()}},{key:"equals",value:function(c,l){var w;return c instanceof s.default.Vector?w=c:Array.isArray(c)?w=new s.default.Vector().set(c):s.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),w.equals(l)}}],(y=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(c,l,w){return c instanceof s.default.Vector?(this.x=c.x||0,this.y=c.y||0,this.z=c.z||0):Array.isArray(c)?(this.x=c[0]||0,this.y=c[1]||0,this.z=c[2]||0):(this.x=c||0,this.y=l||0,this.z=w||0),this}},{key:"copy",value:function(){return this.isPInst?new s.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new s.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(c,l,w){return c instanceof s.default.Vector?(this.x+=c.x||0,this.y+=c.y||0,this.z+=c.z||0):Array.isArray(c)?(this.x+=c[0]||0,this.y+=c[1]||0,this.z+=c[2]||0):(this.x+=c||0,this.y+=l||0,this.z+=w||0),this}},{key:"calculateRemainder2D",value:function(c,l){return c!==0&&(this.x=this.x%c),l!==0&&(this.y=this.y%l),this}},{key:"calculateRemainder3D",value:function(c,l,w){return c!==0&&(this.x=this.x%c),l!==0&&(this.y=this.y%l),w!==0&&(this.z=this.z%w),this}},{key:"rem",value:function(){for(var c=arguments.length,l=new Array(c),w=0;w<c;w++)l[w]=arguments[w];var x,_,T,E=l[0],S=l[1],P=l[2];if(E instanceof s.default.Vector){if([E.x,E.y,E.z].every(Number.isFinite))return x=parseFloat(E.x),_=parseFloat(E.y),T=parseFloat(E.z),this.calculateRemainder3D(x,_,T)}else if(Array.isArray(E)){if(E.every(Number.isFinite))return E.length===2?this.calculateRemainder2D(E[0],E[1]):E.length===3?this.calculateRemainder3D(E[0],E[1],E[2]):void 0}else if(l.length===1){if(Number.isFinite(E)&&E!==0)return this.x=this.x%E,this.y=this.y%E,this.z=this.z%E,this}else if(l.length===2){if(l.every(Number.isFinite))return this.calculateRemainder2D(E,S)}else if(l.length===3&&l.every(Number.isFinite))return this.calculateRemainder3D(E,S,P)}},{key:"sub",value:function(c,l,w){return c instanceof s.default.Vector?(this.x-=c.x||0,this.y-=c.y||0,this.z-=c.z||0):Array.isArray(c)?(this.x-=c[0]||0,this.y-=c[1]||0,this.z-=c[2]||0):(this.x-=c||0,this.y-=l||0,this.z-=w||0),this}},{key:"mult",value:function(){for(var c=arguments.length,l=new Array(c),w=0;w<c;w++)l[w]=arguments[w];var x,_=l[0],T=l[1],E=l[2];return _ instanceof s.default.Vector?Number.isFinite(_.x)&&Number.isFinite(_.y)&&Number.isFinite(_.z)&&typeof _.x=="number"&&typeof _.y=="number"&&typeof _.z=="number"?(this.x*=_.x,this.y*=_.y,this.z*=_.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(_)?_.every(function(S){return Number.isFinite(S)})&&_.every(function(S){return typeof S=="number"})?_.length===1?(this.x*=_[0],this.y*=_[0],this.z*=_[0]):_.length===2?(this.x*=_[0],this.y*=_[1]):_.length===3&&(this.x*=_[0],this.y*=_[1],this.z*=_[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(x=l).every(function(S){return Number.isFinite(S)})&&x.every(function(S){return typeof S=="number"})?(l.length===1&&(this.x*=_,this.y*=_,this.z*=_),l.length===2&&(this.x*=_,this.y*=T),l.length===3&&(this.x*=_,this.y*=T,this.z*=E)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(){for(var c=arguments.length,l=new Array(c),w=0;w<c;w++)l[w]=arguments[w];var x=l[0],_=l[1],T=l[2];if(x instanceof s.default.Vector)if(Number.isFinite(x.x)&&Number.isFinite(x.y)&&Number.isFinite(x.z)&&typeof x.x=="number"&&typeof x.y=="number"&&typeof x.z=="number"){var E=x.z===0&&this.z===0;if(x.x===0||x.y===0||!E&&x.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=x.x,this.y/=x.y,E||(this.z/=x.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(x))if(x.every(Number.isFinite)&&x.every(function(S){return typeof S=="number"})){if(x.some(function(S){return S===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;x.length===1?(this.x/=x[0],this.y/=x[0],this.z/=x[0]):x.length===2?(this.x/=x[0],this.y/=x[1]):x.length===3&&(this.x/=x[0],this.y/=x[1],this.z/=x[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(l.every(Number.isFinite)&&l.every(function(S){return typeof S=="number"})){if(l.some(function(S){return S===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;l.length===1&&(this.x/=x,this.y/=x,this.z/=x),l.length===2&&(this.x/=x,this.y/=_),l.length===3&&(this.x/=x,this.y/=_,this.z/=T)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var c=this.x,l=this.y,w=this.z;return c*c+l*l+w*w}},{key:"dot",value:function(c,l,w){return c instanceof s.default.Vector?this.dot(c.x,c.y,c.z):this.x*(c||0)+this.y*(l||0)+this.z*(w||0)}},{key:"cross",value:function(x){var l=this.y*x.z-this.z*x.y,w=this.z*x.x-this.x*x.z,x=this.x*x.y-this.y*x.x;return this.isPInst?new s.default.Vector(this._fromRadians,this._toRadians,l,w,x):new s.default.Vector(l,w,x)}},{key:"dist",value:function(c){return c.copy().sub(this).mag()}},{key:"normalize",value:function(){var c=this.mag();return c!==0&&this.mult(1/c),this}},{key:"limit",value:function(c){var l=this.magSq();return c*c<l&&this.div(Math.sqrt(l)).mult(c),this}},{key:"setMag",value:function(c){return this.normalize().mult(c)}},{key:"heading",value:function(){var c=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(c):c}},{key:"setHeading",value:function(c){this.isPInst&&(c=this._toRadians(c));var l=this.mag();return this.x=l*Math.cos(c),this.y=l*Math.sin(c),this}},{key:"rotate",value:function(l){var l=this.heading()+l,w=(this.isPInst&&(l=this._toRadians(l)),this.mag());return this.x=Math.cos(l)*w,this.y=Math.sin(l)*w,this}},{key:"angleBetween",value:function(c){var l;return this.magSq()*c.magSq()==0?NaN:(l=this.cross(c),c=Math.atan2(l.mag(),this.dot(c))*Math.sign(l.z||1),this.isPInst?this._fromRadians(c):c)}},{key:"lerp",value:function(c,l,w,x){return c instanceof s.default.Vector?this.lerp(c.x,c.y,c.z,l):(this.x+=(c-this.x)*x||0,this.y+=(l-this.y)*x||0,this.z+=(w-this.z)*x||0,this)}},{key:"slerp",value:function(c,l){if(l!==0){if(l===1)return this.set(c);var w=this.mag(),x=c.mag();if(w*x==0)this.mult(1-l).add(c.x*l,c.y*l,c.z*l);else{var _=this.cross(c),T=_.mag(),E=Math.atan2(T,this.dot(c));if(0<T)_.x/=T,_.y/=T,_.z/=T;else{if(E<.5*Math.PI)return this.mult(1-l).add(c.x*l,c.y*l,c.z*l),this;this.z===0&&c.z===0?_.set(0,0,1):this.x!==0?_.set(this.y,-this.x,0).normalize():_.set(1,0,0)}T=_.cross(this),c=1-l+l*x/w,_=c*Math.cos(l*E),x=c*Math.sin(l*E),this.x=this.x*_+T.x*x,this.y=this.y*_+T.y*x,this.z=this.z*_+T.z*x}}return this}},{key:"reflect",value:function(c){return c=s.default.Vector.normalize(c),this.sub(c.mult(2*this.dot(c)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(T,l,w){var x,_,T=T instanceof s.default.Vector?(x=T.x||0,_=T.y||0,T.z||0):Array.isArray(T)?(x=T[0]||0,_=T[1]||0,T[2]||0):(x=T||0,_=l||0,w||0);return this.x===x&&this.y===_&&this.z===T}},{key:"clampToZero",value:function(){return this.x=this._clampToZero(this.x),this.y=this._clampToZero(this.y),this.z=this._clampToZero(this.z),this}},{key:"_clampToZero",value:function(c){return Math.abs(+(c||0))<=Number.EPSILON?0:c}}])&&v(f.prototype,y),g&&v(f,g),d}();var i=s.default.Vector;u.default=i},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.every":155,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.constructor":179,"core-js/modules/es.number.epsilon":180,"core-js/modules/es.number.is-finite":181,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],317:[function(b,m,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(b=b("../core/main"))&&b.__esModule?b:{default:b},p="_lcg_random_state",s=4294967296,h=0,b=(a.default.prototype._lcg=function(v){return this[v]=(1664525*this[v]+1013904223)%s,this[v]/s},a.default.prototype._lcgSetSeed=function(v,i){this[v]=(i??Math.random()*s)>>>0},a.default.prototype.randomSeed=function(v){this._lcgSetSeed(p,v),this._gaussian_previous=!1},a.default.prototype.random=function(v,i){var d,f;return a.default._validateParameters("random",arguments),d=this[p]!=null?this._lcg(p):Math.random(),v===void 0?d:i===void 0?Array.isArray(v)?v[Math.floor(d*v.length)]:d*v:(i<v&&(f=v,v=i,i=f),d*(i-v)+v)},a.default.prototype.randomGaussian=function(v){var i,d,f,y,g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)i=h,this._gaussian_previous=!1;else{for(;1<=(y=(d=this.random(2)-1)*d+(f=this.random(2)-1)*f););i=d*(y=Math.sqrt(-2*Math.log(y)/y)),h=f*y,this._gaussian_previous=!0}return i*g+(v||0)},a.default);u.default=b},{"../core/main":283}],318:[function(t,m,u){function a(i){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(i)}function p(i){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(d){return a(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":a(d)})(i)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(v=t("../core/main"))&&v.__esModule?v:{default:v},h=function(i){if(i&&i.__esModule)return i;if(i===null||p(i)!=="object"&&typeof i!="function")return{default:i};var d=b();if(d&&d.has(i))return d.get(i);var f,y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in i){var c;Object.prototype.hasOwnProperty.call(i,f)&&((c=g?Object.getOwnPropertyDescriptor(i,f):null)&&(c.get||c.set)?Object.defineProperty(y,f,c):y[f]=i[f])}return y.default=i,d&&d.set(i,y),y}(t("../core/constants"));function b(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,b=function(){return i},i)}s.default.prototype._angleMode=h.RADIANS,s.default.prototype.acos=function(i){return this._fromRadians(Math.acos(i))},s.default.prototype.asin=function(i){return this._fromRadians(Math.asin(i))},s.default.prototype.atan=function(i){return this._fromRadians(Math.atan(i))},s.default.prototype.atan2=function(i,d){return this._fromRadians(Math.atan2(i,d))},s.default.prototype.cos=function(i){return Math.cos(this._toRadians(i))},s.default.prototype.sin=function(i){return Math.sin(this._toRadians(i))},s.default.prototype.tan=function(i){return Math.tan(this._toRadians(i))},s.default.prototype.degrees=function(i){return i*h.RAD_TO_DEG},s.default.prototype.radians=function(i){return i*h.DEG_TO_RAD},s.default.prototype.angleMode=function(i){if(s.default._validateParameters("angleMode",arguments),i===void 0)return this._angleMode;i!==h.DEGREES&&i!==h.RADIANS||i!==this._angleMode&&(i===h.RADIANS?(this._setProperty("pRotationX",this.pRotationX*h.DEG_TO_RAD),this._setProperty("pRotationY",this.pRotationY*h.DEG_TO_RAD),this._setProperty("pRotationZ",this.pRotationZ*h.DEG_TO_RAD)):(this._setProperty("pRotationX",this.pRotationX*h.RAD_TO_DEG),this._setProperty("pRotationY",this.pRotationY*h.RAD_TO_DEG),this._setProperty("pRotationZ",this.pRotationZ*h.RAD_TO_DEG)),this._angleMode=i)},s.default.prototype._toRadians=function(i){return this._angleMode===h.DEGREES?i*h.DEG_TO_RAD:i},s.default.prototype._toDegrees=function(i){return this._angleMode===h.RADIANS?i*h.RAD_TO_DEG:i},s.default.prototype._fromRadians=function(i){return this._angleMode===h.DEGREES?i*h.RAD_TO_DEG:i},s.default.prototype._fromDegrees=function(i){return this._angleMode===h.RADIANS?i*h.DEG_TO_RAD:i};var v=s.default;u.default=v},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],319:[function(t,m,u){t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(t=t("../core/main"))&&t.__esModule?t:{default:t};a.default.prototype.textAlign=function(p,s){var h;return a.default._validateParameters("textAlign",arguments),(h=this._renderer).textAlign.apply(h,arguments)},a.default.prototype.textLeading=function(p){var s;return a.default._validateParameters("textLeading",arguments),(s=this._renderer).textLeading.apply(s,arguments)},a.default.prototype.textSize=function(p){var s;return a.default._validateParameters("textSize",arguments),(s=this._renderer).textSize.apply(s,arguments)},a.default.prototype.textStyle=function(p){var s;return a.default._validateParameters("textStyle",arguments),(s=this._renderer).textStyle.apply(s,arguments)},a.default.prototype.textWidth=function(){for(var p=arguments.length,s=new Array(p),h=0;h<p;h++)s[h]=arguments[h];if(s[0]+="",a.default._validateParameters("textWidth",s),s[0].length===0)return 0;for(var b=s[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),v=[],i=0;i<b.length;i++)v.push(this._renderer.textWidth(b[i]));return Math.max.apply(Math,v)},a.default.prototype.textAscent=function(){for(var p=arguments.length,s=new Array(p),h=0;h<p;h++)s[h]=arguments[h];return a.default._validateParameters("textAscent",s),this._renderer.textAscent()},a.default.prototype.textDescent=function(){for(var p=arguments.length,s=new Array(p),h=0;h<p;h++)s[h]=arguments[h];return a.default._validateParameters("textDescent",s),this._renderer.textDescent()},a.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},a.default.prototype.textWrap=function(p){return a.default._validateParameters("textWrap",[p]),this._renderer.textWrap(p)},t=a.default,u.default=t},{"../core/main":283,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],320:[function(t,m,u){function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(f)}function p(f){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(y){return a(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":a(y)})(f)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.split"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(d=t("../core/main"))&&d.__esModule?d:{default:d},h=i(t("../core/constants")),b=i(t("opentype.js"));function v(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,v=function(){return f},f)}function i(f){if(f&&f.__esModule)return f;if(f===null||p(f)!=="object"&&typeof f!="function")return{default:f};var y=v();if(y&&y.has(f))return y.get(f);var g,c,l={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&((c=w?Object.getOwnPropertyDescriptor(f,g):null)&&(c.get||c.set)?Object.defineProperty(l,g,c):l[g]=f[g]);return l.default=f,y&&y.set(f,l),l}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),s.default.prototype.loadFont=function(f,y,g){s.default._validateParameters("loadFont",arguments);var c=new s.default.Font(this),l=this;return b.load(f,function(_,T){if(_)return s.default._friendlyFileLoadError(4,f),g!==void 0?g(_):void console.error(_,f);c.font=T,y!==void 0&&y(c),l._decrementPreload();var _=f.split("\\").pop().split("/").pop(),T=_.lastIndexOf("."),E=T<1?null:_.slice(T+1);["ttf","otf","woff","woff2"].includes(E)&&(E=_.slice(0,T!==-1?T:0),(_=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(E,`;
src: url(`).concat(f,`);
}
`))),document.head.appendChild(_))}),c},s.default.prototype.text=function(f,y,g,c,l){var w;return s.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(w=this._renderer).text.apply(w,arguments):this},s.default.prototype.textFont=function(f,y){if(s.default._validateParameters("textFont",arguments),arguments.length){if(f)return this._renderer._setProperty("_textFont",f),y&&(this._renderer._setProperty("_textSize",y),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",y*h._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var d=s.default;u.default=d},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,"opentype.js":257}],321:[function(t,m,u){function a(S){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})(S)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var p=(p=t("../core/main"))&&p.__esModule?p:{default:p},s=function(S){if(S&&S.__esModule)return S;if(S===null||b(S)!=="object"&&typeof S!="function")return{default:S};var P=h();if(P&&P.has(S))return P.get(S);var N,C={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(N in S){var L;Object.prototype.hasOwnProperty.call(S,N)&&((L=D?Object.getOwnPropertyDescriptor(S,N):null)&&(L.get||L.set)?Object.defineProperty(C,N,L):C[N]=S[N])}return C.default=S,P&&P.set(S,C),C}(t("../core/constants"));function h(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,h=function(){return S},S)}function b(S){return(b=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(P){return a(P)}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":a(P)})(S)}function v(S,P){for(var N=0;N<P.length;N++){var C=P[N];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(S,C.key,C)}}function i(S,P){var N=S.length;return S[P<0?P%N+N:P%N]}function d(S,P,N,C){var D,L,F;return C?(d.tmpPoint1===void 0&&(d.tmpPoint1=[],d.tmpPoint2=[]),L=d.tmpPoint1,F=d.tmpPoint2,L.x=P.x-S.x,L.y=P.y-S.y,F.x=N.x-P.x,F.y=N.y-P.y,D=L.x*F.x+L.y*F.y,L=Math.sqrt(L.x*L.x+L.y*L.y),F=Math.sqrt(F.x*F.x+F.y*F.y),Math.acos(D/(L*F))<C):(P[0]-S[0])*(N[1]-S[1])-(N[0]-S[0])*(P[1]-S[1])==0}function f(A,$,z,Z,te,L,F,I,B){var W=1-B,V=Math.pow(W,3),X=Math.pow(W,2),M=B*B,Q=M*B,G=V*A+3*X*B*z+3*W*B*B*te+Q*F,V=V*$+3*X*B*Z+3*W*B*B*L+Q*I,X=A+2*B*(z-A)+M*(te-2*z+A),Q=$+2*B*(Z-$)+M*(L-2*Z+$),se=z+2*B*(te-z)+M*(F-2*te+z),M=Z+2*B*(L-Z)+M*(I-2*L+Z),A=W*A+B*z,z=W*$+B*Z,$=W*te+B*F,Z=W*L+B*I,te=90-180*Math.atan2(X-se,Q-M)/Math.PI;return(se<X||Q<M)&&(te+=180),{x:G,y:V,m:{x:X,y:Q},n:{x:se,y:M},start:{x:A,y:z},end:{x:$,y:Z},alpha:te}}function y(S,P,N,C,D,L,F,I,B){return B==null?T(S,P,N,C,D,L,F,I):f(S,P,N,C,D,L,F,I,function(W,G,V,X,Q,se,M,A,z){if(!(z<0||T(W,G,V,X,Q,se,M,A)<z)){var $,Z=.5,te=1-Z;for($=T(W,G,V,X,Q,se,M,A,te);.01<Math.abs($-z);)$=T(W,G,V,X,Q,se,M,A,te+=($<z?1:-1)*(Z/=2));return te}}(S,P,N,C,D,L,F,I,B))}function g(S,P,N){for(var C,D,L,F,I,B=0,W=0,G=(S=function(V,X){function Q(ge,xe,ke){var Fe,Me;if(!ge)return["C",xe.x,xe.y,xe.x,xe.y,xe.x,xe.y];switch(ge[0]in{T:1,Q:1}||(xe.qx=xe.qy=null),ge[0]){case"M":xe.X=ge[1],xe.Y=ge[2];break;case"A":ge=["C"].concat(l.apply(0,[xe.x,xe.y].concat(ge.slice(1))));break;case"S":Me=ke==="C"||ke==="S"?(Fe=2*xe.x-xe.bx,2*xe.y-xe.by):(Fe=xe.x,xe.y),ge=["C",Fe,Me].concat(ge.slice(1));break;case"T":ke==="Q"||ke==="T"?(xe.qx=2*xe.x-xe.qx,xe.qy=2*xe.y-xe.qy):(xe.qx=xe.x,xe.qy=xe.y),ge=["C"].concat(_(xe.x,xe.y,xe.qx,xe.qy,ge[1],ge[2]));break;case"Q":xe.qx=ge[1],xe.qy=ge[2],ge=["C"].concat(_(xe.x,xe.y,ge[1],ge[2],ge[3],ge[4]));break;case"L":ge=["C"].concat(x(xe.x,xe.y,ge[1],ge[2]));break;case"H":ge=["C"].concat(x(xe.x,xe.y,ge[1],xe.y));break;case"V":ge=["C"].concat(x(xe.x,xe.y,xe.x,ge[1]));break;case"Z":ge=["C"].concat(x(xe.x,xe.y,xe.X,xe.Y))}return ge}function se(ge,xe){if(7<ge[xe].length){ge[xe].shift();for(var ke=ge[xe];ke.length;)ie[xe]="A",$&&(he[xe]="A"),ge.splice(xe++,0,["C"].concat(ke.splice(0,6)));ge.splice(xe,1),A=Math.max(z.length,$&&$.length||0)}}function M(ge,xe,ke,Fe,Me){ge&&xe&&ge[Me][0]==="M"&&xe[Me][0]!=="M"&&(xe.splice(Me,0,["M",Fe.x,Fe.y]),ke.bx=0,ke.by=0,ke.x=ge[Me][1],ke.y=ge[Me][2],A=Math.max(z.length,$&&$.length||0))}var A,z=c(V),$=X&&c(X),Z={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},te={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ie=[],he=[],oe="",ce="";A=Math.max(z.length,$&&$.length||0);for(var fe=0;fe<A;fe++){(oe=z[fe]?z[fe][0]:oe)!=="C"&&(ie[fe]=oe,fe&&(ce=ie[fe-1])),z[fe]=Q(z[fe],Z,ce),ie[fe]!=="A"&&oe==="C"&&(ie[fe]="C"),se(z,fe),$&&((oe=$[fe]?$[fe][0]:oe)!=="C"&&(he[fe]=oe,fe&&(ce=he[fe-1])),$[fe]=Q($[fe],te,ce),he[fe]!=="A"&&oe==="C"&&(he[fe]="C"),se($,fe)),M(z,$,Z,te,fe),M($,z,te,Z,fe);var ee=z[fe],de=$&&$[fe],ye=ee.length,we=$&&de.length;Z.x=ee[ye-2],Z.y=ee[ye-1],Z.bx=parseFloat(ee[ye-4])||Z.x,Z.by=parseFloat(ee[ye-3])||Z.y,te.bx=$&&(parseFloat(de[we-4])||te.x),te.by=$&&(parseFloat(de[we-3])||te.y),te.x=$&&de[we-2],te.y=$&&de[we-1]}return $?[z,$]:z}(S)).length;W<G;W++){if((L=S[W])[0]==="M")C=+L[1],D=+L[2];else{if(P<B+(F=y(C,D,L[1],L[2],L[3],L[4],L[5],L[6]))&&!N)return{x:(I=y(C,D,L[1],L[2],L[3],L[4],L[5],L[6],P-B)).x,y:I.y,alpha:I.alpha};B+=F,C=+L[5],D=+L[6]}L.shift()}return I=(I=N?B:f(C,D,L[0],L[1],L[2],L[3],L[4],L[5],1)).alpha?{x:I.x,y:I.y,alpha:I.alpha}:I}function c(S){var P=[],N=0,C=0,D=0,L=0,F=0;if(S){S[0][0]==="M"&&(D=N=+S[0][1],L=C=+S[0][2],F++,P[0]=["M",N,C]);for(var I,B,W=S.length===3&&S[0][0]==="M"&&S[1][0].toUpperCase()==="R"&&S[2][0].toUpperCase()==="Z",G=F,V=S.length;G<V;G++){if(P.push(I=[]),(B=S[G])[0]!==B[0].toUpperCase())switch(I[0]=B[0].toUpperCase(),I[0]){case"A":I[1]=B[1],I[2]=B[2],I[3]=B[3],I[4]=B[4],I[5]=B[5],I[6]=+(B[6]+N),I[7]=+(B[7]+C);break;case"V":I[1]=+B[1]+C;break;case"H":I[1]=+B[1]+N;break;case"R":for(var X,Q=2,se=(X=[N,C].concat(B.slice(1))).length;Q<se;Q++)X[Q]=+X[Q]+N,X[++Q]=+X[Q]+C;P.pop(),P=P.concat(w(X,W));break;case"M":D=+B[1]+N,L=+B[2]+C;break;default:for(var M=1,A=B.length;M<A;M++)I[M]=+B[M]+(M%2?N:C)}else if(B[0]==="R")X=[N,C].concat(B.slice(1)),P.pop(),P=P.concat(w(X,W)),I=["R"].concat(B.slice(-2));else for(var z=0,$=B.length;z<$;z++)I[z]=B[z];switch(I[0]){case"Z":N=D,C=L;break;case"H":N=I[1];break;case"V":C=I[1];break;case"M":D=I[I.length-2],L=I[I.length-1];break;default:N=I[I.length-2],C=I[I.length-1]}}}return P}function l(S,P,N,C,$,ie,Z,I,B,W){function G(we,ge,xe){return{x:we*Math.cos(xe)-ge*Math.sin(xe),y:we*Math.sin(xe)+ge*Math.cos(xe)}}var V,A=Math.PI,z=120*A/180,X=A/180*(+$||0),Q=[],se=(W?(fe=W[0],V=W[1],oe=W[2],ce=W[3]):(S=(te=G(S,P,-X)).x,P=te.y,1<(se=(M=(S-(I=(te=G(I,B,-X)).x))/2)*M/(N*N)+(te=(P-(B=te.y))/2)*te/(C*C))&&(N*=se=Math.sqrt(se),C*=se),se=N*N,he=C*C,oe=(ie=(ie===Z?-1:1)*Math.sqrt(Math.abs((se*he-se*te*te-he*M*M)/(se*te*te+he*M*M))))*N*te/C+(S+I)/2,ce=ie*-C*M/N+(P+B)/2,fe=Math.asin(((P-ce)/C).toFixed(9)),V=Math.asin(((B-ce)/C).toFixed(9)),(fe=S<oe?A-fe:fe)<0&&(fe=2*A+fe),(V=I<oe?A-V:V)<0&&(V=2*A+V),Z&&V<fe&&(fe-=2*A),!Z&&fe<V&&(V-=2*A)),V-fe),M=(Math.abs(se)>z&&(he=V,te=I,ie=B,V=fe+z*(Z&&fe<V?1:-1),Q=l(I=oe+N*Math.cos(V),B=ce+C*Math.sin(V),N,C,$,0,Z,te,ie,[V,he,oe,ce])),se=V-fe,Math.cos(fe)),A=Math.sin(fe),z=Math.cos(V),$=Math.sin(V),Z=Math.tan(se/4),te=4/3*N*Z,ie=4/3*C*Z,he=[S,P],oe=[S+te*A,P-ie*M],ce=[I+te*$,B-ie*z],fe=[I,B];if(oe[0]=2*he[0]-oe[0],oe[1]=2*he[1]-oe[1],W)return[oe,ce,fe].concat(Q);for(var ee=[],de=0,ye=(Q=[oe,ce,fe].concat(Q).join().split(",")).length;de<ye;de++)ee[de]=de%2?G(Q[de-1],Q[de],X).y:G(Q[de],Q[de+1],X).x;return ee}function w(S,P){for(var N=[],C=0,D=S.length;C<D-2*!P;C+=2){var L=[{x:+S[C-2],y:+S[C-1]},{x:+S[C],y:+S[C+1]},{x:+S[C+2],y:+S[C+3]},{x:+S[C+4],y:+S[C+5]}];P?C?D-4===C?L[3]={x:+S[0],y:+S[1]}:D-2===C&&(L[2]={x:+S[0],y:+S[1]},L[3]={x:+S[2],y:+S[3]}):L[0]={x:+S[D-2],y:+S[D-1]}:D-4===C?L[3]=L[2]:C||(L[0]={x:+S[C],y:+S[C+1]}),N.push(["C",(-L[0].x+6*L[1].x+L[2].x)/6,(-L[0].y+6*L[1].y+L[2].y)/6,(L[1].x+6*L[2].x-L[3].x)/6,(L[1].y+6*L[2].y-L[3].y)/6,L[2].x,L[2].y])}return N}function x(S,P,N,C){return[S,P,N,C,N,C]}function _(S,P,N,C,D,L){return[1/3*S+2/3*N,1/3*P+2/3*C,1/3*D+2/3*N,1/3*L+2/3*C,D,L]}function T(S,P,N,C,D,L,F,I,B){for(var W=(B=1<(B=B??1)?1:B<0?0:B)/2,G=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],V=0,X=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Q=0;Q<12;Q++){var M=W*G[Q]+W,se=E(M,S,N,D,F),M=E(M,P,C,L,I);V+=X[Q]*Math.sqrt(se*se+M*M)}return W*V}function E(S,P,N,C,D){return S*(S*(-3*P+9*N-9*C+3*D)+6*P-12*N+6*C)-3*P+3*N}p.default.Font=function(){function S(C){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");this.parent=C,this.cache={},this.font=void 0}var P,N;return P=S,(N=[{key:"textBounds",value:function(C){var D=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,L=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,W=3<arguments.length?arguments[3]:void 0,F=4<arguments.length?arguments[4]:void 0,I=F&&F.renderer&&F.renderer._pInst||this.parent,B=I._renderer.drawingContext,W=(B.textAlign||s.LEFT,B.textBaseline||s.BASELINE,W||I._renderer._textSize);if(!te){for(var G=[],V=[],X=[],Q=(X[0]=[],[]),se=this._scale(W),M=I._renderer.textLeading(),A=0,z=(this.font.forEachGlyph(C,D,L,W,F,function(oe,ce,fe,ee){var de=oe.getMetrics();oe.index===0?X[A+=1]=[]:(X[A].push(ce+de.xMin*se),X[A].push(ce+de.xMax*se),Q.push(fe+A*M+-de.yMin*se),Q.push(fe+A*M+-de.yMax*se))}),0<X[A].length&&(G[A]=Math.min.apply(null,X[A]),V[A]=Math.max.apply(null,X[A])),0),$=0;$<=A;$++){G[$]=Math.min.apply(null,X[$]),V[$]=Math.max.apply(null,X[$]);var Z=V[$]-G[$];z<Z&&(z=Z)}var B=Math.min.apply(null,G),te={x:B,y:L=Math.min.apply(null,Q),h:Math.max.apply(null,Q)-L,w:z,advance:B-D},W=this._handleAlignment(I._renderer,C,te.x,te.y,te.w+te.advance);te.x=W.x,te.y=W.y}return te}},{key:"textToPoints",value:function(C,D,L,F,I){var B,W=D,G=[],V=this.parent,X=C.split(/\r?\n|\r|\n/g);F=F||this.parent._renderer._textSize;for(var Q,se,M,A=0;A<X.length;A++){var z=0;D=W;for(var $=($=X[A]).replace("	","  "),Z=this._getGlyphs($),te=0;te<Z.length;te++){if(se=$,!((M=Z)[Q=te].name&&M[Q].name==="space"||se.length===M.length&&se[Q]===" "))for(var ie=function(fe){for(var ee,de=[],ye=0;ye<fe.length;ye++)fe[ye].type==="M"&&(ee&&de.push(ee),ee=[]),ee.push(function(we){var ge=[we.type];return we.type==="M"||we.type==="L"?ge.push(we.x,we.y):we.type==="C"?ge.push(we.x1,we.y1,we.x2,we.y2,we.x,we.y):we.type==="Q"&&ge.push(we.x1,we.y1,we.x,we.y),ge}(fe[ye]));return de.push(ee),de}(Z[te].getPath(D,L,F).commands),he=0;he<ie.length;he++)for(var oe=function(fe,ee){for(var ee=function(ke,Fe){if(b(ke)!=="object")ke=Fe;else for(var Me in Fe)ke[Me]===void 0&&(ke[Me]=Fe[Me]);return ke}(ee,{sampleFactor:.1,simplifyThreshold:0}),de=g(fe,0,1),ye=de/(de*ee.sampleFactor),we=[],ge=0;ge<de;ge+=ye)we.push(g(fe,ge));return ee.simplifyThreshold&&function(xe){for(var ke=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,Fe=0,Me=xe.length-1;3<xe.length&&0<=Me;--Me)d(i(xe,Me-1),i(xe,Me),i(xe,Me+1),ke)&&(xe.splice(Me%xe.length,1),Fe++)}(we,ee.simplifyThreshold),we}(ie[he],I),ce=0;ce<oe.length;ce++)oe[ce].x+=z,B=this._handleAlignment(V._renderer,$,oe[ce].x,oe[ce].y),oe[ce].x=B.x,oe[ce].y=B.y,G.push(oe[ce]);z+=Z[te].advanceWidth*this._scale(F)}L+=this.parent._renderer._textLeading}return G}},{key:"_getGlyphs",value:function(C){return this.font.stringToGlyphs(C)}},{key:"_getPath",value:function(C,B,L,F){var I=(F&&F.renderer&&F.renderer._pInst||this.parent)._renderer,B=this._handleAlignment(I,C,B,L);return this.font.getPath(C,B.x,B.y,I._textSize,F)}},{key:"_getPathData",value:function(C,D,L,F){var I=3;return typeof C=="string"&&2<arguments.length?C=this._getPath(C,D,L,F):b(D)==="object"&&(F=D),F&&typeof F.decimals=="number"&&(I=F.decimals),C.toPathData(I)}},{key:"_getSVG",value:function(C,D,L,F){var I=3;return typeof C=="string"&&2<arguments.length?C=this._getPath(C,D,L,F):b(D)==="object"&&(F=D),F&&(typeof F.decimals=="number"&&(I=F.decimals),typeof F.strokeWidth=="number"&&(C.strokeWidth=F.strokeWidth),F.fill!==void 0&&(C.fill=F.fill),F.stroke!==void 0&&(C.stroke=F.stroke)),C.toSVG(I)}},{key:"_renderPath",value:function(W,V,X,F){var I=F&&F.renderer||this.parent._renderer,B=I.drawingContext,W=(b(W)==="object"&&W.commands?W:this._getPath(W,V,X,F)).commands,G=(I._clipping||B.beginPath(),!0),V=!1,X=void 0;try{for(var Q,se=W[Symbol.iterator]();!(G=(Q=se.next()).done);G=!0){var M=Q.value;M.type==="M"?B.moveTo(M.x,M.y):M.type==="L"?B.lineTo(M.x,M.y):M.type==="C"?B.bezierCurveTo(M.x1,M.y1,M.x2,M.y2,M.x,M.y):M.type==="Q"?B.quadraticCurveTo(M.x1,M.y1,M.x,M.y):M.type==="Z"&&B.closePath()}}catch(A){V=!0,X=A}finally{try{G||se.return==null||se.return()}finally{if(V)throw X}}return I._doStroke&&I._strokeSet&&!I._clipping&&B.stroke(),I._doFill&&!I._clipping&&(I._fillSet||I._setFill(s._DEFAULT_TEXT_FILL),B.fill()),this}},{key:"_textWidth",value:function(C,D){return this.font.getAdvanceWidth(C,D)}},{key:"_textAscent",value:function(C){return this.font.ascender*this._scale(C)}},{key:"_textDescent",value:function(C){return-this.font.descender*this._scale(C)}},{key:"_scale",value:function(C){return 1/this.font.unitsPerEm*(C||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(C,D,L,F,I){var B=C._textSize;switch(I===void 0&&(I=this._textWidth(D,B)),C._textAlign){case s.CENTER:L-=I/2;break;case s.RIGHT:L-=I}switch(C._textBaseline){case s.TOP:F+=this._textAscent(B);break;case s.CENTER:F+=this._textAscent(B)/2;break;case s.BOTTOM:F-=this._textDescent(B)}return{x:L,y:F}}}])&&v(P.prototype,N),S}(),t=p.default,u.default=t},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],322:[function(t,m,u){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.append=function(a,p){return a.push(p),a},t.default.prototype.arrayCopy=function(a,p,s,h,b){var v,i;a=b!==void 0?(i=Math.min(b,a.length),v=h,a.slice(p,i+p)):(i=s!==void 0?(i=s,Math.min(i,a.length)):a.length,s=p,a.slice(v=0,i)),Array.prototype.splice.apply(s,[v,i].concat(a))},t.default.prototype.concat=function(a,p){return a.concat(p)},t.default.prototype.reverse=function(a){return a.reverse()},t.default.prototype.shorten=function(a){return a.pop(),a},t.default.prototype.shuffle=function(a,p){for(var s,h,b=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(a),v=(a=p||b?a:a.slice()).length;1<v;)s=this.random(0,1)*v|0,h=a[--v],a[v]=a[s],a[s]=h;return a},t.default.prototype.sort=function(a,h){var s=h?a.slice(0,Math.min(h,a.length)):a,h=h?a.slice(Math.min(h,a.length)):[];return(s=typeof s[0]=="string"?s.sort():s.sort(function(b,v){return b-v})).concat(h)},t.default.prototype.splice=function(a,p,s){return Array.prototype.splice.apply(a,[s,0].concat(p)),a},t.default.prototype.subset=function(a,p,s){return s!==void 0?a.slice(p,p+s):a.slice(p,a.length)},t=t.default,u.default=t},{"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.to-string":190}],323:[function(t,m,u){t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(t=t("../core/main"))&&t.__esModule?t:{default:t};a.default.prototype.float=function(p){return p instanceof Array?p.map(parseFloat):parseFloat(p)},a.default.prototype.int=function(p){var s=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return p===1/0||p==="Infinity"?1/0:p===-1/0||p==="-Infinity"?-1/0:typeof p=="string"?parseInt(p,s):typeof p=="number"?0|p:typeof p=="boolean"?p?1:0:p instanceof Array?p.map(function(h){return a.default.prototype.int(h,s)}):void 0},a.default.prototype.str=function(p){return p instanceof Array?p.map(a.default.prototype.str):String(p)},a.default.prototype.boolean=function(p){return typeof p=="number"?p!==0:typeof p=="string"?p.toLowerCase()==="true":typeof p=="boolean"?p:p instanceof Array?p.map(a.default.prototype.boolean):void 0},a.default.prototype.byte=function(p){return p=a.default.prototype.int(p,10),typeof p=="number"?(p+128)%256-128:p instanceof Array?p.map(a.default.prototype.byte):void 0},a.default.prototype.char=function(p){return typeof p!="number"||isNaN(p)?p instanceof Array?p.map(a.default.prototype.char):typeof p=="string"?a.default.prototype.char(parseInt(p,10)):void 0:String.fromCharCode(p)},a.default.prototype.unchar=function(p){return typeof p=="string"&&p.length===1?p.charCodeAt(0):p instanceof Array?p.map(a.default.prototype.unchar):void 0},a.default.prototype.hex=function(p,s){if(s=s??8,p instanceof Array)return p.map(function(b){return a.default.prototype.hex(b,s)});if(p===1/0||p===-1/0)return(p===1/0?"F":"0").repeat(s);if(typeof p=="number"){p<0&&(p=4294967295+p+1);for(var h=Number(p).toString(16).toUpperCase();h.length<s;)h="0".concat(h);return h=h.length>=s?h.substring(h.length-s,h.length):h}},a.default.prototype.unhex=function(p){return p instanceof Array?p.map(a.default.prototype.unhex):parseInt("0x".concat(p),16)},t=a.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.map":168,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.repeat":203}],324:[function(t,m,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(i=t("../core/main"))&&i.__esModule?i:{default:i};function p(d,f){return function(y){if(Array.isArray(y))return y}(d)||function(y,g){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]"){var c=[],l=!0,w=!1,x=void 0;try{for(var _,T=y[Symbol.iterator]();!(l=(_=T.next()).done)&&(c.push(_.value),!g||c.length!==g);l=!0);}catch(E){w=!0,x=E}finally{try{l||T.return==null||T.return()}finally{if(w)throw x}}return c}}(d,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(d,f,y){var g,c=d<0,w=p((d=Math.abs(d)).toString().split("."),2),l=w[0],w=w[1];return y===void 0?(l=l.padStart(f,"0"),g=w?l+"."+w:l,c?"-"+g:g):(l=(g=p(d.toFixed(y).toString().split("."),2))[0],w=g[1],l=l.padStart(f,"0"),d=w===void 0?l:l+"."+w,c?"-"+d:d)}function h(c,f){var y=(c=c.toString()).indexOf("."),g=y!==-1?c.substring(y):"",c=(c=y!==-1?c.substring(0,y):c).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(f===0)g="";else if(f!==void 0)if(f>g.length)for(var l=f-(g+=y===-1?".":"").length+1,w=0;w<l;w++)g+="0";else g=g.substring(0,f+1);return c+g}function b(d){return 0<parseFloat(d)?"+".concat(d.toString()):d.toString()}function v(d){return 0<=parseFloat(d)?" ".concat(d.toString()):d.toString()}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),a.default.prototype.join=function(d,f){return a.default._validateParameters("join",arguments),d.join(f)},a.default.prototype.match=function(d,f){return a.default._validateParameters("match",arguments),d.match(f)},a.default.prototype.matchAll=function(d,f){a.default._validateParameters("matchAll",arguments);for(var y=new RegExp(f,"g"),g=y.exec(d),c=[];g!==null;)c.push(g),g=y.exec(d);return c},a.default.prototype.nf=function(d,f,y){return a.default._validateParameters("nf",arguments),d instanceof Array?d.map(function(g){return s(g,f,y)}):Object.prototype.toString.call(d)==="[object Arguments]"?d.length===3?this.nf(d[0],d[1],d[2]):d.length===2?this.nf(d[0],d[1]):this.nf(d[0]):s(d,f,y)},a.default.prototype.nfc=function(d,f){return a.default._validateParameters("nfc",arguments),d instanceof Array?d.map(function(y){return h(y,f)}):h(d,f)},a.default.prototype.nfp=function(){for(var d=arguments.length,f=new Array(d),y=0;y<d;y++)f[y]=arguments[y];a.default._validateParameters("nfp",f);var g=a.default.prototype.nf.apply(this,f);return g instanceof Array?g.map(b):b(g)},a.default.prototype.nfs=function(){for(var d=arguments.length,f=new Array(d),y=0;y<d;y++)f[y]=arguments[y];a.default._validateParameters("nfs",f);var g=a.default.prototype.nf.apply(this,f);return g instanceof Array?g.map(v):v(g)},a.default.prototype.split=function(d,f){return a.default._validateParameters("split",arguments),d.split(f)},a.default.prototype.splitTokens=function(d,f){var y,g;return a.default._validateParameters("splitTokens",arguments),g=f!==void 0?(g=/\]/g.exec(f=f),(y=/\[/g.exec(f))&&g?(f=f.slice(0,g.index)+f.slice(g.index+1),y=/\[/g.exec(f),f=f.slice(0,y.index)+f.slice(y.index+1),new RegExp("[\\[".concat(f,"\\]]"),"g")):g?(f=f.slice(0,g.index)+f.slice(g.index+1),new RegExp("[".concat(f,"\\]]"),"g")):y?(f=f.slice(0,y.index)+f.slice(y.index+1),new RegExp("[".concat(f,"\\[]"),"g")):new RegExp("[".concat(f,"]"),"g")):/\s/g,d.split(g).filter(function(c){return c})},a.default.prototype.trim=function(d){return a.default._validateParameters("trim",arguments),d instanceof Array?d.map(this.trim):d.trim()};var i=a.default;u.default=i},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.pad-start":202,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],325:[function(t,m,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.day=function(){return new Date().getDate()},t.default.prototype.hour=function(){return new Date().getHours()},t.default.prototype.minute=function(){return new Date().getMinutes()},t.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},t.default.prototype.month=function(){return new Date().getMonth()+1},t.default.prototype.second=function(){return new Date().getSeconds()},t.default.prototype.year=function(){return new Date().getFullYear()},t=t.default,u.default=t},{"../core/main":283}],326:[function(t,m,u){function a(d){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function p(d){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(f){return a(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":a(f)})(d)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(i=t("../core/main"))&&i.__esModule?i:{default:i},h=(t("./p5.Geometry"),function(d){if(d&&d.__esModule)return d;if(d===null||p(d)!=="object"&&typeof d!="function")return{default:d};var f=b();if(f&&f.has(d))return f.get(d);var y,g={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in d){var l;Object.prototype.hasOwnProperty.call(d,y)&&((l=c?Object.getOwnPropertyDescriptor(d,y):null)&&(l.get||l.set)?Object.defineProperty(g,y,l):g[y]=d[y])}return g.default=d,f&&f.set(d,g),g}(t("../core/constants")));function b(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,b=function(){return d},d)}s.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},s.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},s.default.prototype.buildGeometry=function(d){return this._renderer.buildGeometry(d)},s.default.prototype.freeGeometry=function(d){this._renderer._freeBuffers(d.gid)},s.default.prototype.plane=function(){var d,f=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:f,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,l=(this._assert3d("plane"),s.default._validateParameters("plane",arguments),"plane|".concat(g,"|").concat(c));return this._renderer.geometryInHash(l)||((d=new s.default.Geometry(g,c,function(){for(var w,x,_=0;_<=this.detailY;_++)for(var T=_/this.detailY,E=0;E<=this.detailX;E++)w=E/this.detailX,x=new s.default.Vector(w-.5,T-.5,0),this.vertices.push(x),this.uvs.push(w,T)})).computeFaces().computeNormals(),g<=1&&c<=1?d._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(l,d)),this._renderer.drawBuffersScaled(l,f,y,1),this},s.default.prototype.box=function(d,f,y,g,c){this._assert3d("box"),s.default._validateParameters("box",arguments),d===void 0&&(d=50),f===void 0&&(f=d),y===void 0&&(y=f);var l,w=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,w=(c===void 0&&(c=w?1:4),"box|".concat(g=g===void 0?w?1:4:g,"|").concat(c));return this._renderer.geometryInHash(w)||((l=new s.default.Geometry(g,c,function(){var x=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(_,T){for(var T=4*T,E=0;E<4;E++){var S=_[E],S=new s.default.Vector((2*(1&S)-1)/2,((2&S)-1)/2,((4&S)/2-1)/2);x.vertices.push(S),x.uvs.push(1&E,(2&E)/2)}x.faces.push([T,1+T,2+T]),x.faces.push([2+T,1+T,3+T])})})).computeNormals(),g<=4&&c<=4?l._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(w,l)),this._renderer.drawBuffersScaled(w,d,f,y),this},s.default.prototype.sphere=function(){var d=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,f=1<arguments.length&&arguments[1]!==void 0?arguments[1]:24,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:16;return this._assert3d("sphere"),s.default._validateParameters("sphere",arguments),this.ellipsoid(d,d,d,f,y),this};function v(d,f,y,g,c,l,w){d=d<=0?1:d,f=f<0?0:f,y=y<=0?d:y,g=g<3?3:g;for(var x,_,T=(l=l===void 0||l)?-2:0,E=(c=c<1?1:c)+((w=w===void 0?f!==0:w)?2:0),S=Math.atan2(d-f,y),P=Math.sin(S),N=Math.cos(S),C=T;C<=E;++C){var D=C/c,L=y*D,F=void 0,F=C<0?(D=L=0,d):c<C?(L=y,D=1,f):d+(f-d)*D;for(C!==-2&&C!==c+2||(F=0),L-=y/2,x=0;x<g;++x){var I=x/(g-1),W=2*Math.PI*I,B=Math.sin(W),W=Math.cos(W),G=(this.vertices.push(new s.default.Vector(B*F,L,W*F)),void 0),G=C<0?new s.default.Vector(0,-1,0):c<C&&f?new s.default.Vector(0,1,0):new s.default.Vector(B*N,P,W*N);this.vertexNormals.push(G),this.uvs.push(I,D)}}var V=0;if(l){for(_=0;_<g;++_)this.faces.push([V+_,V+g+(_+1)%g,V+g+_]);V+=2*g}for(C=0;C<c;++C){for(x=0;x<g;++x){var X=(x+1)%g;this.faces.push([V+x,V+X,V+g+X]),this.faces.push([V+x,V+g+X,V+g+x])}V+=g}if(w)for(V+=g,x=0;x<g;++x)this.faces.push([V+x,V+(x+1)%g,V+g])}s.default.prototype.cylinder=function(){var d,f=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:f,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,l=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],w=!(5<arguments.length&&arguments[5]!==void 0)||arguments[5],x=(this._assert3d("cylinder"),s.default._validateParameters("cylinder",arguments),"cylinder|".concat(g,"|").concat(c,"|").concat(l,"|").concat(w));return this._renderer.geometryInHash(x)||(d=new s.default.Geometry(g,c),v.call(d,1,1,1,g,c,l,w),g<=24&&c<=16?d._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(x,d)),this._renderer.drawBuffersScaled(x,f,y,f),this},s.default.prototype.cone=function(){var d,f=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:f,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,l=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],w=(this._assert3d("cone"),s.default._validateParameters("cone",arguments),"cone|".concat(g,"|").concat(c,"|").concat(l));return this._renderer.geometryInHash(w)||(d=new s.default.Geometry(g,c),v.call(d,1,0,1,g,c,l,!1),g<=24&&c<=16?d._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(w,d)),this._renderer.drawBuffersScaled(w,f,y,f),this},s.default.prototype.ellipsoid=function(){var d,f=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:f,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:f,c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:24,l=4<arguments.length&&arguments[4]!==void 0?arguments[4]:16,w=(this._assert3d("ellipsoid"),s.default._validateParameters("ellipsoid",arguments),"ellipsoid|".concat(c,"|").concat(l));return this._renderer.geometryInHash(w)||((d=new s.default.Geometry(c,l,function(){for(var x=0;x<=this.detailY;x++)for(var _=x/this.detailY,T=Math.PI*_-Math.PI/2,E=Math.cos(T),S=Math.sin(T),P=0;P<=this.detailX;P++){var N=P/this.detailX,D=2*Math.PI*N,C=Math.cos(D),D=Math.sin(D),D=new s.default.Vector(E*D,S,E*C);this.vertices.push(D),this.vertexNormals.push(D),this.uvs.push(N,_)}})).computeFaces(),c<=24&&l<=24?d._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(w,d)),this._renderer.drawBuffersScaled(w,f,y,g),this},s.default.prototype.torus=function(d,w,y,g){if(this._assert3d("torus"),s.default._validateParameters("torus",arguments),d===void 0)d=50;else if(!d)return;if(w===void 0)w=10;else if(!w)return;y===void 0&&(y=24),g===void 0&&(g=16);var c,l=(w/d).toPrecision(4),w="torus|".concat(l,"|").concat(y,"|").concat(g);return this._renderer.geometryInHash(w)||((c=new s.default.Geometry(y,g,function(){for(var x=0;x<=this.detailY;x++)for(var _=x/this.detailY,T=2*Math.PI*_,E=Math.cos(T),S=Math.sin(T),P=1+l*E,N=0;N<=this.detailX;N++){var C=N/this.detailX,D=2*Math.PI*C,F=Math.cos(D),D=Math.sin(D),L=new s.default.Vector(P*F,P*D,l*S),F=new s.default.Vector(E*F,E*D,S);this.vertices.push(L),this.vertexNormals.push(F),this.uvs.push(C,_)}})).computeFaces(),y<=24&&g<=16?c._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(w,c)),this._renderer.drawBuffersScaled(w,d,d,d),this},s.default.RendererGL.prototype.point=function(d,f){var y=[];return y.push(new s.default.Vector(d,f,2<arguments.length&&arguments[2]!==void 0?arguments[2]:0)),this._drawPoints(y,this.immediateMode.buffers.point),this},s.default.RendererGL.prototype.triangle=function(w){var f=w[0],y=w[1],g=w[2],c=w[3],l=w[4],w=w[5],x=(this.geometryInHash("tri")||((x=new s.default.Geometry(1,1,function(){var E=[];E.push(new s.default.Vector(0,0,0)),E.push(new s.default.Vector(1,0,0)),E.push(new s.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=E,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),x.computeNormals(),this.createBuffers("tri",x)),this.uModelMatrix.copy());try{var _=Math.sign(f*c-g*y+g*w-l*c+l*y-f*w),T=new s.default.Matrix([g-f,c-y,0,0,l-f,w-y,0,0,0,0,_,0,f,y,0,1]).mult(this.uModelMatrix);this.uModelMatrix=T,this.drawBuffers("tri")}finally{this.uModelMatrix=x}return this},s.default.RendererGL.prototype.ellipse=function(d){this.arc(d[0],d[1],d[2],d[3],0,h.TWO_PI,h.OPEN,d[4])},s.default.RendererGL.prototype.arc=function(){var d,f=arguments.length<=0?void 0:arguments[0],y=arguments.length<=1?void 0:arguments[1],g=arguments.length<=2?void 0:arguments[2],c=arguments.length<=3?void 0:arguments[3],l=arguments.length<=4?void 0:arguments[4],w=arguments.length<=5?void 0:arguments[5],x=arguments.length<=6?void 0:arguments[6],_=(arguments.length<=7?void 0:arguments[7])||25,T=(Math.abs(w-l)>=h.TWO_PI?"".concat(E="ellipse","|"):"".concat(E="arc","|").concat(l,"|").concat(w,"|").concat(x,"|")).concat(_,"|"),E=(this.geometryInHash(T)||((d=new s.default.Geometry(_,1,function(){if(l.toFixed(10)!==w.toFixed(10)){x!==h.PIE&&x!==void 0||(this.vertices.push(new s.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var S=0;S<=_;S++){var N=(w-l)*(S/_)+l,P=.5+Math.cos(N)/2,N=.5+Math.sin(N)/2;this.vertices.push(new s.default.Vector(P,N,0)),this.uvs.push([P,N]),S<_-1&&(this.faces.push([0,S+1,S+2]),this.edges.push([S+1,S+2]))}switch(x){case h.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case h.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case h.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),_<=50?d._edgesToVertices(d):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(E," with more than 50 detail")),this.createBuffers(T,d)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([f,y,0]),this.uModelMatrix.scale(g,c,1),this.drawBuffers(T)}finally{this.uModelMatrix=E}return this},s.default.RendererGL.prototype.rect=function(d){var f=d[0],y=d[1],g=d[2],c=d[3];if(d[4]===void 0){var x=this._pInst._glAttributes.perPixelLighting,l=d[4]||(x?1:24),w=d[5]||(x?1:16),x="rect|".concat(l,"|").concat(w),_=(this.geometryInHash(x)||((_=new s.default.Geometry(l,w,function(){for(var G=0;G<=this.detailY;G++)for(var V=G/this.detailY,X=0;X<=this.detailX;X++){var Q=X/this.detailX,se=new s.default.Vector(Q,V,0);this.vertices.push(se),this.uvs.push(Q,V)}0<l&&0<w&&(this.edges=[[0,l],[l,(l+1)*(w+1)-1],[(l+1)*(w+1)-1,(l+1)*w],[(l+1)*w,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(x,_)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([f,y,0]),this.uModelMatrix.scale(g,c,1),this.drawBuffers(x)}finally{this.uModelMatrix=_}}else{var x=d[4],_=d[5]===void 0?x:d[5],T=d[6]===void 0?_:d[6],d=d[7]===void 0?T:d[7],D=g,E=c,N=((D+=f)<f&&(N=f,f=D,D=N),(E+=y)<y&&(N=y,y=E,E=N),Math.min((D-f)/2,(E-y)/2)),S=(N<x&&(x=N),N<_&&(_=N),N<T&&(T=N),N<d&&(d=N),f),P=y,N=D,f=E,C=(this.beginShape(),_!==0?(this.vertex(N-_,P),this.quadraticVertex(N,P,N,P+_)):this.vertex(N,P),T!==0?(this.vertex(N,f-T),this.quadraticVertex(N,f,N-T,f)):this.vertex(N,f),d!==0?(this.vertex(S+d,f),this.quadraticVertex(S,f,S,f-d)):this.vertex(S,f),x!==0?(this.vertex(S,P+x),this.quadraticVertex(S,P,S+x,P)):this.vertex(S,P),!(this.immediateMode.geometry.uvs.length=0)),y=!1,D=void 0;try{for(var L,F=this.immediateMode.geometry.vertices[Symbol.iterator]();!(C=(L=F.next()).done);C=!0){var I=L.value,B=(I.x-S)/g,W=(I.y-P)/c;this.immediateMode.geometry.uvs.push(B,W)}}catch(M){y=!0,D=M}finally{try{C||F.return==null||F.return()}finally{if(y)throw D}}this.endShape(h.CLOSE)}return this},s.default.RendererGL.prototype.quad=function(d,f,y,g,c,l,w,x,_,T,E,S){var P=12<arguments.length&&arguments[12]!==void 0?arguments[12]:2,N=13<arguments.length&&arguments[13]!==void 0?arguments[13]:2,C="quad|".concat(d,"|").concat(f,"|").concat(y,"|").concat(g,"|").concat(c,"|").concat(l,"|").concat(w,"|").concat(x,"|").concat(_,"|").concat(T,"|").concat(E,"|").concat(S,"|").concat(P,"|").concat(N);if(!this.geometryInHash(C)){var D=new s.default.Geometry(P,N,function(){for(var X=1/(this.detailX-1),Q=1/(this.detailY-1),se=0;se<this.detailY;se++)for(var M=0;M<this.detailX;M++){var A=M*X,z=se*Q;this.vertices.push(new s.default.Vector((1-A)*((1-z)*d+z*T)+A*((1-z)*g+z*w),(1-A)*((1-z)*f+z*E)+A*((1-z)*c+z*x),(1-A)*((1-z)*y+z*S)+A*((1-z)*l+z*_))),this.uvs.push([A,z])}});D.faces=[];for(var L=0;L<N-1;L++)for(var F=0;F<P-1;F++){var I=F+L*P,B=F+1+(L+1)*P,W=F+(L+1)*P;D.faces.push([I,F+1+L*P,B]),D.faces.push([I,B,W])}D.computeNormals();for(var G=[D.edges.length=0,2,3,1],V=0;V<G.length;V++)D.edges.push([G[V],G[(V+1)%G.length]]);D._edgesToVertices(),this.createBuffers(C,D)}return this.drawBuffers(C),this},s.default.RendererGL.prototype.bezier=function(d,f,y,g,c,l,w,x,_,T,E,S){arguments.length===8&&(E=x,T=w,x=l,w=c,c=g,g=y,y=l=_=S=0);var P=this._pInst._bezierDetail||20;this.beginShape();for(var N=0;N<=P;N++){var C=Math.pow(1-N/P,3),D=N/P*3*Math.pow(1-N/P,2),L=3*Math.pow(N/P,2)*(1-N/P),F=Math.pow(N/P,3);this.vertex(d*C+g*D+w*L+T*F,f*C+c*D+x*L+E*F,y*C+l*D+_*L+S*F)}return this.endShape(),this},s.default.RendererGL.prototype.curve=function(d,f,y,g,c,l,w,x,_,T,E,S){arguments.length===8&&(T=w,E=x,w=c,x=g,c=g=y,y=l=_=S=0);var P=this._pInst._curveDetail;this.beginShape();for(var N=0;N<=P;N++){var C=.5*Math.pow(N/P,3),D=.5*Math.pow(N/P,2),L=N/P*.5;this.vertex(C*(3*g-d-3*w+T)+D*(2*d-5*g+4*w-T)+L*(-d+w)+2*g*.5,C*(3*c-f-3*x+E)+D*(2*f-5*c+4*x-E)+L*(-f+x)+2*c*.5,C*(3*l-y-3*_+S)+D*(2*y-5*l+4*_-S)+L*(-y+_)+2*l*.5)}return this.endShape(),this},s.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(h.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(h.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},s.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var d,f,y,g,c,l,w=[],x=[],_=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var T=1/this._lutBezierDetail,E=T,S=1,P=0;E<1;){if(l=parseFloat(E.toFixed(6)),this._lookUpTableBezier[P]=this._bezierCoefficients(l),S.toFixed(6)===T.toFixed(6)){l=parseFloat(S.toFixed(6))+parseFloat(E.toFixed(6)),++P,this._lookUpTableBezier[P]=this._bezierCoefficients(l);break}E+=T,S-=T,++P}}for(var N=this._lookUpTableBezier.length,C=[],D=0;D<4;D++)C.push([]);C[0]=this.immediateMode.geometry.vertexColors.slice(-4),C[3]=this.curFillColor.slice();var L=[];for(D=0;D<4;D++)L.push([]);if(L[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),L[3]=this.curStrokeColor.slice(),_===6){this.isBezier=!0;var w=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],x=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],F=Math.hypot(w[0]-w[1],x[0]-x[1]),B=Math.hypot(w[1]-w[2],x[1]-x[2]),I=Math.hypot(w[2]-w[3],x[2]-x[3]),B=F+B+I;for(F/=B,I/=B,c=0;c<4;c++)C[1].push(C[0][c]*(1-F)+C[3][c]*F),C[2].push(C[0][c]*I+C[3][c]*(1-I)),L[1].push(L[0][c]*(1-F)+L[3][c]*F),L[2].push(L[0][c]*I+L[3][c]*(1-I));for(g=0;g<N;g++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],D=d=f=0;D<4;D++){for(c=0;c<4;c++)this.curFillColor[c]+=this._lookUpTableBezier[g][D]*C[D][c],this.curStrokeColor[c]+=this._lookUpTableBezier[g][D]*L[D][c];d+=w[D]*this._lookUpTableBezier[g][D],f+=x[D]*this._lookUpTableBezier[g][D]}this.vertex(d,f)}this.curFillColor=C[3],this.curStrokeColor=L[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(_===9){this.isBezier=!0,w=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],x=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var W=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],G=Math.hypot(w[0]-w[1],x[0]-x[1],W[0]-W[1]),B=Math.hypot(w[1]-w[2],x[1]-x[2],W[1]-W[2]),V=Math.hypot(w[2]-w[3],x[2]-x[3],W[2]-W[3]),_=G+B+V;for(G/=_,V/=_,c=0;c<4;c++)C[1].push(C[0][c]*(1-G)+C[3][c]*G),C[2].push(C[0][c]*V+C[3][c]*(1-V)),L[1].push(L[0][c]*(1-G)+L[3][c]*G),L[2].push(L[0][c]*V+L[3][c]*(1-V));for(g=0;g<N;g++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],D=d=f=y=0;D<4;D++){for(c=0;c<4;c++)this.curFillColor[c]+=this._lookUpTableBezier[g][D]*C[D][c],this.curStrokeColor[c]+=this._lookUpTableBezier[g][D]*L[D][c];d+=w[D]*this._lookUpTableBezier[g][D],f+=x[D]*this._lookUpTableBezier[g][D],y+=W[D]*this._lookUpTableBezier[g][D]}this.vertex(d,f,y)}this.curFillColor=C[3],this.curStrokeColor=L[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},s.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var d,f,y,g,c,l,w=[],x=[],_=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var T=1/this._lutQuadraticDetail,E=T,S=1,P=0;E<1;){if(l=parseFloat(E.toFixed(6)),this._lookUpTableQuadratic[P]=this._quadraticCoefficients(l),S.toFixed(6)===T.toFixed(6)){l=parseFloat(S.toFixed(6))+parseFloat(E.toFixed(6)),++P,this._lookUpTableQuadratic[P]=this._quadraticCoefficients(l);break}E+=T,S-=T,++P}}for(var N=this._lookUpTableQuadratic.length,C=[],D=0;D<3;D++)C.push([]);C[0]=this.immediateMode.geometry.vertexColors.slice(-4),C[2]=this.curFillColor.slice();var L=[];for(D=0;D<3;D++)L.push([]);if(L[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),L[2]=this.curStrokeColor.slice(),_===4){this.isQuadratic=!0;var w=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],x=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],F=Math.hypot(w[0]-w[1],x[0]-x[1]);for(F/=F+Math.hypot(w[1]-w[2],x[1]-x[2]),c=0;c<4;c++)C[1].push(C[0][c]*(1-F)+C[2][c]*F),L[1].push(L[0][c]*(1-F)+L[2][c]*F);for(g=0;g<N;g++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],D=d=f=0;D<3;D++){for(c=0;c<4;c++)this.curFillColor[c]+=this._lookUpTableQuadratic[g][D]*C[D][c],this.curStrokeColor[c]+=this._lookUpTableQuadratic[g][D]*L[D][c];d+=w[D]*this._lookUpTableQuadratic[g][D],f+=x[D]*this._lookUpTableQuadratic[g][D]}this.vertex(d,f)}this.curFillColor=C[2],this.curStrokeColor=L[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(_===6){this.isQuadratic=!0,w=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],x=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var I=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],B=Math.hypot(w[0]-w[1],x[0]-x[1],I[0]-I[1]);for(B/=B+Math.hypot(w[1]-w[2],x[1]-x[2],I[1]-I[2]),c=0;c<4;c++)C[1].push(C[0][c]*(1-B)+C[2][c]*B),L[1].push(L[0][c]*(1-B)+L[2][c]*B);for(g=0;g<N;g++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],D=d=f=y=0;D<3;D++){for(c=0;c<4;c++)this.curFillColor[c]+=this._lookUpTableQuadratic[g][D]*C[D][c],this.curStrokeColor[c]+=this._lookUpTableQuadratic[g][D]*L[D][c];d+=w[D]*this._lookUpTableQuadratic[g][D],f+=x[D]*this._lookUpTableQuadratic[g][D],y+=I[D]*this._lookUpTableQuadratic[g][D]}this.vertex(d,f,y)}this.curFillColor=C[2],this.curStrokeColor=L[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},s.default.RendererGL.prototype.curveVertex=function(){var d,f,y,g,c,l,w=[],x=[],_=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var T=1/this._lutBezierDetail,E=T,S=1,P=0;E<1;){if(l=parseFloat(E.toFixed(6)),this._lookUpTableBezier[P]=this._bezierCoefficients(l),S.toFixed(6)===T.toFixed(6)){l=parseFloat(S.toFixed(6))+parseFloat(E.toFixed(6)),++P,this._lookUpTableBezier[P]=this._bezierCoefficients(l);break}E+=T,S-=T,++P}}var N=this._lookUpTableBezier.length;if(_===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,w=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),x=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),c=0;c<N;c++)f=w[0]*this._lookUpTableBezier[c][0]+w[1]*this._lookUpTableBezier[c][1]+w[2]*this._lookUpTableBezier[c][2]+w[3]*this._lookUpTableBezier[c][3],y=x[0]*this._lookUpTableBezier[c][0]+x[1]*this._lookUpTableBezier[c][1]+x[2]*this._lookUpTableBezier[c][2]+x[3]*this._lookUpTableBezier[c][3],this.vertex(f,y);for(c=0;c<_;c++)this.immediateMode._curveVertex.shift()}}else if(_===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,w=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),x=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),d=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),c=0;c<N;c++)f=w[0]*this._lookUpTableBezier[c][0]+w[1]*this._lookUpTableBezier[c][1]+w[2]*this._lookUpTableBezier[c][2]+w[3]*this._lookUpTableBezier[c][3],y=x[0]*this._lookUpTableBezier[c][0]+x[1]*this._lookUpTableBezier[c][1]+x[2]*this._lookUpTableBezier[c][2]+x[3]*this._lookUpTableBezier[c][3],g=d[0]*this._lookUpTableBezier[c][0]+d[1]*this._lookUpTableBezier[c][1]+d[2]*this._lookUpTableBezier[c][2]+d[3]*this._lookUpTableBezier[c][3],this.vertex(f,y,g);for(c=0;c<_;c++)this.immediateMode._curveVertex.shift()}},s.default.RendererGL.prototype.image=function(d,S,y,P,c,l,w,x,_){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(d),this._pInst.textureMode(h.NORMAL);var T=0,E=(S<=d.width&&(T=S/d.width),1),S=(S+P<=d.width&&(E=(S+P)/d.width),0),P=(y<=d.height&&(S=y/d.height),1);y+c<=d.height&&(P=(y+c)/d.height),this.beginShape(),this.vertex(l,w,0,T,S),this.vertex(l+x,w,0,E,S),this.vertex(l+x,w+_,0,E,P),this.vertex(l,w+_,0,T,P),this.endShape(h.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(h.REMOVE)};var i=s.default;u.default=i},{"../core/constants":272,"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],327:[function(t,m,u){function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(f)}function p(f){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(y){return a(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":a(y)})(f)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.assign"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(d=t("../core/main"))&&d.__esModule?d:{default:d},h=function(f){if(f&&f.__esModule)return f;if(f===null||p(f)!=="object"&&typeof f!="function")return{default:f};var y=b();if(y&&y.has(f))return y.get(f);var g,c={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in f){var w;Object.prototype.hasOwnProperty.call(f,g)&&((w=l?Object.getOwnPropertyDescriptor(f,g):null)&&(w.get||w.set)?Object.defineProperty(c,g,w):c[g]=f[g])}return c.default=f,y&&y.set(f,c),c}(t("../core/constants"));function b(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,b=function(){return f},f)}function v(f){return function(y){if(Array.isArray(y)){for(var g=0,c=new Array(y.length);g<y.length;g++)c[g]=y[g];return c}}(f)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(f,y){for(var g=0;g<y.length;g++){var c=y[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}var d=function(){function f(c){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");(this.renderer=c)._pInst.push(),this.identityMatrix=new s.default.Matrix,c.uModelMatrix=new s.default.Matrix,this.geometry=new s.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(f.nextGeometryId),f.nextGeometryId++,this.hasTransform=!1}var y,g;return y=f,(g=[{key:"transformVertices",value:function(c){var l=this;return this.hasTransform?c.map(function(w){return l.renderer.uModelMatrix.multiplyPoint(w)}):c}},{key:"transformNormals",value:function(c){var l=this;return this.hasTransform?c.map(function(w){return l.renderer.uNMatrix.multiplyVec3(w)}):c}},{key:"addGeometry",value:function(c){for(var l,w=this,x=(this.hasTransform=!this.renderer.uModelMatrix.mat4.every(function(T,E){return T===w.identityMatrix.mat4[E]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uModelMatrix),this.geometry.vertices.length),_=((l=this.geometry.vertices).push.apply(l,v(this.transformVertices(c.vertices))),(l=this.geometry.vertexNormals).push.apply(l,v(this.transformNormals(c.vertexNormals))),(l=this.geometry.uvs).push.apply(l,v(c.uvs)),this.renderer._doFill&&(l=this.geometry.faces).push.apply(l,v(c.faces.map(function(T){return T.map(function(E){return E+x})}))),this.renderer._doStroke&&(l=this.geometry.edges).push.apply(l,v(c.edges.map(function(T){return T.map(function(E){return E+x})}))),v(c.vertexColors));_.length<4*c.vertices.length;)_.push.apply(_,v(this.renderer.curFillColor));(l=this.geometry.vertexColors).push.apply(l,v(_))}},{key:"addImmediate",value:function(){var c=this.renderer.immediateMode.geometry,l=this.renderer.immediateMode.shapeMode,w=[];if(this.renderer._doFill)if(l===h.TRIANGLE_STRIP||l===h.QUAD_STRIP)for(var x=2;x<c.vertices.length;x++)x%2==0?w.push([x,x-1,x-2]):w.push([x,x-2,x-1]);else if(l===h.TRIANGLE_FAN)for(var _=2;_<c.vertices.length;_++)w.push([0,_-1,_]);else for(var T=0;T<c.vertices.length;T+=3)w.push([T,T+1,T+2]);this.addGeometry(Object.assign({},c,{faces:w}))}},{key:"addRetained",value:function(c){this.addGeometry(c.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&i(y.prototype,g),f}();d.nextGeometryId=0,u.default=d},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],328:[function(t,m,u){function a(i){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(i)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var p=(v=t("../core/main"))&&v.__esModule?v:{default:v},s=function(i){if(i&&i.__esModule)return i;if(i===null||b(i)!=="object"&&typeof i!="function")return{default:i};var d=h();if(d&&d.has(i))return d.get(i);var f,y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in i){var c;Object.prototype.hasOwnProperty.call(i,f)&&((c=g?Object.getOwnPropertyDescriptor(i,f):null)&&(c.get||c.set)?Object.defineProperty(y,f,c):y[f]=i[f])}return y.default=i,d&&d.set(i,y),y}(t("../core/constants"));function h(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,h=function(){return i},i)}function b(i){return(b=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(d){return a(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":a(d)})(i)}p.default.prototype.orbitControl=function(i,d,f,_){var g=this,c=(this._assert3d("orbitControl"),p.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);i===void 0&&(i=1),d===void 0&&(d=i),f===void 0&&(f=1),b(_)!=="object"&&(_={}),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var E=_.disableTouchActions;this.touchActionsDisabled===!0||E!==void 0&&!E||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0));var l,w,x,E=_.freeRotation,_=E!==void 0&&E,T=[],E=(this.touches.forEach(function(F){g._renderer.prevTouches.forEach(function(I){F.id===I.id&&(I={x:F.x,y:F.y,px:I.x,py:I.y},T.push(I))})}),this._renderer.prevTouches=this.touches,0),S=0,P=0,N=0,C=0,D=this.height<this.width?this.height:this.width,L=!1;return 0<T.length?(L=0<T[0].x&&T[0].x<this.width&&0<T[0].y&&T[0].y<this.height,T.length===1?(S=-i*((l=T[0]).x-l.px)/D,P=d*(l.y-l.py)/D):(l=T[0],w=T[1],E=-(Math.hypot(l.x-w.x,l.y-w.y)-Math.hypot(l.px-w.px,l.py-w.py))*f*4e-4,N=.5*(l.x+w.x)-.5*(l.px+w.px),C=.5*(l.y+w.y)-.5*(l.py+w.py)),0<this.touches.length?L&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(L=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,this._mouseWheelDeltaY!==0?(E=Math.sign(this._mouseWheelDeltaY)*f,E*=.01,this._mouseWheelDeltaY=0,L&&(this._renderer.executeZoom=!0)):this._renderer.executeZoom=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(S=-i*this.movedX/D,P=d*this.movedY/D):this.mouseButton===this.RIGHT&&(N=this.movedX,C=this.movedY*c.yScale),L&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),E!==0&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=E),.001<Math.abs(this._renderer.zoomVelocity)?(_?c._orbitFree(0,0,this._renderer.zoomVelocity):c._orbit(0,0,this._renderer.zoomVelocity),c.projMatrix.mat4[15]!==0&&(c.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),c.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=c.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=c.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,S===0&&P===0||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*S,.6*P),1e-6<this._renderer.rotateVelocity.magSq()?(_?c._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):c._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),N===0&&C===0||!this._renderer.executeRotateAndMove||(l=2*N/this.width,w=2*-C/this.height,this._renderer.moveVelocity.add(.15*l,.15*w)),1e-6<this._renderer.moveVelocity.magSq()?(f=c._getLocalAxes(),i=c.eyeX-c.centerX,d=c.eyeY-c.centerY,D=c.eyeZ-c.centerZ,L=Math.sqrt(i*i+d*d+D*D),E=new p.default.Vector(c.centerX,c.centerY,c.centerZ),E=c.cameraMatrix.multiplyPoint(E),(E=this._renderer.uPMatrix.multiplyAndNormalizePoint(E)).x-=this._renderer.moveVelocity.x,E.y-=this._renderer.moveVelocity.y,P=(S=this._renderer.uPMatrix.mat4)[15]===0?(x=(S[8]+E.x)/S[0]*L,(S[9]+E.y)/S[5]*L):(x=(E.x-S[12])/S[0],(E.y-S[13])/S[5]),c.setPosition(c.eyeX+x*f.x[0]+P*f.y[0],c.eyeY+x*f.x[1]+P*f.y[1],c.eyeZ+x*f.x[2]+P*f.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},p.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var i=arguments.length,d=new Array(i),f=0;f<i;f++)d[f]=arguments[f];p.default._validateParameters("debugMode",d);for(var y=this._registeredMethods.post.length-1;0<=y;y--)this._registeredMethods.post[y].toString()!==this._grid().toString()&&this._registeredMethods.post[y].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(y,1);d[0]===s.GRID?this.registerMethod("post",this._grid(d[1],d[2],d[3],d[4],d[5])):d[0]===s.AXES?this.registerMethod("post",this._axesIcon(d[1],d[2],d[3],d[4])):(this.registerMethod("post",this._grid(d[0],d[1],d[2],d[3],d[4])),this.registerMethod("post",this._axesIcon(d[5],d[6],d[7],d[8])))},p.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var i=this._registeredMethods.post.length-1;0<=i;i--)this._registeredMethods.post[i].toString()!==this._grid().toString()&&this._registeredMethods.post[i].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(i,1)},p.default.prototype._grid=function(i,d,f,y,g){i===void 0&&(i=this.width/2),d===void 0&&(d=Math.round(i/30)<4?4:Math.round(i/30)),f===void 0&&(f=0),y===void 0&&(y=0),g===void 0&&(g=0);var c=i/d,l=i/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uModelMatrix.reset();for(var w=0;w<=d;w++)this.beginShape(this.LINES),this.vertex(-l+f,y,w*c-l+g),this.vertex(l+f,y,w*c-l+g),this.endShape();for(var x=0;x<=d;x++)this.beginShape(this.LINES),this.vertex(x*c-l+f,y,-l+g),this.vertex(x*c-l+f,y,l+g),this.endShape();this.pop()}},p.default.prototype._axesIcon=function(i,d,f,y){return i===void 0&&(i=40<this.width/20?this.width/20:40),d===void 0&&(d=-this.width/4),f===void 0&&(f=d),y===void 0&&(y=d),function(){this.push(),this._renderer.uModelMatrix.reset(),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(d,f,y),this.vertex(d+i,f,y),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(d,f,y),this.vertex(d,f+i,y),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(d,f,y),this.vertex(d,f,y+i),this.endShape(),this.pop()}};var v=p.default;u.default=v},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],329:[function(t,m,u){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.filter"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(t=t("../core/main"))&&t.__esModule?t:{default:t};a.default.prototype.ambientLight=function(p,s,h,b){this._assert3d("ambientLight"),a.default._validateParameters("ambientLight",arguments);var v=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(v._array[0],v._array[1],v._array[2]),this._renderer._enableLighting=!0,this},a.default.prototype.specularColor=function(p,s,h){this._assert3d("specularColor"),a.default._validateParameters("specularColor",arguments);var b=this.color.apply(this,arguments);return this._renderer.specularColors=[b._array[0],b._array[1],b._array[2]],this},a.default.prototype.directionalLight=function(p,g,y,b,v,i){this._assert3d("directionalLight"),a.default._validateParameters("directionalLight",arguments),p=p instanceof a.default.Color?p:this.color(p,g,y);var d,f,g=arguments[arguments.length-1],y=typeof g=="number"?(d=arguments[arguments.length-3],f=arguments[arguments.length-2],arguments[arguments.length-1]):(d=g.x,f=g.y,g.z),g=Math.sqrt(d*d+f*f+y*y);return this._renderer.directionalLightDirections.push(d/g,f/g,y/g),this._renderer.directionalLightDiffuseColors.push(p._array[0],p._array[1],p._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},a.default.prototype.pointLight=function(p,y,g,b,v,i){this._assert3d("pointLight"),a.default._validateParameters("pointLight",arguments),p=p instanceof a.default.Color?p:this.color(p,y,g);var d,f,y=arguments[arguments.length-1],g=typeof y=="number"?(d=arguments[arguments.length-3],f=arguments[arguments.length-2],arguments[arguments.length-1]):(d=y.x,f=y.y,y.z);return this._renderer.pointLightPositions.push(d,f,g),this._renderer.pointLightDiffuseColors.push(p._array[0],p._array[1],p._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},a.default.prototype.imageLight=function(p){this._renderer.activeImageLight=p,this._renderer._enableLighting=!0},a.default.prototype.panorama=function(p){this.filter(this._renderer._getSphereMapping(p))},a.default.prototype.lights=function(){this._assert3d("lights");var p=this.color("rgb(128,128,128)");return this.ambientLight(p),this.directionalLight(p,0,0,-1),this},a.default.prototype.lightFalloff=function(p,s,h){return this._assert3d("lightFalloff"),a.default._validateParameters("lightFalloff",arguments),p<0&&(p=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),s<0&&(s=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),h<0&&(h=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),p===0&&s===0&&h===0&&(p=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=p,this._renderer.linearAttenuation=s,this._renderer.quadraticAttenuation=h,this},a.default.prototype.spotLight=function(p,s,h,b,v,i,d,f,y,g,c){this._assert3d("spotLight"),a.default._validateParameters("spotLight",arguments);var l,w,x,_=arguments.length;switch(_){case 11:case 10:l=this.color(p,s,h),w=new a.default.Vector(b,v,i),x=new a.default.Vector(d,f,y);break;case 9:p instanceof a.default.Color?(l=p,w=new a.default.Vector(s,h,b),x=new a.default.Vector(v,i,d),g=f,c=y):b instanceof a.default.Vector?(l=this.color(p,s,h),w=b,x=new a.default.Vector(v,i,d),g=f,c=y):d instanceof a.default.Vector?(l=this.color(p,s,h),w=new a.default.Vector(b,v,i),x=d,g=f,c=y):(l=this.color(p,s,h),w=new a.default.Vector(b,v,i),x=new a.default.Vector(d,f,y));break;case 8:g=(x=p instanceof a.default.Color?(l=p,w=new a.default.Vector(s,h,b),new a.default.Vector(v,i,d)):b instanceof a.default.Vector?(l=this.color(p,s,h),w=b,new a.default.Vector(v,i,d)):(l=this.color(p,s,h),w=new a.default.Vector(b,v,i),d),f);break;case 7:p instanceof a.default.Color&&s instanceof a.default.Vector?(l=p,w=s,x=new a.default.Vector(h,b,v),g=i,c=d):p instanceof a.default.Color&&v instanceof a.default.Vector?(l=p,w=new a.default.Vector(s,h,b),x=v,g=i,c=d):b instanceof a.default.Vector&&v instanceof a.default.Vector?(l=this.color(p,s,h),w=b,x=v,g=i,c=d):x=p instanceof a.default.Color?(l=p,w=new a.default.Vector(s,h,b),new a.default.Vector(v,i,d)):b instanceof a.default.Vector?(l=this.color(p,s,h),w=b,new a.default.Vector(v,i,d)):(l=this.color(p,s,h),w=new a.default.Vector(b,v,i),d);break;case 6:b instanceof a.default.Vector&&v instanceof a.default.Vector?(l=this.color(p,s,h),w=b,x=v,g=i):p instanceof a.default.Color&&v instanceof a.default.Vector?(l=p,w=new a.default.Vector(s,h,b),x=v,g=i):p instanceof a.default.Color&&s instanceof a.default.Vector&&(l=p,w=s,x=new a.default.Vector(h,b,v),g=i);break;case 5:p instanceof a.default.Color&&s instanceof a.default.Vector&&h instanceof a.default.Vector?(l=p,w=s,x=h,g=b,c=v):b instanceof a.default.Vector&&v instanceof a.default.Vector?(l=this.color(p,s,h),w=b,x=v):p instanceof a.default.Color&&v instanceof a.default.Vector?(l=p,w=new a.default.Vector(s,h,b),x=v):p instanceof a.default.Color&&s instanceof a.default.Vector&&(l=p,w=s,x=new a.default.Vector(h,b,v));break;case 4:l=p,w=s,x=h,g=b;break;case 3:l=p,w=s,x=h;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(_<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(l._array[0],l._array[1],l._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(w.x,w.y,w.z),x.normalize(),this._renderer.spotLightDirections.push(x.x,x.y,x.z),g===void 0&&(g=Math.PI/3),c!==void 0&&c<1?(c=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):c===void 0&&(c=100),g=this._renderer._pInst._toRadians(g),this._renderer.spotLightAngle.push(Math.cos(g)),this._renderer.spotLightConc.push(c),this._renderer._enableLighting=!0,this},a.default.prototype.noLights=function(){this._assert3d("noLights");for(var p=arguments.length,s=new Array(p),h=0;h<p;h++)s[h]=arguments[h];return a.default._validateParameters("noLights",s),this._renderer.activeImageLight=null,this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this._renderer._useMetalness=0,this},t=a.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.filter":157}],330:[function(t,m,u){function a(g){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t("regenerator-runtime/runtime");var p=(y=t("../core/main"))&&y.__esModule?y:{default:y};function s(g){return function(c){if(Array.isArray(c)){for(var l=0,w=new Array(c.length);l<c.length;l++)w[l]=c[l];return w}}(g)||function(c){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]")return Array.from(c)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(g,c,l,w,x,_,T){try{var E=g[_](T),S=E.value}catch(P){return void l(P)}E.done?c(S):Promise.resolve(S).then(w,x)}function b(g){return function(){var c=this,l=arguments;return new Promise(function(w,x){var _=g.apply(c,l);function T(S){h(_,w,x,T,E,"next",S)}function E(S){h(_,w,x,T,E,"throw",S)}T(void 0)})}}function v(g){return(v=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(c){return a(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":a(c)})(g)}function i(g,c,l){for(var w=2<arguments.length&&l!==void 0?l:{},x={v:[],vt:[],vn:[]},_={},T=null,E=new Set,S=!1,P=!1,N=0;N<c.length;++N){var C=c[N].trim().split(/\b\s+/);if(0<C.length){if(C[0]==="usemtl")T=C[1];else if(C[0]==="v"||C[0]==="vn"){var D=new p.default.Vector(parseFloat(C[1]),parseFloat(C[2]),parseFloat(C[3]));x[C[0]].push(D)}else if(C[0]==="vt")D=[parseFloat(C[1]),1-parseFloat(C[2])],x[C[0]].push(D);else if(C[0]==="f")for(var L=3;L<C.length;++L){for(var F=[],I=[1,L-1,L],B=0;B<I.length;++B){for(var W,G=C[I[B]],V=G.split("/"),X=0;X<V.length;X++)V[X]=parseInt(V[X])-1;_[G]||(_[G]={}),_[G][T]===void 0?(W=g.vertices.length,g.vertices.push(x.v[V[0]].copy()),g.uvs.push(x.vt[V[1]]?x.vt[V[1]].slice():[0,0]),g.vertexNormals.push(x.vn[V[2]]?x.vn[V[2]].copy():new p.default.Vector),_[G][T]=W,F.push(W),T&&w[T]&&w[T].diffuseColor&&E.add(x.v[V[0]])):F.push(_[G][T])}if(F[0]!==F[1]&&F[0]!==F[2]&&F[1]!==F[2])if(g.faces.push(F),T&&w[T]&&w[T].diffuseColor)for(var S=S=!0,Q=w[T].diffuseColor,se=0;se<F.length;se++)g.vertexColors.push(Q[0]),g.vertexColors.push(Q[1]),g.vertexColors.push(Q[2]);else P=!0}}}if(g.vertexNormals.length===0&&g.computeNormals(),S===P)throw new Error("Model coloring is inconsistent. Either all vertices should have colors or none should.")}function d(g,c){if(function(fe){for(var ee=new DataView(fe),de=[115,111,108,105,100],ye=0;ye<5;ye++)if(function(we,ge,xe){for(var ke=0,Fe=we.length;ke<Fe;ke++)if(we[ke]!==ge.getUint8(xe+ke,!1))return;return 1}(de,ee,ye))return;return 1}(c)){for(var l,w,x,_,T,E,S,P=g,N=new DataView(c),C=N.getUint32(80,!0),D=!1,L=0;L<70;L++)N.getUint32(L,!1)===1129270351&&N.getUint8(L+4)===82&&N.getUint8(L+5)===61&&(D=!0,_=[],T=N.getUint8(L+6)/255,E=N.getUint8(L+7)/255,S=N.getUint8(L+8)/255);for(var F=0;F<C;F++){for(var I,B=84+50*F,W=N.getFloat32(B,!0),G=N.getFloat32(4+B,!0),V=N.getFloat32(8+B,!0),X=(D&&(I=N.getUint16(48+B,!0),x=32768&I?(l=T,w=E,S):(l=(31&I)/31,w=(I>>5&31)/31,(I>>10&31)/31)),new p.default.Vector(W,G,V)),Q=1;Q<=3;Q++){var se=B+12*Q,se=new p.default.Vector(N.getFloat32(se,!0),N.getFloat32(4+se,!0),N.getFloat32(8+se,!0));P.vertices.push(se),P.vertexNormals.push(X),D&&_.push(l,w,x)}P.faces.push([3*F,3*F+1,3*F+2]),P.uvs.push([0,0],[0,0],[0,0])}}else if(c=new DataView(c),"TextDecoder"in window)for(var M,A,z=g,$=new TextDecoder("utf-8").decode(c).split(`
`),Z="",te=[],ie=0;ie<$.length;++ie){for(var he=$[ie].trim(),oe=he.split(" "),ce=0;ce<oe.length;++ce)oe[ce]===""&&oe.splice(ce,1);if(oe.length!==0)switch(Z){case"":if(oe[0]!=="solid")return console.error(he),void console.error('Invalid state "'.concat(oe[0],'", should be "solid"'));Z="solid";break;case"solid":if(oe[0]!=="facet"||oe[1]!=="normal")return console.error(he),void console.error('Invalid state "'.concat(oe[0],'", should be "facet normal"'));M=new p.default.Vector(parseFloat(oe[2]),parseFloat(oe[3]),parseFloat(oe[4])),z.vertexNormals.push(M,M,M),Z="facet normal";break;case"facet normal":if(oe[0]!=="outer"||oe[1]!=="loop")return console.error(he),void console.error('Invalid state "'.concat(oe[0],'", should be "outer loop"'));Z="vertex";break;case"vertex":if(oe[0]==="vertex")A=new p.default.Vector(parseFloat(oe[1]),parseFloat(oe[2]),parseFloat(oe[3])),z.vertices.push(A),z.uvs.push([0,0]),te.push(z.vertices.indexOf(A));else{if(oe[0]!=="endloop")return console.error(he),void console.error('Invalid state "'.concat(oe[0],'", should be "vertex" or "endloop"'));z.faces.push(te),te=[],Z="endloop"}break;case"endloop":if(oe[0]!=="endfacet")return console.error(he),void console.error('Invalid state "'.concat(oe[0],'", should be "endfacet"'));Z="endfacet";break;case"endfacet":if(oe[0]!=="endsolid"){if(oe[0]!=="facet"||oe[1]!=="normal")return console.error(he),void console.error('Invalid state "'.concat(oe[0],'", should be "endsolid" or "facet normal"'));M=new p.default.Vector(parseFloat(oe[2]),parseFloat(oe[3]),parseFloat(oe[4])),z.vertexNormals.push(M,M,M),Z="facet normal"}break;default:console.error('Invalid state "'.concat(Z,'"'))}}else console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)")}t("./p5.Geometry"),p.default.prototype.loadModel=function(g,c){p.default._validateParameters("loadModel",arguments);var l,w,x=!1,_=!1,T=!1,E=g.slice(-4),S=(c&&v(c)==="object"?(x=c.normalize||!1,l=c.successCallback,w=c.failureCallback,E=c.fileType||E,_=c.flipU||!1,T=c.flipV||!1):typeof c=="boolean"?(x=c,l=arguments[2],w=arguments[3],arguments[4]!==void 0&&(E=arguments[4])):(l=typeof c=="function"?c:void 0,w=arguments[2],arguments[3]!==void 0&&(E=arguments[3])),new p.default.Geometry),P=(S.gid="".concat(g,"|").concat(x),this);function N(){return(N=b(regeneratorRuntime.mark(function D(L){var F,I,B,W;return regeneratorRuntime.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:for(F=[],I=0;I<L.length;I++)(B=L[I].match(/^mtllib (.+)/))&&function(){var V="",X=B[1],Q=g.split("/");V=1<Q.length?(Q.pop(),Q.join("/")+"/"+X):X,F.push(function(){return C.apply(this,arguments)}(V).then(function(se){return se?(M=P,A=V,new Promise(function(z,$){var Z=null,te={};M.loadStrings(A,function(ie){for(var he=0;he<ie.length;++he){var oe,ce=ie[he].trim().split(/\s+/);ce[0]==="newmtl"?(oe=ce[1],te[Z=oe]={}):ce[0]==="Kd"?te[Z].diffuseColor=[parseFloat(ce[1]),parseFloat(ce[2]),parseFloat(ce[3])]:ce[0]==="Ka"?te[Z].ambientColor=[parseFloat(ce[1]),parseFloat(ce[2]),parseFloat(ce[3])]:ce[0]==="Ks"?te[Z].specularColor=[parseFloat(ce[1]),parseFloat(ce[2]),parseFloat(ce[3])]:ce[0]==="map_Kd"&&(te[Z].texturePath=ce[1])}z(te)},$)})):(console.warn("MTL file not found or error in parsing; proceeding without materials: ".concat(V)),{});var M,A}).catch(function(se){return console.warn("Error loading MTL file: ".concat(V),se),{}}))}();return G.prev=2,G.next=5,Promise.all(F);case 5:return W=G.sent,W=Object.assign.apply(Object,[{}].concat(s(W))),G.abrupt("return",W);case 10:return G.prev=10,G.t0=G.catch(2),G.abrupt("return",{});case 13:case"end":return G.stop()}},D,null,[[2,10]])}))).apply(this,arguments)}function C(){return(C=b(regeneratorRuntime.mark(function D(L){var F;return regeneratorRuntime.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.prev=0,I.next=3,fetch(L,{method:"HEAD"});case 3:return F=I.sent,I.abrupt("return",F.ok);case 7:return I.prev=7,I.t0=I.catch(0),I.abrupt("return",!1);case 10:case"end":return I.stop()}},D,null,[[0,7]])}))).apply(this,arguments)}return E.match(/\.stl$/i)?this.httpDo(g,"GET","arrayBuffer",function(D){d(S,D),x&&S.normalize(),_&&S.flipU(),T&&S.flipV(),P._decrementPreload(),typeof l=="function"&&l(S)},w):E.match(/\.obj$/i)?this.loadStrings(g,function(){var D=b(regeneratorRuntime.mark(function L(F){var I;return regeneratorRuntime.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.prev=0,B.next=3,function(){return N.apply(this,arguments)}(F);case 3:I=B.sent,i(S,F,I),B.next=11;break;case 7:return B.prev=7,B.t0=B.catch(0),w?w(B.t0):p.default._friendlyError("Error during parsing: "+B.t0.message),B.abrupt("return");case 11:return B.prev=11,x&&S.normalize(),_&&S.flipU(),T&&S.flipV(),S._makeTriangleEdges(),P._decrementPreload(),typeof l=="function"&&l(S),B.finish(11);case 19:case"end":return B.stop()}},L,null,[[0,7,11,19]])}));return function(L){return D.apply(this,arguments)}}(),w):(p.default._friendlyFileLoadError(3,g),w?w():p.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),S},p.default.prototype.model=function(g){this._assert3d("model"),p.default._validateParameters("model",arguments),0<g.vertices.length&&(this._renderer.geometryInHash(g.gid)||(g._edgesToVertices(),this._renderer.createBuffers(g.gid,g)),this._renderer.drawBuffers(g.gid))};var f=0,y=(p.default.prototype.createModel=function(g){var c,l,w=1<arguments.length&&arguments[1]!==void 0?arguments[1]:" ",E=2<arguments.length?arguments[2]:void 0,x=(p.default._validateParameters("createModel",arguments),!1),_=!1,T=!1,E=(E&&v(E)==="object"?(x=E.normalize||!1,c=E.successCallback,l=E.failureCallback,_=E.flipU||!1,T=E.flipV||!1):l=typeof E=="boolean"?(x=E,c=arguments[3],arguments[4]):(c=typeof arguments[2]=="function"?arguments[2]:void 0,arguments[3]),new p.default.Geometry);if(E.gid="".concat(w,"|").concat(x,"|").concat(f++),w.match(/\.stl$/i))try{d(E,new TextEncoder().encode(g).buffer)}catch(S){return void(l?l(S):p.default._friendlyError("Error during parsing: "+S.message))}else if(w.match(/\.obj$/i))try{i(E,g.split(`
`))}catch(S){return void(l?l(S):p.default._friendlyError("Error during parsing: "+S.message))}else p.default._friendlyFileLoadError(3,g),l?l():p.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.");return x&&E.normalize(),_&&E.flipU(),T&&E.flipV(),E._makeTriangleEdges(),typeof c=="function"&&c(E),E},p.default);u.default=y},{"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246,"regenerator-runtime/runtime":260}],331:[function(t,m,u){function a(i){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(i)}function p(i){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(d){return a(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":a(d)})(i)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(v=t("../core/main"))&&v.__esModule?v:{default:v},h=function(i){if(i&&i.__esModule)return i;if(i===null||p(i)!=="object"&&typeof i!="function")return{default:i};var d=b();if(d&&d.has(i))return d.get(i);var f,y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in i){var c;Object.prototype.hasOwnProperty.call(i,f)&&((c=g?Object.getOwnPropertyDescriptor(i,f):null)&&(c.get||c.set)?Object.defineProperty(y,f,c):y[f]=i[f])}return y.default=i,d&&d.set(i,y),y}(t("../core/constants"));function b(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,b=function(){return i},i)}t("./p5.Texture"),s.default.prototype.loadShader=function(i,d,f,y){s.default._validateParameters("loadShader",arguments),y=y||console.error;function g(){l._decrementPreload(),f&&f(c)}var c=new s.default.Shader,l=this,w=!1,x=!1;return this.loadStrings(i,function(_){c._vertSrc=_.join(`
`),x=!0,w&&g()},y),this.loadStrings(d,function(_){c._fragSrc=_.join(`
`),w=!0,x&&g()},y),c},s.default.prototype.createShader=function(i,d,f){return s.default._validateParameters("createShader",arguments),new s.default.Shader(this._renderer,i,d,f)},s.default.prototype.createFilterShader=function(i){s.default._validateParameters("createFilterShader",arguments);var d=i.includes("#version 300 es")?`#version 300 es
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    in vec3 aPosition;
    in vec2 aTexCoord;
    out vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `:`
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    attribute vec3 aPosition;
    // texcoords only come from p5 to vertex shader
    // so pass texcoords on to the fragment shader in a varying variable
    attribute vec2 aTexCoord;
    varying vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `,d=new s.default.Shader(this._renderer,d,i);return this._renderer.GL?d.ensureCompiledOnContext(this):d.ensureCompiledOnContext(this._renderer.getFilterGraphicsLayer()),d},s.default.prototype.shader=function(i){return this._assert3d("shader"),s.default._validateParameters("shader",arguments),i.ensureCompiledOnContext(this),i.isStrokeShader()?this._renderer.userStrokeShader=i:(this._renderer.userFillShader=i,this._renderer._useNormalMaterial=!1),i.setDefaultUniforms(),this},s.default.prototype.baseMaterialShader=function(){return this._assert3d("baseMaterialShader"),this._renderer.baseMaterialShader()},s.default.prototype.baseNormalShader=function(){return this._assert3d("baseNormalShader"),this._renderer.baseNormalShader()},s.default.prototype.baseColorShader=function(){return this._assert3d("baseColorShader"),this._renderer.baseColorShader()},s.default.prototype.baseStrokeShader=function(){return this._assert3d("baseStrokeShader"),this._renderer.baseStrokeShader()},s.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},s.default.prototype.texture=function(i){return this._assert3d("texture"),s.default._validateParameters("texture",arguments),i.gifProperties&&i._animateGif(this),this._renderer.drawMode=h.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=i,this._renderer._setProperty("_doFill",!0),this},s.default.prototype.textureMode=function(i){i!==h.IMAGE&&i!==h.NORMAL?console.warn("You tried to set ".concat(i," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=i},s.default.prototype.textureWrap=function(i){var d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:i,f=(this._renderer.textureWrapX=i,this._renderer.textureWrapY=d,!0),y=!1,g=void 0;try{for(var c,l=this._renderer.textures.values()[Symbol.iterator]();!(f=(c=l.next()).done);f=!0)c.value.setWrapMode(i,d)}catch(w){y=!0,g=w}finally{try{f||l.return==null||l.return()}finally{if(y)throw g}}},s.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var i=arguments.length,d=new Array(i),f=0;f<i;f++)d[f]=arguments[f];return s.default._validateParameters("normalMaterial",d),this._renderer.drawMode=h.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},s.default.prototype.ambientMaterial=function(i,d,f){this._assert3d("ambientMaterial"),s.default._validateParameters("ambientMaterial",arguments);var y=s.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=y._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},s.default.prototype.emissiveMaterial=function(i,d,f,y){this._assert3d("emissiveMaterial"),s.default._validateParameters("emissiveMaterial",arguments);var g=s.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=g._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},s.default.prototype.specularMaterial=function(i,d,f,y){this._assert3d("specularMaterial"),s.default._validateParameters("specularMaterial",arguments);var g=s.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=g._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},s.default.prototype.shininess=function(i){return this._assert3d("shininess"),s.default._validateParameters("shininess",arguments),this._renderer._useShininess=i=i<1?1:i,this},s.default.prototype.metalness=function(i){return this._assert3d("metalness"),i=1-Math.exp(-i/100),this._renderer._useMetalness=i,this},s.default.RendererGL.prototype._applyColorBlend=function(i,g){var f=this.GL,y=this.drawMode===h.TEXTURE,g=g||this.userFillShader||this.userStrokeShader||this.userPointShader||y||this.curBlendMode!==h.BLEND||i[i.length-1]<1||this._isErasing;return g!==this._isBlending&&(g||this.curBlendMode!==h.BLEND&&this.curBlendMode!==h.ADD?f.enable(f.BLEND):f.disable(f.BLEND),f.depthMask(!0),this._isBlending=g),this._applyBlendMode(),i},s.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var i=this.GL;switch(this.curBlendMode){case h.BLEND:i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case h.ADD:i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ONE);break;case h.REMOVE:i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ZERO,i.ONE_MINUS_SRC_ALPHA);break;case h.MULTIPLY:i.blendEquation(i.FUNC_ADD),i.blendFunc(i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA);break;case h.SCREEN:i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_COLOR);break;case h.EXCLUSION:i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD),i.blendFuncSeparate(i.ONE_MINUS_DST_COLOR,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE);break;case h.REPLACE:i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO);break;case h.SUBTRACT:i.blendEquationSeparate(i.FUNC_REVERSE_SUBTRACT,i.FUNC_ADD),i.blendFuncSeparate(i.ONE,i.ONE,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case h.DARKEST:this.blendExt?(i.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,i.FUNC_ADD),i.blendFuncSeparate(i.ONE,i.ONE,i.ONE,i.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case h.LIGHTEST:this.blendExt?(i.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,i.FUNC_ADD),i.blendFuncSeparate(i.ONE,i.ONE,i.ONE,i.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var v=s.default;u.default=v},{"../core/constants":272,"../core/main":283,"./p5.Texture":343,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],332:[function(t,m,u){t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(t=t("../core/main"))&&t.__esModule?t:{default:t};function p(s,h){for(var b=0;b<h.length;b++){var v=h[b];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(s,v.key,v)}}a.default.prototype.camera=function(){var s;this._assert3d("camera");for(var h=arguments.length,b=new Array(h),v=0;v<h;v++)b[v]=arguments[v];return a.default._validateParameters("camera",b),(s=this._renderer._curCamera).camera.apply(s,b),this},a.default.prototype.perspective=function(){var s;this._assert3d("perspective");for(var h=arguments.length,b=new Array(h),v=0;v<h;v++)b[v]=arguments[v];return a.default._validateParameters("perspective",b),(s=this._renderer._curCamera).perspective.apply(s,b),this},a.default.prototype.linePerspective=function(s){if(a.default._validateParameters("linePerspective",arguments),!(this._renderer instanceof a.default.RendererGL))throw new Error("linePerspective() must be called in WebGL mode.");if(s===void 0)return this._renderer._curCamera.useLinePerspective;this._renderer._curCamera.useLinePerspective=s},a.default.prototype.ortho=function(){var s;this._assert3d("ortho");for(var h=arguments.length,b=new Array(h),v=0;v<h;v++)b[v]=arguments[v];return a.default._validateParameters("ortho",b),(s=this._renderer._curCamera).ortho.apply(s,b),this},a.default.prototype.frustum=function(){var s;this._assert3d("frustum");for(var h=arguments.length,b=new Array(h),v=0;v<h;v++)b[v]=arguments[v];return a.default._validateParameters("frustum",b),(s=this._renderer._curCamera).frustum.apply(s,b),this},a.default.prototype.createCamera=function(){this._assert3d("createCamera");var s=new a.default.Camera(this._renderer);return s._computeCameraDefaultSettings(),s._setDefaultCamera(),this._renderer._curCamera=s},a.default.Camera=function(){function s(v){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");this._renderer=v,this.cameraType="default",this.useLinePerspective=!0,this.cameraMatrix=new a.default.Matrix,this.projMatrix=new a.default.Matrix,this.yScale=1}var h,b;return h=s,(b=[{key:"perspective",value:function(y,i,d,f){this.cameraType=0<arguments.length?"custom":"default",y===void 0?(y=this.defaultCameraFOV,this.cameraFOV=y):this.cameraFOV=this._renderer._pInst._toRadians(y),i===void 0&&(i=this.defaultAspectRatio),d===void 0&&(d=this.defaultCameraNear),f===void 0&&(f=this.defaultCameraFar),d<=1e-4&&(d=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),f<d&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=i,this.cameraNear=d,this.cameraFar=f,this.projMatrix=a.default.Matrix.identity();var y=1/Math.tan(this.cameraFOV/2),g=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(y/i,0,0,0,0,-y*this.yScale,0,0,0,0,(f+d)*g,-1,0,0,2*f*d*g,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix)}},{key:"ortho",value:function(E,T,d,f,y,g){var S=this.fbo||this._renderer,S=(E===void 0&&(E=-S.width/2),T===void 0&&(T=+S.width/2),d===void 0&&(d=-S.height/2),f===void 0&&(f=+S.height/2),y===void 0&&(y=0),g===void 0&&(g=Math.max(S.width,S.height)+800),this.cameraNear=y,T-E),c=f-d,l=(this.cameraFar=g)-y,w=2/S,x=2/c*this.yScale,_=-2/l,T=-(T+E)/S,E=-(f+d)/c,S=-(g+y)/l;this.projMatrix=a.default.Matrix.identity(),this.projMatrix.set(w,0,0,0,0,-x,0,0,0,0,_,0,T,E,S,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"frustum",value:function(E,T,d,f,y,g){E===void 0&&(E=.05*-this._renderer.width),T===void 0&&(T=.05*+this._renderer.width),d===void 0&&(d=.05*+this._renderer.height),f===void 0&&(f=.05*-this._renderer.height),y===void 0&&(y=this.defaultCameraNear),g===void 0&&(g=this.defaultCameraFar),this.cameraNear=y;var S=T-E,c=f-d,l=(this.cameraFar=g)-y,w=2*y/S,x=2*y/c*this.yScale,_=-2*g*y/l,T=(T+E)/S,E=(f+d)/c,S=-(g+y)/l;this.projMatrix=a.default.Matrix.identity(),this.projMatrix.set(w,0,0,0,0,-x,0,0,T,E,S,-1,0,0,_,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"_rotateView",value:function(w,x,_,T){var y=this.centerX,g=this.centerY,c=this.centerZ,l=(y-=this.eyeX,g-=this.eyeY,c-=this.eyeZ,a.default.Matrix.identity(this._renderer._pInst)),w=(l.rotate(this._renderer._pInst._toRadians(w),x,_,T),[y*l.mat4[0]+g*l.mat4[4]+c*l.mat4[8],y*l.mat4[1]+g*l.mat4[5]+c*l.mat4[9],y*l.mat4[2]+g*l.mat4[6]+c*l.mat4[10]]),x=(w[0]+=this.eyeX,w[1]+=this.eyeY,w[2]+=this.eyeZ,this.upX*l.mat4[0]+this.upY*l.mat4[4]+this.upZ*l.mat4[8]),_=this.upX*l.mat4[1]+this.upY*l.mat4[5]+this.upZ*l.mat4[9],T=this.upX*l.mat4[2]+this.upY*l.mat4[6]+this.upZ*l.mat4[10];this.camera(this.eyeX,this.eyeY,this.eyeZ,w[0],w[1],w[2],x,_,T)}},{key:"roll",value:function(d){var i=this._getLocalAxes(),d=a.default.Quat.fromAxisAngle(this._renderer._pInst._toRadians(d),i.z[0],i.z[1],i.z[2]).rotateVector(new a.default.Vector(this.upX,this.upY,this.upZ));this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,d.x,d.y,d.z)}},{key:"pan",value:function(v){var i=this._getLocalAxes();this._rotateView(v,i.y[0],i.y[1],i.y[2])}},{key:"tilt",value:function(v){var i=this._getLocalAxes();this._rotateView(v,i.x[0],i.x[1],i.x[2])}},{key:"lookAt",value:function(v,i,d){this.camera(this.eyeX,this.eyeY,this.eyeZ,v,i,d,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(v,i,d,f,y,g,c,l,w){return v===void 0&&(v=this.defaultEyeX,i=this.defaultEyeY,d=this.defaultEyeZ,f=v,y=i,l=1,w=c=g=0),this.eyeX=v,this.eyeY=i,this.eyeZ=d,f!==void 0&&(this.centerX=f,this.centerY=y,this.centerZ=g),c!==void 0&&(this.upX=c,this.upY=l,this.upZ=w),f=this._getLocalAxes(),this.cameraMatrix.set(f.x[0],f.y[0],f.z[0],0,f.x[1],f.y[1],f.z[1],0,f.x[2],f.y[2],f.z[2],0,0,0,0,1),y=-v,this.cameraMatrix.translate([y,-i,-d]),this._isActive()&&this._renderer.uViewMatrix.set(this.cameraMatrix),this}},{key:"move",value:function(f,y,d){var g=this._getLocalAxes(),f=[g.x[0]*f,g.x[1]*f,g.x[2]*f],y=[g.y[0]*y,g.y[1]*y,g.y[2]*y],g=[g.z[0]*d,g.z[1]*d,g.z[2]*d];this.camera(this.eyeX+f[0]+y[0]+g[0],this.eyeY+f[1]+y[1]+g[1],this.eyeZ+f[2]+y[2]+g[2],this.centerX+f[0]+y[0]+g[0],this.centerY+f[1]+y[1]+g[1],this.centerZ+f[2]+y[2]+g[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(v,i,d){var f=v-this.eyeX,y=i-this.eyeY,g=d-this.eyeZ;this.camera(v,i,d,this.centerX+f,this.centerY+y,this.centerZ+g,this.upX,this.upY,this.upZ)}},{key:"set",value:function(v){for(var i=0,d=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale","useLinePerspective"];i<d.length;i++){var f=d[i];this[f]=v[f]}this.cameraMatrix=v.cameraMatrix.copy(),this.projMatrix=v.projMatrix.copy(),this._isActive()&&(this._renderer.uModelMatrix.reset(),this._renderer.uViewMatrix.set(this.cameraMatrix),this._renderer.uPMatrix.set(this.projMatrix))}},{key:"slerp",value:function(v,i,d){var f,y,g,c,l,w,x,_,T,E,S,P,N,C,D,L,F,I;d===0?this.set(v):d===1?this.set(i):(this.projMatrix.mat4[15]!==0&&(this.projMatrix.mat4[0]=v.projMatrix.mat4[0]*Math.pow(i.projMatrix.mat4[0]/v.projMatrix.mat4[0],d),this.projMatrix.mat4[5]=v.projMatrix.mat4[5]*Math.pow(i.projMatrix.mat4[5]/v.projMatrix.mat4[5],d),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),c=new a.default.Vector(v.eyeX,v.eyeY,v.eyeZ),l=new a.default.Vector(i.eyeX,i.eyeY,i.eyeZ),L=new a.default.Vector(v.centerX,v.centerY,v.centerZ),I=new a.default.Vector(i.centerX,i.centerY,i.centerZ),g=a.default.Vector.dist(c,L),f=a.default.Vector.dist(l,I),f=g*Math.pow(f/g,d),g=a.default.Vector.sub(c,l),y=1,1e-6<(F=(C=c.copy().sub(l).sub(L).add(I)).magSq())&&(y=a.default.Vector.dot(g,C)/F,y=Math.max(0,Math.min(y,1))),g=a.default.Vector.lerp(a.default.Vector.lerp(c,L,y),a.default.Vector.lerp(l,I,y),d),C=v.cameraMatrix.createSubMatrix3x3(),F=i.cameraMatrix.createSubMatrix3x3(),c=C.row(2),L=F.row(2),l=C.row(1),I=F.row(1),v=new a.default.Vector,i=new a.default.Vector,w=new a.default.Vector,x=new a.default.Vector,1-(_=.5*((C=(F=F.mult3x3(C.copy().transpose3x3())).diagonal())[0]+C[1]+C[2]-1))<1e-7?(v.set(a.default.Vector.lerp(c,L,d)).normalize(),w.set(v).mult(y*f).add(g),x.set(v).mult((y-1)*f).add(g),i.set(a.default.Vector.lerp(l,I,d)).normalize()):(L=1/(1-_),I=Math.max(C[0],C[1],C[2]),P=F.mat3[1]+F.mat3[3],N=F.mat3[2]+F.mat3[6],D=F.mat3[5]+F.mat3[7],I=I===C[0]?(E=.5*P*(L/=T=Math.sqrt((C[0]-_)*L)),S=.5*N*L,.5*(F.mat3[7]-F.mat3[5])/T):I===C[1]?(S=.5*D*(L/=E=Math.sqrt((C[1]-_)*L)),T=.5*P*L,.5*(F.mat3[2]-F.mat3[6])/E):(T=.5*N*(L/=S=Math.sqrt((C[2]-_)*L)),E=.5*D*L,.5*(F.mat3[3]-F.mat3[1])/S),P=d*Math.atan2(I,_),N=Math.cos(P),C=Math.sin(P),(I=new a.default.Matrix("mat3",[N+(D=1-N)*T*T,D*(L=T*E)+C*S,D*(F=S*T)-C*E,D*L-C*S,N+D*E*E,D*(d=E*S)+C*T,D*F+C*E,D*d-C*T,N+D*S*S])).multiplyVec3(c,v),w.set(v).mult(y*f).add(g),x.set(v).mult((y-1)*f).add(g),I.multiplyVec3(l,i)),this.camera(w.x,w.y,w.z,x.x,x.y,x.z,i.x,i.y,i.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){this.cameraType==="default"&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var v=new a.default.Camera(this._renderer);return v.cameraFOV=this.cameraFOV,v.aspectRatio=this.aspectRatio,v.eyeX=this.eyeX,v.eyeY=this.eyeY,v.eyeZ=this.eyeZ,v.centerX=this.centerX,v.centerY=this.centerY,v.centerZ=this.centerZ,v.upX=this.upX,v.upY=this.upY,v.upZ=this.upZ,v.cameraNear=this.cameraNear,v.cameraFar=this.cameraFar,v.cameraType=this.cameraType,v.useLinePerspective=this.useLinePerspective,v.cameraMatrix=this.cameraMatrix.copy(),v.projMatrix=this.projMatrix.copy(),v.yScale=this.yScale,v}},{key:"_getLocalAxes",value:function(){var v=this.eyeX-this.centerX,i=this.eyeY-this.centerY,d=this.eyeZ-this.centerZ,c=Math.sqrt(v*v+i*i+d*d),c=(c!==0&&(v/=c,i/=c,d/=c),this.upX),f=(l=this.upY)*d-(w=this.upZ)*i,y=-c*d+w*v,g=c*i-l*v,c=i*g-d*y,l=-v*g+d*f,w=v*y-i*f,x=Math.sqrt(f*f+y*y+g*g),x=(x!==0&&(f/=x,y/=x,g/=x),Math.sqrt(c*c+l*l+w*w));return x!==0&&(c/=x,l/=x,w/=x),{x:[f,y,g],y:[c,l,w],z:[v,i,d]}}},{key:"_orbit",value:function(v,x,w){var y=this.eyeX-this.centerX,g=this.eyeY-this.centerY,c=this.eyeZ-this.centerZ,f=Math.hypot(y,g,c),y=new a.default.Vector(y,g,c).normalize(),g=new a.default.Vector(this.upX,this.upY,this.upZ).normalize(),c=a.default.Vector.cross(g,y).normalize(),l=a.default.Vector.cross(c,g),w=((f=(f*=Math.pow(10,w))<this.cameraNear?this.cameraNear:f)>this.cameraFar&&(f=this.cameraFar),Math.acos(Math.max(-1,Math.min(1,a.default.Vector.dot(y,g))))+x),x=v;(w<=0||w>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),g.mult(Math.cos(w)),l.mult(Math.cos(x)*Math.sin(w)),c.mult(Math.sin(x)*Math.sin(w)),y.set(g).add(l).add(c),this.eyeX=f*y.x+this.centerX,this.eyeY=f*y.y+this.centerY,this.eyeZ=f*y.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(w,x,T){var y=this.eyeX-this.centerX,g=this.eyeY-this.centerY,c=this.eyeZ-this.centerZ,f=Math.hypot(y,g,c),y=new a.default.Vector(y,g,c).normalize(),g=new a.default.Vector(this.upX,this.upY,this.upZ),c=a.default.Vector.cross(g,y).normalize(),l=a.default.Vector.cross(y,c),E=Math.atan2(x,w),E=(l.mult(Math.sin(E)),c.mult(Math.cos(E)).add(l),Math.sqrt(w*w+x*x)),l=a.default.Vector.cross(y,c),w=((f=(f*=Math.pow(10,T))<this.cameraNear?this.cameraNear:f)>this.cameraFar&&(f=this.cameraFar),Math.cos(E)),x=Math.sin(E),T=g.dot(y),E=g.dot(c),_=T*w+E*x,T=-T*x+E*w,E=g.dot(l);g.x=_*y.x+T*c.x+E*l.x,g.y=_*y.y+T*c.y+E*l.y,g.z=_*y.z+T*c.z+E*l.z,c.mult(-x),y.mult(w).add(c).mult(f),this.camera(y.x+this.centerX,y.y+this.centerY,y.z+this.centerZ,this.centerX,this.centerY,this.centerZ,g.x,g.y,g.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&p(h.prototype,b),s}(),a.default.prototype.setCamera=function(s){this._renderer._curCamera=s,this._renderer.uPMatrix.set(s.projMatrix),this._renderer.uViewMatrix.set(s.cameraMatrix)},t=a.default.Camera,u.default=t},{"../core/main":283,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.string.sub":208}],333:[function(t,m,u){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.log2"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.log2"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function a(p,s){for(var h=0;h<s.length;h++){var b=s[h];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(p,b.key,b)}}t.default.DataArray=function(){function p(){var b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:128,v=this,i=p;if(!(v instanceof i))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(b),this.initialLength=b}var s,h;return s=p,(h=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var b;this.length<this.data.length/2&&(b=1<<Math.ceil(Math.log2(this.length)),(b=new Float32Array(b)).set(this.data.subarray(0,this.length),0),this.data=b)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var b=arguments.length,v=new Array(b),i=0;i<b;i++)v[i]=arguments[i];this.ensureLength(this.length+v.length),this.data.set(v,this.length),this.length+=v.length}},{key:"slice",value:function(b,v){return this.data.slice(b,Math.min(v,this.length))}},{key:"subArray",value:function(b,v){return this.data.subarray(b,Math.min(v,this.length))}},{key:"ensureLength",value:function(b){for(;this.data.length<b;){var v=new Float32Array(2*this.data.length);v.set(this.data,0),this.data=v}}}])&&a(s.prototype,h),p}(),t=t.default.DataArray,u.default=t},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.log2":177,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],334:[function(P,m,u){function a(N){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(N)}function p(N){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(C){return a(C)}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":a(C)})(N)}P("core-js/modules/es.symbol"),P("core-js/modules/es.symbol.description"),P("core-js/modules/es.symbol.iterator"),P("core-js/modules/es.array.fill"),P("core-js/modules/es.array.includes"),P("core-js/modules/es.array.iterator"),P("core-js/modules/es.object.get-own-property-descriptor"),P("core-js/modules/es.object.get-prototype-of"),P("core-js/modules/es.object.to-string"),P("core-js/modules/es.reflect.construct"),P("core-js/modules/es.reflect.get"),P("core-js/modules/es.regexp.to-string"),P("core-js/modules/es.string.includes"),P("core-js/modules/es.string.iterator"),P("core-js/modules/es.typed-array.float32-array"),P("core-js/modules/es.typed-array.uint8-array"),P("core-js/modules/es.typed-array.uint8-clamped-array"),P("core-js/modules/es.typed-array.copy-within"),P("core-js/modules/es.typed-array.every"),P("core-js/modules/es.typed-array.fill"),P("core-js/modules/es.typed-array.filter"),P("core-js/modules/es.typed-array.find"),P("core-js/modules/es.typed-array.find-index"),P("core-js/modules/es.typed-array.for-each"),P("core-js/modules/es.typed-array.includes"),P("core-js/modules/es.typed-array.index-of"),P("core-js/modules/es.typed-array.iterator"),P("core-js/modules/es.typed-array.join"),P("core-js/modules/es.typed-array.last-index-of"),P("core-js/modules/es.typed-array.map"),P("core-js/modules/es.typed-array.reduce"),P("core-js/modules/es.typed-array.reduce-right"),P("core-js/modules/es.typed-array.reverse"),P("core-js/modules/es.typed-array.set"),P("core-js/modules/es.typed-array.slice"),P("core-js/modules/es.typed-array.some"),P("core-js/modules/es.typed-array.sort"),P("core-js/modules/es.typed-array.subarray"),P("core-js/modules/es.typed-array.to-locale-string"),P("core-js/modules/es.typed-array.to-string"),P("core-js/modules/es.weak-map"),P("core-js/modules/web.dom-collections.iterator"),P("core-js/modules/es.array.fill"),P("core-js/modules/es.array.includes"),P("core-js/modules/es.array.iterator"),P("core-js/modules/es.object.get-prototype-of"),P("core-js/modules/es.object.to-string"),P("core-js/modules/es.string.includes"),P("core-js/modules/es.typed-array.float32-array"),P("core-js/modules/es.typed-array.uint8-array"),P("core-js/modules/es.typed-array.uint8-clamped-array"),P("core-js/modules/es.typed-array.copy-within"),P("core-js/modules/es.typed-array.every"),P("core-js/modules/es.typed-array.fill"),P("core-js/modules/es.typed-array.filter"),P("core-js/modules/es.typed-array.find"),P("core-js/modules/es.typed-array.find-index"),P("core-js/modules/es.typed-array.for-each"),P("core-js/modules/es.typed-array.includes"),P("core-js/modules/es.typed-array.index-of"),P("core-js/modules/es.typed-array.iterator"),P("core-js/modules/es.typed-array.join"),P("core-js/modules/es.typed-array.last-index-of"),P("core-js/modules/es.typed-array.map"),P("core-js/modules/es.typed-array.reduce"),P("core-js/modules/es.typed-array.reduce-right"),P("core-js/modules/es.typed-array.reverse"),P("core-js/modules/es.typed-array.set"),P("core-js/modules/es.typed-array.slice"),P("core-js/modules/es.typed-array.some"),P("core-js/modules/es.typed-array.sort"),P("core-js/modules/es.typed-array.subarray"),P("core-js/modules/es.typed-array.to-locale-string"),P("core-js/modules/es.typed-array.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(S=P("../core/main"))&&S.__esModule?S:{default:S},h=function(N){if(N&&N.__esModule)return N;if(N===null||p(N)!=="object"&&typeof N!="function")return{default:N};var C=i();if(C&&C.has(N))return C.get(N);var D,L={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(D in N){var I;Object.prototype.hasOwnProperty.call(N,D)&&((I=F?Object.getOwnPropertyDescriptor(N,D):null)&&(I.get||I.set)?Object.defineProperty(L,D,I):L[D]=N[D])}return L.default=N,C&&C.set(N,L),L}(P("../core/constants")),b=P("./p5.Texture"),v=P("./p5.RendererGL");function i(){var N;return typeof WeakMap!="function"?null:(N=new WeakMap,i=function(){return N},N)}function d(N,C){return function(D){if(Array.isArray(D))return D}(N)||function(D,L){if(Symbol.iterator in Object(D)||Object.prototype.toString.call(D)==="[object Arguments]"){var F=[],I=!0,B=!1,W=void 0;try{for(var G,V=D[Symbol.iterator]();!(I=(G=V.next()).done)&&(F.push(G.value),!L||F.length!==L);I=!0);}catch(X){B=!0,W=X}finally{try{I||V.return==null||V.return()}finally{if(B)throw W}}return F}}(N,C)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(N,C,D){return C in N?Object.defineProperty(N,C,{value:D,enumerable:!0,configurable:!0,writable:!0}):N[C]=D,N}function y(N,C){if(!(N instanceof C))throw new TypeError("Cannot call a class as a function")}function g(N,C){for(var D=0;D<C.length;D++){var L=C[D];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(N,L.key,L)}}function c(N,C,D){C&&g(N.prototype,C)}function l(N,C,D){return(l=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(B,F,I){var B=function(W,G){for(;!Object.prototype.hasOwnProperty.call(W,G)&&(W=_(W))!==null;);return W}(B,F);if(B)return(B=Object.getOwnPropertyDescriptor(B,F)).get?B.get.call(I):B.value})(N,C,D||N)}function w(N,C){return(w=Object.setPrototypeOf||function(D,L){return D.__proto__=L,D})(N,C)}function x(N){return function(){var C,D=_(N),D=(C=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(C=_(this).constructor,Reflect.construct(D,arguments,C)):D.apply(this,arguments),this);if(!C||p(C)!=="object"&&typeof C!="function"){if(D!==void 0)return D;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return C}}function _(N){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(C){return C.__proto__||Object.getPrototypeOf(C)})(N)}var T=function(N){var C=L;if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(N&&N.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),N&&w(C,N);var D=x(L);function L(F){var I;return y(this,L),(I=D.call(this,F.target._renderer)).fbo=F,I.yScale=-1,I}return c(L,[{key:"_computeCameraDefaultSettings",value:function(){l(_(L.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),L}(s.default.Camera),E=(s.default.FramebufferCamera=T,function(){function N(C,D){y(this,N),this.framebuffer=C,this.property=D}return c(N,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),N}()),S=(s.default.FramebufferTexture=E,function(){function N(C){var D=this,L=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},F=(y(this,N),this.target=C,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=L.format||h.UNSIGNED_BYTE,this.channels=L.channels||(C._renderer._pInst._glAttributes.alpha?h.RGBA:h.RGB),this.useDepth=L.depth===void 0||L.depth,this.depthFormat=L.depthFormat||h.FLOAT,this.textureFiltering=L.textureFiltering||h.LINEAR,L.antialias===void 0?this.antialiasSamples=C._renderer._pInst._glAttributes.antialias?2:0:typeof L.antialias=="number"?this.antialiasSamples=L.antialias:this.antialiasSamples=L.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&C.webglVersion!==h.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),this.density=L.density||C.pixelDensity(),C._renderer.GL);if(this.gl=F,L.width&&L.height?(I=C._renderer._adjustDimensions(L.width,L.height),this.width=I.adjustedWidth,this.height=I.adjustedHeight,this._autoSized=!1):(L.width===void 0!=(L.height===void 0)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=C.width,this.height=C.height,this._autoSized=!0),this._checkIfFormatsAvailable(),L.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(L.stencil===void 0||L.stencil),this.framebuffer=F.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=F.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures();var I=this.target._renderer._curCamera;this.defaultCamera=this.createCamera(),this.filterCamera=this.createCamera(),this.target._renderer._curCamera=I,this.draw(function(){return D.target.clear()})}return c(N,[{key:"resize",value:function(C,D){this._autoSized=!1;var L=this.target._renderer._adjustDimensions(C,D);C=L.adjustedWidth,D=L.adjustedHeight,this.width=C,this.height=D,this._handleResize()}},{key:"pixelDensity",value:function(C){if(!C)return this.density;this._autoSized=!1,this.density=C,this._handleResize()}},{key:"autoSized",value:function(C){if(C===void 0)return this._autoSized;this._autoSized=C,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var C=this.gl,C=(this.useDepth&&this.target.webglVersion===h.WEBGL&&!C.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===h.WEBGL&&this.depthFormat===h.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=h.UNSIGNED_INT),[h.UNSIGNED_BYTE,h.FLOAT,h.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=h.UNSIGNED_BYTE),this.useDepth&&![h.UNSIGNED_INT,h.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=h.FLOAT),(0,b.checkWebGLCapabilities)(this.target._renderer));C.float||this.format!==h.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=h.UNSIGNED_BYTE),this.useDepth&&!C.float&&this.depthFormat===h.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=h.UNSIGNED_INT),C.halfFloat||this.format!==h.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=h.UNSIGNED_BYTE),this.channels===h.RGB&&[h.FLOAT,h.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=h.RGBA)}},{key:"_recreateTextures",value:function(){var C=this.gl,D=(this._updateSize(),C.getParameter(C.TEXTURE_BINDING_2D)),L=C.getParameter(C.FRAMEBUFFER_BINDING),F=C.createTexture();if(!F)throw new Error("Unable to create color texture");C.bindTexture(C.TEXTURE_2D,F);var I=this._glColorFormat();if(C.texImage2D(C.TEXTURE_2D,0,I.internalFormat,this.width*this.density,this.height*this.density,0,I.format,I.type,null),this.colorTexture=F,C.bindFramebuffer(C.FRAMEBUFFER,this.framebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,F,0),this.useDepth){var F=C.createTexture();if(!F)throw new Error("Unable to create depth texture");var B=this._glDepthFormat();C.bindTexture(C.TEXTURE_2D,F),C.texImage2D(C.TEXTURE_2D,0,B.internalFormat,this.width*this.density,this.height*this.density,0,B.format,B.type,null),C.framebufferTexture2D(C.FRAMEBUFFER,this.useStencil?C.DEPTH_STENCIL_ATTACHMENT:C.DEPTH_ATTACHMENT,C.TEXTURE_2D,F,0),this.depthTexture=F}this.antialias&&(this.colorRenderbuffer=C.createRenderbuffer(),C.bindRenderbuffer(C.RENDERBUFFER,this.colorRenderbuffer),C.renderbufferStorageMultisample(C.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,C.getParameter(C.MAX_SAMPLES))),I.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(B=this._glDepthFormat(),this.depthRenderbuffer=C.createRenderbuffer(),C.bindRenderbuffer(C.RENDERBUFFER,this.depthRenderbuffer),C.renderbufferStorageMultisample(C.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,C.getParameter(C.MAX_SAMPLES))),B.internalFormat,this.width*this.density,this.height*this.density)),C.bindFramebuffer(C.FRAMEBUFFER,this.aaFramebuffer),C.framebufferRenderbuffer(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&C.framebufferRenderbuffer(C.FRAMEBUFFER,this.useStencil?C.DEPTH_STENCIL_ATTACHMENT:C.DEPTH_ATTACHMENT,C.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new E(this,"depthTexture"),F=C.NEAREST,this.depthP5Texture=new s.default.Texture(this.target._renderer,this.depth,{minFilter:F,magFilter:F}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new E(this,"colorTexture"),I=this.textureFiltering===h.LINEAR?C.LINEAR:C.NEAREST,this.colorP5Texture=new s.default.Texture(this.target._renderer,this.color,{minFilter:I,magFilter:I}),this.target._renderer.textures.set(this.color,this.colorP5Texture),C.bindTexture(C.TEXTURE_2D,D),C.bindFramebuffer(C.FRAMEBUFFER,L)}},{key:"_glColorFormat",value:function(){var C,D,L=this.gl,F=this.format===h.FLOAT?L.FLOAT:this.format===h.HALF_FLOAT?this.target.webglVersion===h.WEBGL2?L.HALF_FLOAT:L.getExtension("OES_texture_half_float").HALF_FLOAT_OES:L.UNSIGNED_BYTE,I=this.channels===h.RGBA?L.RGBA:L.RGB;return{internalFormat:this.target.webglVersion===h.WEBGL2?(f(D={},L.FLOAT,f({},L.RGBA,L.RGBA32F)),f(D,L.HALF_FLOAT,f({},L.RGBA,L.RGBA16F)),f(D,L.UNSIGNED_BYTE,(f(C={},L.RGBA,L.RGBA8),f(C,L.RGB,L.RGB8),C)),D[F][I]):this.format===h.HALF_FLOAT?L.RGBA:I,format:I,type:F}}},{key:"_glDepthFormat",value:function(){var L=this.gl,C=this.useStencil?this.depthFormat===h.FLOAT?L.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===h.WEBGL2?L.UNSIGNED_INT_24_8:L.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===h.FLOAT?L.FLOAT:L.UNSIGNED_INT,D=this.useStencil?L.DEPTH_STENCIL:L.DEPTH_COMPONENT,L=this.useStencil?this.depthFormat===h.FLOAT?L.DEPTH32F_STENCIL8:this.target.webglVersion===h.WEBGL2?L.DEPTH24_STENCIL8:L.DEPTH_STENCIL:this.target.webglVersion===h.WEBGL2?this.depthFormat===h.FLOAT?L.DEPTH_COMPONENT32F:L.DEPTH_COMPONENT24:L.DEPTH_COMPONENT;return{internalFormat:L,format:D,type:C}}},{key:"_updateSize",value:function(){this._autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this._autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var F=this.color,C=this.depth,D=this.colorRenderbuffer,L=this.depthRenderbuffer,F=(this._deleteTexture(F),C&&this._deleteTexture(C),this.gl);D&&F.deleteRenderbuffer(D),L&&F.deleteRenderbuffer(L),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var C=new T(this);return C._computeCameraDefaultSettings(),C._setDefaultCamera(),this.target._renderer._curCamera=C}},{key:"_deleteTexture",value:function(C){this.gl.deleteTexture(C.rawTexture()),this.target._renderer.textures.delete(C)}},{key:"remove",value:function(){var C=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),C.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&C.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&C.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&C.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target.resetMatrix(),this.target._renderer.uViewMatrix.set(this.target._renderer._curCamera.cameraMatrix),this.target._renderer.uModelMatrix.reset(),this.target._renderer._applyStencilTestIfClipping()}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var C=this.gl;C.bindFramebuffer(C.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var C=this.gl,D=(C.bindFramebuffer(C.READ_FRAMEBUFFER,this.aaFramebuffer),C.bindFramebuffer(C.DRAW_FRAMEBUFFER,this.framebuffer),[[C.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&D.push([C.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var L=0,F=D;L<F.length;L++){var B=d(F[L],2),I=B[0],B=B[1];C.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,I,B)}}}},{key:"end",value:function(){var C=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(C.bindFramebuffer(C.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(C){this.begin(),C(),this.end()}},{key:"loadPixels",value:function(){var C=this.gl,D=this.target._renderer.activeFramebuffer(),L=(C.bindFramebuffer(C.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,v.readPixelsWebGL)(this.pixels,C,this.framebuffer,0,0,this.width*this.density,this.height*this.density,L.format,L.type),D?C.bindFramebuffer(C.FRAMEBUFFER,D._framebufferToBind()):C.bindFramebuffer(C.FRAMEBUFFER,null)}},{key:"get",value:function(C,D,L,F){s.default._validateParameters("p5.Framebuffer.get",arguments);var I=this._glColorFormat();if(C===void 0&&D===void 0)D=C=0,L=this.width,F=this.height;else if(L===void 0&&F===void 0)return(C<0||D<0||C>=this.width||D>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),C=this.target.constrain(C,0,this.width-1),D=this.target.constrain(D,0,this.height-1)),(0,v.readPixelWebGL)(this.gl,this.framebuffer,C*this.density,D*this.density,I.format,I.type);C=this.target.constrain(C,0,this.width-1),D=this.target.constrain(D,0,this.height-1),L=this.target.constrain(L,1,this.width-C),F=this.target.constrain(F,1,this.height-D);for(var B=(0,v.readPixelsWebGL)(void 0,this.gl,this.framebuffer,C*this.density,D*this.density,L*this.density,F*this.density,I.format,I.type),W=new Uint8ClampedArray(L*F*this.density*this.density*4),G=(W.fill(255),I.type===this.gl.RGB?3:4),V=0;V<F*this.density;V++)for(var X=0;X<L*this.density;X++)for(var Q=0;Q<4;Q++){var se,M=4*(V*L*this.density+X)+Q;Q<G&&(se=G==4?M:(V*L*this.density+X)*G+Q,W[M]=B[se])}return C=new s.default.Image(L*this.density,F*this.density),C.imageData=C.canvas.getContext("2d").createImageData(C.width,C.height),C.imageData.data.set(W),C.pixels=C.imageData.data,C.updatePixels(),this.density!==1&&C.resize(L,F),C}},{key:"updatePixels",value:function(){var C=this.gl,D=(this.colorP5Texture.bindTexture(),this._glColorFormat()),L=D.format===C.RGBA?4:3,L=this.width*this.height*this.density*this.density*L,F=D.type===C.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof F)||this.pixels.length!==L)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");C.texImage2D(C.TEXTURE_2D,0,D.internalFormat,this.width*this.density,this.height*this.density,0,D.format,D.type,this.pixels),this.colorP5Texture.unbindTexture(),F=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(C.clearDepth(1),C.clear(C.DEPTH_BUFFER_BIT)),this.end()):(C.bindFramebuffer(C.FRAMEBUFFER,this.framebuffer),this.useDepth&&(C.clearDepth(1),C.clear(C.DEPTH_BUFFER_BIT)),F?C.bindFramebuffer(C.FRAMEBUFFER,F._framebufferToBind()):C.bindFramebuffer(C.FRAMEBUFFER,null))}}]),N}()),P=s.default.Framebuffer=S;u.default=P},{"../core/constants":272,"../core/main":283,"./p5.RendererGL":341,"./p5.Texture":343,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],335:[function(t,m,u){function a(y){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(y)}function p(y){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(y)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.flat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.unscopables.flat"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.entries"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.flat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.unscopables.flat"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(f=t("../core/main"))&&f.__esModule?f:{default:f},h=function(y){if(y&&y.__esModule)return y;if(y===null||p(y)!=="object"&&typeof y!="function")return{default:y};var g=b();if(g&&g.has(y))return g.get(y);var c,l={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in y){var x;Object.prototype.hasOwnProperty.call(y,c)&&((x=w?Object.getOwnPropertyDescriptor(y,c):null)&&(x.get||x.set)?Object.defineProperty(l,c,x):l[c]=y[c])}return l.default=y,g&&g.set(y,l),l}(t("../core/constants"));function b(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,b=function(){return y},y)}function v(y){return function(g){if(Array.isArray(g)){for(var c=0,l=new Array(g.length);c<g.length;c++)l[c]=g[c];return l}}(y)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(y)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(y,g){return function(c){if(Array.isArray(c))return c}(y)||function(c,l){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]"){var w=[],x=!0,_=!1,T=void 0;try{for(var E,S=c[Symbol.iterator]();!(x=(E=S.next()).done)&&(w.push(E.value),!l||w.length!==l);x=!0);}catch(P){_=!0,T=P}finally{try{x||S.return==null||S.return()}finally{if(_)throw T}}return w}}(y,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(y,g){for(var c=0;c<g.length;c++){var l=g[c];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(y,l.key,l)}}s.default.Geometry=function(){function y(l,w,x){if(!(this instanceof y))throw new TypeError("Cannot call a class as a function");this.vertices=[],this.boundingBoxCache=null,this.lineVertices=new s.default.DataArray,this.lineTangentsIn=new s.default.DataArray,this.lineTangentsOut=new s.default.DataArray,this.lineSides=new s.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new s.default.DataArray,this.detailX=l!==void 0?l:1,this.detailY=w!==void 0?w:1,this.dirtyFlags={},this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,x instanceof Function&&x.call(this)}var g,c;return g=y,(c=[{key:"calculateBoundingBox",value:function(){if(!this.boundingBoxCache){for(var l=new s.default.Vector(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),w=new s.default.Vector(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),x=0;x<this.vertices.length;x++){var _=this.vertices[x];l.x=Math.min(l.x,_.x),l.y=Math.min(l.y,_.y),l.z=Math.min(l.z,_.z),w.x=Math.max(w.x,_.x),w.y=Math.max(w.y,_.y),w.z=Math.max(w.z,_.z)}var T=new s.default.Vector(w.x-l.x,w.y-l.y,w.z-l.z),E=new s.default.Vector((l.x+w.x)/2,(l.y+w.y)/2,(l.z+w.z)/2);this.boundingBoxCache={min:l,max:w,size:T,offset:E}}return this.boundingBoxCache}},{key:"reset",value:function(){this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"hasFillTransparency",value:function(){if(this._hasFillTransparency===void 0){this._hasFillTransparency=!1;for(var l=0;l<this.vertexColors.length;l+=4)if(this.vertexColors[l+3]<1){this._hasFillTransparency=!0;break}}return this._hasFillTransparency}},{key:"hasStrokeTransparency",value:function(){if(this._hasStrokeTransparency===void 0){this._hasStrokeTransparency=!1;for(var l=0;l<this.lineVertexColors.length;l+=4)if(this.lineVertexColors[l+3]<1){this._hasStrokeTransparency=!0;break}}return this._hasStrokeTransparency}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"saveObj",value:function(){var l=this,w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"model.obj",x="";if(this.vertices.forEach(function(E){x+="v ".concat(E.x," ").concat(E.y," ").concat(E.z,`
`)}),this.uvs&&0<this.uvs.length)for(var _=0;_<this.uvs.length;_+=2)x+="vt ".concat(this.uvs[_]," ").concat(this.uvs[_+1],`
`);this.vertexNormals&&0<this.vertexNormals.length&&this.vertexNormals.forEach(function(E){x+="vn ".concat(E.x," ").concat(E.y," ").concat(E.z,`
`)}),this.faces.forEach(function(E){var S="f";E.forEach(function(P){S=S+" "+(P+1),(0<l.vertexNormals.length||0<l.uvs.length)&&(S+="/",0<l.uvs.length&&(S+=P+1),S+="/",0<l.vertexNormals.length&&(S+=P+1))}),x+=S+`
`});var T=new Blob([x],{type:"text/plain"});s.default.prototype.downloadFile(T,w,"obj")}},{key:"saveStl",value:function(){var l=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"model.stl",w=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).binary,w=w!==void 0&&w,x=l.substring(0,l.lastIndexOf(".")),_=[],T=!0,E=!1,S=void 0;try{for(var P,N=this.faces[Symbol.iterator]();!(T=(P=N.next()).done);T=!0){var C=P.value,D=s.default.Vector.sub(this.vertices[C[1]],this.vertices[C[0]]),L=s.default.Vector.sub(this.vertices[C[2]],this.vertices[C[0]]),F=D.y*L.z-D.z*L.y,I=D.z*L.x-D.x*L.z,B=D.x*L.y-D.y*L.x;_.push(new s.default.Vector(F,I,B).normalize())}}catch(xe){E=!0,S=xe}finally{try{T||N.return==null||N.return()}finally{if(E)throw S}}if(w){var W,G=80,E=2*this.faces.length+3*this.faces.length*4*4+80+4,S=new ArrayBuffer(E);(W=new DataView(S)).setUint32(G,this.faces.length,!0),G+=4;for(var V=0,X=Object.entries(this.faces);V<X.length;V++){var Q=i(X[V],2),M=Q[0],Q=Q[1],M=_[M],se=(W.setFloat32(G,M.x,!0),G+=4,W.setFloat32(G,M.y,!0),G+=4,W.setFloat32(G,M.z,!0),G+=4,!0),M=!1,A=void 0;try{for(var z,$=Q[Symbol.iterator]();!(se=(z=$.next()).done);se=!0){var Z=z.value,te=this.vertices[Z];W.setFloat32(G,te.x,!0),G+=4,W.setFloat32(G,te.y,!0),G+=4,W.setFloat32(G,te.z,!0),G+=4}}catch(Fe){M=!0,A=Fe}finally{try{se||$.return==null||$.return()}finally{if(M)throw A}}W.setUint16(G,0,!0),G+=2}}else{W="solid "+x+`
`;for(var ie=0,he=Object.entries(this.faces);ie<he.length;ie++){var oe=i(he[ie],2),fe=oe[0],oe=oe[1],fe=_[fe],ce=(W=W+(" facet norm "+fe.x+" "+fe.y+" "+fe.z+`
`)+`  outer loop
`,!0),fe=!1,ee=void 0;try{for(var de,ye=oe[Symbol.iterator]();!(ce=(de=ye.next()).done);ce=!0){var we=de.value,ge=this.vertices[we];W+="   vertex "+ge.x+" "+ge.y+" "+ge.z+`
`}}catch(xe){fe=!0,ee=xe}finally{try{ce||ye.return==null||ye.return()}finally{if(fe)throw ee}}W=W+`  endloop
 endfacet
`}W+="endsolid "+x+`
`}w=new Blob([W],{type:"text/plain"}),s.default.prototype.downloadFile(w,l,"stl")}},{key:"flipU",value:function(){this.uvs=this.uvs.flat().map(function(l,w){return w%2==0?1-l:l})}},{key:"flipV",value:function(){this.uvs=this.uvs.flat().map(function(l,w){return w%2==0?l:1-l})}},{key:"computeFaces",value:function(){this.faces.length=0;for(var l,w,x,_=this.detailX+1,T=0;T<this.detailY;T++)for(var E=0;E<this.detailX;E++)w=(T+1)*_+E+1,this.faces.push([T*_+E,l=T*_+E+1,x=(T+1)*_+E]),this.faces.push([x,l,w]);return this}},{key:"_getFaceNormal",value:function(w){var w=this.faces[w],x=this.vertices[w[0]],T=this.vertices[w[1]],w=this.vertices[w[2]],T=s.default.Vector.sub(T,x),w=s.default.Vector.sub(w,x),x=s.default.Vector.cross(T,w),_=s.default.Vector.mag(x),T=_/(s.default.Vector.mag(T)*s.default.Vector.mag(w));return T===0||isNaN(T)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),x):(1<T&&(T=1),x.mult(Math.asin(T)/_))}},{key:"computeNormals",value:function(){var l,w=this,x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:h.FLAT,_=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).roundToPrecision,T=this.vertexNormals,E=this.vertices,S=this.faces;if(x===h.SMOOTH){for(var P={},N=[],C=Math.pow(10,_===void 0?3:_),D=function(W){return Math.round(W*C)/C},L=function(W){return"".concat(D(W.x),",").concat(D(W.y),",").concat(D(W.z))},F=0;F<E.length;F++){var I=E[F],B=L(I);P[B]===void 0&&(P[B]=N.length,N.push(I))}S.forEach(function(W){for(var G=0;G<3;++G){var V=W[G],V=E[V],V=L(V);W[G]=P[V]}}),this.edges.forEach(function(W){for(var G=0;G<2;++G){var V=W[G],V=E[V],V=L(V);W[G]=P[V]}}),this.vertices=E=N}for(l=T.length=0;l<E.length;++l)T.push(new s.default.Vector);for(S.forEach(function(W,G){for(var V=w._getFaceNormal(G),X=0;X<3;++X){var Q=W[X];T[Q].add(V)}}),l=0;l<E.length;++l)T[l].normalize();return this}},{key:"averageNormals",value:function(){for(var l=0;l<=this.detailY;l++){var w=this.detailX+1,x=s.default.Vector.add(this.vertexNormals[l*w],this.vertexNormals[l*w+this.detailX]),x=s.default.Vector.div(x,2);this.vertexNormals[l*w]=x,this.vertexNormals[l*w+this.detailX]=x}return this}},{key:"averagePoleNormals",value:function(){for(var l=new s.default.Vector(0,0,0),w=0;w<this.detailX;w++)l.add(this.vertexNormals[w]);for(var l=s.default.Vector.div(l,this.detailX),x=0;x<this.detailX;x++)this.vertexNormals[x]=l;l=new s.default.Vector(0,0,0);for(var _=this.vertices.length-1;_>this.vertices.length-1-this.detailX;_--)l.add(this.vertexNormals[_]);l=s.default.Vector.div(l,this.detailX);for(var T=this.vertices.length-1;T>this.vertices.length-1-this.detailX;T--)this.vertexNormals[T]=l;return this}},{key:"_makeTriangleEdges",value:function(){for(var l=this.edges.length=0;l<this.faces.length;l++)this.edges.push([this.faces[l][0],this.faces[l][1]]),this.edges.push([this.faces[l][1],this.faces[l][2]]),this.edges.push([this.faces[l][2],this.faces[l][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var l,w=new Map,x=new Set,_=0;_<this.edges.length;_++){var T,E=this.edges[_-1],S=this.edges[_],P=this.vertices[S[0]],N=this.vertices[S[1]],C=0<this.vertexStrokeColors.length&&E?this.vertexStrokeColors.slice(4*E[1],4*(E[1]+1)):[0,0,0,0],D=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*S[0],4*(S[0]+1)):[0,0,0,0],L=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*S[1],4*(S[1]+1)):[0,0,0,0],F=N.copy().sub(P).normalize(),I=0<F.magSq();I&&this._addSegment(P,N,D,L,F),0<_&&E[1]===S[0]?x.has(S[0])||(x.add(S[0]),w.delete(S[0]),l&&I&&F.dot(l)<1-1e-8&&this._addJoin(P,l,F,D)):(I&&!x.has(S[0])&&((T=w.get(S[0]))?(this._addJoin(P,T.dir,F,D),w.delete(S[0]),x.add(S[0])):w.set(S[0],{point:P,dir:F.copy().mult(-1),color:D})),l&&!x.has(E[1])&&((T=w.get(E[1]))?(this._addJoin(this.vertices[E[1]],l,T.dir.copy().mult(-1),C),w.delete(E[1]),x.add(E[1])):w.set(E[1],{point:this.vertices[E[1]],dir:l,color:C}),l=void 0)),_!==this.edges.length-1||x.has(S[1])||((P=w.get(S[1]))?(this._addJoin(N,F,P.dir.copy().mult(-1),L),w.delete(S[1]),x.add(S[1])):w.set(S[1],{point:N,dir:F,color:L})),I&&(l=F)}var B=!0,W=!1,G=void 0;try{for(var V,X=w.values()[Symbol.iterator]();!(B=(V=X.next()).done);B=!0){var Q=V.value,se=Q.point,M=Q.dir,A=Q.color;this._addCap(se,M,A)}}catch(z){W=!0,G=z}finally{try{B||X.return==null||X.return()}finally{if(W)throw G}}return this}},{key:"_addSegment",value:function(E,S,x,_,T){var E=E.array(),S=S.array(),P=T.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var N=0,C=[this.lineTangentsIn,this.lineTangentsOut];N<C.length;N++)for(var D=C[N],L=0;L<6;L++)D.push.apply(D,v(P));return(T=this.lineVertices).push.apply(T,v(E).concat(v(S),v(E),v(S),v(S),v(E))),(T=this.lineVertexColors).push.apply(T,v(x).concat(v(_),v(x),v(_),v(_),v(x))),this}},{key:"_addCap",value:function(l,w,x){for(var _,T=l.array(),E=w.array(),S=[0,0,0],P=0;P<6;P++)(_=this.lineVertices).push.apply(_,v(T)),(_=this.lineTangentsIn).push.apply(_,v(E)),(_=this.lineTangentsOut).push.apply(_,S),(_=this.lineVertexColors).push.apply(_,v(x));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(l,w,x,_){for(var T,E=l.array(),S=w.array(),P=x.array(),N=0;N<12;N++)(T=this.lineVertices).push.apply(T,v(E)),(T=this.lineTangentsIn).push.apply(T,v(S)),(T=this.lineTangentsOut).push.apply(T,v(P)),(T=this.lineVertexColors).push.apply(T,v(_));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var l=this.vertices[0].copy(),w=this.vertices[0].copy(),x=0;x<this.vertices.length;x++)l.x=Math.max(l.x,this.vertices[x].x),w.x=Math.min(w.x,this.vertices[x].x),l.y=Math.max(l.y,this.vertices[x].y),w.y=Math.min(w.y,this.vertices[x].y),l.z=Math.max(l.z,this.vertices[x].z),w.z=Math.min(w.z,this.vertices[x].z);for(var _=s.default.Vector.lerp(l,w,.5),T=s.default.Vector.sub(l,w),E=200/Math.max(Math.max(T.x,T.y),T.z),S=0;S<this.vertices.length;S++)this.vertices[S].sub(_),this.vertices[S].mult(E)}return this}}])&&d(g.prototype,c),y}();var f=s.default.Geometry;u.default=f},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.entries":184,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],336:[function(b,m,u){b("core-js/modules/es.array.iterator"),b("core-js/modules/es.object.to-string"),b("core-js/modules/es.typed-array.float32-array"),b("core-js/modules/es.typed-array.copy-within"),b("core-js/modules/es.typed-array.every"),b("core-js/modules/es.typed-array.fill"),b("core-js/modules/es.typed-array.filter"),b("core-js/modules/es.typed-array.find"),b("core-js/modules/es.typed-array.find-index"),b("core-js/modules/es.typed-array.for-each"),b("core-js/modules/es.typed-array.includes"),b("core-js/modules/es.typed-array.index-of"),b("core-js/modules/es.typed-array.iterator"),b("core-js/modules/es.typed-array.join"),b("core-js/modules/es.typed-array.last-index-of"),b("core-js/modules/es.typed-array.map"),b("core-js/modules/es.typed-array.reduce"),b("core-js/modules/es.typed-array.reduce-right"),b("core-js/modules/es.typed-array.reverse"),b("core-js/modules/es.typed-array.set"),b("core-js/modules/es.typed-array.slice"),b("core-js/modules/es.typed-array.some"),b("core-js/modules/es.typed-array.sort"),b("core-js/modules/es.typed-array.subarray"),b("core-js/modules/es.typed-array.to-locale-string"),b("core-js/modules/es.typed-array.to-string"),b("core-js/modules/es.array.iterator"),b("core-js/modules/es.object.to-string"),b("core-js/modules/es.typed-array.float32-array"),b("core-js/modules/es.typed-array.copy-within"),b("core-js/modules/es.typed-array.every"),b("core-js/modules/es.typed-array.fill"),b("core-js/modules/es.typed-array.filter"),b("core-js/modules/es.typed-array.find"),b("core-js/modules/es.typed-array.find-index"),b("core-js/modules/es.typed-array.for-each"),b("core-js/modules/es.typed-array.includes"),b("core-js/modules/es.typed-array.index-of"),b("core-js/modules/es.typed-array.iterator"),b("core-js/modules/es.typed-array.join"),b("core-js/modules/es.typed-array.last-index-of"),b("core-js/modules/es.typed-array.map"),b("core-js/modules/es.typed-array.reduce"),b("core-js/modules/es.typed-array.reduce-right"),b("core-js/modules/es.typed-array.reverse"),b("core-js/modules/es.typed-array.set"),b("core-js/modules/es.typed-array.slice"),b("core-js/modules/es.typed-array.some"),b("core-js/modules/es.typed-array.sort"),b("core-js/modules/es.typed-array.subarray"),b("core-js/modules/es.typed-array.to-locale-string"),b("core-js/modules/es.typed-array.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(b=b("../core/main"))&&b.__esModule?b:{default:b};function p(v,i){for(var d=0;d<i.length;d++){var f=i[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(v,f.key,f)}}var s=Array,h=function(v){return Array.isArray(v)},b=(typeof Float32Array<"u"&&(s=Float32Array,h=function(v){return Array.isArray(v)||v instanceof Float32Array}),a.default.Matrix=function(){function v(){var y=this,g=v;if(y instanceof g)return arguments.length&&((y=arguments.length-1)<0||arguments.length<=y?void 0:arguments[y])instanceof a.default&&(this.p5=(g=arguments.length-1)<0||arguments.length<=g?void 0:arguments[g]),(arguments.length<=0?void 0:arguments[0])==="mat3"?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new s([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new s([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var i,d,f;return i=v,f=[{key:"identity",value:function(y){return new a.default.Matrix(y)}}],(d=[{key:"reset",value:function(){return this.mat3?this.mat3.set([1,0,0,0,1,0,0,0,1]):this.mat4&&this.mat4.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this}},{key:"set",value:function(y){var g=arguments;if(y instanceof a.default.Matrix?g=y.mat4:h(y)&&(g=y),g.length!==16)a.default._friendlyError("Expected 16 values but received ".concat(g.length,"."),"p5.Matrix.set");else for(var c=0;c<16;c++)this.mat4[c]=g[c];return this}},{key:"get",value:function(){return new a.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var y;return this.mat3!==void 0?((y=new a.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],y.mat3[1]=this.mat3[1],y.mat3[2]=this.mat3[2],y.mat3[3]=this.mat3[3],y.mat3[4]=this.mat3[4],y.mat3[5]=this.mat3[5],y.mat3[6]=this.mat3[6],y.mat3[7]=this.mat3[7],y.mat3[8]=this.mat3[8]):((y=new a.default.Matrix(this.p5)).mat4[0]=this.mat4[0],y.mat4[1]=this.mat4[1],y.mat4[2]=this.mat4[2],y.mat4[3]=this.mat4[3],y.mat4[4]=this.mat4[4],y.mat4[5]=this.mat4[5],y.mat4[6]=this.mat4[6],y.mat4[7]=this.mat4[7],y.mat4[8]=this.mat4[8],y.mat4[9]=this.mat4[9],y.mat4[10]=this.mat4[10],y.mat4[11]=this.mat4[11],y.mat4[12]=this.mat4[12],y.mat4[13]=this.mat4[13],y.mat4[14]=this.mat4[14],y.mat4[15]=this.mat4[15]),y}},{key:"transpose",value:function(y){var g,c,l,w,x,_;return y instanceof a.default.Matrix?(g=y.mat4[1],c=y.mat4[2],l=y.mat4[3],w=y.mat4[6],x=y.mat4[7],_=y.mat4[11],this.mat4[0]=y.mat4[0],this.mat4[1]=y.mat4[4],this.mat4[2]=y.mat4[8],this.mat4[3]=y.mat4[12],this.mat4[4]=g,this.mat4[5]=y.mat4[5],this.mat4[6]=y.mat4[9],this.mat4[7]=y.mat4[13],this.mat4[8]=c,this.mat4[9]=w,this.mat4[10]=y.mat4[10],this.mat4[11]=y.mat4[14],this.mat4[12]=l,this.mat4[13]=x,this.mat4[14]=_,this.mat4[15]=y.mat4[15]):h(y)&&(g=y[1],c=y[2],l=y[3],w=y[6],x=y[7],_=y[11],this.mat4[0]=y[0],this.mat4[1]=y[4],this.mat4[2]=y[8],this.mat4[3]=y[12],this.mat4[4]=g,this.mat4[5]=y[5],this.mat4[6]=y[9],this.mat4[7]=y[13],this.mat4[8]=c,this.mat4[9]=w,this.mat4[10]=y[10],this.mat4[11]=y[14],this.mat4[12]=l,this.mat4[13]=x,this.mat4[14]=_,this.mat4[15]=y[15]),this}},{key:"invert",value:function(B){B instanceof a.default.Matrix?(g=B.mat4[0],c=B.mat4[1],l=B.mat4[2],w=B.mat4[3],x=B.mat4[4],_=B.mat4[5],T=B.mat4[6],E=B.mat4[7],S=B.mat4[8],P=B.mat4[9],N=B.mat4[10],C=B.mat4[11],D=B.mat4[12],L=B.mat4[13],F=B.mat4[14],I=B.mat4[15]):h(B)&&(g=B[0],c=B[1],l=B[2],w=B[3],x=B[4],_=B[5],T=B[6],E=B[7],S=B[8],P=B[9],N=B[10],C=B[11],D=B[12],L=B[13],F=B[14],I=B[15]);var g,c,l,w,x,_,T,E,S,P,N,C,D,L,F,I,B=g*_-c*x,W=g*T-l*x,G=g*E-w*x,V=c*T-l*_,X=c*E-w*_,Q=l*E-w*T,se=S*L-P*D,M=S*F-N*D,A=S*I-C*D,z=P*F-N*L,$=P*I-C*L,Z=N*I-C*F,te=B*Z-W*$+G*z+V*A-X*M+Q*se;return te?(this.mat4[0]=(_*Z-T*$+E*z)*(te=1/te),this.mat4[1]=(l*$-c*Z-w*z)*te,this.mat4[2]=(L*Q-F*X+I*V)*te,this.mat4[3]=(N*X-P*Q-C*V)*te,this.mat4[4]=(T*A-x*Z-E*M)*te,this.mat4[5]=(g*Z-l*A+w*M)*te,this.mat4[6]=(F*G-D*Q-I*W)*te,this.mat4[7]=(S*Q-N*G+C*W)*te,this.mat4[8]=(x*$-_*A+E*se)*te,this.mat4[9]=(c*A-g*$-w*se)*te,this.mat4[10]=(D*X-L*G+I*B)*te,this.mat4[11]=(P*G-S*X-C*B)*te,this.mat4[12]=(_*M-x*z-T*se)*te,this.mat4[13]=(g*z-c*M+l*se)*te,this.mat4[14]=(L*W-D*V-F*B)*te,this.mat4[15]=(S*V-P*W+N*B)*te,this):null}},{key:"invert3x3",value:function(){var y=this.mat3[0],g=this.mat3[1],c=this.mat3[2],l=this.mat3[3],w=this.mat3[4],x=this.mat3[5],_=this.mat3[6],T=this.mat3[7],E=this.mat3[8],S=E*w-x*T,P=-E*l+x*_,N=T*l-w*_,C=y*S+g*P+c*N;return C?(this.mat3[0]=S*(C=1/C),this.mat3[1]=(-E*g+c*T)*C,this.mat3[2]=(x*g-c*w)*C,this.mat3[3]=P*C,this.mat3[4]=(E*y-c*_)*C,this.mat3[5]=(-x*y+c*l)*C,this.mat3[6]=N*C,this.mat3[7]=(-T*y+g*_)*C,this.mat3[8]=(w*y-g*l)*C,this):null}},{key:"transpose3x3",value:function(y){var g=(y=y===void 0?this.mat3:y)[1],c=y[2],l=y[5];return this.mat3[0]=y[0],this.mat3[1]=y[3],this.mat3[2]=y[6],this.mat3[3]=g,this.mat3[4]=y[4],this.mat3[5]=y[7],this.mat3[6]=c,this.mat3[7]=l,this.mat3[8]=y[8],this}},{key:"inverseTranspose",value:function(y){if(y=y.mat4,this.mat3===void 0?a.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=y[0],this.mat3[1]=y[1],this.mat3[2]=y[2],this.mat3[3]=y[4],this.mat3[4]=y[5],this.mat3[5]=y[6],this.mat3[6]=y[8],this.mat3[7]=y[9],this.mat3[8]=y[10]),y=this.invert3x3(),y)y.transpose3x3(this.mat3);else for(var g=0;g<9;g++)this.mat3[g]=0;return this}},{key:"determinant",value:function(){var y=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],g=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],c=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],l=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],w=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],x=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],_=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],T=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],E=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],S=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],P=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return y*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-g*P+c*S+l*E-w*T+x*_}},{key:"mult",value:function(c){var g;if(c===this||c===this.mat4)g=this.copy().mat4;else if(c instanceof a.default.Matrix)g=c.mat4;else if(h(c))g=c;else{if(arguments.length!==16)return;g=arguments}var c=this.mat4[0],l=this.mat4[1],w=this.mat4[2],x=this.mat4[3];return this.mat4[0]=c*g[0]+l*g[4]+w*g[8]+x*g[12],this.mat4[1]=c*g[1]+l*g[5]+w*g[9]+x*g[13],this.mat4[2]=c*g[2]+l*g[6]+w*g[10]+x*g[14],this.mat4[3]=c*g[3]+l*g[7]+w*g[11]+x*g[15],c=this.mat4[4],l=this.mat4[5],w=this.mat4[6],x=this.mat4[7],this.mat4[4]=c*g[0]+l*g[4]+w*g[8]+x*g[12],this.mat4[5]=c*g[1]+l*g[5]+w*g[9]+x*g[13],this.mat4[6]=c*g[2]+l*g[6]+w*g[10]+x*g[14],this.mat4[7]=c*g[3]+l*g[7]+w*g[11]+x*g[15],c=this.mat4[8],l=this.mat4[9],w=this.mat4[10],x=this.mat4[11],this.mat4[8]=c*g[0]+l*g[4]+w*g[8]+x*g[12],this.mat4[9]=c*g[1]+l*g[5]+w*g[9]+x*g[13],this.mat4[10]=c*g[2]+l*g[6]+w*g[10]+x*g[14],this.mat4[11]=c*g[3]+l*g[7]+w*g[11]+x*g[15],c=this.mat4[12],l=this.mat4[13],w=this.mat4[14],x=this.mat4[15],this.mat4[12]=c*g[0]+l*g[4]+w*g[8]+x*g[12],this.mat4[13]=c*g[1]+l*g[5]+w*g[9]+x*g[13],this.mat4[14]=c*g[2]+l*g[6]+w*g[10]+x*g[14],this.mat4[15]=c*g[3]+l*g[7]+w*g[11]+x*g[15],this}},{key:"apply",value:function(c){var g;if(c===this||c===this.mat4)g=this.copy().mat4;else if(c instanceof a.default.Matrix)g=c.mat4;else if(h(c))g=c;else{if(arguments.length!==16)return;g=arguments}var c=this.mat4,l=c[0],w=c[4],x=c[8],_=c[12],l=(c[0]=g[0]*l+g[1]*w+g[2]*x+g[3]*_,c[4]=g[4]*l+g[5]*w+g[6]*x+g[7]*_,c[8]=g[8]*l+g[9]*w+g[10]*x+g[11]*_,c[12]=g[12]*l+g[13]*w+g[14]*x+g[15]*_,c[1]),w=c[5],x=c[9],_=c[13],l=(c[1]=g[0]*l+g[1]*w+g[2]*x+g[3]*_,c[5]=g[4]*l+g[5]*w+g[6]*x+g[7]*_,c[9]=g[8]*l+g[9]*w+g[10]*x+g[11]*_,c[13]=g[12]*l+g[13]*w+g[14]*x+g[15]*_,c[2]),w=c[6],x=c[10],_=c[14],l=(c[2]=g[0]*l+g[1]*w+g[2]*x+g[3]*_,c[6]=g[4]*l+g[5]*w+g[6]*x+g[7]*_,c[10]=g[8]*l+g[9]*w+g[10]*x+g[11]*_,c[14]=g[12]*l+g[13]*w+g[14]*x+g[15]*_,c[3]),w=c[7],x=c[11],_=c[15];return c[3]=g[0]*l+g[1]*w+g[2]*x+g[3]*_,c[7]=g[4]*l+g[5]*w+g[6]*x+g[7]*_,c[11]=g[8]*l+g[9]*w+g[10]*x+g[11]*_,c[15]=g[12]*l+g[13]*w+g[14]*x+g[15]*_,this}},{key:"scale",value:function(y,g,c){return y instanceof a.default.Vector?(g=y.y,c=y.z,y=y.x):y instanceof Array&&(g=y[1],c=y[2],y=y[0]),this.mat4[0]*=y,this.mat4[1]*=y,this.mat4[2]*=y,this.mat4[3]*=y,this.mat4[4]*=g,this.mat4[5]*=g,this.mat4[6]*=g,this.mat4[7]*=g,this.mat4[8]*=c,this.mat4[9]*=c,this.mat4[10]*=c,this.mat4[11]*=c,this}},{key:"rotate",value:function(B,$,z,l){$ instanceof a.default.Vector?(z=$.y,l=$.z,$=$.x):$ instanceof Array&&(z=$[1],l=$[2],$=$[0]);var w=Math.sqrt($*$+z*z+l*l),w=($*=1/w,z*=1/w,l*=1/w,this.mat4[0]),x=this.mat4[1],_=this.mat4[2],T=this.mat4[3],E=this.mat4[4],S=this.mat4[5],P=this.mat4[6],N=this.mat4[7],C=this.mat4[8],D=this.mat4[9],L=this.mat4[10],F=this.mat4[11],I=Math.sin(B),B=Math.cos(B),W=1-B,G=$*$*W+B,V=z*$*W+l*I,X=l*$*W-z*I,Q=$*z*W-l*I,se=z*z*W+B,M=l*z*W+$*I,A=$*l*W+z*I,z=z*l*W-$*I,$=l*l*W+B;return this.mat4[0]=w*G+E*V+C*X,this.mat4[1]=x*G+S*V+D*X,this.mat4[2]=_*G+P*V+L*X,this.mat4[3]=T*G+N*V+F*X,this.mat4[4]=w*Q+E*se+C*M,this.mat4[5]=x*Q+S*se+D*M,this.mat4[6]=_*Q+P*se+L*M,this.mat4[7]=T*Q+N*se+F*M,this.mat4[8]=w*A+E*z+C*$,this.mat4[9]=x*A+S*z+D*$,this.mat4[10]=_*A+P*z+L*$,this.mat4[11]=T*A+N*z+F*$,this}},{key:"translate",value:function(l){var g=l[0],c=l[1],l=l[2]||0;this.mat4[12]+=this.mat4[0]*g+this.mat4[4]*c+this.mat4[8]*l,this.mat4[13]+=this.mat4[1]*g+this.mat4[5]*c+this.mat4[9]*l,this.mat4[14]+=this.mat4[2]*g+this.mat4[6]*c+this.mat4[10]*l,this.mat4[15]+=this.mat4[3]*g+this.mat4[7]*c+this.mat4[11]*l}},{key:"rotateX",value:function(y){this.rotate(y,1,0,0)}},{key:"rotateY",value:function(y){this.rotate(y,0,1,0)}},{key:"rotateZ",value:function(y){this.rotate(y,0,0,1)}},{key:"perspective",value:function(w,g,c,l){var w=1/Math.tan(w/2),x=1/(c-l);return this.mat4[0]=w/g,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=w,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(l+c)*x,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*l*c*x,this.mat4[15]=0,this}},{key:"ortho",value:function(y,g,c,l,w,x){var _=1/(y-g),T=1/(c-l),E=1/(w-x);return this.mat4[0]=-2*_,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*T,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*E,this.mat4[11]=0,this.mat4[12]=(y+g)*_,this.mat4[13]=(l+c)*T,this.mat4[14]=(x+w)*E,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(y,g,c,l){var w=new Array(4),x=this.mat4;return w[0]=x[0]*y+x[4]*g+x[8]*c+x[12]*l,w[1]=x[1]*y+x[5]*g+x[9]*c+x[13]*l,w[2]=x[2]*y+x[6]*g+x[10]*c+x[14]*l,w[3]=x[3]*y+x[7]*g+x[11]*c+x[15]*l,w}},{key:"multiplyPoint",value:function(c){var l=c.x,g=c.y,c=c.z,l=this.multiplyVec4(l,g,c,1);return new a.default.Vector(l[0],l[1],l[2])}},{key:"multiplyAndNormalizePoint",value:function(c){var l=c.x,g=c.y,c=c.z,l=this.multiplyVec4(l,g,c,1);return l[0]/=l[3],l[1]/=l[3],l[2]/=l[3],new a.default.Vector(l[0],l[1],l[2])}},{key:"multiplyDirection",value:function(c){var l=c.x,g=c.y,c=c.z,l=this.multiplyVec4(l,g,c,0);return new a.default.Vector(l[0],l[1],l[2])}},{key:"mult3x3",value:function(c){var g;if(c===this||c===this.mat3)g=this.copy().mat3;else if(c instanceof a.default.Matrix)g=c.mat3;else if(h(c))g=c;else{if(arguments.length!==9)return;g=arguments}var c=this.mat3[0],l=this.mat3[1],w=this.mat3[2];return this.mat3[0]=c*g[0]+l*g[3]+w*g[6],this.mat3[1]=c*g[1]+l*g[4]+w*g[7],this.mat3[2]=c*g[2]+l*g[5]+w*g[8],c=this.mat3[3],l=this.mat3[4],w=this.mat3[5],this.mat3[3]=c*g[0]+l*g[3]+w*g[6],this.mat3[4]=c*g[1]+l*g[4]+w*g[7],this.mat3[5]=c*g[2]+l*g[5]+w*g[8],c=this.mat3[6],l=this.mat3[7],w=this.mat3[8],this.mat3[6]=c*g[0]+l*g[3]+w*g[6],this.mat3[7]=c*g[1]+l*g[4]+w*g[7],this.mat3[8]=c*g[2]+l*g[5]+w*g[8],this}},{key:"column",value:function(y){return new a.default.Vector(this.mat3[3*y],this.mat3[3*y+1],this.mat3[3*y+2])}},{key:"row",value:function(y){return new a.default.Vector(this.mat3[y],this.mat3[y+3],this.mat3[y+6])}},{key:"diagonal",value:function(){return this.mat3!==void 0?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(y,g){return(g=g===void 0?y.copy():g).x=this.row(0).dot(y),g.y=this.row(1).dot(y),g.z=this.row(2).dot(y),g}},{key:"createSubMatrix3x3",value:function(){var y=new a.default.Matrix("mat3");return y.mat3[0]=this.mat4[0],y.mat3[1]=this.mat4[1],y.mat3[2]=this.mat4[2],y.mat3[3]=this.mat4[4],y.mat3[4]=this.mat4[5],y.mat3[5]=this.mat4[6],y.mat3[6]=this.mat4[8],y.mat3[7]=this.mat4[9],y.mat3[8]=this.mat4[10],y}}])&&p(i.prototype,d),f&&p(i,f),v}(),a.default.Matrix);u.default=b},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],337:[function(t,m,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(t=t("../core/main"))&&t.__esModule?t:{default:t};function p(s,h){for(var b=0;b<h.length;b++){var v=h[b];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(s,v.key,v)}}a.default.Quat=function(){function s(i,d,f,y){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");this.w=i,this.vec=new a.default.Vector(d,f,y)}var h,b,v;return h=s,v=[{key:"fromAxisAngle",value:function(i,c,f,y){var g=Math.cos(i/2),c=new a.default.Vector(c,f,y).normalize().mult(Math.sin(i/2));return new a.default.Quat(g,c.x,c.y,c.z)}}],(b=[{key:"conjugate",value:function(){return new a.default.Quat(this.w,-this.vec.x,-this.vec.y,-this.vec.z)}},{key:"multiply",value:function(i){return new a.default.Quat(this.w*i.w-this.vec.x*i.vec.x-this.vec.y*i.vec.y-this.vec.z-i.vec.z,this.w*i.vec.x+this.vec.x*i.w+this.vec.y*i.vec.z-this.vec.z*i.vec.y,this.w*i.vec.y-this.vec.x*i.vec.z+this.vec.y*i.w+this.vec.z*i.vec.x,this.w*i.vec.z+this.vec.x*i.vec.y-this.vec.y*i.vec.x+this.vec.z*i.w)}},{key:"rotateVector",value:function(i){return new a.default.Vector.mult(i,this.w*this.w-this.vec.dot(this.vec)).add(a.default.Vector.mult(this.vec,2*i.dot(this.vec))).add(a.default.Vector.mult(this.vec,2*this.w).cross(i)).clampToZero()}},{key:"rotateBy",value:function(i){return i.multiply(this).multiply(i.conjugate()).vec.clampToZero()}}])&&p(h.prototype,b),v&&p(h,v),s}(),t=a.default.Quat,u.default=t},{"../core/main":283}],338:[function(t,m,u){t("core-js/modules/es.array.map"),t("core-js/modules/es.array.map"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function a(p,s){for(var h=0;h<s.length;h++){var b=s[h];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(p,b.key,b)}}t.default.RenderBuffer=function(){function p(b,v,i,d,f,y){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");this.size=b,this.src=v,this.dst=i,this.attr=d,this._renderer=f,this.map=y}var s,h;return s=p,(h=[{key:"_prepareBuffer",value:function(b,v){var i,d,f,c=v.attributes,y=this._renderer.GL,g=b.model||b,c=c[this.attr];c&&(i=b[this.dst],0<(d=g[this.src]).length?((f=!i)&&(b[this.dst]=i=y.createBuffer()),y.bindBuffer(y.ARRAY_BUFFER,i),!f&&g.dirtyFlags[this.src]===!1||(f=(b=this.map)?b(d):d,this._renderer._bindBuffer(i,y.ARRAY_BUFFER,f),g.dirtyFlags[this.src]=!1),v.enableAttrib(c,this.size)):(b=c.location)!==-1&&this._renderer.registerEnabled.has(b)&&(y.disableVertexAttribArray(b),this._renderer.registerEnabled.delete(b)))}}])&&a(s.prototype,h),p}(),t=t.default.RenderBuffer,u.default=t},{"../core/main":283,"core-js/modules/es.array.map":168}],339:[function(t,m,u){function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(f)}function p(f){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(y){return a(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":a(y)})(f)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(d=t("../core/main"))&&d.__esModule?d:{default:d},h=function(f){if(f&&f.__esModule)return f;if(f===null||p(f)!=="object"&&typeof f!="function")return{default:f};var y=b();if(y&&y.has(f))return y.get(f);var g,c={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in f){var w;Object.prototype.hasOwnProperty.call(f,g)&&((w=l?Object.getOwnPropertyDescriptor(f,g):null)&&(w.get||w.set)?Object.defineProperty(c,g,w):c[g]=f[g])}return c.default=f,y&&y.set(f,c),c}(t("../core/constants"));function b(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,b=function(){return f},f)}function v(f){return function(y){if(Array.isArray(y)){for(var g=0,c=new Array(y.length);g<y.length;g++)c[g]=y[g];return c}}(f)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("./p5.RenderBuffer"),s.default.RendererGL.prototype.beginShape=function(f){return this.immediateMode.shapeMode=f!==void 0?f:h.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var i={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},d=(s.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==h.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},s.default.RendererGL.prototype.vertex=function(f,y){if(this.immediateMode.shapeMode===h.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var g in i){var c=i[g],g=this.immediateMode.geometry[g];g.push.apply(g,v(g.slice(g.length-3*c,g.length-2*c)).concat(v(g.slice(g.length-c,g.length))))}var l,w,x=l=w=0,_=(arguments.length===3?x=arguments[2]:arguments.length===4?(l=arguments[2],w=arguments[3]):arguments.length===5&&(x=arguments[2],l=arguments[3],w=arguments[4]),new s.default.Vector(f,y,x)),_=(this.immediateMode.geometry.vertices.push(_),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),_=(this.immediateMode.geometry.vertexColors.push(_[0],_[1],_[2],_[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(_[0],_[1],_[2],_[3]),this.textureMode!==h.IMAGE||this.isProcessingVertices||(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(l/=this._tex.width,w/=this._tex.height):this.userFillShader===void 0&&this.userStrokeShader===void 0&&this.userPointShader===void 0&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(l,w),this.immediateMode._bezierVertex[0]=f,this.immediateMode._bezierVertex[1]=y,this.immediateMode._bezierVertex[2]=x,this.immediateMode._quadraticVertex[0]=f,this.immediateMode._quadraticVertex[1]=y,this.immediateMode._quadraticVertex[2]=x,this},s.default.RendererGL.prototype.normal=function(f,y,g){return f instanceof s.default.Vector?this._currentNormal=f:this._currentNormal=new s.default.Vector(f,y,g),this},s.default.RendererGL.prototype.endShape=function(f,y,g,c,l,w){var x,_=6<arguments.length&&arguments[6]!==void 0?arguments[6]:1;return this.immediateMode.shapeMode===h.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.immediateMode.geometry.vertices.length===3&&this.immediateMode.shapeMode===h.TESS&&(this.immediateMode.shapeMode=h.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),x=this.isProcessingVertices=!1,this.immediateMode.shapeMode!==h.LINE_STRIP&&this.immediateMode.shapeMode!==h.LINES||(this.immediateMode.shapeMode=h.TRIANGLE_FAN,x=!0),this.immediateMode.shapeMode===h.QUADS?this.immediateMode.shapeMode=h.TRIANGLES:this.immediateMode.shapeMode===h.QUAD_STRIP&&(this.immediateMode.shapeMode=h.TRIANGLE_STRIP),this._doFill&&!x&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(_),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},s.default.RendererGL.prototype._processVertices=function(f){var y;this.immediateMode.geometry.vertices.length!==0&&(y=this._doStroke,f=f===h.CLOSE,y&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,f),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),y=this.immediateMode.shapeMode===h.TESS,f=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||y||f)&&this.immediateMode.shapeMode!==h.LINES&&this._tesselateShape())},s.default.RendererGL.prototype._calculateEdges=function(f,y,g){var c=[],l=0,w=this.immediateMode.contourIndices.slice(),x=0;switch(f){case h.TRIANGLE_STRIP:for(l=0;l<y.length-2;l++)c.push([l,l+1]),c.push([l,l+2]);c.push([l,l+1]);break;case h.TRIANGLE_FAN:for(l=1;l<y.length-1;l++)c.push([0,l]),c.push([l,l+1]);c.push([0,y.length-1]);break;case h.TRIANGLES:for(l=0;l<y.length-2;l+=3)c.push([l,l+1]),c.push([l+1,l+2]),c.push([l+2,l]);break;case h.LINES:for(l=0;l<y.length-1;l+=2)c.push([l,l+1]);break;case h.QUADS:for(l=0;l<y.length-5;l+=6)c.push([l,l+1]),c.push([l+1,l+2]),c.push([l+3,l+5]),c.push([l+4,l+5]);break;case h.QUAD_STRIP:for(l=0;l<y.length-2;l+=2)c.push([l,l+1]),c.push([l,l+2]),c.push([l+1,l+3]);c.push([l,l+1]);break;default:for(l=0;l<y.length;l++)l+1<y.length&&l+1!==w[0]?c.push([l,l+1]):((g||x)&&c.push([l,x]),0<w.length&&(x=w.shift()))}return f!==h.TESS&&g&&c.push([y.length-1,0]),c},s.default.RendererGL.prototype._tesselateShape=function(){for(var f=this,y=(this.immediateMode.shapeMode=h.TRIANGLES,[[]]),g=0;g<this.immediateMode.geometry.vertices.length;g++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===g&&(this.immediateMode.contourIndices.shift(),y.push([])),y[y.length-1].push(this.immediateMode.geometry.vertices[g].x,this.immediateMode.geometry.vertices[g].y,this.immediateMode.geometry.vertices[g].z,this.immediateMode.geometry.uvs[2*g],this.immediateMode.geometry.uvs[2*g+1],this.immediateMode.geometry.vertexColors[4*g],this.immediateMode.geometry.vertexColors[4*g+1],this.immediateMode.geometry.vertexColors[4*g+2],this.immediateMode.geometry.vertexColors[4*g+3],this.immediateMode.geometry.vertexNormals[g].x,this.immediateMode.geometry.vertexNormals[g].y,this.immediateMode.geometry.vertexNormals[g].z);for(var c,l=this._triangulate(y),w=this.immediateMode.geometry.vertices,x=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),_=0,T=l.length;_<T;_+=s.default.RendererGL.prototype.tessyVertexSize)x.push.apply(x,v(l.slice(_+5,_+9))),this.normal.apply(this,v(l.slice(_+9,_+12))),this.vertex.apply(this,v(l.slice(_,_+5)));this.geometryBuilder&&(c=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(E){return E.map(function(S){if(!c.has(S)){var P=w[S],N=f.immediateMode.geometry.vertices.findIndex(function(W){return P.x===W.x&&P.y===W.y&&P.z===W.z});if(N===-1){for(var C=1/0,D=0,L=0;L<f.immediateMode.geometry.vertices.length;L++){var I=f.immediateMode.geometry.vertices[L],B=P.x-I.x,F=P.y-I.y,I=P.z-I.z,B=B*B+F*F+I*I;B<C&&(C=B,D=L)}N=D}c.set(S,N)}return c.get(S)})})),this.immediateMode.geometry.vertexColors=x},s.default.RendererGL.prototype._drawImmediateFill=function(){var f,y=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1,g=this.GL,c=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,f=this._getImmediateFillShader(),this._setFillUniforms(f),!0),l=!1,w=void 0;try{for(var x,_=this.immediateMode.buffers.fill[Symbol.iterator]();!(c=(x=_.next()).done);c=!0)x.value._prepareBuffer(this.immediateMode.geometry,f)}catch(T){l=!0,w=T}finally{try{c||_.return==null||_.return()}finally{if(l)throw w}}if(f.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor,this.immediateMode.geometry.hasFillTransparency()),y===1)g.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{g.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,y)}catch{console.log(" p5.js says: Instancing is only supported in WebGL2 mode")}f.unbindShader()},s.default.RendererGL.prototype._drawImmediateStroke=function(){var f=this.GL,y=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),g=(this._setStrokeUniforms(y),!0),c=!1,l=void 0;try{for(var w,x=this.immediateMode.buffers.stroke[Symbol.iterator]();!(g=(w=x.next()).done);g=!0)w.value._prepareBuffer(this.immediateMode.geometry,y)}catch(_){c=!0,l=_}finally{try{g||x.return==null||x.return()}finally{if(c)throw l}}y.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,this.immediateMode.geometry.hasFillTransparency()),f.drawArrays(f.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),y.unbindShader()},s.default.RendererGL);u.default=d},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.find-index":158,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.map":175,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],340:[function(t,m,u){function a(i){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(i)}function p(i){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(d){return a(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":a(d)})(i)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(v=t("../core/main"))&&v.__esModule?v:{default:v},h=(t("./p5.RendererGL"),t("./p5.RenderBuffer"),function(i){if(i&&i.__esModule)return i;if(i===null||p(i)!=="object"&&typeof i!="function")return{default:i};var d=b();if(d&&d.has(i))return d.get(i);var f,y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in i){var c;Object.prototype.hasOwnProperty.call(i,f)&&((c=g?Object.getOwnPropertyDescriptor(i,f):null)&&(c.get||c.set)?Object.defineProperty(y,f,c):y[f]=i[f])}return y.default=i,d&&d.set(i,y),y}(t("../core/constants")));function b(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,b=function(){return i},i)}s.default.RendererGL.prototype.freeGeometry=function(i){i.gid?this._freeBuffers(i.gid):console.warn("The model you passed to freeGeometry does not have an id!")},s.default.RendererGL.prototype._initBufferDefaults=function(i){var d;return this._freeBuffers(i),1e3<Object.keys(this.retainedMode.geometry).length&&(d=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(d)),this.retainedMode.geometry[i]={}},s.default.RendererGL.prototype._freeBuffers=function(i){var d,f=this.retainedMode.geometry[i];function y(g){var c=!0,l=!1,w=void 0;try{for(var x,_=g[Symbol.iterator]();!(c=(x=_.next()).done);c=!0){var T=x.value;f[T.dst]&&(d.deleteBuffer(f[T.dst]),f[T.dst]=null)}}catch(E){l=!0,w=E}finally{try{c||_.return==null||_.return()}finally{if(l)throw w}}}f&&(delete this.retainedMode.geometry[i],d=this.GL,f.indexBuffer&&d.deleteBuffer(f.indexBuffer),y(this.retainedMode.buffers.stroke),y(this.retainedMode.buffers.fill))},s.default.RendererGL.prototype.createBuffers=function(l,d){var f,y,g,c=this.GL,l=this._initBufferDefaults(l),w=(l.model=d,l.indexBuffer);return d.faces.length?(w=w||(l.indexBuffer=c.createBuffer()),g=(y=(f=s.default.RendererGL.prototype._flatten(d.faces)).some(function(x){return 65535<x}))?Uint32Array:Uint16Array,this._bindBuffer(w,c.ELEMENT_ARRAY_BUFFER,f,g),l.indexBufferType=y?c.UNSIGNED_INT:c.UNSIGNED_SHORT,l.vertexCount=3*d.faces.length):(w&&(c.deleteBuffer(w),l.indexBuffer=null),l.vertexCount=d.vertices?d.vertices.length:0),l.lineVertexCount=d.lineVertices?d.lineVertices.length/3:0,l},s.default.RendererGL.prototype.drawBuffers=function(i){var d=this.GL,f=this.retainedMode.geometry[i];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[i].vertexCount){this._useVertexColor=0<f.model.vertexColors.length;var y=this._getRetainedFillShader(),g=(this._setFillUniforms(y),!0),c=!1,l=void 0;try{for(var w,x=this.retainedMode.buffers.fill[Symbol.iterator]();!(g=(w=x.next()).done);g=!0)w.value._prepareBuffer(f,y)}catch(P){c=!0,l=P}finally{try{g||x.return==null||x.return()}finally{if(c)throw l}}y.disableRemainingAttributes(),f.indexBuffer&&this._bindBuffer(f.indexBuffer,d.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor,f.model.hasFillTransparency()),this._drawElements(d.TRIANGLES,i),y.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<f.lineVertexCount){this._useLineColor=0<f.model.vertexStrokeColors.length;var _=this._getRetainedStrokeShader(),T=(this._setStrokeUniforms(_),!0),c=!1,l=void 0;try{for(var E,S=this.retainedMode.buffers.stroke[Symbol.iterator]();!(T=(E=S.next()).done);T=!0)E.value._prepareBuffer(f,_)}catch(C){c=!0,l=C}finally{try{T||S.return==null||S.return()}finally{if(c)throw l}}_.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,f.model.hasStrokeTransparency()),this._drawArrays(d.TRIANGLES,i),_.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(f),this},s.default.RendererGL.prototype.drawBuffersScaled=function(i,d,f,y){var g=this.uModelMatrix.copy();try{this.uModelMatrix.scale(d,f,y),this.drawBuffers(i)}finally{this.uModelMatrix=g}},s.default.RendererGL.prototype._drawArrays=function(i,d){return this.GL.drawArrays(i,0,this.retainedMode.geometry[d].lineVertexCount),this},s.default.RendererGL.prototype._drawElements=function(i,f){var f=this.retainedMode.geometry[f],y=this.GL;if(f.indexBuffer){if(this._pInst.webglVersion!==h.WEBGL2&&f.indexBufferType===y.UNSIGNED_INT&&!y.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");y.drawElements(y.TRIANGLES,f.vertexCount,f.indexBufferType,0)}else y.drawArrays(i||y.TRIANGLES,0,f.vertexCount)},s.default.RendererGL.prototype._drawPoints=function(i,d){var f=this.GL,y=this._getImmediatePointShader();this._setPointUniforms(y),this._bindBuffer(d,f.ARRAY_BUFFER,this._vToNArray(i),Float32Array,f.STATIC_DRAW),y.enableAttrib(y.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),f.drawArrays(f.Points,0,i.length),y.unbindShader()};var v=s.default.RendererGL;u.default=v},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"./p5.RendererGL":341,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],341:[function(L,m,u){function a(V){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X})(V)}function p(V){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(X){return a(X)}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":a(X)})(V)}L("core-js/modules/es.symbol"),L("core-js/modules/es.symbol.description"),L("core-js/modules/es.symbol.iterator"),L("core-js/modules/es.array.concat"),L("core-js/modules/es.array.copy-within"),L("core-js/modules/es.array.every"),L("core-js/modules/es.array.fill"),L("core-js/modules/es.array.flat"),L("core-js/modules/es.array.flat-map"),L("core-js/modules/es.array.from"),L("core-js/modules/es.array.includes"),L("core-js/modules/es.array.iterator"),L("core-js/modules/es.array.map"),L("core-js/modules/es.array.slice"),L("core-js/modules/es.array.some"),L("core-js/modules/es.array.unscopables.flat"),L("core-js/modules/es.array.unscopables.flat-map"),L("core-js/modules/es.map"),L("core-js/modules/es.object.assign"),L("core-js/modules/es.object.get-own-property-descriptor"),L("core-js/modules/es.object.get-prototype-of"),L("core-js/modules/es.object.to-string"),L("core-js/modules/es.reflect.construct"),L("core-js/modules/es.reflect.get"),L("core-js/modules/es.regexp.to-string"),L("core-js/modules/es.set"),L("core-js/modules/es.string.includes"),L("core-js/modules/es.string.iterator"),L("core-js/modules/es.typed-array.float32-array"),L("core-js/modules/es.typed-array.float64-array"),L("core-js/modules/es.typed-array.int16-array"),L("core-js/modules/es.typed-array.uint8-array"),L("core-js/modules/es.typed-array.uint16-array"),L("core-js/modules/es.typed-array.uint32-array"),L("core-js/modules/es.typed-array.copy-within"),L("core-js/modules/es.typed-array.every"),L("core-js/modules/es.typed-array.fill"),L("core-js/modules/es.typed-array.filter"),L("core-js/modules/es.typed-array.find"),L("core-js/modules/es.typed-array.find-index"),L("core-js/modules/es.typed-array.for-each"),L("core-js/modules/es.typed-array.includes"),L("core-js/modules/es.typed-array.index-of"),L("core-js/modules/es.typed-array.iterator"),L("core-js/modules/es.typed-array.join"),L("core-js/modules/es.typed-array.last-index-of"),L("core-js/modules/es.typed-array.map"),L("core-js/modules/es.typed-array.reduce"),L("core-js/modules/es.typed-array.reduce-right"),L("core-js/modules/es.typed-array.reverse"),L("core-js/modules/es.typed-array.set"),L("core-js/modules/es.typed-array.slice"),L("core-js/modules/es.typed-array.some"),L("core-js/modules/es.typed-array.sort"),L("core-js/modules/es.typed-array.subarray"),L("core-js/modules/es.typed-array.to-locale-string"),L("core-js/modules/es.typed-array.to-string"),L("core-js/modules/es.weak-map"),L("core-js/modules/web.dom-collections.iterator"),L("core-js/modules/es.symbol"),L("core-js/modules/es.symbol.description"),L("core-js/modules/es.symbol.iterator"),L("core-js/modules/es.array.concat"),L("core-js/modules/es.array.copy-within"),L("core-js/modules/es.array.every"),L("core-js/modules/es.array.fill"),L("core-js/modules/es.array.flat"),L("core-js/modules/es.array.flat-map"),L("core-js/modules/es.array.from"),L("core-js/modules/es.array.includes"),L("core-js/modules/es.array.iterator"),L("core-js/modules/es.array.map"),L("core-js/modules/es.array.slice"),L("core-js/modules/es.array.some"),L("core-js/modules/es.array.unscopables.flat"),L("core-js/modules/es.array.unscopables.flat-map"),L("core-js/modules/es.map"),L("core-js/modules/es.object.assign"),L("core-js/modules/es.object.to-string"),L("core-js/modules/es.set"),L("core-js/modules/es.string.includes"),L("core-js/modules/es.string.iterator"),L("core-js/modules/es.typed-array.float32-array"),L("core-js/modules/es.typed-array.float64-array"),L("core-js/modules/es.typed-array.int16-array"),L("core-js/modules/es.typed-array.uint8-array"),L("core-js/modules/es.typed-array.uint16-array"),L("core-js/modules/es.typed-array.uint32-array"),L("core-js/modules/es.typed-array.copy-within"),L("core-js/modules/es.typed-array.every"),L("core-js/modules/es.typed-array.fill"),L("core-js/modules/es.typed-array.filter"),L("core-js/modules/es.typed-array.find"),L("core-js/modules/es.typed-array.find-index"),L("core-js/modules/es.typed-array.for-each"),L("core-js/modules/es.typed-array.includes"),L("core-js/modules/es.typed-array.index-of"),L("core-js/modules/es.typed-array.iterator"),L("core-js/modules/es.typed-array.join"),L("core-js/modules/es.typed-array.last-index-of"),L("core-js/modules/es.typed-array.map"),L("core-js/modules/es.typed-array.reduce"),L("core-js/modules/es.typed-array.reduce-right"),L("core-js/modules/es.typed-array.reverse"),L("core-js/modules/es.typed-array.set"),L("core-js/modules/es.typed-array.slice"),L("core-js/modules/es.typed-array.some"),L("core-js/modules/es.typed-array.sort"),L("core-js/modules/es.typed-array.subarray"),L("core-js/modules/es.typed-array.to-locale-string"),L("core-js/modules/es.typed-array.to-string"),L("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.readPixelsWebGL=W,u.readPixelWebGL=G,u.default=void 0;var s=f(L("../core/main")),h=function(V){if(V&&V.__esModule)return V;if(V===null||p(V)!=="object"&&typeof V!="function")return{default:V};var X=d();if(X&&X.has(V))return X.get(V);var Q,se={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(Q in V){var A;Object.prototype.hasOwnProperty.call(V,Q)&&((A=M?Object.getOwnPropertyDescriptor(V,Q):null)&&(A.get||A.set)?Object.defineProperty(se,Q,A):se[Q]=V[Q])}return se.default=V,X&&X.set(V,se),se}(L("../core/constants")),b=f(L("./GeometryBuilder")),v=f(L("libtess")),i=(L("./p5.Shader"),L("./p5.Camera"),L("../core/p5.Renderer"),L("./p5.Matrix"),L("./p5.Framebuffer"),L("path"),L("./p5.Texture"));function d(){var V;return typeof WeakMap!="function"?null:(V=new WeakMap,d=function(){return V},V)}function f(V){return V&&V.__esModule?V:{default:V}}function y(V){return function(X){if(Array.isArray(X)){for(var Q=0,se=new Array(X.length);Q<X.length;Q++)se[Q]=X[Q];return se}}(V)||function(X){if(Symbol.iterator in Object(X)||Object.prototype.toString.call(X)==="[object Arguments]")return Array.from(X)}(V)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(V,X){for(var Q=0;Q<X.length;Q++){var se=X[Q];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(V,se.key,se)}}function c(V,X,Q){return(c=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(z,M,A){var z=function($,Z){for(;!Object.prototype.hasOwnProperty.call($,Z)&&($=_($))!==null;);return $}(z,M);if(z)return(z=Object.getOwnPropertyDescriptor(z,M)).get?z.get.call(A):z.value})(V,X,Q||V)}function l(V,X){return(l=Object.setPrototypeOf||function(Q,se){return Q.__proto__=se,Q})(V,X)}function w(V){return function(){var X,Q,se=_(V);return X=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(X=_(this).constructor,Reflect.construct(se,arguments,X)):se.apply(this,arguments),se=this,!(Q=X)||p(Q)!=="object"&&typeof Q!="function"?x(se):Q}}function x(V){if(V===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V}function _(V){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(X){return X.__proto__||Object.getPrototypeOf(X)})(V)}function T(V,X,Q){X in V?Object.defineProperty(V,X,{value:Q,enumerable:!0,configurable:!0,writable:!0}):V[X]=Q}function E(V,X){D+="#define STROKE_CAP_".concat(V," ").concat(X,`
`),N[h[V]]=X}function S(V,X){D+="#define STROKE_JOIN_".concat(V," ").concat(X,`
`),C[h[V]]=X}var P,N={},C={},D="",L=(E("ROUND",0),E("PROJECT",1),E("SQUARE",2),S("ROUND",0),S("MITER",1),S("BEVEL",2),`#define PI 3.141592

precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];
uniform mat3 uCameraRotation;
uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;
uniform float uMetallic;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

// setting from  _setImageLightUniforms()
// boolean to initiate the calculateImageDiffuse and calculateImageSpecular
uniform bool uUseImageLight;
// texture for use in calculateImageDiffuse
uniform sampler2D environmentMapDiffused;
// texture for use in calculateImageSpecular
uniform sampler2D environmentMapSpecular;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector, float shininess, float metallic) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  float specularIntensity = mix(1.0, 0.4, metallic);
  float diffuseIntensity = mix(1.0, 0.1, metallic);
  if (uSpecular)
    lr.specular = (_phongSpecular(lightDir, viewDirection, normal, shininess)) * specularIntensity;
    lr.diffuse = _lambertDiffuse(lightDir, normal) * diffuseIntensity;
  return lr;
}

// converts the range of "value" from [min1 to max1] to [min2 to max2]
float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

vec2 mapTextureToNormal( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );
  return angles;
}


vec3 calculateImageDiffuse(vec3 vNormal, vec3 vViewPosition, float metallic){
  // make 2 separate builds 
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position
  vec3 worldNormal = normalize(vNormal * uCameraRotation);
  vec2 newTexCoor = mapTextureToNormal( worldNormal );
  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(smoothstep(vec3(0.0), vec3(1.0), texture.xyz), vec3(0.0), metallic);
}

vec3 calculateImageSpecular(vec3 vNormal, vec3 vViewPosition, float shininess, float metallic){
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);
  vec3 worldNormal = normalize(vNormal);
  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );
  vec3 R = reflect(lightDirection, worldNormal) * uCameraRotation;
  vec2 newTexCoor = mapTextureToNormal( R );
#ifdef WEBGL2
  // In p5js the range of shininess is >= 1,
  // Therefore roughness range will be ([0,1]*8)*20 or [0, 160]
  // The factor of 8 is because currently the getSpecularTexture
  // only calculated 8 different levels of roughness
  // The factor of 20 is just to spread up this range so that,
  // [1, max] of shininess is converted to [0,160] of roughness
  float roughness = 20. / shininess;
  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, roughness * 8.);
#else
  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);
#endif
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(
    pow(outColor.xyz, vec3(10)),
    pow(outColor.xyz, vec3(1.2)),
    metallic 
  );
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  float shininess,
  float metallic,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  if( uUseImageLight ){
    totalDiffuse += calculateImageDiffuse(normal, modelPosition, metallic);
    totalSpecular += calculateImageSpecular(normal, modelPosition, shininess, metallic);
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`),F={sphereMappingFrag:`#define PI 3.141592

precision highp float;
  
uniform sampler2D uSampler;
uniform mat3 uNewNormalMatrix;
uniform float uFovY;
uniform float uAspect;

varying vec2 vTexCoord;
  
void main() {
    float uFovX = uFovY * uAspect; 
    vec4 newTexColor = texture2D(uSampler, vTexCoord);
    float angleY = mix(uFovY/2.0,  -uFovY/2.0, vTexCoord.y);
    float angleX = mix(uFovX/2.0, -uFovX/2.0, vTexCoord.x);
    vec3 rotatedNormal = vec3( angleX, angleY, 1.0 );
    rotatedNormal = uNewNormalMatrix * normalize(rotatedNormal);
    float temp = rotatedNormal.z;
    rotatedNormal.z = rotatedNormal.x;
    rotatedNormal.x = -temp;
    vec2 suv;
    suv.y = 0.5 + 0.5 * (-rotatedNormal.y);
    suv.x = atan(rotatedNormal.z, rotatedNormal.x) / (2.0 * PI) + 0.5;
    newTexColor = texture2D(uSampler, suv.xy);
    gl_FragColor = newTexColor;
}
`,immediateVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

OUT vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

OUT vec3 vVertexNormal;
OUT highp vec2 vVertTexCoord;
OUT vec4 vColor;

void main(void) {
  HOOK_beforeVertex();
  vec4 positionVec4 = vec4(HOOK_getWorldPosition(
    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz
  ), 1.);

  gl_Position = uProjectionMatrix * positionVec4;

  vVertexNormal = HOOK_getWorldNormal(normalize(uNormalMatrix * HOOK_getLocalNormal(aNormal)));
  vVertTexCoord = HOOK_getUV(aTexCoord);
  vColor = HOOK_getVertexColor(uUseVertexColor ? aVertexColor : uMaterialColor);
  HOOK_afterVertex();
}
`,normalFrag:`IN vec3 vVertexNormal;
void main(void) {
  HOOK_beforeFragment();
  OUT_COLOR = HOOK_getFinalColor(vec4(vVertexNormal, 1.0));
  HOOK_afterFragment();
}
`,basicFrag:`IN vec4 vColor;
void main(void) {
  HOOK_beforeFragment();
  OUT_COLOR = HOOK_getFinalColor(vec4(vColor.rgb, 1.) * vColor.a);
  HOOK_afterFragment();
}
`,lightVert:L+`// include lighting.glgl

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT highp vec2 vVertTexCoord;
OUT vec3 vDiffuseColor;
OUT vec3 vSpecularColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

IN highp vec2 vVertTexCoord;
IN vec3 vDiffuseColor;
IN vec3 vSpecularColor;
IN vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    OUT_COLOR = vColor;
  }
  else {
    vec4 baseColor = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);
  }
}
`,phongVert:`precision highp int;

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT vec3 vNormal;
OUT vec2 vTexCoord;
OUT vec3 vViewPosition;
OUT vec3 vAmbientColor;
OUT vec4 vColor;

void main(void) {
  HOOK_beforeVertex();
  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(
    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz
  ), 1.);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = HOOK_getWorldNormal(uNormalMatrix * HOOK_getLocalNormal(aNormal));
  vTexCoord = HOOK_getUV(aTexCoord);

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = HOOK_getVertexColor((uUseVertexColor ? aVertexColor : uMaterialColor));
  HOOK_afterVertex();
}
`,phongFrag:L+`// include lighting.glsl
precision highp int;

uniform bool uHasSetAmbient;
uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

IN vec3 vNormal;
IN vec2 vTexCoord;
IN vec3 vViewPosition;
IN vec3 vAmbientColor;
IN vec4 vColor;

struct ColorComponents {
  vec3 baseColor;
  float opacity;
  vec3 ambientColor;
  vec3 specularColor;
  vec3 diffuse;
  vec3 ambient;
  vec3 specular;
  vec3 emissive;
};

struct Inputs {
  vec3 normal;
  vec2 texCoord;
  vec3 ambientLight;
  vec3 ambientMaterial;
  vec3 specularMaterial;
  vec3 emissiveMaterial;
  vec4 color;
  float shininess;
  float metalness;
};

void main(void) {
  HOOK_beforeFragment();

  Inputs inputs;
  inputs.normal = normalize(vNormal);
  inputs.texCoord = vTexCoord;
  inputs.ambientLight = vAmbientColor;
  inputs.color = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
  inputs.shininess = uShininess;
  inputs.metalness = uMetallic;
  inputs.ambientMaterial = uHasSetAmbient ? uAmbientMatColor.rgb : inputs.color.rgb;
  inputs.specularMaterial = uSpecularMatColor.rgb;
  inputs.emissiveMaterial = uEmissiveMatColor.rgb;
  inputs = HOOK_getPixelInputs(inputs);

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, inputs.normal, inputs.shininess, inputs.metalness, diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec2 texCoord = inputs.texCoord;
  vec4 baseColor = inputs.color;
  ColorComponents c;
  c.opacity = baseColor.a;
  c.baseColor = baseColor.rgb;
  c.ambientColor = inputs.ambientMaterial;
  c.specularColor = inputs.specularMaterial;
  c.diffuse = diffuse;
  c.ambient = inputs.ambientLight;
  c.specular = specular;
  c.emissive = inputs.emissiveMaterial;
  OUT_COLOR = HOOK_getFinalColor(HOOK_combineColors(c));
  HOOK_afterFragment();
}
`,fontVert:`IN vec3 aPosition;
IN vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

OUT vec2 vTexCoord;
OUT float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;
  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;
  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;
  vec2 pixelScale = vec2(
    1. / length(newOrigin - newDX),
    1. / length(newOrigin - newDY)
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:`#ifndef WEBGL2
#extension GL_OES_standard_derivatives : enable
#endif

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

IN vec2 vTexCoord;

// some helper functions
int ROUND(float v) { return ifloor(v + 0.5); }
ivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = ROUND(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  OUT_COLOR *= saturate(max(antialias, cover));
}
`,lineVert:D+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision highp int;
precision highp float;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

IN vec4 aPosition;
IN vec3 aTangentIn;
IN vec3 aTangentOut;
IN float aSide;
IN vec4 aVertexColor;

OUT vec4 vColor;
OUT vec2 vTangent;
OUT vec2 vCenter;
OUT vec2 vPosition;
OUT float vMaxDist;
OUT float vCap;
OUT float vJoin;
OUT float vStrokeWeight;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  HOOK_beforeVertex();
  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 localPosition = vec4(HOOK_getLocalPosition(aPosition.xyz), 1.);
  vec4 posp = vec4(HOOK_getWorldPosition((uModelViewMatrix * localPosition).xyz), 1.);
  vec4 posqIn = posp + uModelViewMatrix * vec4(aTangentIn, 0);
  vec4 posqOut = posp + uModelViewMatrix * vec4(aTangentOut, 0);
  float strokeWeight = HOOK_getStrokeWeight(uStrokeWeight);
  vStrokeWeight = strokeWeight;

  float facingCamera = pow(
    // The word space tangent's z value is 0 if it's facing the camera
    abs(normalize(posqIn-posp).z),

    // Using pow() here to ramp \`facingCamera\` up from 0 to 1 really quickly
    // so most lines get scaled and don't get clipped
    0.25
  );

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // A mix of scaling and offsetting is used based on distance
  // Discussion here:
  // https://github.com/processing/p5.js/issues/7200 

  // using a scale <1 moves the lines towards nearby camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  float zDistance = -posp.z; 
  float distanceFactor = smoothstep(0.0, 800.0, zDistance); 
  
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  float scale = mix(1., 0.995, facingCamera);
  float dynamicScale = mix(scale, 1.0, distanceFactor); // Closer = more scale, farther = less

  posp.xyz = posp.xyz * dynamicScale;
  posqIn.xyz = posqIn.xyz * dynamicScale;
  posqOut.xyz = posqOut.xyz * dynamicScale;

  // Moving vertices slightly toward camera when far away 
  // https://github.com/processing/p5.js/issues/6956 
  float zOffset = mix(0., -1., facingCamera);
  float dynamicZAdjustment = mix(0.0, zOffset, distanceFactor); // Closer = less zAdjustment, farther = more

  posp.z -= dynamicZAdjustment;
  posqIn.z -= dynamicZAdjustment;
  posqOut.z -= dynamicZAdjustment;
  
  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = HOOK_getLineCenter(p.xy);

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)

    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.
    // Multiplying again by its sign here negates the flip to get just the scale.
    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * strokeWeight / 2.),
          tangentIn,
          c + (side * normalOut * strokeWeight / 2.),
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * strokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * strokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * strokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * strokeWeight / 2.));
    } else {
      vMaxDist = strokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      strokeWeight * 0.5;
    vMaxDist = strokeWeight / 2.;
  }
  vPosition = HOOK_getLinePosition(vCenter + offset);

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
  
  vColor = HOOK_getVertexColor(uUseLineColor ? aVertexColor : uMaterialColor);
  HOOK_afterVertex();
}
`,lineFrag:D+`precision highp int;
precision highp float;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;

IN vec4 vColor;
IN vec2 vTangent;
IN vec2 vCenter;
IN vec2 vPosition;
IN float vStrokeWeight;
IN float vMaxDist;
IN float vCap;
IN float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

struct Inputs {
  vec4 color;
  vec2 tangent;
  vec2 center;
  vec2 position;
  float strokeWeight;
};

void main() {
  HOOK_beforeFragment();

  Inputs inputs;
  inputs.color = vColor;
  inputs.tangent = vTangent;
  inputs.center = vCenter;
  inputs.position = vPosition;
  inputs.strokeWeight = vStrokeWeight;
  inputs = HOOK_getPixelInputs(inputs);

  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      HOOK_shouldDiscard(dot(inputs.position - inputs.center, inputs.tangent) > 0.)
    ) {
      discard;
    // Use full area for PROJECT
    } else if (HOOK_shouldDiscard(false)) {
      discard;
    }
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-inputs.tangent.y, inputs.tangent.x);
      if (HOOK_shouldDiscard(abs(dot(inputs.position - inputs.center, normal)) > vMaxDist)) {
        discard;
      }
    // Use full area for MITER
    } else if (HOOK_shouldDiscard(false)) {
      discard;
    }
  }
  OUT_COLOR = HOOK_getFinalColor(vec4(inputs.color.rgb, 1.) * inputs.color.a);
  HOOK_afterFragment();
}
`,pointVert:`IN vec3 aPosition;
uniform float uPointSize;
OUT float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

void main() {
  HOOK_beforeVertex();
  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(
    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz
  ), 1.);
  gl_Position = uProjectionMatrix * viewModelPosition;  

  float pointSize = HOOK_getPointSize(uPointSize);

	gl_PointSize = pointSize;
	vStrokeWeight = pointSize;
  HOOK_afterVertex();
}
`,pointFrag:`precision mediump int;
uniform vec4 uMaterialColor;
IN float vStrokeWeight;

void main(){
  HOOK_beforeFragment();
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(HOOK_shouldDiscard(mask > 0.98)){
    discard;
  }

  OUT_COLOR = HOOK_getFinalColor(vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a);
  HOOK_afterFragment();
}
`,imageLightVert:`precision highp float;
attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

varying vec3 localPos;
varying vec3 vWorldNormal;
varying vec3 vWorldPosition;
varying vec2 vTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

void main() {
  // Multiply the position by the matrix.
  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;  
  
  // orient the normals and pass to the fragment shader
  vWorldNormal = uNormalMatrix * aNormal;
  
  // send the view position to the fragment shader
  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;
  
  localPos = vWorldPosition;
  vTexCoord = aTexCoord;
}


/*
in the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.
*/
`,imageLightDiffusedFrag:`precision highp float;
varying vec3 localPos;

// the HDR cubemap converted (can be from an equirectangular environment map.)
uniform sampler2D environmentMap;
varying vec2 vTexCoord;

const float PI = 3.14159265359;

vec2 nTOE( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( phi, theta );
  return angles;
}

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

void main()
{   	 
	// the sample direction equals the hemisphere's orientation
  float phi = vTexCoord.x * 2.0 * PI;
  float theta = vTexCoord.y * PI;
  float x = sin(theta) * cos(phi);
  float y = sin(theta) * sin(phi);
  float z = cos(theta);
  vec3 normal = vec3( x, y, z);

	// Discretely sampling the hemisphere given the integral's
  // spherical coordinates translates to the following fragment code:
	vec3 irradiance = vec3(0.0);  
	vec3 up	= vec3(0.0, 1.0, 0.0);
	vec3 right = normalize(cross(up, normal));
	up = normalize(cross(normal, right));

	//  We specify a fixed sampleDelta delta value to traverse
  // the hemisphere; decreasing or increasing the sample delta
  // will increase or decrease the accuracy respectively.
	const float sampleDelta = 0.100;
	float nrSamples = 0.0;
  float randomOffset = random(gl_FragCoord.xy) * sampleDelta;
	for(float rawPhi = 0.0; rawPhi < 2.0 * PI; rawPhi += sampleDelta)
	{
    float phi = rawPhi + randomOffset;
    for(float rawTheta = 0.0; rawTheta < ( 0.5 ) * PI; rawTheta += sampleDelta)
    {
      float theta = rawTheta + randomOffset;
      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance
      float x = sin(theta) * cos(phi);
      float y = sin(theta) * sin(phi);
      float z = cos(theta);
      vec3 tangentSample = vec3( x, y, z);
      
      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;
        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);
      nrSamples++;
    }
	}
	// divide by the total number of samples taken, giving us the average sampled irradiance.
	irradiance = PI * irradiance * (1.0 / float(nrSamples )) ;
  
 
	gl_FragColor = vec4(irradiance, 1.0);
}`,imageLightSpecularFrag:`precision highp float;\r
varying vec3 localPos;\r
varying vec2 vTexCoord;\r
\r
// our texture\r
uniform sampler2D environmentMap;\r
uniform float roughness;\r
\r
const float PI = 3.14159265359;\r
\r
float VanDerCorput(int bits);\r
vec2 HammersleyNoBitOps(int i, int N);\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r
\r
\r
vec2 nTOE( vec3 v ){\r
  // x = r sin(phi) cos(theta)   \r
  // y = r cos(phi)  \r
  // z = r sin(phi) sin(theta)\r
  float phi = acos( v.y );\r
  // if phi is 0, then there are no x, z components\r
  float theta = 0.0;\r
  // else \r
  theta = acos(v.x / sin(phi));\r
  float sinTheta = v.z / sin(phi);\r
  if (sinTheta < 0.0) {\r
    // Turn it into -theta, but in the 0-2PI range\r
    theta = 2.0 * PI - theta;\r
  }\r
  theta = theta / (2.0 * 3.14159);\r
  phi = phi / 3.14159 ;\r
  \r
  vec2 angles = vec2( phi, theta );\r
  return angles;\r
}\r
\r
\r
void main(){\r
  const int SAMPLE_COUNT = 400; // 4096\r
  int lowRoughnessLimit = int(pow(2.0,(roughness+0.1)*20.0));\r
  float totalWeight = 0.0;\r
  vec3 prefilteredColor = vec3(0.0);\r
  float phi = vTexCoord.x * 2.0 * PI;\r
  float theta = vTexCoord.y * PI;\r
  float x = sin(theta) * cos(phi);\r
  float y = sin(theta) * sin(phi);\r
  float z = cos(theta);\r
  vec3 N = vec3(x,y,z);\r
  vec3 V = N;\r
  for (int i = 0; i < SAMPLE_COUNT; ++i)\r
  {\r
    // break at smaller sample numbers for low roughness levels\r
    if(i == lowRoughnessLimit)\r
    {\r
      break;\r
    }\r
    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r
    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r
    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r
\r
    float NdotL = max(dot(N, L), 0.0);\r
    if (NdotL > 0.0)\r
    {\r
      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r
      totalWeight += NdotL;\r
    }\r
  }\r
  prefilteredColor = prefilteredColor / totalWeight;\r
\r
  gl_FragColor = vec4(prefilteredColor, 1.0);\r
}\r
\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r
  float a = roughness * roughness;\r
\r
  float phi = 2.0 * PI * Xi.x;\r
  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r
  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r
  // from spherical coordinates to cartesian coordinates\r
  vec3 H;\r
  H.x = cos(phi) * sinTheta;\r
  H.y = sin(phi) * sinTheta;\r
  H.z = cosTheta;\r
\r
  // from tangent-space vector to world-space sample vector\r
  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r
  vec3 tangent = normalize(cross(up, N));\r
  vec3 bitangent = cross(N, tangent);\r
\r
  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r
  return normalize(sampleVec);\r
}\r
\r
\r
float VanDerCorput(int n, int base)\r
{\r
#ifdef WEBGL2\r
\r
    uint bits = uint(n);\r
    bits = (bits << 16u) | (bits >> 16u);\r
    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r
    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r
    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r
    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r
    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r
\r
#else\r
\r
  float invBase = 1.0 / float(base);\r
  float denom = 1.0;\r
  float result = 0.0;\r
\r
\r
  for (int i = 0; i < 32; ++i)\r
  {\r
        if (n > 0)\r
        {\r
        denom = mod(float(n), 2.0);\r
        result += denom * invBase;\r
        invBase = invBase / 2.0;\r
        n = int(float(n) / 2.0);\r
        }\r
  }\r
\r
\r
  return result;\r
\r
#endif\r
}\r
\r
vec2 HammersleyNoBitOps(int i, int N)\r
{\r
  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r
}\r
`},I=F.sphereMappingFrag;for(P in F)F[P]=`#ifdef WEBGL2

#define IN in
#define OUT out

#ifdef FRAGMENT_SHADER
out vec4 outColor;
#define OUT_COLOR outColor
#endif
#define TEXTURE texture

#else

#ifdef FRAGMENT_SHADER
#define IN varying
#else
#define IN attribute
#endif
#define OUT varying
#define TEXTURE texture2D

#ifdef FRAGMENT_SHADER
#define OUT_COLOR gl_FragColor
#endif

#endif
`+F[P];T(L={},h.GRAY,`precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 tex = texture2D(tex0, vTexCoord);
  float gray = luma(tex.rgb);
  gl_FragColor = vec4(gray, gray, gray, tex.a);
}
`),T(L,h.ERODE,`// Reduces the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the darkest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum < lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),T(L,h.DILATE,`// Increase the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the brightest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum > lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),T(L,h.BLUR,`precision highp float;

// Two-pass blur filter, unweighted kernel.
// See also a similar blur at Adam Ferriss' repo of shader examples:
// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag


uniform sampler2D tex0;
varying vec2 vTexCoord;
uniform vec2 direction;
uniform vec2 canvasSize;
uniform float radius;

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

// This isn't a real Gaussian weight, it's a quadratic weight. It's what the
// CPU mode's blur uses though, so we also use it here to match.
float quadWeight(float x, float e) {
  return pow(e-abs(x), 2.);
}

void main(){
  vec2 uv = vTexCoord;

  // A reasonable maximum number of samples
  const float maxSamples = 64.0;

  float numSamples = floor(7. * radius);
  if (fract(numSamples / 2.) == 0.) {
    numSamples++;
  }
  vec4 avg = vec4(0.0);
  float total = 0.0;

  // Calculate the spacing to avoid skewing if numSamples > maxSamples
  float spacing = 1.0;
  if (numSamples > maxSamples) {
    spacing = numSamples / maxSamples;
    numSamples = maxSamples;
  }

  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));
  for (float i = 0.0; i < maxSamples; i++) {
    if (i >= numSamples) break;

    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;
    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;
    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);

    avg += weight * texture2D(tex0, sampleCoord);
    total += weight;
  }

  avg /= total;
  gl_FragColor = avg;
}
`),T(L,h.POSTERIZE,`// Limit color space for a stylized cartoon / poster effect

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

vec3 quantize(vec3 color, float n) {
  // restrict values to N options/bins
  // and floor each channel to nearest value
  //
  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0
  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)

  color = color * n;
  color = floor(color);
  color = color / (n - 1.0);
  return color;
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);

  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);

  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);
}
`),T(L,h.OPAQUE,`// Set alpha channel to entirely opaque

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  gl_FragColor = vec4(color.rgb / color.a, 1.0);
}
`),T(L,h.INVERT,`// Set each pixel to inverse value
// Note that original INVERT does not change the opacity, so this follows suit

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
vec4 color = texture2D(tex0, vTexCoord);
vec3 origColor = color.rgb / color.a;
vec3 invertedColor = vec3(1.0) - origColor;
gl_FragColor = vec4(invertedColor * color.a, color.a);
}
`),T(L,h.THRESHOLD,`// Convert pixels to either white or black, 
// depending on if their luma is above or below filterParameter

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float gray = luma(color.rgb / color.a);
  // floor() used to match src/image/filters.js
  float threshold = floor(filterParameter * 255.0) / 255.0;
  float blackOrWhite = step(threshold, gray);
  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);
}
`);var B=L;function W(V,X,he,se,M,A,z,$,Z,te){var ie=X.getParameter(X.FRAMEBUFFER_BINDING),he=(X.bindFramebuffer(X.FRAMEBUFFER,he),$===X.RGBA?4:3),oe=A*z*he,ce=Z===X.UNSIGNED_BYTE?Uint8Array:Float32Array;if(V instanceof ce&&V.length===oe||(V=new ce(oe)),X.readPixels(se,te?te-M-z:M,A,z,$,Z,V),X.bindFramebuffer(X.FRAMEBUFFER,ie),te)for(var fe=Math.floor(z/2),ee=new ce(A*he),de=0;de<fe;de++){var ye=de*A*4,we=(z-de-1)*A*4;ee.set(V.subarray(ye,ye+4*A)),V.copyWithin(ye,we,we+4*A),V.set(ee,we)}return V}function G(V,Z,Q,se,M,A,z){var $=V.getParameter(V.FRAMEBUFFER_BINDING),Z=(V.bindFramebuffer(V.FRAMEBUFFER,Z),M===V.RGBA?4:3),Z=new(A===V.UNSIGNED_BYTE?Uint8Array:Float32Array)(Z);return V.readPixels(Q,z?z-se-1:se,1,1,M,A,Z),V.bindFramebuffer(V.FRAMEBUFFER,$),Array.from(Z)}s.default.prototype.setAttributes=function(V,X){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var Q=!0;if(X!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[V]!==X&&(this._glAttributes[V]=X,Q=!1)):V instanceof Object&&this._glAttributes!==V&&(this._glAttributes=V,Q=!1),this._renderer.isP3D&&!Q){if(!this._setupDone){for(var se in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(se))return void s.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},s.default.RendererGL=function(V){var X=se;if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function");X.prototype=Object.create(V&&V.prototype,{constructor:{value:X,writable:!0,configurable:!0}}),V&&l(X,V);var Q=w(se);function se(M,A,z,$){if(this instanceof se)return(M=Q.call(this,M,A,z))._setAttributeDefaults(A),M._initContext(),M.isP3D=!0,M.geometryBuilder=void 0,M.GL=M.drawingContext,M._pInst._setProperty("drawingContext",M.drawingContext),M._isErasing=!1,M._clipDepths=[],M._isClipApplied=!1,M._stencilTestOn=!1,M._enableLighting=!1,M.ambientLightColors=[],M.mixedAmbientLight=[],M.mixedSpecularColor=[],M.specularColors=[1,1,1],M.directionalLightDirections=[],M.directionalLightDiffuseColors=[],M.directionalLightSpecularColors=[],M.pointLightPositions=[],M.pointLightDiffuseColors=[],M.pointLightSpecularColors=[],M.spotLightPositions=[],M.spotLightDirections=[],M.spotLightDiffuseColors=[],M.spotLightSpecularColors=[],M.spotLightAngle=[],M.spotLightConc=[],M.activeImageLight=null,M.diffusedTextures=new Map,M.specularTextures=new Map,M.drawMode=h.FILL,M.curFillColor=M._cachedFillStyle=[1,1,1,1],M.curAmbientColor=M._cachedFillStyle=[1,1,1,1],M.curSpecularColor=M._cachedFillStyle=[0,0,0,0],M.curEmissiveColor=M._cachedFillStyle=[0,0,0,0],M.curStrokeColor=M._cachedStrokeStyle=[0,0,0,1],M.curBlendMode=h.BLEND,M.preEraseBlend=void 0,M._cachedBlendMode=void 0,M.webglVersion===h.WEBGL2?M.blendExt=M.GL:M.blendExt=M.GL.getExtension("EXT_blend_minmax"),M._isBlending=!1,M._hasSetAmbient=!1,M._useSpecularMaterial=!1,M._useEmissiveMaterial=!1,M._useNormalMaterial=!1,M._useShininess=1,M._useMetalness=0,M._useLineColor=!1,M._useVertexColor=!1,M.registerEnabled=new Set,M._tint=[255,255,255,255],M.constantAttenuation=1,M.linearAttenuation=0,M.quadraticAttenuation=0,M.uModelMatrix=new s.default.Matrix,M.uViewMatrix=new s.default.Matrix,M.uMVMatrix=new s.default.Matrix,M.uPMatrix=new s.default.Matrix,M.uNMatrix=new s.default.Matrix("mat3"),M.curMatrix=new s.default.Matrix("mat3"),M._currentNormal=new s.default.Vector(0,0,1),M._curCamera=new s.default.Camera(x(M)),M._curCamera._computeCameraDefaultSettings(),M._curCamera._setDefaultCamera(),M.filterCamera=new s.default.Camera(x(M)),M.filterCamera._computeCameraDefaultSettings(),M.filterCamera._setDefaultCamera(),M.prevTouches=[],M.zoomVelocity=0,M.rotateVelocity=new s.default.Vector(0,0),M.moveVelocity=new s.default.Vector(0,0),M.executeZoom=!1,M.executeRotateAndMove=!1,M.specularShader=void 0,M.sphereMapping=void 0,M.diffusedShader=void 0,M._defaultLightShader=void 0,M._defaultImmediateModeShader=void 0,M._defaultNormalShader=void 0,M._defaultColorShader=void 0,M._defaultPointShader=void 0,M.userFillShader=void 0,M.userStrokeShader=void 0,M.userPointShader=void 0,M.retainedMode={geometry:{},buffers:{stroke:[new s.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",x(M)),new s.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",x(M)),new s.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",x(M)),new s.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",x(M)),new s.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",x(M))],fill:[new s.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",x(M),M._vToNArray),new s.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",x(M),M._vToNArray),new s.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",x(M)),new s.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",x(M)),new s.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",x(M),M._flatten)],text:[new s.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",x(M),M._vToNArray),new s.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",x(M),M._flatten)]}},M.immediateMode={geometry:new s.default.Geometry,shapeMode:h.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new s.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",x(M),M._vToNArray),new s.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",x(M),M._vToNArray),new s.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",x(M)),new s.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",x(M)),new s.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",x(M),M._flatten)],stroke:[new s.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",x(M)),new s.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",x(M)),new s.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",x(M)),new s.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",x(M)),new s.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",x(M))],point:M.GL.createBuffer()}},M.pointSize=5,M.curStrokeWeight=1,M.curStrokeCap=h.ROUND,M.curStrokeJoin=h.ROUND,M.textures=new Map,M.framebuffers=new Set,M.activeFramebuffers=[],M.filterShader=void 0,M.filterLayer=void 0,M.filterLayerTemp=void 0,M.defaultFilterShaders={},M.textureMode=h.IMAGE,M.textureWrapX=h.CLAMP,M.textureWrapY=h.CLAMP,M._tex=null,M._curveTightness=6,M._lookUpTableBezier=[],M._lookUpTableQuadratic=[],M._lutBezierDetail=0,M._lutQuadraticDetail=0,M.isProcessingVertices=!1,M._tessy=M._initTessy(),M.fontInfos={},M._curShader=void 0,M;throw new TypeError("Cannot call a class as a function")}return X=se,(V=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new b.default(this)}},{key:"endGeometry",value:function(){var M;if(this.geometryBuilder)return M=this.geometryBuilder.finish(),this.geometryBuilder=void 0,M;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(M){return this.beginGeometry(),M(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(M){var A={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};M._glAttributes===null?M._glAttributes=A:M._glAttributes=Object.assign(A,M._glAttributes)}},{key:"_initContext",value:function(){if(this._pInst._glAttributes.version!==1&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?h.WEBGL2:h.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),this.drawingContext===null)throw new Error("Error creating webgl context");var M=this.drawingContext;M.enable(M.DEPTH_TEST),M.depthFunc(M.LEQUAL),M.viewport(0,0,M.drawingBufferWidth,M.drawingBufferHeight),M.pixelStorei(M.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_getParam",value:function(){var M=this.drawingContext;return M.getParameter(M.MAX_TEXTURE_SIZE)}},{key:"_adjustDimensions",value:function(M,A){this._maxTextureSize||(this._maxTextureSize=this._getParam());var $=this._maxTextureSize,$=(s.default.prototype._maxAllowedPixelDimensions,Math.floor($/this.pixelDensity())),z=Math.min(M,$),$=Math.min(A,$);return z===M&&$===A||console.warn("Warning: The requested width/height exceeds hardware limits. "+"Adjusting dimensions to width: ".concat(z,", height: ").concat($,".")),{adjustedWidth:z,adjustedHeight:$}}},{key:"_resetContext",value:function(M,A){var z,$=this.width,Z=this.height,ie=this.canvas.id,te=this._pInst instanceof s.default.Graphics,ie=(te?((z=this._pInst).canvas.parentNode.removeChild(z.canvas),z.canvas=document.createElement("canvas"),(z._pInst._userNode||document.body).appendChild(z.canvas),s.default.Element.call(z,z.canvas,z._pInst),z.width=$,z.height=Z):((z=this.canvas)&&z.parentNode.removeChild(z),(z=document.createElement("canvas")).id=ie,(this._pInst._userNode||document.body).appendChild(z),this._pInst.canvas=z,this.canvas=z),new s.default.RendererGL(this._pInst.canvas,this._pInst,!te));this._pInst._setProperty("_renderer",ie),ie.resize($,Z),ie._applyDefaults(),te||this._pInst._elements.push(ie),typeof A=="function"&&setTimeout(function(){A.apply(window._renderer,M)},0)}},{key:"_update",value:function(){this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var $=($=this._pInst).color.apply($,arguments),M=$.levels[0]/255,A=$.levels[1]/255,z=$.levels[2]/255,$=$.levels[3]/255;this.clear(M,A,z,$)}},{key:"fill",value:function(M,A,z,$){var Z=s.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=Z._array,this.drawMode=h.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(M,A,z,$){var Z=s.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=Z._array}},{key:"strokeCap",value:function(M){this.curStrokeCap=M}},{key:"strokeJoin",value:function(M){this.curStrokeJoin=M}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(M,A){M.width===A.width&&M.height===A.height||M.resize(A.width,A.height),M.pixelDensity()!==A.pixelDensity()&&M.pixelDensity(A.pixelDensity())}},{key:"filter",value:function(){var M,A,z=this,$=this.getFilterLayer(),Z=void 0,te=void 0,ie=(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(te=arguments.length<=0?void 0:arguments[0],T(M={},h.BLUR,3),T(M,h.POSTERIZE,4),T(M,h.THRESHOLD,.5),Z=te in(M=M)&&(arguments.length<=1?void 0:arguments[1])===void 0?M[te]:arguments.length<=1?void 0:arguments[1],te in this.defaultFilterShaders||(this.defaultFilterShaders[te]=new s.default.Shader($._renderer,`uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

attribute vec3 aPosition;
// texcoords only come from p5 to vertex shader
// so pass texcoords on to the fragment shader in a varying variable
attribute vec2 aTexCoord;
varying vec2 vTexCoord;

void main() {
  // transferring texcoords for the frag shader
  vTexCoord = aTexCoord;

  // copy position with a fourth coordinate for projection (1.0 is normal)
  vec4 positionVec4 = vec4(aPosition, 1.0);

  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
}
`,B[te])),this.filterShader=this.defaultFilterShaders[te]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),he=(this.matchSize($,ie),$.draw(function(){return z._pInst.clear()}),[1/(ie.width*ie.pixelDensity()),1/(ie.height*ie.pixelDensity())]);te===h.BLUR?(A=this.getFilterLayerTemp(),this.matchSize(A,ie),this._pInst.push(),this._pInst.noStroke(),this._pInst.blendMode(h.BLEND),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",he),this.filterShader.setUniform("canvasSize",[ie.width,ie.height]),this.filterShader.setUniform("radius",Math.max(1,Z)),A.draw(function(){z.filterShader.setUniform("direction",[1,0]),z.filterShader.setUniform("tex0",ie),z._pInst.clear(),z._pInst.shader(z.filterShader),z._pInst.noLights(),z._pInst.plane(ie.width,ie.height)}),$.draw(function(){z.filterShader.setUniform("direction",[0,1]),z.filterShader.setUniform("tex0",A),z._pInst.clear(),z._pInst.shader(z.filterShader),z._pInst.noLights(),z._pInst.plane(ie.width,ie.height)}),this._pInst.pop()):$.draw(function(){z._pInst.noStroke(),z._pInst.blendMode(h.BLEND),z._pInst.shader(z.filterShader),z.filterShader.setUniform("tex0",ie),z.filterShader.setUniform("texelSize",he),z.filterShader.setUniform("canvasSize",[ie.width,ie.height]),z.filterShader.setUniform("filterParameter",Z),z._pInst.noLights(),z._pInst.plane(ie.width,ie.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(h.CORNER),this._pInst.blendMode(h.BLEND),ie.filterCamera._resize(),this._pInst.setCamera(ie.filterCamera),this._pInst.resetMatrix(),this._pInst.image($,-ie.width/2,-ie.height/2,ie.width,ie.height),this._pInst.clearDepth(),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(M){return M?this._pInst.pixelDensity(M):this._pInst.pixelDensity()}},{key:"blendMode",value:function(M){M===h.DARKEST||M===h.LIGHTEST||M===h.ADD||M===h.BLEND||M===h.SUBTRACT||M===h.SCREEN||M===h.EXCLUSION||M===h.REPLACE||M===h.MULTIPLY||M===h.REMOVE?this.curBlendMode=M:M!==h.BURN&&M!==h.OVERLAY&&M!==h.HARD_LIGHT&&M!==h.SOFT_LIGHT&&M!==h.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(M,A){this._isErasing||(this.preEraseBlend=this.curBlendMode,this._isErasing=!0,this.blendMode(h.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,M/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,A/255])}},{key:"noErase",value:function(){this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.curBlendMode=this.preEraseBlend,this.blendMode(this.preEraseBlend),this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var M=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},M=(c(_(se.prototype),"beginClip",this).call(this,M),this.drawTarget()._isClipApplied=!0,this.GL);M.clearStencil(0),M.clear(M.STENCIL_BUFFER_BIT),M.enable(M.STENCIL_TEST),this._stencilTestOn=!0,M.stencilFunc(M.ALWAYS,1,255),M.stencilOp(M.KEEP,M.KEEP,M.REPLACE),M.disable(M.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var M=this.GL;M.stencilOp(M.KEEP,M.KEEP,M.KEEP),M.stencilFunc(this._clipInvert?M.EQUAL:M.NOTEQUAL,0,255),M.enable(M.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),c(_(se.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(M){this.curStrokeWeight!==M&&(this.pointSize=M,this.curStrokeWeight=M)}},{key:"_getPixel",value:function(M,A){var z=this.GL;return G(z,null,M,A,z.RGBA,z.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var M,A,z=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(M=this._pInst._pixelDensity,A=this.GL,z._setProperty("pixels",W(z.pixels,A,null,0,0,this.width*M,this.height*M,A.RGBA,A.UNSIGNED_BYTE,this.height*M)))}},{key:"updatePixels",value:function(){var M=this._getTempFramebuffer();M.pixels=this._pixelsState.pixels,M.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(h.CENTER),this._pInst.image(M,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:h.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:h.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(M){return this.retainedMode.geometry[M]!==void 0}},{key:"viewport",value:function(M,A){this._viewport=[0,0,M,A],this.GL.viewport(0,0,M,A)}},{key:"resize",value:function(Z,$){s.default.Renderer.prototype.resize.call(this,Z,$),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var Z=this._pixelsState,z=(Z.pixels!==void 0&&Z._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0),$=!1,Z=void 0;try{for(var te,ie=this.framebuffers[Symbol.iterator]();!(z=(te=ie.next()).done);z=!0)te.value._canvasSizeChanged()}catch(he){$=!0,Z=he}finally{try{z||ie.return==null||ie.return()}finally{if($)throw Z}}}},{key:"clear",value:function(){var M=(arguments.length<=0?void 0:arguments[0])||0,A=(arguments.length<=1?void 0:arguments[1])||0,z=(arguments.length<=2?void 0:arguments[2])||0,$=(arguments.length<=3?void 0:arguments[3])||0,Z=this.activeFramebuffer();Z&&Z.format===h.UNSIGNED_BYTE&&!Z.antialias&&$===0&&($=1e-10),this.GL.clearColor(M*$,A*$,z*$,$),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"clearDepth",value:function(){this.GL.clearDepth(0<arguments.length&&arguments[0]!==void 0?arguments[0]:1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(M,A,z,$,Z,te){arguments.length===16?s.default.Matrix.prototype.apply.apply(this.uModelMatrix,arguments):this.uModelMatrix.apply([M,A,0,0,z,$,0,0,0,0,1,0,Z,te,0,1])}},{key:"translate",value:function(M,A,z){return M instanceof s.default.Vector&&(z=M.z,A=M.y,M=M.x),this.uModelMatrix.translate([M,A,z]),this}},{key:"scale",value:function(M,A,z){return this.uModelMatrix.scale(M,A,z),this}},{key:"rotate",value:function(M,A){return A===void 0?this.rotateZ(M):(s.default.Matrix.prototype.rotate.apply(this.uModelMatrix,arguments),this)}},{key:"rotateX",value:function(M){return this.rotate(M,1,0,0),this}},{key:"rotateY",value:function(M){return this.rotate(M,0,1,0),this}},{key:"rotateZ",value:function(M){return this.rotate(M,0,0,1),this}},{key:"push",value:function(){var M=s.default.Renderer.prototype.push.apply(this),A=M.properties;return A.uModelMatrix=this.uModelMatrix.copy(),A.uViewMatrix=this.uViewMatrix.copy(),A.uPMatrix=this.uPMatrix.copy(),A._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),A.ambientLightColors=this.ambientLightColors.slice(),A.specularColors=this.specularColors.slice(),A.directionalLightDirections=this.directionalLightDirections.slice(),A.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),A.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),A.pointLightPositions=this.pointLightPositions.slice(),A.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),A.pointLightSpecularColors=this.pointLightSpecularColors.slice(),A.spotLightPositions=this.spotLightPositions.slice(),A.spotLightDirections=this.spotLightDirections.slice(),A.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),A.spotLightSpecularColors=this.spotLightSpecularColors.slice(),A.spotLightAngle=this.spotLightAngle.slice(),A.spotLightConc=this.spotLightConc.slice(),A.userFillShader=this.userFillShader,A.userStrokeShader=this.userStrokeShader,A.userPointShader=this.userPointShader,A.pointSize=this.pointSize,A.curStrokeWeight=this.curStrokeWeight,A.curStrokeColor=this.curStrokeColor,A.curFillColor=this.curFillColor,A.curAmbientColor=this.curAmbientColor,A.curSpecularColor=this.curSpecularColor,A.curEmissiveColor=this.curEmissiveColor,A._hasSetAmbient=this._hasSetAmbient,A._useSpecularMaterial=this._useSpecularMaterial,A._useEmissiveMaterial=this._useEmissiveMaterial,A._useShininess=this._useShininess,A._useMetalness=this._useMetalness,A.constantAttenuation=this.constantAttenuation,A.linearAttenuation=this.linearAttenuation,A.quadraticAttenuation=this.quadraticAttenuation,A._enableLighting=this._enableLighting,A._useNormalMaterial=this._useNormalMaterial,A._tex=this._tex,A.drawMode=this.drawMode,A._currentNormal=this._currentNormal,A.curBlendMode=this.curBlendMode,A.activeImageLight=this.activeImageLight,A.textureMode=this.textureMode,M}},{key:"pop",value:function(){var M;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var A=arguments.length,z=new Array(A),$=0;$<A;$++)z[$]=arguments[$];(M=c(_(se.prototype),"pop",this)).call.apply(M,[this].concat(z)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var M=this.drawTarget();M._isClipApplied!==this._stencilTestOn&&(M._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this}},{key:"_getImmediateStrokeShader",value:function(){var M=this.userStrokeShader;return M&&M.isStrokeShader()?M:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getSphereMapping",value:function(M){return this.sphereMapping||(this.sphereMapping=this._pInst.createFilterShader(I)),this.uNMatrix.inverseTranspose(this.uViewMatrix),this.uNMatrix.invert3x3(this.uNMatrix),this.sphereMapping.setUniform("uFovY",this._curCamera.cameraFOV),this.sphereMapping.setUniform("uAspect",this._curCamera.aspectRatio),this.sphereMapping.setUniform("uNewNormalMatrix",this.uNMatrix.mat3),this.sphereMapping.setUniform("uSampler",M),this.sphereMapping}},{key:"_getImmediateFillShader",value:function(){var M=this.userFillShader;if(this._useNormalMaterial&&(!M||!M.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!M||!M.isLightShader())return this._getLightShader()}else if(this._tex){if(!M||!M.isTextureShader())return this._getLightShader()}else if(!M)return this._getImmediateModeShader();return M}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var M=this.userFillShader;if(this._enableLighting){if(!M||!M.isLightShader())return this._getLightShader()}else if(this._tex){if(!M||!M.isTextureShader())return this._getLightShader()}else if(!M)return this._getColorShader();return M}},{key:"_getImmediatePointShader",value:function(){var M=this.userPointShader;return M&&M.isPointShader()?M:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"baseMaterialShader",value:function(){if(this._pInst._glAttributes.perPixelLighting)return this._getLightShader();throw new Error("The material shader does not support hooks without perPixelLighting. Try turning it back on.")}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+F.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+F.phongFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 combineColors":`(ColorComponents components) {
                vec4 color = vec4(0.);
                color.rgb += components.diffuse * components.baseColor;
                color.rgb += components.ambient * components.ambientColor;
                color.rgb += components.specular * components.specularColor;
                color.rgb += components.emissive;
                color.a = components.opacity;
                return color;
              }`,"vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}}):this._defaultLightShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+F.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+F.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"baseNormalShader",value:function(){return this._getNormalShader()}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.normalFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultNormalShader}},{key:"baseColorShader",value:function(){return this._getColorShader()}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.basicFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultColorShader}},{key:"pointShader",value:function(){return this._getPointShader()}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.pointFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getPointSize":"(float size) { return size; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultPointShader}},{key:"baseStrokeShader",value:function(){return this._getLineShader()}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+F.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+F.lineFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getStrokeWeight":"(float weight) { return weight; }","vec2 getLineCenter":"(vec2 center) { return center; }","vec2 getLinePosition":"(vec2 position) { return position; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===h.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+F.fontVert,this._webGL2CompatibilityPrefix("frag","highp")+F.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(M,A){var z="";return this.webglVersion===h.WEBGL2&&(z+=`#version 300 es
#define WEBGL2
`),M==="vert"?z+=`#define VERTEX_SHADER
`:M==="frag"&&(z+=`#define FRAGMENT_SHADER
`),A&&(z+="precision ".concat(A,` float;
`)),z}},{key:"_getEmptyTexture",value:function(){var M;return this._emptyTexture||((M=new s.default.Image(1,1)).set(0,0,255),this._emptyTexture=new s.default.Texture(this,M)),this._emptyTexture}},{key:"getTexture",value:function(M){M instanceof s.default.Framebuffer&&(M=M.color);var A=this.textures.get(M);return A||(A=new s.default.Texture(this,M),this.textures.set(M,A),A)}},{key:"getDiffusedTexture",value:function(M){var A,z,$=this;return this.diffusedTextures.get(M)!=null?this.diffusedTextures.get(M):(A=Math.floor(M.height/M.width*200),z=this._pInst.createFramebuffer({width:200,height:A,density:1}),this.diffusedShader||(this.diffusedShader=this._pInst.createShader(F.imageLightVert,F.imageLightDiffusedFrag)),z.draw(function(){$._pInst.shader($.diffusedShader),$.diffusedShader.setUniform("environmentMap",M),$._pInst.noStroke(),$._pInst.rectMode(h.CENTER),$._pInst.noLights(),$._pInst.rect(0,0,200,A)}),this.diffusedTextures.set(M,z),z)}},{key:"getSpecularTexture",value:function(M){var A=this;if(this.specularTextures.get(M)!=null)return this.specularTextures.get(M);for(var z,$=[],Z=this._pInst.createFramebuffer({width:512,height:512,density:1}),te=Math.log(512)/Math.log(2),ie=(this.specularShader||(this.specularShader=this._pInst.createShader(F.imageLightVert,F.imageLightSpecularFrag)),512);1<=ie;ie/=2)(function(he){Z.resize(he,he);var oe=1-Math.log(he)/Math.log(2)/te;Z.draw(function(){A._pInst.shader(A.specularShader),A._pInst.clear(),A.specularShader.setUniform("environmentMap",M),A.specularShader.setUniform("roughness",oe),A._pInst.noStroke(),A._pInst.noLights(),A._pInst.plane(he,he)}),$.push(Z.get().drawingContext.getImageData(0,0,he,he))})(ie);return Z.remove(),z=new i.MipmapTexture(this,$,{}),this.specularTextures.set(M,z),z}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(M){return new s.default.Framebuffer(this,M)}},{key:"_setStrokeUniforms",value:function(M){M.bindShader(),M.setUniform("uUseLineColor",this._useLineColor),M.setUniform("uMaterialColor",this.curStrokeColor),M.setUniform("uStrokeWeight",this.curStrokeWeight),M.setUniform("uStrokeCap",N[this.curStrokeCap]),M.setUniform("uStrokeJoin",C[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(M){var A=this,z=(M.bindShader(),this.mixedSpecularColor=y(this.curSpecularColor),0<this._useMetalness&&(this.mixedSpecularColor=this.mixedSpecularColor.map(function($,Z){return A.curFillColor[Z]*A._useMetalness+$*(1-A._useMetalness)})),M.setUniform("uUseVertexColor",this._useVertexColor),M.setUniform("uMaterialColor",this.curFillColor),M.setUniform("isTexture",!!this._tex),this._tex&&M.setUniform("uSampler",this._tex),M.setUniform("uTint",this._tint),M.setUniform("uHasSetAmbient",this._hasSetAmbient),M.setUniform("uAmbientMatColor",this.curAmbientColor),M.setUniform("uSpecularMatColor",this.mixedSpecularColor),M.setUniform("uEmissiveMatColor",this.curEmissiveColor),M.setUniform("uSpecular",this._useSpecularMaterial),M.setUniform("uEmissive",this._useEmissiveMaterial),M.setUniform("uShininess",this._useShininess),M.setUniform("uMetallic",this._useMetalness),this._setImageLightUniforms(M),M.setUniform("uUseLighting",this._enableLighting),this.pointLightDiffuseColors.length/3),z=(M.setUniform("uPointLightCount",z),M.setUniform("uPointLightLocation",this.pointLightPositions),M.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),M.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),z=(M.setUniform("uDirectionalLightCount",z),M.setUniform("uLightingDirection",this.directionalLightDirections),M.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),M.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),z=(this.mixedAmbientLight=y(this.ambientLightColors),0<this._useMetalness&&(this.mixedAmbientLight=this.mixedAmbientLight.map(function($){return $-=A._useMetalness,Math.max(0,$)})),M.setUniform("uAmbientLightCount",z),M.setUniform("uAmbientColor",this.mixedAmbientLight),this.spotLightDiffuseColors.length/3);M.setUniform("uSpotLightCount",z),M.setUniform("uSpotLightAngle",this.spotLightAngle),M.setUniform("uSpotLightConc",this.spotLightConc),M.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),M.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),M.setUniform("uSpotLightLocation",this.spotLightPositions),M.setUniform("uSpotLightDirection",this.spotLightDirections),M.setUniform("uConstantAttenuation",this.constantAttenuation),M.setUniform("uLinearAttenuation",this.linearAttenuation),M.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),M.bindTextures()}},{key:"_setImageLightUniforms",value:function(M){var A;M.setUniform("uUseImageLight",this.activeImageLight!=null),this.activeImageLight&&(A=this.getDiffusedTexture(this.activeImageLight),M.setUniform("environmentMapDiffused",A),A=this.getSpecularTexture(this.activeImageLight),M.setUniform("environmentMapSpecular",A))}},{key:"_setPointUniforms",value:function(M){M.bindShader(),M.setUniform("uMaterialColor",this.curStrokeColor),M.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(M,A,z,$,Z){A=A||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(A,M),z!==void 0&&((M=z)instanceof s.default.DataArray?M=z.dataArray():M instanceof($||Float32Array)||(M=new($||Float32Array)(M)),this.GL.bufferData(A,M,Z||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(M,A){return M.length===A.length&&M.every(function(z,$){return z===A[$]})}},{key:"_isTypedArray",value:function(M){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(A){return M instanceof A})}},{key:"_flatten",value:function(M){return M.flat()}},{key:"_vToNArray",value:function(M){return M.flatMap(function(A){return[A.x,A.y,A.z]})}},{key:"_bezierCoefficients",value:function(M){var A=M*M,z=1-M,$=z*z;return[$*z,3*$*M,3*z*A,A*M]}},{key:"_quadraticCoefficients",value:function(M){var A=1-M;return[A*A,2*A*M,M*M]}},{key:"_bezierToCatmull",value:function(M){return[M[1],M[1]+(M[2]-M[0])/this._curveTightness,M[2]-(M[3]-M[1])/this._curveTightness,M[2]]}},{key:"_initTessy",value:function(){var M=new v.default.GluTesselator;return M.gluTessCallback(v.default.gluEnum.GLU_TESS_VERTEX_DATA,function(A,z){var $=!0,Z=!1,te=void 0;try{for(var ie,he=A[Symbol.iterator]();!($=(ie=he.next()).done);$=!0){var oe=ie.value;z.push(oe)}}catch(ce){Z=!0,te=ce}finally{try{$||he.return==null||he.return()}finally{if(Z)throw te}}}),M.gluTessCallback(v.default.gluEnum.GLU_TESS_BEGIN,function(A){A!==v.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(A))}),M.gluTessCallback(v.default.gluEnum.GLU_TESS_ERROR,function(A){console.log("error callback"),console.log("error number: ".concat(A))}),M.gluTessCallback(v.default.gluEnum.GLU_TESS_COMBINE,function(A,z,$){for(var Z=new Array(s.default.RendererGL.prototype.tessyVertexSize).fill(0),te=0;te<$.length;te++)for(var ie=0;ie<Z.length;ie++)$[te]!==0&&z[te]&&(Z[ie]+=z[te][ie]*$[te]);return Z}),M.gluTessCallback(v.default.gluEnum.GLU_TESS_EDGE_FLAG,function(A){}),M.gluTessProperty(v.default.gluEnum.GLU_TESS_WINDING_RULE,v.default.windingRule.GLU_TESS_WINDING_NONZERO),M}},{key:"_triangulate",value:function(M){var A=M[0]?M[0][2]:void 0,z=!0,$=!0,oe=!1,fe=void 0;try{for(var Z,te=M[Symbol.iterator]();!($=(Z=te.next()).done);$=!0)for(var ie=Z.value,he=0;he<ie.length;he+=s.default.RendererGL.prototype.tessyVertexSize)if(ie[he+2]!==A){z=!1;break}}catch(ke){oe=!0,fe=ke}finally{try{$||te.return==null||te.return()}finally{if(oe)throw fe}}z?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0);var oe=[],ce=(this._tessy.gluTessBeginPolygon(oe),!0),fe=!1,ee=void 0;try{for(var de,ye=M[Symbol.iterator]();!(ce=(de=ye.next()).done);ce=!0){var we=de.value;this._tessy.gluTessBeginContour();for(var ge=0;ge<we.length;ge+=s.default.RendererGL.prototype.tessyVertexSize){var xe=we.slice(ge,ge+s.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(xe,xe)}this._tessy.gluTessEndContour()}}catch(ke){fe=!0,ee=ke}finally{try{ce||ye.return==null||ye.return()}finally{if(fe)throw ee}}return this._tessy.gluTessEndPolygon(),oe}}])&&g(X.prototype,V),se}(s.default.Renderer),s.default.prototype._assert3d=function(V){if(!this._renderer.isP3D)throw new Error("".concat(V,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see https://p5js.org/examples/3d-geometries/ for more information."))},s.default.RendererGL.prototype.tessyVertexSize=12,L=s.default.RendererGL,u.default=L},{"../core/constants":272,"../core/main":283,"../core/p5.Renderer":286,"./GeometryBuilder":327,"./p5.Camera":332,"./p5.Framebuffer":334,"./p5.Matrix":336,"./p5.Shader":342,"./p5.Texture":343,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.every":155,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.flat-map":159,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.array.unscopables.flat-map":172,"core-js/modules/es.map":175,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.float64-array":220,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int16-array":224,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,libtess:255,path:258}],342:[function(t,m,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=(t=t("../core/main"))&&t.__esModule?t:{default:t};function p(h,b){return function(v){if(Array.isArray(v))return v}(h)||function(v,i){if(Symbol.iterator in Object(v)||Object.prototype.toString.call(v)==="[object Arguments]"){var d=[],f=!0,y=!1,g=void 0;try{for(var c,l=v[Symbol.iterator]();!(f=(c=l.next()).done)&&(d.push(c.value),!i||d.length!==i);f=!0);}catch(w){y=!0,g=w}finally{try{f||l.return==null||l.return()}finally{if(y)throw g}}return d}}(h,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(h,b){for(var v=0;v<b.length;v++){var i=b[v];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(h,i.key,i)}}a.default.Shader=function(){function h(i,d,f){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},g=this,c=h;if(!(g instanceof c))throw new TypeError("Cannot call a class as a function");this._renderer=i,this._vertSrc=d,this._fragSrc=f,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[],this.hooks={uniforms:y.uniforms||{},declarations:y.declarations,helpers:y.helpers||{},vertex:y.vertex||{},fragment:y.fragment||{},modified:{vertex:y.modified&&y.modified.vertex||{},fragment:y.modified&&y.modified.fragment||{}}}}var b,v;return b=h,(v=[{key:"shaderSrc",value:function(x,d){var f,y,g,c,l,x=p(x.split("void main"),2),w=x[0],x=x[1],_="";for(f in this.hooks.uniforms)_+="uniform ".concat(f,`;
`);for(y in this.hooks.declarations&&(_+=this.hooks.declarations+`
`),this.hooks[d].declarations&&(_+=this.hooks[d].declarations+`
`),this.hooks.helpers)_+="".concat(y).concat(this.hooks.helpers[y],`
`);for(g in this.hooks[d])g!=="declarations"&&(c=(l=p(g.split(" "),2))[0],l=l[1],this.hooks.modified[d][g]&&(_+="#define AUGMENTED_HOOK_"+l+`
`),_+=c+" HOOK_"+l+this.hooks[d][g]+`
`);return w+_+"void main"+x}},{key:"version",value:function(){var i=/#version (.+)$/.exec(this.vertSrc());return i?i[1]:"100 es"}},{key:"vertSrc",value:function(){return this.shaderSrc(this._vertSrc,"vertex")}},{key:"fragSrc",value:function(){return this.shaderSrc(this._fragSrc,"fragment")}},{key:"inspectHooks",value:function(){for(var i in console.log("==== Vertex shader hooks: ===="),this.hooks.vertex)console.log((this.hooks.modified.vertex[i]?"[MODIFIED] ":"")+i+this.hooks.vertex[i]);for(var d in console.log(""),console.log("==== Fragment shader hooks: ===="),this.hooks.fragment)console.log((this.hooks.modified.fragment[d]?"[MODIFIED] ":"")+d+this.hooks.fragment[d]);for(var f in console.log(""),console.log("==== Helper functions: ===="),this.hooks.helpers)console.log(f+this.hooks.helpers[f])}},{key:"modify",value:function(i){a.default._validateParameters("p5.Shader.modify",arguments);var d,f={vertex:{},fragment:{},helpers:{}};for(d in i)d!=="declarations"&&d!=="uniforms"&&(d==="vertexDeclarations"?f.vertex.declarations=(f.vertex.declarations||"")+`
`+i[d]:d==="fragmentDeclarations"?f.fragment.declarations=(f.fragment.declarations||"")+`
`+i[d]:this.hooks.vertex[d]?f.vertex[d]=i[d]:this.hooks.fragment[d]?f.fragment[d]=i[d]:f.helpers[d]=i[d]);var y,g,c=Object.assign({},this.hooks.modified.vertex),l=Object.assign({},this.hooks.modified.fragment);for(y in f.vertex||{})y!=="declarations"&&(c[y]=!0);for(g in f.fragment||{})g!=="declarations"&&(l[g]=!0);return new a.default.Shader(this._renderer,this._vertSrc,this._fragSrc,{declarations:(this.hooks.declarations||"")+`
`+(i.declarations||""),uniforms:Object.assign({},this.hooks.uniforms,i.uniforms||{}),fragment:Object.assign({},this.hooks.fragment,f.fragment||{}),vertex:Object.assign({},this.hooks.vertex,f.vertex||{}),helpers:Object.assign({},this.hooks.helpers,f.helpers||{}),modified:{vertex:c,fragment:l}})}},{key:"init",value:function(){if(this._glProgram===0){var i,d=this._renderer.GL;if(this._vertShader=d.createShader(d.VERTEX_SHADER),d.shaderSource(this._vertShader,this.vertSrc()),d.compileShader(this._vertShader),!d.getShaderParameter(this._vertShader,d.COMPILE_STATUS))return i=d.getShaderInfoLog(this._vertShader),console.error(i),null;if(this._fragShader=d.createShader(d.FRAGMENT_SHADER),d.shaderSource(this._fragShader,this.fragSrc()),d.compileShader(this._fragShader),!d.getShaderParameter(this._fragShader,d.COMPILE_STATUS))return i=d.getShaderInfoLog(this._fragShader),console.error(i),null;this._glProgram=d.createProgram(),d.attachShader(this._glProgram,this._vertShader),d.attachShader(this._glProgram,this._fragShader),d.linkProgram(this._glProgram),d.getProgramParameter(this._glProgram,d.LINK_STATUS)||a.default._friendlyError("Snap! Error linking shader program: ".concat(d.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"setDefaultUniforms",value:function(){for(var i in this.hooks.uniforms){var d=p(i.split(" "),2)[1],i=this.hooks.uniforms[i],f=void 0;(f=i instanceof Function?i():i)!=null&&this.setUniform(d,f)}}},{key:"copyToContext",value:function(i){var d=new a.default.Shader(i._renderer,this._vertSrc,this._fragSrc);return d.ensureCompiledOnContext(i),d}},{key:"ensureCompiledOnContext",value:function(i){if(this._glProgram!==0&&this._renderer!==i._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");this._glProgram===0&&(this._renderer=i._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var i=this._renderer.GL,d=i.getProgramParameter(this._glProgram,i.ACTIVE_ATTRIBUTES),f=0;f<d;++f){var y=i.getActiveAttrib(this._glProgram,f),g=y.name,c=i.getAttribLocation(this._glProgram,g),l={};l.name=g,l.location=c,l.index=f,l.type=y.type,l.size=y.size,this.attributes[g]=l}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var i=this._renderer.GL,d=i.getProgramParameter(this._glProgram,i.ACTIVE_UNIFORMS),f=0,y=0;y<d;++y){var g=i.getActiveUniform(this._glProgram,y),c={},l=(c.location=i.getUniformLocation(this._glProgram,g.name),c.size=g.size,g.name);1<g.size&&(l=l.substring(0,l.indexOf("[0]"))),c.name=l,c.type=g.type,c._cachedData=void 0,c.type===i.SAMPLER_2D&&(c.samplerIndex=f,f++,this.samplers.push(c)),c.isArray=1<g.size||c.type===i.FLOAT_MAT3||c.type===i.FLOAT_MAT4||c.type===i.FLOAT_VEC2||c.type===i.FLOAT_VEC3||c.type===i.FLOAT_VEC4||c.type===i.INT_VEC2||c.type===i.INT_VEC4||c.type===i.INT_VEC3,this.uniforms[l]=c}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var i=this._renderer.GL,d=!0,f=!1,y=void 0;try{for(var g,c=this.samplers[Symbol.iterator]();!(d=(g=c.next()).done);d=!0){var l=g.value,w=l.texture;w===void 0&&(w=this._renderer._getEmptyTexture()),i.activeTexture(i.TEXTURE0+l.samplerIndex),w.bindTexture(),w.update(),i.uniform1i(l.location,l.samplerIndex)}}catch(x){f=!0,y=x}finally{try{d||c.return==null||c.return()}finally{if(f)throw y}}}},{key:"updateTextures",value:function(){var i=!0,d=!1,f=void 0;try{for(var y,g=this.samplers[Symbol.iterator]();!(i=(y=g.next()).done);i=!0){var c=y.value.texture;c&&c.update()}}catch(l){d=!0,f=l}finally{try{i||g.return==null||g.return()}finally{if(d)throw f}}}},{key:"unbindTextures",value:function(){var i=!0,d=!1,f=void 0;try{for(var y,g=this.samplers[Symbol.iterator]();!(i=(y=g.next()).done);i=!0){var c=y.value;this.setUniform(c.name,this._renderer._getEmptyTexture())}}catch(l){d=!0,f=l}finally{try{i||g.return==null||g.return()}finally{if(d)throw f}}}},{key:"_setMatrixUniforms",value:function(){var i=this._renderer.uModelMatrix,d=this._renderer.uViewMatrix,f=this._renderer.uPMatrix,y=i.copy().mult(d),g=(this._renderer.uMVMatrix=y).copy();g.mult(f),this.isStrokeShader()&&this.setUniform("uPerspective",this._renderer._curCamera.useLinePerspective?1:0),this.setUniform("uViewMatrix",d.mat4),this.setUniform("uProjectionMatrix",f.mat4),this.setUniform("uModelMatrix",i.mat4),this.setUniform("uModelViewMatrix",y.mat4),this.setUniform("uModelViewProjectionMatrix",g.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3)),this.uniforms.uCameraRotation&&(this._renderer.curMatrix.inverseTranspose(this._renderer.uViewMatrix),this.setUniform("uCameraRotation",this._renderer.curMatrix.mat3))}},{key:"useProgram",value:function(){var i=this._renderer.GL;return this._renderer._curShader!==this&&(i.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(i,d){var f=this.uniforms[i];if(f){var y=this._renderer.GL;if(f.isArray){if(f._cachedData&&this._renderer._arraysEqual(f._cachedData,d))return;f._cachedData=d.slice(0)}else{if(f._cachedData&&f._cachedData===d)return;Array.isArray(d)?f._cachedData=d.slice(0):f._cachedData=d}var g=f.location;switch(this.useProgram(),f.type){case y.BOOL:d===!0?y.uniform1i(g,1):y.uniform1i(g,0);break;case y.INT:1<f.size?d.length&&y.uniform1iv(g,d):y.uniform1i(g,d);break;case y.FLOAT:1<f.size?d.length&&y.uniform1fv(g,d):y.uniform1f(g,d);break;case y.FLOAT_MAT3:y.uniformMatrix3fv(g,!1,d);break;case y.FLOAT_MAT4:y.uniformMatrix4fv(g,!1,d);break;case y.FLOAT_VEC2:1<f.size?d.length&&y.uniform2fv(g,d):y.uniform2f(g,d[0],d[1]);break;case y.FLOAT_VEC3:1<f.size?d.length&&y.uniform3fv(g,d):y.uniform3f(g,d[0],d[1],d[2]);break;case y.FLOAT_VEC4:1<f.size?d.length&&y.uniform4fv(g,d):y.uniform4f(g,d[0],d[1],d[2],d[3]);break;case y.INT_VEC2:1<f.size?d.length&&y.uniform2iv(g,d):y.uniform2i(g,d[0],d[1]);break;case y.INT_VEC3:1<f.size?d.length&&y.uniform3iv(g,d):y.uniform3i(g,d[0],d[1],d[2]);break;case y.INT_VEC4:1<f.size?d.length&&y.uniform4iv(g,d):y.uniform4i(g,d[0],d[1],d[2],d[3]);break;case y.SAMPLER_2D:if(typeof d=="number"){if(d<y.TEXTURE0||d>y.TEXTURE31||d!==Math.ceil(d))return console.log(" p5.js says: You're trying to use a number as the data for a texture.Please use a texture."),this;y.activeTexture(d),y.uniform1i(g,d)}else y.activeTexture(y.TEXTURE0+f.samplerIndex),f.texture=d instanceof a.default.Texture?d:this._renderer.getTexture(d),y.uniform1i(g,f.samplerIndex),f.texture.src.gifProperties&&f.texture.src._animateGif(this._renderer._pInst);break;case y.SAMPLER_CUBE:case y.SAMPLER_3D:case y.SAMPLER_2D_SHADOW:case y.SAMPLER_2D_ARRAY:case y.SAMPLER_2D_ARRAY_SHADOW:case y.SAMPLER_CUBE_SHADOW:case y.INT_SAMPLER_2D:case y.INT_SAMPLER_3D:case y.INT_SAMPLER_CUBE:case y.INT_SAMPLER_2D_ARRAY:case y.UNSIGNED_INT_SAMPLER_2D:case y.UNSIGNED_INT_SAMPLER_3D:case y.UNSIGNED_INT_SAMPLER_CUBE:case y.UNSIGNED_INT_SAMPLER_2D_ARRAY:typeof d=="number"&&(d<y.TEXTURE0||d>y.TEXTURE31||d!==Math.ceil(d)?console.log(" p5.js says: You're trying to use a number as the data for a texture.Please use a texture."):(y.activeTexture(d),y.uniform1i(g,d)))}return this}}},{key:"isLightShader",value:function(){return[this.attributes.aNormal,this.uniforms.uUseLighting,this.uniforms.uAmbientLightCount,this.uniforms.uDirectionalLightCount,this.uniforms.uPointLightCount,this.uniforms.uAmbientColor,this.uniforms.uDirectionalDiffuseColors,this.uniforms.uDirectionalSpecularColors,this.uniforms.uPointLightLocation,this.uniforms.uPointLightDiffuseColors,this.uniforms.uPointLightSpecularColors,this.uniforms.uLightingDirection,this.uniforms.uSpecular].some(function(i){return i!==void 0})}},{key:"isNormalShader",value:function(){return this.attributes.aNormal!==void 0}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return this.uniforms.uStrokeWeight!==void 0}},{key:"enableAttrib",value:function(i,d,f,y,g,c){var l;return i&&(i=i.location)!==-1&&(l=this._renderer.GL,this._renderer.registerEnabled.has(i)||(l.enableVertexAttribArray(i),this._renderer.registerEnabled.add(i)),this._renderer.GL.vertexAttribPointer(i,d,f||l.FLOAT,y||!1,g||0,c||0)),this}},{key:"disableRemainingAttributes",value:function(){var i=this,d=!0,f=!1,y=void 0;try{for(var g,c=this._renderer.registerEnabled.values()[Symbol.iterator]();!(d=(g=c.next()).done);d=!0)(function(){var l=g.value;Object.keys(i.attributes).some(function(w){return i.attributes[w].location===l})||(i._renderer.GL.disableVertexAttribArray(l),i._renderer.registerEnabled.delete(l))})()}catch(l){f=!0,y=l}finally{try{d||c.return==null||c.return()}finally{if(f)throw y}}}}])&&s(b.prototype,v),h}(),t=a.default.Shader,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],343:[function(t,m,u){function a(w){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(w)}function p(w){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(x){return a(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":a(x)})(w)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.checkWebGLCapabilities=l,u.default=u.MipmapTexture=void 0;var s=(c=t("../core/main"))&&c.__esModule?c:{default:c},h=function(w){if(w&&w.__esModule)return w;if(w===null||p(w)!=="object"&&typeof w!="function")return{default:w};var x=b();if(x&&x.has(w))return x.get(w);var _,T={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in w){var S;Object.prototype.hasOwnProperty.call(w,_)&&((S=E?Object.getOwnPropertyDescriptor(w,_):null)&&(S.get||S.set)?Object.defineProperty(T,_,S):T[_]=w[_])}return T.default=w,x&&x.set(w,T),T}(t("../core/constants"));function b(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,b=function(){return w},w)}function v(w,x){return(v=Object.setPrototypeOf||function(_,T){return _.__proto__=T,_})(w,x)}function i(w){return function(){var x,_=d(w),_=(x=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(x=d(this).constructor,Reflect.construct(_,arguments,x)):_.apply(this,arguments),this);if(!x||p(x)!=="object"&&typeof x!="function"){if(_!==void 0)return _;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return x}}function d(w){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)})(w)}function f(w,x){if(!(w instanceof x))throw new TypeError("Cannot call a class as a function")}function y(w,x){for(var _=0;_<x.length;_++){var T=x[_];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(w,T.key,T)}}function g(w,x,_){x&&y(w.prototype,x)}s.default.Texture=function(){function w(P,_,S){f(this,w),this._renderer=P;var E=this._renderer.GL,S=(S=S||{},this.src=_,this.glTex=void 0,this.glTarget=E.TEXTURE_2D,this.glFormat=S.format||E.RGBA,this.mipmaps=!1,this.glMinFilter=S.minFilter||E.LINEAR,this.glMagFilter=S.magFilter||E.LINEAR,this.glWrapS=S.wrapS||E.CLAMP_TO_EDGE,this.glWrapT=S.wrapT||E.CLAMP_TO_EDGE,this.glDataType=S.dataType||E.UNSIGNED_BYTE,l(P)),P=(this.glFormat!==E.HALF_FLOAT||S.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=E.FLOAT),this.glFormat!==E.HALF_FLOAT||this.glMinFilter!==E.LINEAR&&this.glMagFilter!==E.LINEAR||S.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===E.LINEAR&&(this.glMinFilter=E.NEAREST),this.glMagFilter===E.LINEAR&&(this.glMagFilter=E.NEAREST)),this.glFormat!==E.FLOAT||S.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=E.UNSIGNED_BYTE),this.glFormat!==E.FLOAT||this.glMinFilter!==E.LINEAR&&this.glMagFilter!==E.LINEAR||S.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===E.LINEAR&&(this.glMinFilter=E.NEAREST),this.glMagFilter===E.LINEAR&&(this.glMagFilter=E.NEAREST)),this.isSrcMediaElement=s.default.MediaElement!==void 0&&_ instanceof s.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=s.default.Element!==void 0&&_ instanceof s.default.Element&&!(_ instanceof s.default.Graphics)&&!(_ instanceof s.default.Renderer),this.isSrcP5Image=_ instanceof s.default.Image,this.isSrcP5Graphics=_ instanceof s.default.Graphics,this.isSrcP5Renderer=_ instanceof s.default.Renderer,this.isImageData=typeof ImageData<"u"&&_ instanceof ImageData,this.isFramebufferTexture=_ instanceof s.default.FramebufferTexture,this._getTextureDataFromSource());return this.width=P.width,this.height=P.height,this.init(P),this}return g(w,[{key:"_getTextureDataFromSource",value:function(){var x;return this.isFramebufferTexture?x=this.src.rawTexture():this.isSrcP5Image?x=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?(this.src._ensureCanvas&&this.src._ensureCanvas(),x=this.src.canvas||this.src.elt):this.isImageData&&(x=this.src),x}},{key:"init",value:function(x){var _,T=this._renderer.GL;this.isFramebufferTexture||(this.glTex=T.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,this.glMagFilter),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(_=new Uint8Array([1,1,1,1]),T.texImage2D(this.glTarget,0,T.RGBA,1,1,0,this.glFormat,this.glDataType,_)):T.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,x))}},{key:"update",value:function(){var x,_,T,E=this.src;return E.width!==0&&E.height!==0&&!this.isFramebufferTexture&&(x=this._getTextureDataFromSource(),_=!1,T=this._renderer.GL,x.width!==this.width||x.height!==this.height?(_=!0,this.width=x.width||E.width,this.height=x.height||E.height,this.isSrcP5Image?E.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&E.setModified(!0)):this.isSrcP5Image?E.isModified()&&E.setModified(!(_=!0)):this.isSrcMediaElement?E.isModified()?E.setModified(!(_=!0)):E.loadedmetadata&&this._videoPrevUpdateTime!==E.time()&&(this._videoPrevUpdateTime=E.time(),_=!0):this.isImageData?E._dirty&&(_=!(E._dirty=!1)):_=!0,_&&(this.bindTexture(),T.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,x)),_)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(x,_){var T=this._renderer.GL;this.glMinFilter=this.glFilter(x),this.glMagFilter=this.glFilter(_),this.bindTexture(),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,this.glMinFilter),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(x){var _=this._renderer.GL;return x===h.NEAREST?_.NEAREST:_.LINEAR}},{key:"setWrapMode",value:function(x,_){function T(N){return(N&N-1)==0}var E=this._renderer.GL,P=this._getTextureDataFromSource(),P=P.naturalWidth&&P.naturalHeight?(S=P.naturalWidth,P.naturalHeight):(S=this.width,this.height),S=T(S),P=T(P);x===h.REPEAT?this._renderer.webglVersion===h.WEBGL2||S&&P?this.glWrapS=E.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=E.CLAMP_TO_EDGE):x===h.MIRROR?this._renderer.webglVersion===h.WEBGL2||S&&P?this.glWrapS=E.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=E.CLAMP_TO_EDGE):this.glWrapS=E.CLAMP_TO_EDGE,_===h.REPEAT?this._renderer.webglVersion===h.WEBGL2||S&&P?this.glWrapT=E.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=E.CLAMP_TO_EDGE):_===h.MIRROR?this._renderer.webglVersion===h.WEBGL2||S&&P?this.glWrapT=E.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=E.CLAMP_TO_EDGE):this.glWrapT=E.CLAMP_TO_EDGE,this.bindTexture(),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,this.glWrapS),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),w}();var c=function(w){var x=T;if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(w&&w.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),w&&v(x,w);var _=i(T);function T(E,S,P){return f(this,T),S=(E=_.call(this,E,S,P))._renderer.GL,E.glMinFilter===S.LINEAR&&(E.glMinFilter=S.LINEAR_MIPMAP_LINEAR),E}return g(T,[{key:"glFilter",value:function(E){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(E){var S=this._renderer.GL;this.glTex=S.createTexture(),this.bindTexture();for(var P=0;P<E.length;P++)S.texImage2D(this.glTarget,P,this.glFormat,this.glFormat,this.glDataType,E[P]);this.glMinFilter=S.LINEAR_MIPMAP_LINEAR,S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,this.glMagFilter),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),T}(s.default.Texture);function l(E){var x=E.GL,E=E.webglVersion,_=E===h.WEBGL2?x.getExtension("EXT_color_buffer_float")&&x.getExtension("EXT_float_blend"):x.getExtension("OES_texture_float"),T=_&&x.getExtension("OES_texture_float_linear"),E=E===h.WEBGL2?x.getExtension("EXT_color_buffer_float"):x.getExtension("OES_texture_half_float");return{float:_,floatLinear:T,halfFloat:E,halfFloatLinear:E&&x.getExtension("OES_texture_half_float_linear")}}u.MipmapTexture=c,t=s.default.Texture,u.default=t},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],344:[function(t,m,u){function a(w){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(w)}function p(w){return(p=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(x){return a(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":a(x)})(w)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.iterator");var s,h=(s=t("../core/main"))&&s.__esModule?s:{default:s},b=function(w){if(w&&w.__esModule)return w;if(w===null||p(w)!=="object"&&typeof w!="function")return{default:w};var x=v();if(x&&x.has(w))return x.get(w);var _,T={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in w){var S;Object.prototype.hasOwnProperty.call(w,_)&&((S=E?Object.getOwnPropertyDescriptor(w,_):null)&&(S.get||S.set)?Object.defineProperty(T,_,S):T[_]=w[_])}return T.default=w,x&&x.set(w,T),T}(t("../core/constants"));function v(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,v=function(){return w},w)}function i(w,x){if(!(w instanceof x))throw new TypeError("Cannot call a class as a function")}function d(w,x){for(var _=0;_<x.length;_++){var T=x[_];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(w,T.key,T)}}function f(w,x,_){x&&d(w.prototype,x)}t("./p5.Shader"),t("./p5.RendererGL.Retained"),h.default.RendererGL.prototype._applyTextProperties=function(){this._setProperty("_textAscent",null),this._setProperty("_textDescent",null)},h.default.RendererGL.prototype.textWidth=function(w){return this._isOpenType()?this._textFont._textWidth(w,this._textSize):0};var y=function(){function w(x,_){i(this,w),this.width=x,this.height=_,this.infos=[]}return f(w,[{key:"findImage",value:function(x){var _,T,E=this.width*this.height;if(E<x)throw new Error("font is too complex to render in 3D");for(var S=this.infos.length-1;0<=S;--S){var P=this.infos[S];if(P.index+x<E){T=(_=P).imageData;break}}if(!_){try{T=new ImageData(this.width,this.height)}catch{var N=document.getElementsByTagName("canvas")[0],C=!N,D=(N||((N=document.createElement("canvas")).style.display="none",document.body.appendChild(N)),N.getContext("2d"));D&&(T=D.createImageData(this.width,this.height)),C&&document.body.removeChild(N)}this.infos.push(_={index:0,imageData:T})}return D=_.index,_.index+=x,T._dirty=!0,{imageData:T,index:D}}}]),w}();function g(P,x,_,T,E){var S=P.imageData.data,P=4*P.index++;S[P++]=x,S[P++]=_,S[P++]=T,S[+P]=E}var c=Math.sqrt(3),l=function(){function w(x){i(this,w),this.font=x,this.strokeImageInfos=new y(64,64),this.colDimImageInfos=new y(64,64),this.rowDimImageInfos=new y(64,64),this.colCellImageInfos=new y(64,64),this.rowCellImageInfos=new y(64,64),this.glyphInfos={}}return f(w,[{key:"getGlyphInfo",value:function(x){var _=this.glyphInfos[x.index];if(!_){var T=x.getBoundingBox(),E=T.x1,S=T.y1,P=T.x2-E,N=T.y2-S,C=x.path.commands;if(P==0||N==0||!C.length)return this.glyphInfos[x.index]={};for(var D=[],L=[],F=[],I=8;0<=I;--I)F.push([]);for(I=8;0<=I;--I)L.push([]);var B,W,G,V,X=function(){function We(qe,Xe,$e,je){i(this,We),this.p0=qe,this.c0=Xe,this.c1=$e,this.p1=je}return f(We,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return h.default.Vector.sub(h.default.Vector.sub(this.p1,this.p0),h.default.Vector.mult(h.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(Ae){var Xe=h.default.Vector.lerp(this.p0,this.c0,Ae),je=h.default.Vector.lerp(this.c0,this.c1,Ae),$e=h.default.Vector.lerp(Xe,je,Ae),je=(this.c1=h.default.Vector.lerp(this.c1,this.p1,Ae),this.c0=h.default.Vector.lerp(je,this.c1,Ae),h.default.Vector.lerp($e,this.c0,Ae)),Ae=new We(this.p0,Xe,$e,je);return this.p0=je,Ae}},{key:"splitInflections",value:function(){var qe=h.default.Vector.sub(this.c0,this.p0),Xe=h.default.Vector.sub(h.default.Vector.sub(this.c1,this.c0),qe),$e=h.default.Vector.sub(h.default.Vector.sub(h.default.Vector.sub(this.p1,this.c1),qe),h.default.Vector.mult(Xe,2)),je=[],Ae=Xe.x*$e.y-Xe.y*$e.x;return Ae!==0&&0<=(qe=($e=qe.x*$e.y-qe.y*$e.x)*$e-4*Ae*(qe.x*Xe.y-qe.y*Xe.x))&&(Ae<0&&(Ae=-Ae,$e=-$e),qe=(-$e+(Xe=Math.sqrt(qe)))/(2*Ae),0<($e=(-$e-Xe)/(2*Ae))&&$e<1&&(je.push(this.split($e)),qe=1-(1-qe)/(1-$e)),0<qe&&qe<1&&je.push(this.split(qe))),je.push(this),je}}]),We}(),Q=!0,se=!1,M=void 0;try{for(var A,z=C[Symbol.iterator]();!(Q=(A=z.next()).done);Q=!0){var $=A.value,Z=($.x-E)/P,te=($.y-S)/N;if(!Me(B,W,Z,te)){switch($.type){case"M":G=Z,V=te;break;case"L":Fe(B,W,Z,te);break;case"Q":var ie=($.x1-E)/P,he=($.y1-S)/N;xe([B,Z,ie],[W,te,he],{x:B,y:W,cx:ie,cy:he});break;case"Z":Me(B,W,G,V)?D.push({x:B,y:W}):(Fe(B,W,G,V),D.push({x:G,y:V}));break;case"C":for(var oe=function(ne,Se,Le,$e,je,Ae,Ee,J){var ne=new X(new h.default.Vector(ne,Se),new h.default.Vector(Le,$e),new h.default.Vector(je,Ae),new h.default.Vector(Ee,J)).splitInflections(),K=[],ae=30/c,ve=!0,Se=!1,Le=void 0;try{for(var Be,Ve=ne[Symbol.iterator]();!(ve=(Be=Ve.next()).done);ve=!0){for(var He=Be.value,Ke=[],ut=void 0;!(.125<=(ut=ae/He.quadError()));){var it=Math.pow(ut,.3333333333333333),tt=He.split(it),lt=He.split(1-it/(1-it));K.push(tt),Ke.push(He),He=lt}ut<1&&K.push(He.split(.5)),K.push(He),Array.prototype.push.apply(K,Ke.reverse())}}catch(at){Se=!0,Le=at}finally{try{ve||Ve.return==null||Ve.return()}finally{if(Se)throw Le}}return K}(B,W,($.x1-E)/P,($.y1-S)/N,($.x2-E)/P,($.y2-S)/N,Z,te),ce=0;ce<oe.length;ce++){var fe=oe[ce].toQuadratic();xe([fe.x,fe.x1,fe.cx],[fe.y,fe.y1,fe.cy],fe)}break;default:throw new Error("unknown command type: ".concat($.type))}B=Z,W=te}}}catch(We){se=!0,M=We}finally{try{Q||z.return==null||z.return()}finally{if(se)throw M}}for(var ee=D.length,de=this.strokeImageInfos.findImage(ee),ye=de.index,we=0;we<ee;++we){var ge=D[we];g(de,ke(ge.x),ke(ge.y),ke(ge.cx),ke(ge.cy))}(_=this.glyphInfos[x.index]={glyph:x,uGlyphRect:[T.x1,-T.y1,T.x2,-T.y2],strokeImageInfo:de,strokes:D,colInfo:Je(F,this.colDimImageInfos,this.colCellImageInfos),rowInfo:Je(L,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[_.colInfo.dimOffset,_.rowInfo.dimOffset]}return _;function xe(We,qe,Xe){var $e=D.length;function je(K,ae,ve){for(var Se=K.length;0<Se--;){var Le=K[Se];Le<ae&&(ae=Le),ve<Le&&(ve=Le)}return{min:ae,max:ve}}D.push(Xe);for(var Xe=je(We,1,0),We=Math.max(Math.floor(9*Xe.min-.5),0),Ae=Math.min(Math.ceil(9*Xe.max+.5),9),Ee=We;Ee<Ae;++Ee)F[Ee].push($e);for(var Xe=je(qe,1,0),We=Math.max(Math.floor(9*Xe.min-.5),0),J=Math.min(Math.ceil(9*Xe.max+.5),9),ne=We;ne<J;++ne)L[ne].push($e)}function ke(We){return(We=(Xe=255)*We)<(qe=0)?qe:Xe<We?Xe:We;var qe,Xe}function Fe(We,qe,Xe,$e){xe([We,Xe],[qe,$e],{x:We,y:qe,cx:(We+Xe)/2,cy:(qe+$e)/2})}function Me(We,qe,Xe,$e){return Math.abs(Xe-We)<1e-5&&Math.abs($e-qe)<1e-5}function Je(We,qe,Xe){for(var $e=We.length,je=qe.findImage($e),qe=je.index,Ae=0,Ee=0;Ee<$e;++Ee)Ae+=We[Ee].length;for(var J=Xe.findImage(Ae),ne=0;ne<$e;++ne){var K=We[ne],ae=K.length,ve=J.index;g(je,ve>>7,127&ve,ae>>7,127&ae);for(var Se=0;Se<ae;++Se){var Le=K[Se]+ye;g(J,Le>>7,127&Le,0,0)}}return{cellImageInfo:J,dimOffset:qe,dimImageInfo:je}}}}]),w}();h.default.RendererGL.prototype._renderText=function(w,x,_,T,E){if(this._textFont&&typeof this._textFont!="string"){if(!(E<=T)&&this._doFill){if(this._isOpenType()){w.push();var E=this._doStroke,S=this.drawMode,P=(this._doStroke=!1,this.drawMode=b.TEXTURE,this._textFont.font),N=(N=this._textFont._fontInfo)||(this._textFont._fontInfo=new l(P)),_=this._textFont._handleAlignment(this,x,_,T),T=this._textSize/P.unitsPerEm,C=(this.translate(_.x,_.y,0),this.scale(T,T,1),this.GL),_=!this._defaultFontShader,D=this._getFontShader(),L=(D.init(),D.bindShader(),_&&(D.setUniform("uGridImageSize",[64,64]),D.setUniform("uCellsImageSize",[64,64]),D.setUniform("uStrokeImageSize",[64,64]),D.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),F=(L||((T=this._textGeom=new h.default.Geometry(1,1,function(){for(var ce=0;ce<=1;ce++)for(var fe=0;fe<=1;fe++)this.vertices.push(new h.default.Vector(fe,ce,0)),this.uvs.push(fe,ce)})).computeFaces().computeNormals(),L=this.createBuffers("glyph",T)),!0),_=!1,T=void 0;try{for(var I,B=this.retainedMode.buffers.text[Symbol.iterator]();!(F=(I=B.next()).done);F=!0)I.value._prepareBuffer(L,D)}catch(ce){_=!0,T=ce}finally{try{F||B.return==null||B.return()}finally{if(_)throw T}}this._bindBuffer(L.indexBuffer,C.ELEMENT_ARRAY_BUFFER),D.setUniform("uMaterialColor",this.curFillColor),C.pixelStorei(C.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var W=0,G=null,V=P.stringToGlyphs(x),X=!0,Q=!1,se=void 0;try{for(var M,A=V[Symbol.iterator]();!(X=(M=A.next()).done);X=!0){var z,$,Z=M.value,te=(G&&(W+=P.getKerningValue(G,Z)),N.getGlyphInfo(Z));te.uGlyphRect&&(z=te.rowInfo,$=te.colInfo,D.setUniform("uSamplerStrokes",te.strokeImageInfo.imageData),D.setUniform("uSamplerRowStrokes",z.cellImageInfo.imageData),D.setUniform("uSamplerRows",z.dimImageInfo.imageData),D.setUniform("uSamplerColStrokes",$.cellImageInfo.imageData),D.setUniform("uSamplerCols",$.dimImageInfo.imageData),D.setUniform("uGridOffset",te.uGridOffset),D.setUniform("uGlyphRect",te.uGlyphRect),D.setUniform("uGlyphOffset",W),D.bindTextures(),C.drawElements(C.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),W+=Z.advanceWidth,G=Z}}catch(ce){Q=!0,se=ce}finally{try{X||A.return==null||A.return()}finally{if(Q)throw se}}}finally{D.unbindShader(),this._doStroke=E,this.drawMode=S,C.pixelStorei(C.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),w.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return w}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":272,"../core/main":283,"./p5.RendererGL.Retained":340,"./p5.Shader":342,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}]},{},[267])(267)})})(Kg);var S_=Kg.exports;const k_=od(S_),E_=(r,n,o)=>{let t=!1;for(let m=0,u=r.length-1;m<r.length;u=m,m+=1){const a=r[m][0],p=r[m][1],s=r[u][0],h=r[u][1];p>o!=h>o&&n<(s-a)*(o-p)/(h-p+Number.EPSILON)+a&&(t=!t)}return t},Ap=(r,n,o)=>{var t;return!r||!((t=r.polygons)!=null&&t.length)?!1:r.polygons.some(m=>E_(m.points,n,o))},T_=({config:r,className:n})=>{const o=Re.useRef(null),t=Re.useRef(null),[m,u]=Re.useState(!0),a=Re.useMemo(()=>[...r.elements].sort((p,s)=>(p.zIndex??r.elements.length)-(s.zIndex??r.elements.length)),[r.elements]);return Re.useEffect(()=>{let p=!0;const s=o.current;if(!s)return;let h=r.baseWidth,b=r.baseHeight;u(!0);const v=f=>{let y=null;const g=a.map(_=>({config:_,baseImage:null,hoverImage:null,hitbox:null,hovered:!1})),c=()=>{if(!o.current)return;const _=Math.max(o.current.clientWidth,1),T=r.baseHeight/r.baseWidth;h=_,b=_*T,f.resizeCanvas(h,b)},l=(_,T)=>{const E=_/h*r.baseWidth,S=T/b*r.baseHeight;return{x:E,y:S}},w=(_,T)=>{let E=!1;const S=new Set;g.forEach(P=>{!!(P.hitbox&&Ap(P.hitbox,_,T))&&S.add(P.config.id)}),g.forEach(P=>{var C,D;const N=S.has(P.config.id);P.hovered!==N&&(P.hovered=N,E=!0,(D=(C=P.config).onHoverChange)==null||D.call(C,N))}),E&&f.redraw()},x=(_,T)=>{var S,P;const E=g.filter(N=>N.hitbox&&Ap(N.hitbox,_,T)).sort((N,C)=>(C.config.zIndex??0)-(N.config.zIndex??0));E.length&&((P=(S=E[0].config).onClick)==null||P.call(S))};f.preload=()=>{y=f.loadImage(r.backgroundImage),g.forEach(_=>{_.baseImage=f.loadImage(_.config.image),_.config.selectedImage&&(_.hoverImage=f.loadImage(_.config.selectedImage)),_.config.hitboxPath&&(_.hitbox=f.loadJSON(_.config.hitboxPath))})},f.setup=()=>{f.createCanvas(r.baseWidth,r.baseHeight),f.noStroke(),f.noLoop(),c(),p&&u(!1)},f.draw=()=>{f.clear(),y?f.image(y,0,0,h,b):f.background(0),g.forEach(_=>{const{layout:T}=_.config,E=T.x/r.baseWidth*h,S=T.y/r.baseHeight*b,P=T.width/r.baseWidth*h,N=T.height/r.baseHeight*b;_.baseImage&&f.image(_.baseImage,E,S,P,N),_.hovered&&_.hoverImage&&f.image(_.hoverImage,E,S,P,N)})},f.mouseMoved=()=>{const{x:_,y:T}=l(f.mouseX,f.mouseY);w(_,T)},f.mousePressed=()=>{const{x:_,y:T}=l(f.mouseX,f.mouseY);x(_,T)},f.windowResized=()=>{c(),f.redraw()}},i=new k_(v,s);t.current=i;const d=new ResizeObserver(()=>{var f;(f=i.windowResized)==null||f.call(i)});return d.observe(s),()=>{p=!1,d.disconnect(),i.remove(),t.current=null}},[r.backgroundImage,r.baseHeight,r.baseWidth,a]),H.jsx("div",{className:n,children:H.jsx("div",{ref:o,className:"relative",children:m&&H.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 backdrop-blur-sm pointer-events-none",children:H.jsx("div",{className:"h-10 w-10 border-4 border-white/50 border-t-transparent rounded-full animate-spin"})})})})},Qg=Re.memo(T_),M_={white:"#e5e5e5",black:"#1f2937",red:"#ef4444",orange:"#f97316",yellow:"#facc15",purple:"#a855f7",blue:"#3b82f6",lightBlue:"#22d3ee",brown:"#92400e",lime:"#84cc16",green:"#059669",neutral:"#9ca3af"},Zg=r=>{const n=r.trim();return n.startsWith("#")?n.length===4?`#${n[1]}${n[1]}${n[2]}${n[2]}${n[3]}${n[3]}`.toLowerCase():n.toLowerCase():Zg(`#${n}`)},cf=r=>{const n=Zg(r).replace("#",""),o=parseInt(n.slice(0,2),16),t=parseInt(n.slice(2,4),16),m=parseInt(n.slice(4,6),16);return{r:o,g:t,b:m}},Ip=(r,n)=>{const{r:o,g:t,b:m}=cf(r),u=n>=0?255:0,a=Math.min(Math.abs(n),1),p=b=>Math.round(b+(u-b)*a),s=n>=0?{r:p(o),g:p(t),b:p(m)}:{r:Math.round(o*(1-a)),g:Math.round(t*(1-a)),b:Math.round(m*(1-a))},h=b=>b.toString(16).padStart(2,"0");return`#${h(s.r)}${h(s.g)}${h(s.b)}`},C_=r=>{const{r:n,g:o,b:t}=cf(r),m=s=>{const h=s/255;return h<=.03928?h/12.92:Math.pow((h+.055)/1.055,2.4)},u=m(n),a=m(o),p=m(t);return .2126*u+.7152*a+.0722*p},O_=r=>C_(r)>.5?"#0f172a":"#f8fafc",P_=(r,n)=>{const{r:o,g:t,b:m}=cf(r);return`rgba(${o}, ${t}, ${m}, ${n})`},Jg=(r,{hovered:n=!1,backgroundShift:o,borderShift:t=-.35,includeShadow:m,shadowOpacity:u=.32}={})=>{const a=M_[r],p=o??(n?.12:.04),s=m??n,h=Ip(a,p),b=O_(h),v=Ip(a,t),i={backgroundColor:h,color:b,borderColor:v};return s&&(i.boxShadow=`0 10px 22px ${P_(a,u)}`),b==="#f8fafc"&&(i.textShadow="0 2px 6px rgba(0, 0, 0, 0.35)"),i},L_={white:"Bianca",black:"Nera",red:"Rossa",orange:"Arancione",yellow:"Gialla",purple:"Viola",blue:"Blu",lightBlue:"Azzurra",brown:"Marrone",lime:"Lime",green:"Verde",neutral:"Neutra"},N_=({doorsOpened:r,turn:n,blockedDoors:o})=>H.jsxs("aside",{className:"w-60 rounded-lg bg-black/50 p-3 text-xs text-white backdrop-blur-sm shadow-lg",children:[H.jsxs("div",{className:"flex items-baseline justify-between gap-3 pb-1 border-b border-white/10",children:[H.jsx("span",{className:"font-semibold uppercase tracking-wider text-[11px]",children:"Progressi"}),H.jsxs("span",{className:"text-[11px] text-white/70",children:["Turno ",n]})]}),H.jsxs("dl",{className:"mt-2 space-y-2",children:[H.jsxs("div",{className:"flex items-center justify-between",children:[H.jsx("dt",{className:"text-[11px]",children:"Porte aperte"}),H.jsx("dd",{className:"font-semibold text-[#a67c52]",children:r})]}),H.jsxs("div",{children:[H.jsx("dt",{className:"uppercase text-[10px] text-white/50",children:"Contrasti attivi"}),o.length===0?H.jsx("p",{className:"text-[11px] text-white/60",children:"Nessuna porta bloccata."}):H.jsx("ul",{className:"mt-1 space-y-1",children:o.map(t=>H.jsxs("li",{className:"flex items-center justify-between rounded border px-2 py-1 text-[10px] uppercase tracking-[0.25em] transition-all duration-200 hover:-translate-y-0.5 hover:shadow-lg hover:brightness-105",style:Jg(t.type,{backgroundShift:.18,borderShift:-.4,includeShadow:!1}),children:[H.jsx("span",{children:L_[t.type]}),H.jsxs("span",{children:[t.turnsLeft," turni"]})]},`${t.type}-${t.turnsLeft}`))})]})]}),H.jsx(Vr,{to:"/door-types",className:"mt-3 inline-flex items-center justify-center rounded-full border border-white/20 px-3 py-1 text-[10px] uppercase tracking-[0.3em] text-white/60 transition hover:border-[#a67c52] hover:text-[#a67c52]",children:"Tipologia porte"})]});function ev(r){var n,o,t="";if(typeof r=="string"||typeof r=="number")t+=r;else if(typeof r=="object")if(Array.isArray(r)){var m=r.length;for(n=0;n<m;n++)r[n]&&(o=ev(r[n]))&&(t&&(t+=" "),t+=o)}else for(o in r)r[o]&&(t&&(t+=" "),t+=o);return t}function Sn(){for(var r,n,o=0,t="",m=arguments.length;o<m;o++)(r=arguments[o])&&(n=ev(r))&&(t&&(t+=" "),t+=n);return t}const Ms={white:"Porta Bianca",black:"Porta Nera",red:"Porta Rossa",orange:"Porta Arancione",yellow:"Porta Gialla",purple:"Porta Viola",blue:"Porta Blu",lightBlue:"Porta Azzurra",brown:"Porta Marrone",lime:"Porta Lime",green:"Porta Verde",neutral:"Porta Neutra"},R_=()=>Mr(r=>{var n;return((n=r.save)==null?void 0:n.progress.lastLobbyDraw)??[]}),Hn=1785,Wn=1004,Uu={porta1:0,porta2:1,porta3:2},Bu=[{id:"casa",label:"Casa",hitboxPath:"/assets/lobby/pulsanti/casa.json",image:"/assets/lobby/pulsanti/casa.png",selectedImage:"/assets/lobby/pulsanti/casa_selected.png",layout:{x:0,y:0,width:Hn,height:Wn},labelPosition:{x:155,y:240},zIndex:10,route:"/house"},{id:"baule",label:"Baule",hitboxPath:"/assets/lobby/pulsanti/baule.json",image:"/assets/lobby/pulsanti/baule.png",selectedImage:"/assets/lobby/pulsanti/baule_selected.png",layout:{x:0,y:0,width:Hn,height:Wn},labelPosition:{x:1700,y:680},zIndex:12,route:"/chest"},{id:"zaino",label:"Zaino",hitboxPath:"/assets/lobby/pulsanti/zaino.json",image:"/assets/lobby/pulsanti/zaino.png",selectedImage:"/assets/lobby/pulsanti/zaino_selected.png",layout:{x:0,y:0,width:Hn,height:Wn},labelPosition:{x:760,y:735},zIndex:14,route:"/inventory"},{id:"porta1",label:"Porta 1",hitboxPath:"/assets/lobby/pulsanti/porta1.json",image:"/assets/lobby/pulsanti/porta1.png",selectedImage:"/assets/lobby/pulsanti/porta1.png",layout:{x:0,y:0,width:Hn,height:Wn},labelPosition:{x:535,y:365},zIndex:20,isDoor:!0},{id:"porta2",label:"Porta 2",hitboxPath:"/assets/lobby/pulsanti/porta2.json",image:"/assets/lobby/pulsanti/porta2.png",selectedImage:"/assets/lobby/pulsanti/porta2.png",layout:{x:0,y:0,width:Hn,height:Wn},labelPosition:{x:986.5,y:365},zIndex:22,isDoor:!0},{id:"porta3",label:"Porta 3",hitboxPath:"/assets/lobby/pulsanti/porta3.json",image:"/assets/lobby/pulsanti/porta3.png",selectedImage:"/assets/lobby/pulsanti/porta3.png",layout:{x:0,y:0,width:Hn,height:Wn},labelPosition:{x:1428.5,y:365},zIndex:24,isDoor:!0}],A_={porta1:{x:392,y:275,width:285,height:520},porta2:{x:844,y:275,width:285,height:520},porta3:{x:1286,y:275,width:285,height:520}},Dp={white:"bianco",black:"nero",red:"rosso",orange:"arancione",yellow:"giallo",purple:"magenta",blue:"blu",lightBlue:"azzurro",brown:"marrone",lime:"lime",green:"verde",neutral:null},Fp=(r,n)=>`${r/n*100}%`,I_=r=>r==="neutral"?"/assets/porte/porta_base.png":`/assets/porte/${Dp[r]}/porta_${Dp[r]}_base.png`,D_=()=>{const r=Rs(),n=Mr(f=>f.save),o=Mr(f=>f.drawLobbyDoors),t=Mr(f=>f.openDoor),m=R_(),[u,a]=Re.useState({casa:!1,baule:!1,zaino:!1,porta1:!1,porta2:!1,porta3:!1});Re.useEffect(()=>{n&&(n.progress.lastLobbyDraw.length||o())},[n,o]);const p=Re.useRef(m);p.current=m;const s=Re.useRef(t);s.current=t;const h=Re.useRef(r);h.current=r;const b=Re.useCallback((f,y)=>{a(g=>({...g,[f]:y}))},[]),v=Re.useMemo(()=>Bu.reduce((f,y)=>(f[y.id]={onClick:()=>{if(y.route)return h.current(y.route);if(y.isDoor){const g=Uu[y.id],c=p.current[g];if(c){const l=typeof c=="string"?c:c.type;s.current(l),h.current("/door")}}},onHoverChange:g=>b(y.id,g)},f),{}),[b]),i=Re.useMemo(()=>{const f=new Map;return n==null||n.progress.blockedDoors.forEach(y=>f.set(y.type,y.turnsLeft)),f},[n]),d=Re.useMemo(()=>{const f=[];return Bu.forEach(y=>{if(f.push({id:y.id,image:y.image,selectedImage:y.selectedImage,hitboxPath:y.hitboxPath,layout:y.layout,zIndex:y.zIndex,onClick:v[y.id].onClick,onHoverChange:v[y.id].onHoverChange}),y.isDoor){const g=y.id,c=Uu[g],l=m[c];if(l){const w=typeof l=="string"?l:l.type,x=I_(w);if(x){const _=A_[g];f.push({id:`${y.id}-texture`,image:x,layout:_,zIndex:y.zIndex+20})}}}}),{baseWidth:Hn,baseHeight:Wn,backgroundImage:"/assets/lobby/sfondo_lobby.png",elements:f}},[m,v]);return H.jsxs("div",{className:"relative min-h-screen flex flex-col bg-[#080910] text-white",children:[H.jsx("div",{className:"pointer-events-none absolute inset-x-0 top-0 z-50",children:H.jsx("div",{className:"group/header relative h-8 w-full pointer-events-auto",children:H.jsxs("div",{className:`absolute inset-x-0 top-0 flex items-center justify-between px-6 py-3 bg-[#0b3a6f]/90 text-whit border-b border-white/10 backdrop-blur transition-all duration-300 ease-out  opacity-0 -translate-y-full  group-hover/header:opacity-100 group-hover/header:translate-y-0  pointer-events-auto
          `,children:[H.jsx("span",{className:"text-xs uppercase tracking-[0.4em]",children:"Lobby"}),H.jsx("button",{type:"button",onClick:()=>r("/"),className:"rounded-full border border-white/30 px-4 py-1 text-xs uppercase tracking-widest transition hover:border-[#a67c52] hover:text-[#a67c52]",children:"Esci"})]})})}),H.jsxs("main",{className:"relative flex-1",children:[H.jsx(Qg,{config:d,className:"absolute inset-0 w-full h-full"}),H.jsx("div",{className:"pointer-events-none absolute inset-0",children:Bu.map(f=>{const y=u[f.id];let g=null,c;if(f.isDoor){const _=f.id,T=m[Uu[_]];T&&(g=typeof T=="string"?T:T.type,c=i.get(g))}const l=["rounded-full border px-3 py-1 uppercase tracking-[0.35em] transition-all duration-200",f.isDoor?"text-xs":"text-[11px]"],w=f.isDoor&&g?Jg(g,{hovered:y}):void 0,x=f.isDoor?`${l.join(" ")} ${y?"shadow-lg":"shadow-sm"}`:`${l.join(" ")} ${y?"border-[#a67c52] bg-black/70 text-[#a67c52]":"border-white/30 bg-black/60 text-white"}`;return H.jsxs("div",{className:f.isDoor?"absolute flex flex-col items-center gap-2":"absolute -translate-x-1/2 -translate-y-full -mt-2",style:{left:Fp(f.labelPosition.x,Hn),top:Fp(f.labelPosition.y,Wn),...f.isDoor?{transform:"translate(-50%, 0)"}:{}},children:[H.jsx("span",{className:x,style:w,children:f.isDoor&&g?Ms[g]:f.label}),typeof c=="number"&&c>0?H.jsxs("span",{className:"rounded-full bg-red-600/80 px-3 py-1 text-[10px] uppercase tracking-[0.3em] text-white",children:["Bloccata (",c,")"]}):null]},`label-${f.id}`)})}),n?H.jsx("div",{className:"absolute right-[5%] top-[5%] z-50 w-64",children:H.jsx(N_,{doorsOpened:n.progress.doorsOpened,turn:n.progress.turn,blockedDoors:n.progress.blockedDoors})}):null]})]})},F_=r=>`/assets/armi/${`${encodeURIComponent(r.toLowerCase())}.png`}`,U_=({open:r,locked:n,weapons:o,weaponConfigs:t,ammoInventory:m,onClose:u,onConfirm:a})=>{const[p,s]=Re.useState(null),[h,b]=Re.useState(1),v=Re.useMemo(()=>o.filter(f=>f.unlocked).map(f=>{const y=t.find(l=>l.name===f.name),g=us(f.name),c=m[g]??0;return{weapon:f,config:y,ammoKind:g,ammoAvailable:c}}).filter(f=>f.config),[o,t,m]),i=f=>{const y=us(f),g=m[y]??0;s(f),b(Math.max(1,Math.min(h,Math.max(1,g))))},d=()=>{p&&(n||(a(p,h),s(null),b(1),u()))};return r?H.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/70 p-6",children:H.jsxs("div",{className:"w-full max-w-2xl rounded-2xl bg-background/95 p-6 shadow-2xl",children:[H.jsxs("div",{className:"flex items-center justify-between",children:[H.jsx("h2",{className:"text-2xl font-display uppercase tracking-widest",children:"Armi"}),H.jsx("button",{type:"button",onClick:()=>{s(null),u()},className:"rounded border border-white/20 px-3 py-1 text-sm uppercase tracking-wide text-white/80 hover:bg-white/10",children:"Indietro"})]}),n?H.jsx("p",{className:"mt-4 rounded bg-red-500/20 px-4 py-3 text-center text-sm text-red-200",children:"Le armi non possono pi\\u00f9 essere usate in questo scontro."}):null,H.jsx("div",{className:"mt-4 grid gap-3 sm:grid-cols-2",children:v.map(({weapon:f,config:y,ammoKind:g,ammoAvailable:c})=>{const l=y!=null&&y.displayName?F_(y.displayName):null,w=p===f.name;return H.jsx("button",{type:"button",disabled:n||c<=0,onClick:()=>i(f.name),"aria-pressed":w,tabIndex:0,className:Sn("rounded-xl border border-white/10 bg-white/5 p-4 text-left transition hover:border-accent hover:bg-white/10 focus:outline-none focus-visible:ring-2 focus-visible:ring-accent",w&&"border-accent bg-white/10 ring-2 ring-accent",(n||c<=0)&&"cursor-not-allowed opacity-50"),"data-selected":w?"true":"false",children:H.jsxs("div",{className:"flex items-start gap-3",children:[l&&H.jsxs("div",{className:"flex-shrink-0 relative",children:[H.jsx("img",{src:"/assets/armi/badge.png",alt:"badge",className:"h-16 w-16 object-contain",draggable:!1}),H.jsx("img",{src:l,alt:y==null?void 0:y.displayName,className:"absolute inset-0 h-16 w-16 object-contain p-1",draggable:!1,onError:x=>{x.currentTarget.style.display="none"}})]}),H.jsxs("div",{className:"flex-1 min-w-0",children:[H.jsx("h3",{className:"text-lg font-semibold text-white",children:y==null?void 0:y.displayName}),H.jsxs("p",{className:"text-xs uppercase text-white/50",children:["Munizioni ",g]}),H.jsxs("p",{className:"mt-2 text-sm text-white/80",children:["Danno colpo: ",y==null?void 0:y.damagePerShot]}),H.jsxs("p",{className:"text-sm text-white/80",children:["Disponibili: ",c]})]})]})},f.name)})}),p?H.jsxs("div",{className:"mt-6 rounded-xl border border-white/10 bg-black/40 p-4",children:[H.jsxs("div",{className:"flex items-center justify-between",children:[H.jsxs("span",{className:"text-lg font-semibold uppercase tracking-wide text-accent",children:["Ammo:",h]}),H.jsxs("div",{className:"flex items-center gap-2",children:[H.jsx("input",{type:"range",min:1,max:Math.max(1,m[us(p)]??1),value:h,onChange:f=>b(Number(f.target.value)),className:"w-40 accent-accent"}),H.jsx("input",{type:"number",value:h,min:1,max:Math.max(1,m[us(p)]??1),onChange:f=>b(Math.max(1,Number(f.target.value)||1)),className:"w-16 rounded border border-white/10 bg-black/60 px-2 py-1 text-center text-white"})]})]}),H.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[H.jsx("button",{type:"button",onClick:()=>{s(null),b(1)},className:"rounded border border-white/20 px-4 py-2 text-sm uppercase text-white/70 hover:bg-white/10",children:"Annulla"}),H.jsx("button",{type:"button",onClick:d,disabled:n,className:"rounded bg-accent px-4 py-2 text-sm uppercase text-black hover:bg-accent/90 disabled:cursor-not-allowed disabled:bg-accent/40",children:"Spara"})]})]}):null]})}):null},B_="/assets/animali/icona",bl="/assets/animali/icona/gatto.png",z_=r=>r.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim().split(/\s+/)[0].replace(/[^a-z0-9]/g,""),td=r=>r?"image"in r&&r.image?r.image:r.kind?`${B_}/${z_(r.kind)}.png`:bl:bl,rd=r=>{const n=r.currentTarget;n.src!==bl&&(n.src=bl)},G_=(r,n)=>r.find(o=>o.id===n),V_=({open:r,animals:n,configs:o,onClose:t,onDeploy:m})=>{if(!r)return null;const a=n.reduce((s,h,b)=>{const v=G_(o,h.configId)??null,i=Xc(v,h),d=Dg(v,h),f=Fg(v,h),y=i.staminaCap>0?Math.round(Math.max(0,h.stamina)/i.staminaCap*100):0,g=i.lifeCap>0?Math.round(Math.max(0,h.life)/i.lifeCap*100):0;return s.push({index:b,config:v,name:(v==null?void 0:v.kind)??`#${h.configId}`,instance:h,stats:i,readiness:d,missingStamina:f,staminaPercent:y,lifePercent:g}),s},[]).reduce((s,h)=>(s[h.readiness].push(h),s),{ready:[],recovering:[],fallen:[]}),p={ready:{label:"Pronto",tone:"border-emerald-400/40 bg-emerald-500/10 text-emerald-200",helper:()=>"Stamina al massimo.",action:"Schiera",disabled:!1},recovering:{label:"In recupero",tone:"border-amber-300/40 bg-amber-400/10 text-amber-200",helper:s=>`Mancano ${s.missingStamina} stamina - costo cibo ${s.missingStamina}`,action:"Non pronto",disabled:!0},fallen:{label:"Ko",tone:"border-rose-400/40 bg-rose-500/10 text-rose-200",helper:()=>"Torni disponibile dopo il prossimo riposo.",action:"Non disponibile",disabled:!0}};return H.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/75 p-6",children:H.jsxs("div",{className:"w-full max-w-2xl rounded-2xl bg-background/95 p-6 shadow-2xl",children:[H.jsxs("div",{className:"flex items-center justify-between",children:[H.jsx("h2",{className:"text-2xl font-display uppercase tracking-widest",children:"Animali"}),H.jsx("button",{type:"button",onClick:t,className:"rounded border border-white/20 px-3 py-1 text-sm uppercase tracking-wide text-white/80 hover:bg-white/10",children:"Indietro"})]}),H.jsx("div",{className:"mt-4 space-y-6",children:[{key:"ready",title:"Pronti a combattere"},{key:"recovering",title:"In recupero"},{key:"fallen",title:"Ko"}].map(({key:s,title:h})=>{const b=a[s];return H.jsxs("div",{children:[H.jsx("h3",{className:"text-xs uppercase tracking-[0.3em] text-white/50",children:h}),b.length===0?H.jsx("p",{className:"mt-2 text-xs text-white/50",children:s==="ready"?"Nessun animale pronto.":s==="recovering"?"Nessun animale sta recuperando stamina.":"Nessun animale  caduto."}):H.jsx("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:b.map(v=>{var f;const i=p[v.readiness],d=td(v.config);return H.jsx("div",{className:Sn("rounded-xl border border-white/10 bg-white/5 p-4",v.readiness==="fallen"&&"opacity-60"),children:H.jsxs("div",{className:"flex items-start gap-4",children:[H.jsxs("div",{className:"flex-shrink-0",children:[H.jsx("img",{src:d,alt:v.name,className:"h-28 w-28 rounded-lg object-contain bg-black/20 p-1",draggable:!1,onError:rd}),H.jsxs("div",{className:"absolute text-xs text-white",children:[H.jsxs("p",{children:["Vita: ",v.instance.life,"/",v.stats.lifeCap]}),H.jsxs("p",{children:["Danno: ",v.stats.damage]}),H.jsxs("p",{children:["Velocit: ",v.stats.attackSpeed]}),H.jsxs("p",{children:["Armatura: ",v.instance.armor??0]})]})]}),H.jsxs("div",{className:"flex-1 min-w-0",children:[H.jsxs("div",{className:"flex items-start justify-between",children:[H.jsxs("div",{children:[H.jsx("span",{className:"text-lg font-semibold text-white",children:v.name}),H.jsx("p",{className:"text-xs uppercase text-white/50",children:v.instance.size})]}),H.jsx("span",{className:Sn("rounded-full border px-2 py-0.5 text-[10px] uppercase tracking-[0.2em]",i.tone),children:i.label})]}),H.jsxs("dl",{className:"mt-3 space-y-1 text-sm text-white/80",children:[H.jsxs("div",{className:"flex justify-between",children:[H.jsx("dt",{children:"Vita"}),H.jsxs("dd",{children:[v.instance.life,"/",v.stats.lifeCap]})]}),H.jsxs("div",{className:"flex justify-between",children:[H.jsx("dt",{children:"Danno"}),H.jsx("dd",{children:v.stats.damage})]}),H.jsxs("div",{className:"flex justify-between",children:[H.jsx("dt",{children:"Velocit"}),H.jsx("dd",{children:v.stats.attackSpeed})]}),H.jsxs("div",{className:"flex justify-between",children:[H.jsx("dt",{children:"Armatura"}),H.jsx("dd",{children:v.instance.armor??0})]})]}),H.jsxs("div",{className:"mt-3 space-y-2 text-xs uppercase text-white/60",children:[H.jsxs("div",{children:[H.jsx("span",{children:"Stamina"}),H.jsx("div",{className:"mt-1 h-2 w-full overflow-hidden rounded bg-white/10",children:H.jsx("div",{className:"h-full rounded bg-emerald-400",style:{width:`${Math.min(100,Math.max(0,v.staminaPercent))}%`}})})]}),H.jsxs("div",{children:[H.jsx("span",{children:"Resistenza"}),H.jsx("div",{className:"mt-1 h-2 w-full overflow-hidden rounded bg-white/10",children:H.jsx("div",{className:"h-full rounded bg-sky-400",style:{width:`${Math.min(100,Math.max(0,v.lifePercent))}%`}})})]})]}),H.jsx("p",{className:"mt-3 text-xs text-white/60",children:i.helper(v)}),H.jsx("button",{type:"button",disabled:i.disabled,onClick:()=>m(v.index),className:Sn("mt-4 w-full rounded px-4 py-2 text-sm uppercase tracking-[0.3em]",i.disabled?"border border-white/20 text-white/40":"border border-emerald-400 bg-emerald-500 text-black hover:bg-emerald-400"),children:i.action})]})]})},`${((f=v.config)==null?void 0:f.id)??"cfg"}-${v.index}`)})})]},s)})})]})})},H_="housePiece",tv=r=>typeof r=="string"&&r.startsWith(`${H_}:`),W_=r=>r==="housePiece:any",rv=r=>{if(W_(r))return null;const[,n]=r.split(":"),o=Number(n);return Number.isFinite(o)?o:null},nv=(r,n)=>{if(n===null)return null;const o=r.find(t=>t.id===n);return o?o.name:null},Un="#a67c52",q_=(r,n)=>{var o;return((o=r.find(t=>t.name===n))==null?void 0:o.displayName)??n},$_=(r,n)=>{var o;return((o=r.find(t=>t.id===n))==null?void 0:o.kind)??`#${n}`},Y_=({open:r,loot:n,weaponsUsed:o,fallenAnimals:t,animalConfigs:m,weaponConfigs:u,medalUnlocked:a,houseObjects:p,onContinue:s})=>{if(!r)return null;const h=()=>{if(!n)return H.jsx("p",{className:"mt-2 text-sm text-white/70",children:"Nessun bottino."});if(yl(n.type)){const b=gl(n.type);return H.jsx("p",{className:"mt-2 text-lg font-semibold",style:{color:Un},children:`Medaglietta ${Ms[b]}`})}if(tv(n.type)){const b=rv(n.type),v=nv(p,b),i=v?`Pezzi arredamento (${v})`:"Pezzi arredamento";return H.jsxs("p",{className:"mt-2 text-lg font-semibold",style:{color:Un},children:["+",n.qty," ",i]})}return H.jsxs("p",{className:"mt-2 text-lg font-semibold",style:{color:Un},children:["+",n.qty," ",n.type]})};return H.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-6",children:H.jsxs("div",{className:"w-full max-w-xl rounded-3xl border border-white/10 bg-white/10 p-6 text-white shadow-xl backdrop-blur",children:[H.jsx("h2",{className:"text-4xl font-display uppercase tracking-[0.4em]",style:{color:Un},children:"Vittoria"}),H.jsxs("section",{className:"mt-4 space-y-4",children:[H.jsxs("div",{children:[H.jsx("h3",{className:"text-sm uppercase tracking-[0.3em] text-white/60",children:"Armi utilizzate"}),o.length===0?H.jsx("p",{className:"text-sm text-white/70",children:"Nessun colpo sparato."}):H.jsx("ul",{className:"mt-2 space-y-1 text-sm",children:o.map(b=>H.jsxs("li",{className:"flex justify-between",children:[H.jsx("span",{children:q_(u,b.name)}),H.jsxs("span",{children:[b.shots," colpi"]})]},b.name))})]}),H.jsxs("div",{children:[H.jsx("h3",{className:"text-sm uppercase tracking-[0.3em] text-white/60",children:"Animali caduti"}),t.length===0?H.jsx("p",{className:"text-sm text-white/70",children:"Nessuna perdita."}):H.jsx("ul",{className:"mt-2 list-inside list-disc space-y-1 text-sm text-white/80",children:t.map((b,v)=>H.jsx("li",{children:$_(m,b.configId)},`${b.configId}-${v}`))})]})]}),H.jsxs("section",{className:"mt-5 rounded-xl border border-white/10 bg-black/40 p-4 text-center",children:[H.jsx("h3",{className:"text-sm uppercase tracking-[0.3em] text-white/60",children:"Ricompensa"}),h()]}),a?H.jsxs("section",{className:"mt-3 rounded-xl border p-4 text-center",style:{borderColor:Un,backgroundColor:"rgba(166,124,82,0.12)",color:"#f4e7da"},children:[H.jsx("h4",{className:"text-xs uppercase tracking-[0.35em]",style:{color:"#e7d6c7"},children:"Nuova medaglietta sbloccata!"}),H.jsx("p",{className:"mt-2 text-lg font-semibold",style:{color:Un},children:Ms[a]})]}):null,H.jsx("button",{type:"button",onClick:s,className:"mt-6 w-full rounded-full px-6 py-3 text-sm font-semibold uppercase tracking-widest transition",style:{backgroundColor:Un,color:"#0f0f0f"},onMouseEnter:b=>{b.currentTarget.style.backgroundColor="#8b5e34"},onMouseLeave:b=>{b.currentTarget.style.backgroundColor=Un},children:"Procedi"})]})})},X_=({open:r,doorsOpened:n,onReturn:o})=>r?H.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/85 p-6",children:H.jsxs("div",{className:"w-full max-w-md rounded-3xl border border-red-500/30 bg-red-950/80 p-6 text-center text-white shadow-glow",children:[H.jsx("h2",{className:"text-4xl font-display uppercase tracking-[0.4em] text-red-300",children:"Sconfitta"}),H.jsxs("p",{className:"mt-4 text-sm text-white/80",children:["Porte aperte in totale:"," ",H.jsx("span",{className:"text-lg font-semibold text-red-200",children:n})]}),H.jsx("button",{type:"button",onClick:o,className:"mt-6 w-full rounded-full bg-red-400 py-3 text-sm font-semibold uppercase tracking-widest text-red-950 hover:bg-red-300",children:"Torna al menu"})]})}):null,K_={bullets:0,shells:0,arrows:0,darts:0,grenades:0},Q_={white:"/assets/scenari/Stanza_bianca.png",black:"/assets/scenari/Stanza_nera.png",red:"/assets/scenari/Stanza_rossa.png",orange:"/assets/scenari/Stanza_arancione.png",yellow:"/assets/scenari/Stanza_gialla.png",purple:"/assets/scenari/Stanza_rosa.png",blue:"/assets/scenari/Stanza_blu.png",lightBlue:"/assets/scenari/Stanza_azzurra.png",brown:"/assets/scenari/Stanza_marrone.png",lime:"/assets/scenari/Stanza_lime.png",green:"/assets/scenari/Stanza_verde.png",neutral:"/assets/scenari/Stanza_neutrale.png"},Z_="/assets/scenari/Stanza_neutrale.png",Up="/assets/animali/icona",Ei="/assets/ui/animal_placeholder.png",Bp=r=>r.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),zp=r=>r?r.image?r.image:r.kind?`${Up}/${Bp(r.kind)}.png`:r.id?`${Up}/${Bp(String(r.id))}.png`:null:null,J_=()=>{var F;const r=Rs(),[n,o]=Re.useState(!1),[t,m]=Re.useState(!1),{save:u,configs:a,pendingReward:p,battleResult:s,weaponsPhaseLocked:h,resolveWeaponAttack:b,resolveAnimalDuel:v,collectReward:i,resetBattleResult:d}=Mr(I=>({save:I.save,configs:I.configs,pendingReward:I.pendingReward,battleResult:I.battleResult,weaponsPhaseLocked:I.weaponsPhaseLocked,resolveWeaponAttack:I.resolveWeaponAttack,resolveAnimalDuel:I.resolveAnimalDuel,collectReward:I.collectReward,resetBattleResult:I.resetBattleResult}));Re.useEffect(()=>{u===null&&r("/lobby",{replace:!0})},[u,r]);const f=u==null?void 0:u.battleState,y=f==null?void 0:f.door,g=y?y.enemies[y.index]:null,c=y?y.enemies.slice(y.index+1):[],l=(a==null?void 0:a.animals)??[],w=(a==null?void 0:a.weapons)??[],x=Re.useMemo(()=>g?l.find(I=>I.id===g.configId)??null:null,[l,g]),_=Re.useMemo(()=>zp(x),[x]),T=((F=f==null?void 0:f.door)==null?void 0:F.type)??"neutral",E=Q_[T]??Z_,S=(I,B)=>{b(I,B),o(!1)},P=I=>{v(I),m(!1)};Re.useEffect(()=>{const I=B=>{B.key==="Escape"&&(n&&o(!1),t&&m(!1))};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[n,t]);const N=(u==null?void 0:u.animals.owned)??[],C=(I,B)=>{const W=l.find(X=>X.id===I.configId)??null,G=(W==null?void 0:W.kind)??`#${I.configId}`,V=zp(W)??Ei;return H.jsxs("button",{type:"button",onClick:()=>P(B),className:"w-full flex items-center gap-3 rounded-lg border border-white/10 bg-black/30 px-3 py-2 text-left hover:border-[#a67c52]/60",children:[H.jsx("img",{src:V,alt:G,className:"h-12 w-12 rounded-md object-contain bg-black/20 p-1",draggable:!1,onError:X=>{X.currentTarget.src=Ei}}),H.jsx("div",{className:"flex-1 min-w-0 text-sm text-white/80",children:H.jsxs("div",{className:"flex items-center justify-between",children:[H.jsx("span",{className:"font-semibold text-white truncate",children:G}),H.jsx("span",{className:"text-xs uppercase text-white/50",children:I.size==="Small"?"Baby":"Adulto"})]})})]},`${I.configId}-${B}`)},D=()=>{i(),d(),r("/lobby")},L=()=>{d(),r("/")};return H.jsxs("div",{className:"relative min-h-screen overflow-hidden text-white",children:[H.jsxs("div",{className:"absolute inset-0 -z-10",children:[H.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${E})`}}),H.jsx("div",{className:"absolute inset-0 bg-black/70"})]}),s==="victory"&&p&&u?H.jsx(Y_,{open:!0,loot:p.loot,weaponsUsed:p.weaponsUsed,fallenAnimals:p.fallenAnimals,animalConfigs:l,weaponConfigs:w,medalUnlocked:p.medalUnlocked??null,houseObjects:u.house.objects,onContinue:D}):null,s==="defeat"&&u?H.jsx(X_,{open:!0,doorsOpened:u.progress.doorsOpened,onReturn:L}):null,H.jsxs("header",{className:"flex items-center justify-between uppercase tracking-[0.4em] text-white/60 px-6 pt-10",children:[H.jsx("span",{children:"Porta"}),H.jsx("button",{type:"button",onClick:()=>r("/lobby"),className:"rounded-full border border-white/30 px-4 py-1 text-xs uppercase tracking-widest transition hover:border-[#a67c52] hover:text-[#a67c52]",children:"Fuga (Torna alla lobby)"})]}),H.jsx("main",{className:"mt-8 flex flex-col gap-8 px-6 pb-10",children:y&&g&&x?H.jsxs("section",{className:"rounded-3xl border border-white/10 bg-white/10 p-6 shadow-xl backdrop-blur",children:[H.jsx("h2",{className:"text-3xl font-display uppercase tracking-[0.35em] text-[#a67c52]",children:x.kind}),H.jsxs("div",{className:"mt-9 flex flex-col items-center justify-center md:flex-row md:items-center md:justify-center gap-1",children:[H.jsx("div",{className:"flex justify-center md:justify-start",children:H.jsx("img",{src:_??Ei,alt:x.kind,className:"h-64 w-64 md:h-72 md:w-72 object-contain drop-shadow",draggable:!1,onError:I=>{I.currentTarget.src=Ei}})}),H.jsxs("div",{className:"flex flex-col items-center md:items-end gap-3 text-sm text-white/70",children:[H.jsx("span",{className:"uppercase text-white/50",children:"Prossimi"}),H.jsx("div",{className:"flex flex-wrap justify-center md:justify-end gap-2",children:c.length?c.map((I,B)=>{const W=l.find(G=>G.id===I.configId);return H.jsx("span",{className:"rounded-lg border border-white/10 bg-black/40 px-3 py-2 text-xs text-white/70",children:(W==null?void 0:W.kind)??`#${I.configId}`},`${I.configId}-${B}`)}):H.jsx("span",{className:"rounded-lg border border-white/10 bg-black/40 px-3 py-2 text-xs text-white/70",children:"Ultimo"})})]})]}),H.jsx("div",{className:"mt-8 flex justify-center",children:H.jsxs("dl",{className:"grid grid-cols-2 gap-4 text-sm",children:[H.jsxs("div",{className:"w-40 rounded-xl border border-white/10 bg-black/50 p-3 text-center",children:[H.jsx("dt",{className:"text-sm uppercase text-white/60",children:"Vita"}),H.jsx("dd",{className:"text-xl font-semibold text-white leading-tight",children:g.life})]}),H.jsxs("div",{className:"w-40 rounded-xl border border-white/10 bg-black/50 p-3 text-center",children:[H.jsx("dt",{className:"text-sm uppercase text-white/60",children:"Danno"}),H.jsx("dd",{className:"text-xl font-semibold text-white leading-tight",children:x.damage})]}),H.jsxs("div",{className:"w-40 rounded-xl border border-white/10 bg-black/50 p-3 text-center",children:[H.jsx("dt",{className:"text-sm uppercase text-white/60",children:"Velocit"}),H.jsx("dd",{className:"text-xl font-semibold text-white leading-tight",children:x.attackSpeed})]}),H.jsxs("div",{className:"w-40 rounded-xl border border-white/10 bg-black/50 p-3 text-center",children:[H.jsx("dt",{className:"text-sm uppercase text-white/60",children:"Et"}),H.jsx("dd",{className:"text-xl font-semibold text-white leading-tight",children:g.size==="Small"?"Baby":"Adulto"})]})]})}),H.jsxs("div",{className:"mt-10 flex items-center justify-center gap-4",children:[H.jsx("button",{type:"button",onClick:()=>o(!0),disabled:h,className:"rounded-full border border-[#a67c52] px-6 py-3 text-sm uppercase tracking-[0.3em] text-[#a67c52] transition hover:bg-[#a67c52]/10 disabled:cursor-not-allowed disabled:opacity-40",children:"Armi"}),H.jsx("button",{type:"button",onClick:()=>m(!0),className:"rounded-full border border-[#a67c52] px-6 py-3 text-sm uppercase tracking-[0.3em] text-[#a67c52] transition hover:bg-[#a67c52]/10",children:"Animali"})]})]}):H.jsx("section",{className:"rounded-3xl border border-white/10 bg-white/10 p-6 text-center text-sm text-white/70 shadow-xl backdrop-blur",children:p?"Ricompensa pronta da raccogliere.":"Nessun combattimento attivo."})}),a&&(f!=null&&f.active)?H.jsx(U_,{open:n,locked:h,weapons:(u==null?void 0:u.weapons)??[],weaponConfigs:w,ammoInventory:(u==null?void 0:u.inventory.ammo)??K_,onClose:()=>o(!1),onConfirm:S}):null,a&&(f!=null&&f.active)?t&&(f!=null&&f.active)?H.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[H.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:()=>m(!1)}),H.jsxs("div",{className:"relative z-10 w-[min(720px,90%)] max-h-[80vh] overflow-hidden rounded-2xl border border-white/10 bg-black/40 p-4",children:[H.jsxs("div",{className:"flex items-center justify-between pb-3",children:[H.jsx("h3",{className:"text-sm uppercase text-white/60",children:"Scegli un animale"}),H.jsx("button",{type:"button",onClick:()=>m(!1),className:"text-sm text-white/50 hover:text-white",children:"Chiudi"})]}),H.jsx("div",{className:"space-y-2 overflow-auto pr-2",style:{maxHeight:"calc(80vh - 64px)"},children:N.length===0?H.jsx("p",{className:"text-sm text-white/60",children:"Nessun animale disponibile."}):N.map((I,B)=>C(I,B))})]})]}):H.jsx(V_,{open:t,animals:(u==null?void 0:u.animals.owned)??[],configs:l,onClose:()=>m(!1),onDeploy:P}):null]})},eS=({title:r,description:n})=>H.jsxs("div",{className:"rounded-xl border border-white/20 bg-black/80 p-4 text-sm text-white shadow-lg",children:[H.jsx("h3",{className:"text-base font-semibold",children:r}),n?H.jsx("p",{className:"mt-1 text-white/70",children:n}):null]}),So=1785,ko=1004,Gp=[{id:"bacheca",label:"Bacheca",hitboxPath:"/assets/casa/pulsanti/bacheca.json",image:"/assets/casa/pulsanti/bacheca.png",selectedImage:"/assets/casa/pulsanti/bacheca_selected.png",layout:{x:0,y:0,width:So,height:ko},labelPosition:{x:342,y:160},zIndex:10},{id:"incubatrice",label:"Incubatrice",hitboxPath:"/assets/casa/pulsanti/incubatrice.json",image:"/assets/casa/pulsanti/incubatrice.png",selectedImage:"/assets/casa/pulsanti/incubatrice_selected.png",layout:{x:0,y:0,width:So,height:ko},labelPosition:{x:389,y:630},zIndex:12},{id:"porta",label:"Lobby",hitboxPath:"/assets/casa/pulsanti/porta.json",image:"/assets/casa/pulsanti/porta.png",selectedImage:"/assets/casa/pulsanti/porta_selected.png",layout:{x:0,y:0,width:So,height:ko},labelPosition:{x:925,y:800},zIndex:8}],tS={1:{x:1500,y:408,width:260,height:220},2:{x:1390,y:140,width:220,height:240},3:{x:1180,y:872,width:340,height:220},4:{x:395,y:800,width:220,height:210}},rS={poltrona:1,mensola:4,tavolino:3,sedie:2,lampada:1,orologio:1,tappeto:1,tavolo:1},nS=r=>{const n=r.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_|_$/g,"");return n.length>0?n:"arredamento"},oS=r=>{const n=nS(r.name),o=rS[n],t=Number.isFinite(r.piecesNeeded)?r.piecesNeeded:0,m=Math.max(0,o??Math.max(0,Math.round(t)));return{key:n,maxStage:m}},Ti=(r,n)=>`${r/n*100}%`,sS=()=>{const r=Rs(),n=Mr(f=>f.save),[o,t]=Re.useState(null),[m,u]=Re.useState("none"),[a,p]=Re.useState({bacheca:!1,incubatrice:!1,porta:!1}),s=Re.useMemo(()=>n?n.house.objects:[],[n]),h=s.find(f=>f.id===o)??null,b=Re.useCallback((f,y)=>{p(g=>(g[f]??!1)===y?g:{...g,[f]:y})},[]),v=Re.useCallback(()=>{u("none"),t(null)},[]),i=Re.useCallback(f=>{if(f==="porta"){r("/lobby");return}if(f==="bacheca"){r("/medals");return}f==="incubatrice"&&u("incubatrice")},[r]);Re.useEffect(()=>{m!=="none"&&p({bacheca:!1,incubatrice:!1,porta:!1})},[m]);const d=Re.useMemo(()=>{const f=s.map((g,c)=>{const{key:l,maxStage:w}=oS(g),x=Math.max(0,w),_=Math.max(0,g.piecesOwned),T=g.unlocked?x:Math.min(x,_);return{id:`furniture-${g.id}`,image:`/assets/casa/arredamento/${l}_${T}.png`,layout:{x:0,y:0,width:So,height:ko},zIndex:2+c}}),y=Gp.map(g=>({id:g.id,image:g.image,selectedImage:g.selectedImage,hitboxPath:g.hitboxPath,layout:g.layout,zIndex:g.zIndex,onClick:()=>i(g.id),onHoverChange:c=>b(g.id,c)}));return{baseWidth:So,baseHeight:ko,backgroundImage:"/assets/casa/sfondo_casa.png",elements:[...f,...y]}},[i,b,s]);return H.jsxs("div",{className:"relative min-h-screen flex flex-col bg-[#080910] text-white",children:[H.jsx("div",{className:"pointer-events-none absolute inset-x-0 top-0 z-50",children:H.jsx("div",{className:"group/header relative h-8 w-full pointer-events-auto",children:H.jsxs("div",{className:"absolute inset-x-0 top-0 flex items-center justify-between px-6 py-3 bg-[#0b3a6f]/90 text-whit border-b border-white/10 backdrop-blur transition-all duration-300 ease-out  opacity-0 -translate-y-full  group-hover/header:opacity-100 group-hover/header:translate-y-0  pointer-events-auto",children:[H.jsx("span",{className:"text-xs uppercase tracking-[0.4em]",children:"Casa"}),H.jsx("button",{type:"button",onClick:()=>r("/lobby"),className:"rounded-full border border-white/30 px-4 py-1 text-xs uppercase tracking-widest transition hover:border-[#a67c52] hover:text-[#a67c52]",children:"Lobby"})]})})}),H.jsx("main",{className:"relative flex-1",children:H.jsx("div",{className:"absolute inset-0",children:H.jsxs("div",{className:"relative w-screen h-full overflow-hidden",children:[H.jsx(Qg,{config:d,className:"w-full h-full"}),H.jsx("div",{className:"absolute inset-0",children:s.map(f=>{const y=tS[f.id],g=y?Ti(y.x,So):"50%",c=y?Ti(y.y,ko):"85%",l=f.piecesNeeded?Math.round(f.piecesOwned/f.piecesNeeded*100):0,w=f.unlocked,x=o===f.id;return H.jsx("div",{className:"absolute inset-0 pointer-events-none",children:H.jsx("div",{className:"absolute -translate-x-1/2 -translate-y-1/2 pointer-events-none",style:{left:g,top:c},children:H.jsxs("button",{type:"button",disabled:m!=="none",onClick:()=>t(f.id),className:`pointer-events-auto flex min-w-[200px] flex-col gap-2 rounded-2xl border px-4 py-3 text-left backdrop-blur-sm transition ${w?"border-emerald-400/60 bg-emerald-500/20":"border-white/20 bg-black/60"} ${x?"ring-2 ring-[#a67c52]":""} disabled:cursor-not-allowed disabled:opacity-60`,children:[H.jsx("span",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-white",children:f.name}),H.jsxs("span",{className:"text-xs uppercase text-white/70",children:[f.piecesOwned,"/",f.piecesNeeded," pezzi"]}),H.jsx("div",{className:"h-1.5 w-full overflow-hidden rounded bg-white/15",children:H.jsx("div",{className:`h-full ${w?"bg-emerald-400":"bg-white/50"}`,style:{width:`${Math.min(100,Math.max(0,l))}%`}})}),H.jsx("span",{className:"text-[11px] uppercase tracking-[0.3em] text-white/60",children:w?"Bonus attivo":`${l}% completato`})]})})},f.id)})}),H.jsx("div",{className:"pointer-events-none absolute inset-0",children:Gp.map(f=>{const y=a[f.id],g=f.id==="bacheca"&&(n==null?void 0:n.medals.highlighted);return H.jsx("div",{className:"absolute -translate-x-1/2 -translate-y-1/2",style:{left:Ti(f.labelPosition.x,So),top:Ti(f.labelPosition.y,ko)},children:H.jsx("span",{className:`rounded-full border px-3 py-1 text-[11px] uppercase tracking-[0.35em] ${g?"border-yellow-300 bg-yellow-400/20 text-yellow-200":y?"border-[#a67c52] bg-black/70 text-[#a67c52]":"border-white/30 bg-black/60 text-white"}`,children:f.label})},`label-${f.id}`)})})]})})}),m==="bacheca"?H.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-6",children:H.jsxs("div",{className:"relative w-full max-w-4xl rounded-[28px] border border-white/10 bg-[#111522]/95 p-6 shadow-xl",children:[H.jsx("button",{type:"button",onClick:v,className:"absolute right-6 top-6 rounded-full border border-white/20 px-3 py-1 text-xs uppercase tracking-[0.4em] text-white/80 transition hover:border-[#a67c52] hover:text-[#a67c52]",children:"Chiudi"}),H.jsx("h2",{className:"text-xl font-semibold uppercase tracking-[0.4em] text-white/80",children:"Bacheca delle Medaglie"}),H.jsx("p",{className:"mt-2 text-sm text-white/60",children:"Esplora la collezione di oggetti sbloccati nella tua casa."}),s.length===0?H.jsx("p",{className:"mt-6 rounded-2xl border border-white/10 bg-white/5 p-6 text-center text-sm text-white/70",children:"Trova pezzi nell'avventura per iniziare ad arredare la casa."}):H.jsx("div",{className:"mt-6 grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:s.map(f=>H.jsxs("button",{type:"button",onClick:()=>t(f.id),className:"rounded-3xl border border-white/10 bg-white/5 p-4 text-left transition hover:border-[#a67c52] hover:text-[#a67c52]",children:[H.jsx("span",{className:"text-lg font-semibold text-white",children:f.name}),H.jsxs("div",{className:"mt-2 text-xs uppercase text-white/60",children:[H.jsxs("span",{className:"block",children:[f.piecesOwned,"/",f.piecesNeeded," pezzi"]}),H.jsx("span",{className:"block",children:f.unlocked?"Completato":"Incompleto"})]})]},f.id))}),h?H.jsxs("div",{className:"mt-6 space-y-3 rounded-2xl border border-white/10 bg-black/70 p-4 text-sm",children:[H.jsx(eS,{title:h.name,description:h.unlocked?`Bonus ogni ${h.bonus.turnsCooldown} turni`:void 0}),h.unlocked?H.jsxs("div",{className:"text-white/80",children:[H.jsxs("p",{children:["Bonus:"," ",Array.isArray(h.bonus.amount)?h.bonus.amount.join(", "):h.bonus.amount]}),H.jsxs("p",{className:"text-white/60",children:["Turni al prossimo bonus: ",h.turnsToNextBonus??"-"]})]}):H.jsxs("p",{className:"text-white/70",children:["Pezzi mancanti: ",h.piecesNeeded-h.piecesOwned]})]}):null]})}):null,m==="incubatrice"?H.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-6",children:H.jsxs("div",{className:"relative w-full max-w-md rounded-[28px] border border-white/10 bg-[#111522]/95 p-6 text-center shadow-xl",children:[H.jsx("button",{type:"button",onClick:v,className:"absolute right-6 top-6 rounded-full border border-white/20 px-3 py-1 text-xs uppercase tracking-[0.4em] text-white/80 transition hover:border-[#a67c52] hover:text-[#a67c52]",children:"Chiudi"}),H.jsx("h2",{className:"text-lg font-semibold uppercase tracking-[0.4em] text-white/80",children:"Incubatrice"}),H.jsx("p",{className:"mt-4 text-sm text-white/70",children:"Questa sezione non  ancora disponibile. Torna pi tardi per scoprire novit!"})]})}):null]})},aS=()=>{const{save:r,openChest:n}=Mr(x=>({save:x.save,openChest:x.openChest})),[o,t]=Re.useState(null),[m,u]=Re.useState("idle"),[a,p]=Re.useState(null),[s,h]=Re.useState(null);Re.useEffect(()=>{console.debug("[ChestRoute] Game state snapshot:",Mr.getState())},[]);const b=(r==null?void 0:r.chests.inventory)??{common:0,uncommon:0,rare:0,epic:0,legendary:0},v=(r==null?void 0:r.chests.unlockedHistory)??[],i=(r==null?void 0:r.house.objects)??[],d=o?b[o]??0:0,f=x=>{if(tv(x.type)){const _=rv(x.type),T=nv(i,_);return T?`Pezzi arredamento (${T})`:"Pezzi arredamento"}return x.type},y=x=>{if(!x)return"Nessun bottino";if(yl(x.type)){const _=gl(x.type);return`Medaglietta ${Ms[_]}`}return`+${x.qty} ${f(x)}`},g=x=>{h(null),o!==x&&(t(x),u("preview"),p(null))},c=()=>{if(!o)return;if((b[o]??0)<=0){h("Nessun baule di questa rarit disponibile.");return}u("opening"),h(null),window.setTimeout(()=>{const _=n(o);p(_),u("opened")},1200)},l=()=>{u("preview"),p(null),h(null)},w=o?Yc.find(x=>x.id===o):null;return H.jsxs("div",{className:"relative min-h-screen overflow-hidden text-white",children:[H.jsxs("div",{className:"absolute inset-0 -z-10",children:[H.jsx("div",{className:"absolute inset-0 bg-[url('/assets/lobby/sfondo_lobby.png')] bg-cover bg-center blur-sm opacity-60"}),H.jsx("div",{className:"absolute inset-0 bg-black/75"})]}),H.jsxs("div",{className:"mx-auto flex min-h-screen w-full max-w-[1400px] flex-col px-6 py-10",children:[H.jsxs("header",{className:"flex items-center justify-between border-b border-white/10 pb-5 uppercase tracking-[0.4em] text-white/70",children:[H.jsx("span",{children:"Bauli"}),H.jsx(Vr,{to:"/lobby",className:"rounded-full border border-white/30 px-4 py-1 text-xs uppercase tracking-widest transition hover:border-yellow-400 hover:text-yellow-300",children:"Lobby"})]}),H.jsxs("div",{className:"mt-10 flex flex-col gap-8 lg:flex-row",children:[H.jsx("aside",{className:"w-full lg:max-w-sm",children:H.jsx("ul",{className:"space-y-4",children:Yc.map(x=>{const _=b[x.id]??0,T=o===x.id;return H.jsx("li",{children:H.jsxs("button",{type:"button",onClick:()=>g(x.id),disabled:m==="opening",className:Sn("flex w-full items-center justify-between gap-4 rounded-3xl border px-4 py-3 text-left transition-all duration-300",T?"border-yellow-400 bg-yellow-400/15 text-yellow-200 shadow-lg shadow-yellow-400/20 scale-[1.02]":"border-white/10 bg-white/5 text-white/80 hover:border-yellow-300/60 hover:scale-[1.01]",m==="opening"&&"opacity-50 cursor-not-allowed"),children:[H.jsxs("div",{className:"flex items-center gap-4",children:[H.jsx("img",{src:x.image,alt:x.name,className:"h-16 w-16 rounded-2xl bg-black/40 object-contain"}),H.jsxs("div",{children:[H.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.35em]",children:x.name}),H.jsx("p",{className:"mt-1 text-xs text-white/60",children:x.description})]})]}),H.jsxs("span",{className:"rounded-full border border-white/15 bg-black/40 px-3 py-1 text-xs uppercase tracking-[0.35em] text-white/70",children:["x",_]})]})},x.id)})})}),H.jsxs("section",{className:"relative flex flex-1 flex-col items-center justify-center rounded-3xl border border-white/10 bg-black/40 p-8 shadow-lg",children:[s?H.jsx("div",{className:"absolute top-6 left-1/2 -translate-x-1/2 rounded-full border border-red-400/40 bg-red-500/10 px-4 py-2 text-xs uppercase tracking-[0.35em] text-red-200",children:s}):null,w?H.jsxs("div",{className:"flex flex-col items-center text-center",children:[H.jsx("h2",{className:"text-2xl font-semibold uppercase tracking-[0.35em] text-white/80",children:w.name}),H.jsx("p",{className:"mt-2 max-w-md text-sm text-white/60",children:w.description}),H.jsxs("div",{className:Sn("relative mt-8 flex h-64 w-64 items-center justify-center rounded-full shadow-2xl transition-all duration-500",m==="preview"&&"bg-black/30",m==="opening"&&"bg-gradient-to-br from-yellow-500/20 to-orange-500/20 animate-pulse scale-110",m==="opened"&&"bg-gradient-to-br from-emerald-500/20 to-green-500/10"),style:{boxShadow:m==="opening"?`0 0 60px ${w.accent}40`:m==="opened"?"0 0 40px rgba(34, 197, 94, 0.3)":"none"},children:[m==="opening"&&H.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-yellow-400/50 animate-ping"}),m!=="opened"?H.jsx("img",{src:w.image,alt:w.name,className:Sn("h-48 w-48 object-contain transition-all duration-500",m==="opening"&&"scale-90 blur-sm")}):H.jsx("div",{className:"flex h-full w-full items-center justify-center p-6 animate-fade-in",children:a!=null&&a.loot?H.jsxs("div",{className:"text-center",children:[H.jsx("div",{className:"text-6xl mb-3",children:""}),H.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-emerald-300/80",children:"Ricompensa"}),H.jsx("p",{className:"mt-2 text-2xl font-bold text-emerald-100",children:y(a.loot)})]}):H.jsxs("div",{className:"text-center",children:[H.jsx("div",{className:"text-5xl mb-3",children:""}),H.jsx("p",{className:"text-sm text-emerald-100/70",children:"Nessun bottino"})]})})]}),m==="preview"?H.jsx("button",{type:"button",onClick:c,disabled:d<=0,className:Sn("mt-8 rounded-full px-8 py-3 font-semibold uppercase tracking-[0.35em] transition-all duration-300",d>0?"bg-gradient-to-r from-yellow-500 to-orange-500 text-white shadow-lg shadow-yellow-500/30 hover:scale-105 hover:shadow-xl hover:shadow-yellow-500/40":"cursor-not-allowed border border-white/10 bg-white/10 text-white/40"),children:"Apri Baule"}):null,m==="opening"?H.jsxs("div",{className:"mt-8 flex flex-col items-center gap-2",children:[H.jsxs("div",{className:"flex gap-2",children:[H.jsx("div",{className:"h-3 w-3 animate-bounce rounded-full bg-yellow-400",style:{animationDelay:"0ms"}}),H.jsx("div",{className:"h-3 w-3 animate-bounce rounded-full bg-yellow-400",style:{animationDelay:"150ms"}}),H.jsx("div",{className:"h-3 w-3 animate-bounce rounded-full bg-yellow-400",style:{animationDelay:"300ms"}})]}),H.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.35em] text-yellow-200",children:"Apertura in corso..."})]}):null,m==="opened"?H.jsxs("div",{className:"mt-6 flex w-full max-w-md flex-col gap-4 animate-fade-in",children:[a!=null&&a.medalUnlocked?H.jsx("div",{className:"rounded-full border border-yellow-400/40 bg-yellow-400/10 px-6 py-2 text-center",children:H.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-yellow-300",children:" Nuova medaglietta ottenuta!"})}):null,H.jsx("div",{className:"flex gap-3",children:H.jsxs("button",{type:"button",onClick:l,disabled:(o&&b[o]?b[o]:0)<=0,className:Sn("flex-1 rounded-full border px-6 py-3 font-semibold uppercase tracking-[0.35em] transition-all duration-300",(o&&b[o]?b[o]:0)>0?"border-yellow-400/60 bg-yellow-400/10 text-yellow-200 hover:scale-105 hover:bg-yellow-400/20 hover:shadow-lg hover:shadow-yellow-400/30":"cursor-not-allowed border-white/10 bg-white/5 text-white/30"),children:["Apri Altro (",o&&b[o]?b[o]:0,")"]})})]}):null]}):H.jsx("p",{className:"text-sm text-white/60",children:"Scegli un baule per visualizzare i dettagli e aprirlo."})]})]}),H.jsxs("section",{className:"mt-10 rounded-3xl border border-white/10 bg-white/5 p-6 shadow-lg",children:[H.jsx("h2",{className:"text-lg font-semibold uppercase tracking-[0.3em] text-white/70",children:"Storia ricompense"}),v.length?H.jsx("ul",{className:"mt-4 space-y-3 text-sm",children:v.slice().reverse().map((x,_)=>H.jsxs("li",{className:"flex items-center justify-between rounded-2xl border border-white/10 bg-black/30 px-4 py-3",children:[H.jsxs("div",{children:[H.jsx("p",{className:"font-semibold text-white",children:x.rarity}),H.jsx("p",{className:"text-xs text-white/60",children:new Date(x.time).toLocaleString()})]}),H.jsx("span",{className:"text-sm text-yellow-200",children:y(x.loot??null)})]},`${x.time}-${_}`))}):H.jsx("p",{className:"mt-4 text-sm text-white/60",children:"Nessun baule aperto finora."})]})]})]})},iS=()=>{const r=[{name:"Luca Bertotto",role:"Project Manager & Graphics"},{name:"Marco Bertotto",role:"Development Support"},{name:"Matteo Bertotto",role:"Game Design & Rules"},{name:"Kevin Delugan",role:"Graphics & Prototype Development"},{name:"Philip Fleckinger",role:"Database Design & Game Logic"}];return H.jsxs("div",{className:"relative min-h-screen overflow-hidden text-white",children:[H.jsxs("div",{className:"absolute inset-0 -z-10",children:[H.jsx("div",{className:"absolute inset-0 bg-[url('/assets/lobby/sfondo_lobby.png')] bg-cover bg-center blur"}),H.jsx("div",{className:"absolute inset-0 bg-black/70"})]}),H.jsxs("div",{className:"mx-auto flex min-h-screen w-full max-w-[960px] flex-col items-center gap-10 px-6 py-12 text-center",children:[H.jsxs("header",{className:"flex w-full items-center justify-between text-xs uppercase tracking-[0.35em] text-white/60",children:[H.jsx("span",{children:"Crediti"}),H.jsx(Vr,{to:"/",className:"rounded-full border border-white/30 px-4 py-1 text-xs uppercase tracking-widest transition-colors hover:border-[#a67c52] hover:text-[#a67c52]",children:"Torna al menu"})]}),H.jsxs("div",{className:"mt-8 flex flex-col items-center gap-4",children:[H.jsx("h1",{className:"text-5xl font-display uppercase tracking-[0.5em] text-white drop-shadow",children:"B8 Studios"}),H.jsx("p",{className:"max-w-lg text-sm text-white/60",children:"Un progetto creato con passione e dedizione dal team B8 Studios. Grazie per aver aperto le nostre porte."})]}),H.jsx("ul",{className:"w-full space-y-4 text-center",children:r.map(n=>H.jsxs("li",{className:"group rounded-3xl border border-white/15 bg-white/10 py-4 px-4 backdrop-blur transition-all hover:bg-white/20 hover:border-[#a67c52]",children:[H.jsx("span",{className:"block text-xs uppercase tracking-[0.3em] text-white/60 mb-1 transition-colors group-hover:text-[#a67c52]",children:n.role}),H.jsx("span",{className:"block text-lg font-semibold tracking-[0.25em] text-white transition-colors group-hover:text-[#a67c52]",children:n.name})]},n.name))})]})]})},Vp=r=>`/assets/armi/${`${encodeURIComponent(r.toLowerCase())}.png`}`,lS=["bullets","shells","arrows","darts","grenades"],Hp={bullets:"Proiettili",shells:"Cartucce",arrows:"Frecce",darts:"Dardi",grenades:"Granate"},uS={bullets:0,shells:0,arrows:0,darts:0,grenades:0},Wp=r=>r==="Small"?"Piccolo":"Grande",cS=()=>{var E;const{save:r,configs:n,feedAnimal:o,growAnimal:t}=Mr(S=>({save:S.save,configs:S.configs,feedAnimal:S.feedAnimal,growAnimal:S.growAnimal})),[m,u]=Re.useState("animals"),[a,p]=Re.useState(null),[s,h]=Re.useState(null),b=(n==null?void 0:n.animals)??[],v=(n==null?void 0:n.weapons)??[];Re.useEffect(()=>{console.debug("[InventoryRoute] Game state snapshot:",Mr.getState())},[]);const i=(r==null?void 0:r.animals.owned)??[],d=(r==null?void 0:r.weapons)??[],f=(r==null?void 0:r.inventory.food)??0,y=(r==null?void 0:r.inventory.ammo)??uS,g=Re.useMemo(()=>{const S=[];return i.forEach((P,N)=>{const C=b.find(W=>W.id===P.configId)??null,D=Xc(C,P),L=Dg(C,P),F=Fg(C,P),I=D.staminaCap>0?Math.round(Math.max(0,P.stamina)/D.staminaCap*100):0,B=D.lifeCap>0?Math.round(Math.max(0,P.life)/D.lifeCap*100):0;S.push({index:N,instance:P,config:C,name:(C==null?void 0:C.kind)??`#${P.configId}`,stats:D,readiness:L,missingStamina:F,staminaPercent:I,lifePercent:B})}),S},[i,b]),c=Re.useMemo(()=>g.reduce((S,P)=>(S[P.readiness].push(P),S),{ready:[],recovering:[],fallen:[]}),[g]),l=Re.useMemo(()=>a===null?null:g.find(S=>S.index===a)??null,[a,g]),w=Re.useMemo(()=>{if(!l||!l.config||l.instance.size!=="Small")return null;const S={...l.instance,size:"Adult",life:l.config.life,stamina:l.config.staminaMax};return Xc(l.config,S)},[l]);Re.useMemo(()=>lS.map(S=>({kind:S,amount:y[S]??0})),[y]);const x=Re.useMemo(()=>{if(s===null)return null;const S=d[s];if(!S)return null;const P=v.find(C=>C.name===S.name);if(!P)return null;const N=y[P.ammoType]??0;return{weapon:S,config:P,ammoAvailable:N}},[s,d,v,y]),_=S=>{o(S)},T=S=>{t(S)};return H.jsxs("div",{className:"relative min-h-screen overflow-hidden text-white",children:[H.jsxs("div",{className:"absolute inset-0 -z-10",children:[H.jsx("div",{className:"absolute inset-0 bg-[url('/assets/lobby/sfondo_lobby.png')] bg-cover bg-center blur"}),H.jsx("div",{className:"absolute inset-0 bg-black/70"})]}),H.jsxs("div",{className:"mx-auto flex min-h-screen w-full max-w-[1400px] flex-col gap-8 px-6 py-10",children:[H.jsxs("header",{className:"flex items-center justify-between border-b border-white/10 pb-4",children:[H.jsxs("div",{children:[H.jsx("h1",{className:"text-4xl font-display uppercase tracking-[0.5em] text-white/80",children:"Inventario"}),H.jsx("p",{className:"mt-1 text-sm text-white/60",children:"Gestisci animali e armi disponibili prima di entrare in battaglia."})]}),H.jsx(Vr,{to:"/lobby",className:"rounded-full border border-white/30 px-5 py-2 text-xs uppercase tracking-[0.35em] text-white/70 transition hover:border-[#a67c52] hover:text-[#a67c52]",children:"Torna alla lobby"})]}),H.jsxs("section",{className:"flex flex-col gap-6 rounded-3xl border border-white/10 bg-white/10 p-6 shadow-xl backdrop-blur",children:[H.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm uppercase text-white/70",children:[H.jsxs("div",{className:"rounded-full border border-white/15 bg-black/40 px-4 py-2",children:[H.jsx("span",{className:"text-white/50",children:"Monete"}),H.jsx("span",{className:"ml-3 font-semibold text-white",children:(r==null?void 0:r.inventory.coins)??0})]}),H.jsxs("div",{className:"rounded-full border border-white/15 bg-black/40 px-4 py-2",children:[H.jsx("span",{className:"text-white/50",children:"Cibo"}),H.jsx("span",{className:"ml-3 font-semibold text-white",children:(r==null?void 0:r.inventory.food)??0})]})]}),H.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[H.jsx("button",{type:"button",onClick:()=>{u("weapons"),h(0)},className:`rounded-full px-6 py-2 text-sm uppercase tracking-[0.3em] transition ${m==="weapons"?"border border-[#a67c52] bg-[#a67c52]/20 text-[#a67c52]":"border border-white/20 bg-black/40 text-white/60 hover:border-[#a67c52] hover:text-[#a67c52]"}`,children:"Armi"}),H.jsx("button",{type:"button",onClick:()=>{var P;u("animals");const S=((P=g.find(N=>N.readiness!=="fallen"))==null?void 0:P.index)??null;p(S)},className:`rounded-full px-6 py-2 text-sm uppercase tracking-[0.3em] transition ${m==="animals"?"border border-[#a67c52] bg-[#a67c52]/20 text-[#a67c52]":"border border-white/20 bg-black/40 text-white/60 hover:border-[#a67c52] hover:text-[#a67c52]"}`,children:"Animali"})]}),m==="animals"?H.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.2fr_1fr]",children:[H.jsx("div",{className:"space-y-5 overflow-y-auto rounded-2xl border border-white/10 bg-black/30 p-4 max-h-[420px]",children:g.length===0?H.jsx("p",{className:"text-sm text-white/60",children:"Non hai ancora trovato animali. Esplora nuove porte per ampliare la squadra."}):H.jsx(H.Fragment,{children:[{key:"ready",title:"Pronti a combattere"},{key:"recovering",title:"In recupero"}].map(({key:S,title:P})=>{const N=c[S];return N.length?H.jsxs("div",{children:[H.jsx("h3",{className:"text-xs uppercase tracking-[0.3em] text-white/50",children:P}),H.jsx("div",{className:"mt-2 space-y-3",children:N.map(C=>{var W;const D=a===C.index,L=C.readiness==="ready"?"Pronto":"In recupero",F=C.readiness==="ready"?"border-emerald-400/40 bg-emerald-500/10 text-emerald-200":"border-amber-300/40 bg-amber-400/10 text-amber-200",I=C.readiness==="ready"?"Stamina al massimo.":`Mancano ${C.missingStamina} stamina - costo cibo ${C.missingStamina}`,B=td(C.config);return H.jsx("button",{type:"button",onClick:()=>p(C.index),className:`w-full rounded-2xl border px-4 py-3 text-left transition ${D?"border-[#a67c52] bg-[#a67c52]/10":"border-white/10 bg-white/5 hover:border-[#a67c52]/60"}`,children:H.jsxs("div",{className:"flex items-start gap-3",children:[H.jsx("div",{className:"flex-shrink-0",children:H.jsx("img",{src:B,alt:C.name,className:"h-14 w-14 rounded-lg object-contain bg-black/20 p-1",draggable:!1,onError:rd})}),H.jsxs("div",{className:"flex-1 min-w-0",children:[H.jsxs("div",{className:"flex items-start justify-between text-sm text-white/80",children:[H.jsxs("div",{children:[H.jsx("span",{className:"font-semibold text-white",children:C.name}),H.jsx("span",{className:"ml-3 text-xs uppercase text-white/50",children:Wp(C.instance.size)})]}),H.jsx("span",{className:`rounded-full border px-2 py-0.5 text-[10px] uppercase tracking-[0.2em] ${F}`,children:L})]}),H.jsx("div",{className:"mt-3 h-2 w-full overflow-hidden rounded bg-white/10",children:H.jsx("div",{className:"h-full bg-emerald-400",style:{width:`${Math.min(100,Math.max(0,C.staminaPercent))}%`}})}),H.jsx("p",{className:"mt-2 text-xs text-white/60",children:I})]})]})},`${((W=C.config)==null?void 0:W.id)??"cfg"}-${C.index}`)})})]},S):S==="ready"?null:H.jsxs("div",{children:[H.jsx("h3",{className:"text-xs uppercase tracking-[0.3em] text-white/50",children:P}),H.jsx("p",{className:"mt-1 text-xs text-white/50",children:S==="recovering"?"Nessun animale sta recuperando stamina.":null})]},S)})})}),H.jsx("div",{className:"rounded-2xl border border-white/10 bg-black/40 p-5",children:l?H.jsxs("div",{className:"space-y-4 text-sm text-white/80",children:[H.jsxs("div",{className:"flex items-start gap-4",children:[H.jsx("div",{className:"flex-shrink-0",children:H.jsx("img",{src:td(l.config),alt:l.name,className:"h-24 w-24 rounded-xl object-contain bg-black/30 p-2",draggable:!1,onError:rd})}),H.jsxs("div",{className:"flex-1",children:[H.jsx("h2",{className:"text-xl font-semibold text-white",children:l.name}),H.jsxs("p",{className:"text-xs uppercase text-white/50",children:[Wp(l.instance.size)," -"," ",l.readiness==="ready"?"Pronto":l.readiness==="recovering"?"In recupero":"Ko"]})]})]}),H.jsxs("div",{className:"space-y-3 text-xs uppercase text-white/60",children:[H.jsxs("div",{children:[H.jsx("span",{children:"Stamina"}),H.jsx("div",{className:"mt-1 h-2 w-full overflow-hidden rounded bg-white/10",children:H.jsx("div",{className:"h-full bg-emerald-400",style:{width:`${Math.min(100,Math.max(0,Math.round(l.instance.stamina/l.stats.staminaCap*100)))}%`}})}),H.jsxs("span",{className:"mt-1 block text-white/50",children:[l.instance.stamina,"/",l.stats.staminaCap]})]}),H.jsxs("div",{children:[H.jsx("span",{children:"Vita"}),H.jsx("div",{className:"mt-1 h-2 w-full overflow-hidden rounded bg-white/10",children:H.jsx("div",{className:"h-full bg-sky-400",style:{width:`${Math.min(100,Math.max(0,Math.round(l.instance.life/l.stats.lifeCap*100)))}%`}})}),H.jsxs("span",{className:"mt-1 block text-white/50",children:[l.instance.life,"/",l.stats.lifeCap]})]})]}),H.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-white/70",children:[H.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 p-3",children:[H.jsx("p",{className:"uppercase text-white/40",children:"Danno"}),H.jsx("p",{className:"text-lg font-semibold text-white",children:l.stats.damage})]}),H.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 p-3",children:[H.jsx("p",{className:"uppercase text-white/40",children:"Velocit"}),H.jsx("p",{className:"text-lg font-semibold text-white",children:l.stats.attackSpeed})]}),H.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 p-3",children:[H.jsx("p",{className:"uppercase text-white/40",children:"Armatura"}),H.jsx("p",{className:"text-lg font-semibold text-white",children:l.instance.armor??0})]})]}),H.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 p-3 text-xs text-white/70",children:[H.jsx("p",{className:"uppercase text-white/40",children:"Recupero"}),l.readiness==="recovering"?H.jsxs("p",{className:"mt-1",children:["Mancano"," ",H.jsx("span",{className:"font-semibold text-white",children:l.missingStamina})," ","stamina - costo cibo"," ",H.jsx("span",{className:"font-semibold text-white",children:l.missingStamina})]}):l.readiness==="ready"?H.jsx("p",{className:"mt-1 text-white/60",children:"Pronto a combattere."}):H.jsx("p",{className:"mt-1 text-white/60",children:"Dibattimento terminato: aspetta la prossima porta per recuperare."}),H.jsx("p",{className:"mt-2 text-[10px] uppercase tracking-[0.25em] text-white/40",children:"1 cibo = 1 stamina"})]}),l.instance.size==="Small"&&l.config&&w?H.jsxs("div",{className:"space-y-2 text-xs text-white/70",children:[H.jsx("h3",{className:"text-xs uppercase tracking-[0.3em] text-white/50",children:"Crescita a adulto"}),H.jsxs("p",{className:"text-white/60",children:["Costo crescita:"," ",H.jsxs("span",{className:"font-semibold text-white",children:[l.config.growthFoodCost," cibo"]})]}),H.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[11px]",children:[H.jsxs("div",{className:"rounded-lg border border-white/10 bg-black/30 p-3",children:[H.jsx("p",{className:"uppercase text-white/40",children:"Statistiche attuali"}),H.jsxs("ul",{className:"mt-1 space-y-1 text-white/70",children:[H.jsxs("li",{children:["Vita ",l.stats.lifeCap]}),H.jsxs("li",{children:["Danno ",l.stats.damage]}),H.jsxs("li",{children:["Velocit ",l.stats.attackSpeed]}),H.jsxs("li",{children:["Stamina ",l.stats.staminaCap]})]})]}),H.jsxs("div",{className:"rounded-lg border border-amber-300/40 bg-amber-400/10 p-3",children:[H.jsx("p",{className:"uppercase text-amber-200",children:"Forma adulta"}),H.jsxs("ul",{className:"mt-1 space-y-1 text-amber-100",children:[H.jsxs("li",{children:["Vita ",w.lifeCap]}),H.jsxs("li",{children:["Danno ",w.damage]}),H.jsxs("li",{children:["Velocit ",w.attackSpeed]}),H.jsxs("li",{children:["Stamina ",w.staminaCap]})]})]})]})]}):null,(E=l.config)!=null&&E.upgradableArmor?H.jsx("p",{className:"text-[11px] uppercase tracking-[0.25em] text-white/40",children:"Pu equipaggiare armature quando disponibili."}):null,H.jsxs("div",{className:"flex flex-wrap gap-3",children:[H.jsx("button",{type:"button",disabled:l.instance.stamina>=l.stats.staminaCap||f<=0,onClick:()=>_(l.index),className:"rounded-full border border-emerald-400 px-4 py-2 text-xs uppercase tracking-[0.35em] text-emerald-200 transition hover:bg-emerald-400/10 disabled:cursor-not-allowed disabled:border-emerald-900 disabled:text-emerald-900",children:"Nutri"}),l.instance.size==="Small"&&l.config?H.jsx("button",{type:"button",disabled:f<l.config.growthFoodCost,onClick:()=>T(l.index),className:"rounded-full border border-amber-300 px-4 py-2 text-xs uppercase tracking-[0.35em] text-amber-200 transition hover:bg-amber-300/10 disabled:cursor-not-allowed disabled:border-amber-900 disabled:text-amber-900",children:"Fai crescere"}):null,H.jsx("button",{type:"button",onClick:()=>p(null),className:"ml-auto rounded-full border border-white/20 px-4 py-2 text-xs uppercase tracking-[0.35em] text-white/60 transition hover:border-white/40 hover:text-white",children:"Indietro"})]})]}):H.jsx("p",{className:"text-sm text-white/60",children:"Seleziona un animale per vedere i dettagli e nutrirlo."})})]}):H.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.2fr_1fr]",children:[H.jsx("div",{className:"space-y-3 overflow-y-auto rounded-2xl border border-white/10 bg-black/30 p-4 max-h-[420px]",children:d.length===0?H.jsx("p",{className:"text-sm text-white/60",children:"Nessuna arma disponibile."}):d.map((S,P)=>{const N=v.find(B=>B.name===S.name);if(!N)return null;const C=s===P,D=y[N.ammoType]??0,L=Math.min(D,N.maxAmmo),F=N.maxAmmo>0?Math.round(L/N.maxAmmo*100):0,I=Vp(N.displayName);return H.jsx("button",{type:"button",onClick:()=>h(P),className:`w-full rounded-2xl border px-4 py-3 text-left transition ${C?"border-[#a67c52] bg-[#a67c52]/10":"border-white/10 bg-white/5 hover:border-[#a67c52]/60"}`,children:H.jsxs("div",{className:"flex items-start gap-3",children:[H.jsxs("div",{className:"flex-shrink-0 relative",children:[H.jsx("img",{src:"/assets/armi/badge.png",alt:"badge",className:"h-14 w-14 object-contain",draggable:!1}),H.jsx("img",{src:I,alt:N.displayName,className:"absolute inset-0 h-14 w-14 object-contain p-1",draggable:!1,onError:B=>{B.currentTarget.style.display="none"}})]}),H.jsxs("div",{className:"flex-1 min-w-0",children:[H.jsxs("div",{className:"flex items-center justify-between text-sm text-white/80",children:[H.jsx("span",{className:"font-semibold text-white",children:N.displayName}),H.jsx("span",{className:"text-xs uppercase text-white/50",children:Hp[N.ammoType]})]}),H.jsx("div",{className:"mt-3 h-2 w-full overflow-hidden rounded bg-white/10",children:H.jsx("div",{className:"h-full",style:{backgroundColor:"#a67c52",width:`${Math.min(100,Math.max(0,F))}%`}})}),H.jsxs("p",{className:"mt-2 text-xs uppercase text-white/60",children:["Disponibili:"," ",H.jsx("span",{className:"font-semibold text-white",children:D})]})]})]})},S.name)})}),H.jsx("div",{className:"rounded-2xl border border-white/10 bg-black/40 p-5",children:x?H.jsxs("div",{className:"space-y-4 text-sm text-white/80",children:[H.jsxs("div",{className:"flex items-start gap-4",children:[H.jsxs("div",{className:"flex-shrink-0 relative",children:[H.jsx("img",{src:"/assets/armi/badge.png",alt:"badge",className:"h-24 w-24 object-contain",draggable:!1}),H.jsx("img",{src:Vp(x.config.displayName),alt:x.config.displayName,className:"absolute inset-0 h-24 w-24 object-contain p-2",draggable:!1,onError:S=>{S.currentTarget.style.display="none"}})]}),H.jsxs("div",{className:"flex-1",children:[H.jsx("h2",{className:"text-xl font-semibold text-white",children:x.config.displayName}),H.jsx("p",{className:"text-xs uppercase text-white/50",children:Hp[x.config.ammoType]})]})]}),H.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs text-white/70",children:[H.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 p-3",children:[H.jsx("p",{className:"uppercase text-white/40",children:"Munizioni disponibili"}),H.jsx("p",{className:"text-lg font-semibold text-white",children:x.ammoAvailable}),H.jsxs("p",{className:"mt-1 text-[10px] uppercase text-white/40",children:["Max per attacco:"," ",H.jsx("span",{className:"font-semibold text-white/70",children:x.config.maxAmmo})]})]}),H.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 p-3",children:[H.jsx("p",{className:"uppercase text-white/40",children:"Danno per colpo"}),H.jsx("p",{className:"text-lg font-semibold text-white",children:x.config.damagePerShot})]})]}),H.jsx("button",{type:"button",onClick:()=>h(null),className:"ml-auto rounded-full border border-white/20 px-4 py-2 text-xs uppercase tracking-[0.35em] text-white/60 transition hover:border-white/40 hover:text-white",children:"Indietro"})]}):H.jsx("p",{className:"text-sm text-white/60",children:"Seleziona un'arma per controllare le statistiche."})})]})]})]})]})},dS=()=>{const{save:r,acknowledgeMedalHighlight:n}=Mr(u=>({save:u.save,acknowledgeMedalHighlight:u.acknowledgeMedalHighlight}));Re.useEffect(()=>{r!=null&&r.medals.highlighted&&n()},[r==null?void 0:r.medals.highlighted,n]);const o=ya.length,t=ya.reduce((u,a)=>{const p=r==null?void 0:r.medals.entries[a.type];return p!=null&&p.unlocked?u+1:u},0),m=o>0?Math.round(t/o*100):0;return H.jsx("div",{className:"min-h-screen text-white bg-gradient-to-b from-[#1a120b] via-[#0f0a07] to-black",children:H.jsxs("div",{className:"mx-auto flex min-h-screen w-full max-w-[1440px] flex-col px-6 py-10",children:[H.jsxs("header",{className:"flex items-center justify-between border-b border-white/10 pb-4",children:[H.jsxs("div",{children:[H.jsx("h1",{className:"text-3xl font-display uppercase tracking-[0.4em] text-white/80",children:"Bacheca Medagliette"}),H.jsx("p",{className:"mt-1 text-sm text-white/60",children:"Colleziona le medagliette aprendo le porte corrispondenti."})]}),H.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[H.jsxs("div",{className:"rounded-full border border-white/10 bg-white/5 px-4 py-2",children:[H.jsx("span",{className:"font-semibold text-white",children:t}),H.jsxs("span",{className:"text-white/60",children:["/",o]}),H.jsxs("span",{className:"ml-2 text-white/50",children:[m,"%"]})]}),H.jsx(Vr,{to:"/house",className:"rounded-full border border-white/30 px-4 py-2 text-xs uppercase tracking-[0.35em] text-white/80 transition hover:border-[#a67c52] hover:text-[#a67c52]",children:"Torna alla casa"})]})]}),H.jsx("section",{className:"mt-10 grid flex-1 gap-6 rounded-3xl border border-white/10 bg-white/10 p-6 backdrop-blur-sm",children:H.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:ya.map(u=>{const a=r==null?void 0:r.medals.entries[u.type],p=(a==null?void 0:a.unlocked)??!1;return H.jsxs("div",{className:"group relative flex flex-col items-center gap-3 rounded-3xl border border-white/10 bg-black/30 p-6 text-center transition-colors hover:border-[#a67c52]/60 hover:bg-black/40",children:[H.jsxs("div",{className:"relative flex h-28 w-28 items-center justify-center rounded-full border-4 border-white/10 bg-[#2b2118] shadow-inner transition group-hover:shadow-lg",children:[H.jsx("div",{className:"h-24 w-24 rounded-full transition-all",style:{background:p?`radial-gradient(circle at 30% 30%, #ffffff, ${u.color})`:"radial-gradient(circle at 30% 30%, #4a3829, #1a120b)"}}),p?null:H.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-2xl text-white/40",children:"?"})]}),H.jsxs("div",{children:[H.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-white/70 transition-colors group-hover:text-[#a67c52]",children:Ms[u.type]}),H.jsx("p",{className:"mt-2 text-xs text-white/60",children:u.description}),H.jsxs("p",{className:"mt-2 text-xs uppercase text-[#a67c52]",children:["Drop: ",(u.dropRate*100).toFixed(2),"%"]}),a!=null&&a.unlockedAt?H.jsxs("p",{className:"mt-1 text-[11px] text-white/40",children:["Sbloccata il ",new Date(a.unlockedAt).toLocaleDateString()]}):H.jsx("p",{className:"mt-1 text-[11px] text-white/30",children:"Non ancora trovata"})]})]},u.type)})})})]})})},fS=[{type:"white",summary:"Permette di accumulare ricchezza con costanza, ma limita laccesso a opportunit pi vantaggiose.",uniqueRewards:["Monete (37)","Cibo (13)"],conflicts:"Blocca la porta Gialla per 12 turni."},{type:"black",summary:"Imprevedibile e instabile: pu alterare lequilibrio delle scelte, con rischi elevati e ricompense incerte.",uniqueRewards:[],conflicts:"Blocca la porta Arancione e 2 porte casuali diverse per 35 turni."},{type:"red",summary:"Rafforza la potenza offensiva, ma riduce il controllo e la capacit di adattamento.",uniqueRewards:["Proiettili (12)","Granata (1)"],conflicts:"Blocca la porta Blu e Verde chiaro per 24 turni."},{type:"orange",summary:"Potenzia la difesa delle creature alleate, ma rallenta la preparazione e il recupero.",uniqueRewards:["Armatura (1)","Granata (1)"],conflicts:"Blocca la porta Verde chiaro e Verde scuro per 35 turni."},{type:"yellow",summary:"Amplia le risorse economiche, ma pu saturare il mercato e indebolire altre fonti di guadagno.",uniqueRewards:["Monete (525)"],conflicts:"Blocca la porta Bianca e Gialla per 13 turni."},{type:"purple",summary:"Favorisce la crescita e la sostenibilit, ma tende a sbilanciare la stabilit generale.",uniqueRewards:["Cibo (37)","Monete (37)"],conflicts:"Blocca la porta Verde scuro e Marrone per 23 turni."},{type:"blue",summary:"Aumenta la forza dellarsenale, ma limita laccesso a risorse di supporto e flessibilit.",uniqueRewards:["Cartucce (13)","Granata (1)"],conflicts:"Blocca la porta Rossa e Arancione per 34 turni."},{type:"lightBlue",summary:"Offre equilibrio e precisione, ma richiede una gestione attenta per non perdere slancio.",uniqueRewards:["Frecce (14)","Dardi (14)"],conflicts:"Blocca la porta Verde scuro per 23 turni."},{type:"brown",summary:"Fornisce una protezione moderata e costante, ma rende pi difficili alcune scelte future.",uniqueRewards:["Armatura (1)"],conflicts:"Blocca la porta Arancione e Verde chiaro per 34 turni."},{type:"lime",summary:"Favorisce la sopravvivenza e la resistenza, ma riduce la spinta offensiva.",uniqueRewards:["Cibo (20)"],conflicts:"Blocca la porta Rossa, Blu e Azzurra per 24 turni."},{type:"green",summary:"Bilancia potenza e sostegno, ma limita laggressivit diretta nel lungo periodo.",uniqueRewards:["Dardi (13)","Cibo (37)"],conflicts:"Blocca la porta Azzurra e Rossa per 23 turni."},{type:"neutral",summary:"Sempre accessibile. Mantiene aperto il percorso e consente di proseguire anche nei momenti pi critici, sebbene con basse probabilit di trovare ricompense.",uniqueRewards:["Monete (13)","Cibo (13)","Dardi (13)","Frecce (13)","Proiettili (12)","Cartucce (1)","Granate (1)"],conflicts:"Blocca la porta Nera per 1 turno."}],hS=()=>fS.map(r=>({...r,name:Ms[r.type]})),pS=()=>{const r=hS();return H.jsx("div",{className:"min-h-screen bg-gradient-to-b from-[#0b0c10] via-[#101321] to-[#050608] text-white",children:H.jsxs("div",{className:"mx-auto flex min-h-screen w-full max-w-[1400px] flex-col gap-8 px-6 py-10",children:[H.jsxs("header",{className:"flex items-center justify-between border-b border-white/10 pb-5",children:[H.jsxs("div",{children:[H.jsx("h1",{className:"text-4xl font-display uppercase tracking-[0.5em] text-white/80",children:"Tipologia Porte"}),H.jsx("p",{className:"mt-2 text-sm text-white/60",children:"Ogni porta offre ricompense uniche e pu bloccarne temporaneamente altre."})]}),H.jsx(Vr,{to:"/lobby",className:"rounded-full border border-white/30 px-5 py-2 text-xs uppercase tracking-[0.35em] text-white/70 transition hover:border-accent hover:text-accent",children:"Torna alla lobby"})]}),H.jsx("section",{className:"grid gap-6 rounded-3xl border border-white/10 bg-white/5 p-6 shadow-lg backdrop-blur lg:grid-cols-2",children:r.map(n=>H.jsxs("article",{className:"flex h-full flex-col gap-4 rounded-3xl border border-white/10 bg-black/30 p-5",children:[H.jsxs("header",{className:"flex items-baseline justify-between",children:[H.jsx("h2",{className:"text-xl font-semibold uppercase tracking-[0.35em] text-white/80",children:n.name}),H.jsx("span",{className:"rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs uppercase tracking-[0.35em] text-white/50",children:n.type})]}),H.jsx("p",{className:"text-sm text-white/70",children:n.summary}),H.jsxs("div",{children:[H.jsx("h3",{className:"text-xs uppercase tracking-[0.35em] text-white/50",children:"Ricompense"}),H.jsx("ul",{className:"mt-2 list-disc space-y-1 pl-5 text-sm text-white/70",children:n.uniqueRewards.map(o=>H.jsx("li",{children:o},o))})]}),H.jsxs("div",{className:"mt-auto rounded-2xl border border-white/10 bg-white/5 p-3 text-xs text-white/60",children:[H.jsx("span",{className:"block uppercase tracking-[0.35em] text-white/40",children:"Contrasti"}),H.jsx("p",{className:"mt-1 text-sm text-white/70",children:n.conflicts})]})]},n.type))})]})})},mS=()=>{const{status:r,bootstrap:n,onlineStatus:o,setOnlineStatus:t}=Mr(m=>({status:m.status,bootstrap:m.bootstrap,onlineStatus:m.onlineStatus,setOnlineStatus:m.setOnlineStatus}));return Re.useEffect(()=>{r==="idle"&&n()},[r,n]),Re.useEffect(()=>{let m=!1;const u=async()=>{if(typeof window<"u"&&window.__FORCE_ONLINE__===!0){t("online");return}try{t("checking");const s=new AbortController,h=window.setTimeout(()=>s.abort(),2e3),b=await fetch("/assets/file_structure.json",{method:"GET",cache:"no-store",signal:s.signal});window.clearTimeout(h),m||t(b.ok?"online":"offline")}catch{m||t("offline")}};u();const a=()=>{u()},p=()=>{t("offline")};return window.addEventListener("online",a),window.addEventListener("offline",p),()=>{m=!0,window.removeEventListener("online",a),window.removeEventListener("offline",p)}},[t]),H.jsxs(H.Fragment,{children:[o==="offline"?H.jsx("div",{className:"fixed left-1/2 top-6 z-50 -translate-x-1/2 rounded-full bg-red-600 px-5 py-2 text-xs font-semibold uppercase tracking-[0.3em] text-white shadow-lg",children:"Connessione richiesta"}):null,H.jsx(Re.Suspense,{fallback:H.jsx("div",{className:"p-6 text-xl text-white",children:"Loading..."}),children:H.jsxs($1,{children:[H.jsx(Pr,{path:"/",element:H.jsx(O2,{},"menu")}),H.jsx(Pr,{path:"/settings",element:H.jsx(U2,{},"settings")}),H.jsx(Pr,{path:"/saves",element:H.jsx(__,{},"saves")}),H.jsx(Pr,{path:"/lobby",element:H.jsx(D_,{},"lobby")}),H.jsx(Pr,{path:"/door",element:H.jsx(J_,{},"door")}),H.jsx(Pr,{path:"/house",element:H.jsx(sS,{},"house")}),H.jsx(Pr,{path:"/chest",element:H.jsx(aS,{},"chest")}),H.jsx(Pr,{path:"/credits",element:H.jsx(iS,{},"credits")}),H.jsx(Pr,{path:"/inventory",element:H.jsx(cS,{},"inventory")}),H.jsx(Pr,{path:"/medals",element:H.jsx(dS,{},"medals")}),H.jsx(Pr,{path:"/door-types",element:H.jsx(pS,{},"door-types")}),H.jsx(Pr,{path:"*",element:H.jsx(W1,{to:"/",replace:!0})})]})})]})},dt=r=>typeof r=="string",ea=()=>{let r,n;const o=new Promise((t,m)=>{r=t,n=m});return o.resolve=r,o.reject=n,o},qp=r=>r==null?"":""+r,yS=(r,n,o)=>{r.forEach(t=>{n[t]&&(o[t]=n[t])})},gS=/###/g,$p=r=>r&&r.indexOf("###")>-1?r.replace(gS,"."):r,Yp=r=>!r||dt(r),ba=(r,n,o)=>{const t=dt(n)?n.split("."):n;let m=0;for(;m<t.length-1;){if(Yp(r))return{};const u=$p(t[m]);!r[u]&&o&&(r[u]=new o),Object.prototype.hasOwnProperty.call(r,u)?r=r[u]:r={},++m}return Yp(r)?{}:{obj:r,k:$p(t[m])}},Xp=(r,n,o)=>{const{obj:t,k:m}=ba(r,n,Object);if(t!==void 0||n.length===1){t[m]=o;return}let u=n[n.length-1],a=n.slice(0,n.length-1),p=ba(r,a,Object);for(;p.obj===void 0&&a.length;)u=`${a[a.length-1]}.${u}`,a=a.slice(0,a.length-1),p=ba(r,a,Object),p&&p.obj&&typeof p.obj[`${p.k}.${u}`]<"u"&&(p.obj=void 0);p.obj[`${p.k}.${u}`]=o},vS=(r,n,o,t)=>{const{obj:m,k:u}=ba(r,n,Object);m[u]=m[u]||[],m[u].push(o)},xl=(r,n)=>{const{obj:o,k:t}=ba(r,n);if(o)return o[t]},bS=(r,n,o)=>{const t=xl(r,o);return t!==void 0?t:xl(n,o)},ov=(r,n,o)=>{for(const t in n)t!=="__proto__"&&t!=="constructor"&&(t in r?dt(r[t])||r[t]instanceof String||dt(n[t])||n[t]instanceof String?o&&(r[t]=n[t]):ov(r[t],n[t],o):r[t]=n[t]);return r},Yo=r=>r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var xS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const wS=r=>dt(r)?r.replace(/[&<>"'\/]/g,n=>xS[n]):r;class jS{constructor(n){this.capacity=n,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(n){const o=this.regExpMap.get(n);if(o!==void 0)return o;const t=new RegExp(n);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(n,t),this.regExpQueue.push(n),t}}const _S=[" ",",","?","!",";"],SS=new jS(20),kS=(r,n,o)=>{n=n||"",o=o||"";const t=_S.filter(a=>n.indexOf(a)<0&&o.indexOf(a)<0);if(t.length===0)return!0;const m=SS.getRegExp(`(${t.map(a=>a==="?"?"\\?":a).join("|")})`);let u=!m.test(r);if(!u){const a=r.indexOf(o);a>0&&!m.test(r.substring(0,a))&&(u=!0)}return u},nd=function(r,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!r)return;if(r[n])return r[n];const t=n.split(o);let m=r;for(let u=0;u<t.length;){if(!m||typeof m!="object")return;let a,p="";for(let s=u;s<t.length;++s)if(s!==u&&(p+=o),p+=t[s],a=m[p],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&s<t.length-1)continue;u+=s-u+1;break}m=a}return m},wl=r=>r&&r.replace("_","-"),ES={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,n){console&&console[r]&&console[r].apply(console,n)}};class jl{constructor(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(n,o)}init(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=o.prefix||"i18next:",this.logger=n||ES,this.options=o,this.debug=o.debug}log(){for(var n=arguments.length,o=new Array(n),t=0;t<n;t++)o[t]=arguments[t];return this.forward(o,"log","",!0)}warn(){for(var n=arguments.length,o=new Array(n),t=0;t<n;t++)o[t]=arguments[t];return this.forward(o,"warn","",!0)}error(){for(var n=arguments.length,o=new Array(n),t=0;t<n;t++)o[t]=arguments[t];return this.forward(o,"error","")}deprecate(){for(var n=arguments.length,o=new Array(n),t=0;t<n;t++)o[t]=arguments[t];return this.forward(o,"warn","WARNING DEPRECATED: ",!0)}forward(n,o,t,m){return m&&!this.debug?null:(dt(n[0])&&(n[0]=`${t}${this.prefix} ${n[0]}`),this.logger[o](n))}create(n){return new jl(this.logger,{prefix:`${this.prefix}:${n}:`,...this.options})}clone(n){return n=n||this.options,n.prefix=n.prefix||this.prefix,new jl(this.logger,n)}}var yn=new jl;class Xl{constructor(){this.observers={}}on(n,o){return n.split(" ").forEach(t=>{this.observers[t]||(this.observers[t]=new Map);const m=this.observers[t].get(o)||0;this.observers[t].set(o,m+1)}),this}off(n,o){if(this.observers[n]){if(!o){delete this.observers[n];return}this.observers[n].delete(o)}}emit(n){for(var o=arguments.length,t=new Array(o>1?o-1:0),m=1;m<o;m++)t[m-1]=arguments[m];this.observers[n]&&Array.from(this.observers[n].entries()).forEach(a=>{let[p,s]=a;for(let h=0;h<s;h++)p(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[p,s]=a;for(let h=0;h<s;h++)p.apply(p,[n,...t])})}}class Kp extends Xl{constructor(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=n||{},this.options=o,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(n){this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}removeNamespaces(n){const o=this.options.ns.indexOf(n);o>-1&&this.options.ns.splice(o,1)}getResource(n,o,t){let m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const u=m.keySeparator!==void 0?m.keySeparator:this.options.keySeparator,a=m.ignoreJSONStructure!==void 0?m.ignoreJSONStructure:this.options.ignoreJSONStructure;let p;n.indexOf(".")>-1?p=n.split("."):(p=[n,o],t&&(Array.isArray(t)?p.push(...t):dt(t)&&u?p.push(...t.split(u)):p.push(t)));const s=xl(this.data,p);return!s&&!o&&!t&&n.indexOf(".")>-1&&(n=p[0],o=p[1],t=p.slice(2).join(".")),s||!a||!dt(t)?s:nd(this.data&&this.data[n]&&this.data[n][o],t,u)}addResource(n,o,t,m){let u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=u.keySeparator!==void 0?u.keySeparator:this.options.keySeparator;let p=[n,o];t&&(p=p.concat(a?t.split(a):t)),n.indexOf(".")>-1&&(p=n.split("."),m=o,o=p[1]),this.addNamespaces(o),Xp(this.data,p,m),u.silent||this.emit("added",n,o,t,m)}addResources(n,o,t){let m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const u in t)(dt(t[u])||Array.isArray(t[u]))&&this.addResource(n,o,u,t[u],{silent:!0});m.silent||this.emit("added",n,o,t)}addResourceBundle(n,o,t,m,u){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},p=[n,o];n.indexOf(".")>-1&&(p=n.split("."),m=t,t=o,o=p[1]),this.addNamespaces(o);let s=xl(this.data,p)||{};a.skipCopy||(t=JSON.parse(JSON.stringify(t))),m?ov(s,t,u):s={...s,...t},Xp(this.data,p,s),a.silent||this.emit("added",n,o,t)}removeResourceBundle(n,o){this.hasResourceBundle(n,o)&&delete this.data[n][o],this.removeNamespaces(o),this.emit("removed",n,o)}hasResourceBundle(n,o){return this.getResource(n,o)!==void 0}getResourceBundle(n,o){return o||(o=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(n,o)}:this.getResource(n,o)}getDataByLanguage(n){return this.data[n]}hasLanguageSomeTranslations(n){const o=this.getDataByLanguage(n);return!!(o&&Object.keys(o)||[]).find(m=>o[m]&&Object.keys(o[m]).length>0)}toJSON(){return this.data}}var sv={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,n,o,t,m){return r.forEach(u=>{this.processors[u]&&(n=this.processors[u].process(n,o,t,m))}),n}};const Qp={};class _l extends Xl{constructor(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),yS(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n,this),this.options=o,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=yn.create("translator")}changeLanguage(n){n&&(this.language=n)}exists(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(n==null)return!1;const t=this.resolve(n,o);return t&&t.res!==void 0}extractFromKey(n,o){let t=o.nsSeparator!==void 0?o.nsSeparator:this.options.nsSeparator;t===void 0&&(t=":");const m=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let u=o.ns||this.options.defaultNS||[];const a=t&&n.indexOf(t)>-1,p=!this.options.userDefinedKeySeparator&&!o.keySeparator&&!this.options.userDefinedNsSeparator&&!o.nsSeparator&&!kS(n,t,m);if(a&&!p){const s=n.match(this.interpolator.nestingRegexp);if(s&&s.length>0)return{key:n,namespaces:dt(u)?[u]:u};const h=n.split(t);(t!==m||t===m&&this.options.ns.indexOf(h[0])>-1)&&(u=h.shift()),n=h.join(m)}return{key:n,namespaces:dt(u)?[u]:u}}translate(n,o,t){if(typeof o!="object"&&this.options.overloadTranslationOptionHandler&&(o=this.options.overloadTranslationOptionHandler(arguments)),typeof o=="object"&&(o={...o}),o||(o={}),n==null)return"";Array.isArray(n)||(n=[String(n)]);const m=o.returnDetails!==void 0?o.returnDetails:this.options.returnDetails,u=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,{key:a,namespaces:p}=this.extractFromKey(n[n.length-1],o),s=p[p.length-1],h=o.lng||this.language,b=o.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(h&&h.toLowerCase()==="cimode"){if(b){const x=o.nsSeparator||this.options.nsSeparator;return m?{res:`${s}${x}${a}`,usedKey:a,exactUsedKey:a,usedLng:h,usedNS:s,usedParams:this.getUsedParamsDetails(o)}:`${s}${x}${a}`}return m?{res:a,usedKey:a,exactUsedKey:a,usedLng:h,usedNS:s,usedParams:this.getUsedParamsDetails(o)}:a}const v=this.resolve(n,o);let i=v&&v.res;const d=v&&v.usedKey||a,f=v&&v.exactUsedKey||a,y=Object.prototype.toString.apply(i),g=["[object Number]","[object Function]","[object RegExp]"],c=o.joinArrays!==void 0?o.joinArrays:this.options.joinArrays,l=!this.i18nFormat||this.i18nFormat.handleAsObject,w=!dt(i)&&typeof i!="boolean"&&typeof i!="number";if(l&&i&&w&&g.indexOf(y)<0&&!(dt(c)&&Array.isArray(i))){if(!o.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const x=this.options.returnedObjectHandler?this.options.returnedObjectHandler(d,i,{...o,ns:p}):`key '${a} (${this.language})' returned an object instead of string.`;return m?(v.res=x,v.usedParams=this.getUsedParamsDetails(o),v):x}if(u){const x=Array.isArray(i),_=x?[]:{},T=x?f:d;for(const E in i)if(Object.prototype.hasOwnProperty.call(i,E)){const S=`${T}${u}${E}`;_[E]=this.translate(S,{...o,joinArrays:!1,ns:p}),_[E]===S&&(_[E]=i[E])}i=_}}else if(l&&dt(c)&&Array.isArray(i))i=i.join(c),i&&(i=this.extendTranslation(i,n,o,t));else{let x=!1,_=!1;const T=o.count!==void 0&&!dt(o.count),E=_l.hasDefaultValue(o),S=T?this.pluralResolver.getSuffix(h,o.count,o):"",P=o.ordinal&&T?this.pluralResolver.getSuffix(h,o.count,{ordinal:!1}):"",N=T&&!o.ordinal&&o.count===0&&this.pluralResolver.shouldUseIntlApi(),C=N&&o[`defaultValue${this.options.pluralSeparator}zero`]||o[`defaultValue${S}`]||o[`defaultValue${P}`]||o.defaultValue;!this.isValidLookup(i)&&E&&(x=!0,i=C),this.isValidLookup(i)||(_=!0,i=a);const L=(o.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&_?void 0:i,F=E&&C!==i&&this.options.updateMissing;if(_||x||F){if(this.logger.log(F?"updateKey":"missingKey",h,s,a,F?C:i),u){const G=this.resolve(a,{...o,keySeparator:!1});G&&G.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let I=[];const B=this.languageUtils.getFallbackCodes(this.options.fallbackLng,o.lng||this.language);if(this.options.saveMissingTo==="fallback"&&B&&B[0])for(let G=0;G<B.length;G++)I.push(B[G]);else this.options.saveMissingTo==="all"?I=this.languageUtils.toResolveHierarchy(o.lng||this.language):I.push(o.lng||this.language);const W=(G,V,X)=>{const Q=E&&X!==i?X:L;this.options.missingKeyHandler?this.options.missingKeyHandler(G,s,V,Q,F,o):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(G,s,V,Q,F,o),this.emit("missingKey",G,s,V,i)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?I.forEach(G=>{const V=this.pluralResolver.getSuffixes(G,o);N&&o[`defaultValue${this.options.pluralSeparator}zero`]&&V.indexOf(`${this.options.pluralSeparator}zero`)<0&&V.push(`${this.options.pluralSeparator}zero`),V.forEach(X=>{W([G],a+X,o[`defaultValue${X}`]||C)})}):W(I,a,C))}i=this.extendTranslation(i,n,o,v,t),_&&i===a&&this.options.appendNamespaceToMissingKey&&(i=`${s}:${a}`),(_||x)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?i=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${s}:${a}`:a,x?i:void 0):i=this.options.parseMissingKeyHandler(i))}return m?(v.res=i,v.usedParams=this.getUsedParamsDetails(o),v):i}extendTranslation(n,o,t,m,u){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)n=this.i18nFormat.parse(n,{...this.options.interpolation.defaultVariables,...t},t.lng||this.language||m.usedLng,m.usedNS,m.usedKey,{resolved:m});else if(!t.skipInterpolation){t.interpolation&&this.interpolator.init({...t,interpolation:{...this.options.interpolation,...t.interpolation}});const h=dt(n)&&(t&&t.interpolation&&t.interpolation.skipOnVariables!==void 0?t.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let b;if(h){const i=n.match(this.interpolator.nestingRegexp);b=i&&i.length}let v=t.replace&&!dt(t.replace)?t.replace:t;if(this.options.interpolation.defaultVariables&&(v={...this.options.interpolation.defaultVariables,...v}),n=this.interpolator.interpolate(n,v,t.lng||this.language||m.usedLng,t),h){const i=n.match(this.interpolator.nestingRegexp),d=i&&i.length;b<d&&(t.nest=!1)}!t.lng&&this.options.compatibilityAPI!=="v1"&&m&&m.res&&(t.lng=this.language||m.usedLng),t.nest!==!1&&(n=this.interpolator.nest(n,function(){for(var i=arguments.length,d=new Array(i),f=0;f<i;f++)d[f]=arguments[f];return u&&u[0]===d[0]&&!t.context?(a.logger.warn(`It seems you are nesting recursively key: ${d[0]} in key: ${o[0]}`),null):a.translate(...d,o)},t)),t.interpolation&&this.interpolator.reset()}const p=t.postProcess||this.options.postProcess,s=dt(p)?[p]:p;return n!=null&&s&&s.length&&t.applyPostProcessor!==!1&&(n=sv.handle(s,n,o,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...m,usedParams:this.getUsedParamsDetails(t)},...t}:t,this)),n}resolve(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t,m,u,a,p;return dt(n)&&(n=[n]),n.forEach(s=>{if(this.isValidLookup(t))return;const h=this.extractFromKey(s,o),b=h.key;m=b;let v=h.namespaces;this.options.fallbackNS&&(v=v.concat(this.options.fallbackNS));const i=o.count!==void 0&&!dt(o.count),d=i&&!o.ordinal&&o.count===0&&this.pluralResolver.shouldUseIntlApi(),f=o.context!==void 0&&(dt(o.context)||typeof o.context=="number")&&o.context!=="",y=o.lngs?o.lngs:this.languageUtils.toResolveHierarchy(o.lng||this.language,o.fallbackLng);v.forEach(g=>{this.isValidLookup(t)||(p=g,!Qp[`${y[0]}-${g}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(p)&&(Qp[`${y[0]}-${g}`]=!0,this.logger.warn(`key "${m}" for languages "${y.join(", ")}" won't get resolved as namespace "${p}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(c=>{if(this.isValidLookup(t))return;a=c;const l=[b];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(l,b,c,g,o);else{let x;i&&(x=this.pluralResolver.getSuffix(c,o.count,o));const _=`${this.options.pluralSeparator}zero`,T=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(i&&(l.push(b+x),o.ordinal&&x.indexOf(T)===0&&l.push(b+x.replace(T,this.options.pluralSeparator)),d&&l.push(b+_)),f){const E=`${b}${this.options.contextSeparator}${o.context}`;l.push(E),i&&(l.push(E+x),o.ordinal&&x.indexOf(T)===0&&l.push(E+x.replace(T,this.options.pluralSeparator)),d&&l.push(E+_))}}let w;for(;w=l.pop();)this.isValidLookup(t)||(u=w,t=this.getResource(c,g,w,o))}))})}),{res:t,usedKey:m,exactUsedKey:u,usedLng:a,usedNS:p}}isValidLookup(n){return n!==void 0&&!(!this.options.returnNull&&n===null)&&!(!this.options.returnEmptyString&&n==="")}getResource(n,o,t){let m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(n,o,t,m):this.resourceStore.getResource(n,o,t,m)}getUsedParamsDetails(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const o=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],t=n.replace&&!dt(n.replace);let m=t?n.replace:n;if(t&&typeof n.count<"u"&&(m.count=n.count),this.options.interpolation.defaultVariables&&(m={...this.options.interpolation.defaultVariables,...m}),!t){m={...m};for(const u of o)delete m[u]}return m}static hasDefaultValue(n){const o="defaultValue";for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&o===t.substring(0,o.length)&&n[t]!==void 0)return!0;return!1}}const zu=r=>r.charAt(0).toUpperCase()+r.slice(1);class Zp{constructor(n){this.options=n,this.supportedLngs=this.options.supportedLngs||!1,this.logger=yn.create("languageUtils")}getScriptPartFromCode(n){if(n=wl(n),!n||n.indexOf("-")<0)return null;const o=n.split("-");return o.length===2||(o.pop(),o[o.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(o.join("-"))}getLanguagePartFromCode(n){if(n=wl(n),!n||n.indexOf("-")<0)return n;const o=n.split("-");return this.formatLanguageCode(o[0])}formatLanguageCode(n){if(dt(n)&&n.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let m=Intl.getCanonicalLocales(n)[0];if(m&&this.options.lowerCaseLng&&(m=m.toLowerCase()),m)return m}catch{}const o=["hans","hant","latn","cyrl","cans","mong","arab"];let t=n.split("-");return this.options.lowerCaseLng?t=t.map(m=>m.toLowerCase()):t.length===2?(t[0]=t[0].toLowerCase(),t[1]=t[1].toUpperCase(),o.indexOf(t[1].toLowerCase())>-1&&(t[1]=zu(t[1].toLowerCase()))):t.length===3&&(t[0]=t[0].toLowerCase(),t[1].length===2&&(t[1]=t[1].toUpperCase()),t[0]!=="sgn"&&t[2].length===2&&(t[2]=t[2].toUpperCase()),o.indexOf(t[1].toLowerCase())>-1&&(t[1]=zu(t[1].toLowerCase())),o.indexOf(t[2].toLowerCase())>-1&&(t[2]=zu(t[2].toLowerCase()))),t.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?n.toLowerCase():n}isSupportedCode(n){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(n=this.getLanguagePartFromCode(n)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(n)>-1}getBestMatchFromCodes(n){if(!n)return null;let o;return n.forEach(t=>{if(o)return;const m=this.formatLanguageCode(t);(!this.options.supportedLngs||this.isSupportedCode(m))&&(o=m)}),!o&&this.options.supportedLngs&&n.forEach(t=>{if(o)return;const m=this.getLanguagePartFromCode(t);if(this.isSupportedCode(m))return o=m;o=this.options.supportedLngs.find(u=>{if(u===m)return u;if(!(u.indexOf("-")<0&&m.indexOf("-")<0)&&(u.indexOf("-")>0&&m.indexOf("-")<0&&u.substring(0,u.indexOf("-"))===m||u.indexOf(m)===0&&m.length>1))return u})}),o||(o=this.getFallbackCodes(this.options.fallbackLng)[0]),o}getFallbackCodes(n,o){if(!n)return[];if(typeof n=="function"&&(n=n(o)),dt(n)&&(n=[n]),Array.isArray(n))return n;if(!o)return n.default||[];let t=n[o];return t||(t=n[this.getScriptPartFromCode(o)]),t||(t=n[this.formatLanguageCode(o)]),t||(t=n[this.getLanguagePartFromCode(o)]),t||(t=n.default),t||[]}toResolveHierarchy(n,o){const t=this.getFallbackCodes(o||this.options.fallbackLng||[],n),m=[],u=a=>{a&&(this.isSupportedCode(a)?m.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return dt(n)&&(n.indexOf("-")>-1||n.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&u(this.formatLanguageCode(n)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&u(this.getScriptPartFromCode(n)),this.options.load!=="currentOnly"&&u(this.getLanguagePartFromCode(n))):dt(n)&&u(this.formatLanguageCode(n)),t.forEach(a=>{m.indexOf(a)<0&&u(this.formatLanguageCode(a))}),m}}let TS=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],MS={1:r=>+(r>1),2:r=>+(r!=1),3:r=>0,4:r=>r%10==1&&r%100!=11?0:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?1:2,5:r=>r==0?0:r==1?1:r==2?2:r%100>=3&&r%100<=10?3:r%100>=11?4:5,6:r=>r==1?0:r>=2&&r<=4?1:2,7:r=>r==1?0:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?1:2,8:r=>r==1?0:r==2?1:r!=8&&r!=11?2:3,9:r=>+(r>=2),10:r=>r==1?0:r==2?1:r<7?2:r<11?3:4,11:r=>r==1||r==11?0:r==2||r==12?1:r>2&&r<20?2:3,12:r=>+(r%10!=1||r%100==11),13:r=>+(r!==0),14:r=>r==1?0:r==2?1:r==3?2:3,15:r=>r%10==1&&r%100!=11?0:r%10>=2&&(r%100<10||r%100>=20)?1:2,16:r=>r%10==1&&r%100!=11?0:r!==0?1:2,17:r=>r==1||r%10==1&&r%100!=11?0:1,18:r=>r==0?0:r==1?1:2,19:r=>r==1?0:r==0||r%100>1&&r%100<11?1:r%100>10&&r%100<20?2:3,20:r=>r==1?0:r==0||r%100>0&&r%100<20?1:2,21:r=>r%100==1?1:r%100==2?2:r%100==3||r%100==4?3:0,22:r=>r==1?0:r==2?1:(r<0||r>10)&&r%10==0?2:3};const CS=["v1","v2","v3"],OS=["v4"],Jp={zero:0,one:1,two:2,few:3,many:4,other:5},PS=()=>{const r={};return TS.forEach(n=>{n.lngs.forEach(o=>{r[o]={numbers:n.nr,plurals:MS[n.fc]}})}),r};class LS{constructor(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=n,this.options=o,this.logger=yn.create("pluralResolver"),(!this.options.compatibilityJSON||OS.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=PS(),this.pluralRulesCache={}}addRule(n,o){this.rules[n]=o}clearCache(){this.pluralRulesCache={}}getRule(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const t=wl(n==="dev"?"en":n),m=o.ordinal?"ordinal":"cardinal",u=JSON.stringify({cleanedCode:t,type:m});if(u in this.pluralRulesCache)return this.pluralRulesCache[u];let a;try{a=new Intl.PluralRules(t,{type:m})}catch{if(!n.match(/-|_/))return;const s=this.languageUtils.getLanguagePartFromCode(n);a=this.getRule(s,o)}return this.pluralRulesCache[u]=a,a}return this.rules[n]||this.rules[this.languageUtils.getLanguagePartFromCode(n)]}needsPlural(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=this.getRule(n,o);return this.shouldUseIntlApi()?t&&t.resolvedOptions().pluralCategories.length>1:t&&t.numbers.length>1}getPluralFormsOfKey(n,o){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(n,t).map(m=>`${o}${m}`)}getSuffixes(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=this.getRule(n,o);return t?this.shouldUseIntlApi()?t.resolvedOptions().pluralCategories.sort((m,u)=>Jp[m]-Jp[u]).map(m=>`${this.options.prepend}${o.ordinal?`ordinal${this.options.prepend}`:""}${m}`):t.numbers.map(m=>this.getSuffix(n,m,o)):[]}getSuffix(n,o){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const m=this.getRule(n,t);return m?this.shouldUseIntlApi()?`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${m.select(o)}`:this.getSuffixRetroCompatible(m,o):(this.logger.warn(`no plural rule found for: ${n}`),"")}getSuffixRetroCompatible(n,o){const t=n.noAbs?n.plurals(o):n.plurals(Math.abs(o));let m=n.numbers[t];this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1&&(m===2?m="plural":m===1&&(m=""));const u=()=>this.options.prepend&&m.toString()?this.options.prepend+m.toString():m.toString();return this.options.compatibilityJSON==="v1"?m===1?"":typeof m=="number"?`_plural_${m.toString()}`:u():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1?u():this.options.prepend&&t.toString()?this.options.prepend+t.toString():t.toString()}shouldUseIntlApi(){return!CS.includes(this.options.compatibilityJSON)}}const em=function(r,n,o){let t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",m=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,u=bS(r,n,o);return!u&&m&&dt(o)&&(u=nd(r,o,t),u===void 0&&(u=nd(n,o,t))),u},Gu=r=>r.replace(/\$/g,"$$$$");class NS{constructor(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=yn.create("interpolator"),this.options=n,this.format=n.interpolation&&n.interpolation.format||(o=>o),this.init(n)}init(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n.interpolation||(n.interpolation={escapeValue:!0});const{escape:o,escapeValue:t,useRawValueToEscape:m,prefix:u,prefixEscaped:a,suffix:p,suffixEscaped:s,formatSeparator:h,unescapeSuffix:b,unescapePrefix:v,nestingPrefix:i,nestingPrefixEscaped:d,nestingSuffix:f,nestingSuffixEscaped:y,nestingOptionsSeparator:g,maxReplaces:c,alwaysFormat:l}=n.interpolation;this.escape=o!==void 0?o:wS,this.escapeValue=t!==void 0?t:!0,this.useRawValueToEscape=m!==void 0?m:!1,this.prefix=u?Yo(u):a||"{{",this.suffix=p?Yo(p):s||"}}",this.formatSeparator=h||",",this.unescapePrefix=b?"":v||"-",this.unescapeSuffix=this.unescapePrefix?"":b||"",this.nestingPrefix=i?Yo(i):d||Yo("$t("),this.nestingSuffix=f?Yo(f):y||Yo(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=c||1e3,this.alwaysFormat=l!==void 0?l:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const n=(o,t)=>o&&o.source===t?(o.lastIndex=0,o):new RegExp(t,"g");this.regexp=n(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=n(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=n(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(n,o,t,m){let u,a,p;const s=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=d=>{if(d.indexOf(this.formatSeparator)<0){const c=em(o,s,d,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(c,void 0,t,{...m,...o,interpolationkey:d}):c}const f=d.split(this.formatSeparator),y=f.shift().trim(),g=f.join(this.formatSeparator).trim();return this.format(em(o,s,y,this.options.keySeparator,this.options.ignoreJSONStructure),g,t,{...m,...o,interpolationkey:y})};this.resetRegExp();const b=m&&m.missingInterpolationHandler||this.options.missingInterpolationHandler,v=m&&m.interpolation&&m.interpolation.skipOnVariables!==void 0?m.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:d=>Gu(d)},{regex:this.regexp,safeValue:d=>this.escapeValue?Gu(this.escape(d)):Gu(d)}].forEach(d=>{for(p=0;u=d.regex.exec(n);){const f=u[1].trim();if(a=h(f),a===void 0)if(typeof b=="function"){const g=b(n,u,m);a=dt(g)?g:""}else if(m&&Object.prototype.hasOwnProperty.call(m,f))a="";else if(v){a=u[0];continue}else this.logger.warn(`missed to pass in variable ${f} for interpolating ${n}`),a="";else!dt(a)&&!this.useRawValueToEscape&&(a=qp(a));const y=d.safeValue(a);if(n=n.replace(u[0],y),v?(d.regex.lastIndex+=a.length,d.regex.lastIndex-=u[0].length):d.regex.lastIndex=0,p++,p>=this.maxReplaces)break}}),n}nest(n,o){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},m,u,a;const p=(s,h)=>{const b=this.nestingOptionsSeparator;if(s.indexOf(b)<0)return s;const v=s.split(new RegExp(`${b}[ ]*{`));let i=`{${v[1]}`;s=v[0],i=this.interpolate(i,a);const d=i.match(/'/g),f=i.match(/"/g);(d&&d.length%2===0&&!f||f.length%2!==0)&&(i=i.replace(/'/g,'"'));try{a=JSON.parse(i),h&&(a={...h,...a})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${s}`,y),`${s}${b}${i}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,s};for(;m=this.nestingRegexp.exec(n);){let s=[];a={...t},a=a.replace&&!dt(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let h=!1;if(m[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(m[1])){const b=m[1].split(this.formatSeparator).map(v=>v.trim());m[1]=b.shift(),s=b,h=!0}if(u=o(p.call(this,m[1].trim(),a),a),u&&m[0]===n&&!dt(u))return u;dt(u)||(u=qp(u)),u||(this.logger.warn(`missed to resolve ${m[1]} for nesting ${n}`),u=""),h&&(u=s.reduce((b,v)=>this.format(b,v,t.lng,{...t,interpolationkey:m[1].trim()}),u.trim())),n=n.replace(m[0],u),this.regexp.lastIndex=0}return n}}const RS=r=>{let n=r.toLowerCase().trim();const o={};if(r.indexOf("(")>-1){const t=r.split("(");n=t[0].toLowerCase().trim();const m=t[1].substring(0,t[1].length-1);n==="currency"&&m.indexOf(":")<0?o.currency||(o.currency=m.trim()):n==="relativetime"&&m.indexOf(":")<0?o.range||(o.range=m.trim()):m.split(";").forEach(a=>{if(a){const[p,...s]=a.split(":"),h=s.join(":").trim().replace(/^'+|'+$/g,""),b=p.trim();o[b]||(o[b]=h),h==="false"&&(o[b]=!1),h==="true"&&(o[b]=!0),isNaN(h)||(o[b]=parseInt(h,10))}})}return{formatName:n,formatOptions:o}},Xo=r=>{const n={};return(o,t,m)=>{let u=m;m&&m.interpolationkey&&m.formatParams&&m.formatParams[m.interpolationkey]&&m[m.interpolationkey]&&(u={...u,[m.interpolationkey]:void 0});const a=t+JSON.stringify(u);let p=n[a];return p||(p=r(wl(t),m),n[a]=p),p(o)}};class AS{constructor(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=yn.create("formatter"),this.options=n,this.formats={number:Xo((o,t)=>{const m=new Intl.NumberFormat(o,{...t});return u=>m.format(u)}),currency:Xo((o,t)=>{const m=new Intl.NumberFormat(o,{...t,style:"currency"});return u=>m.format(u)}),datetime:Xo((o,t)=>{const m=new Intl.DateTimeFormat(o,{...t});return u=>m.format(u)}),relativetime:Xo((o,t)=>{const m=new Intl.RelativeTimeFormat(o,{...t});return u=>m.format(u,t.range||"day")}),list:Xo((o,t)=>{const m=new Intl.ListFormat(o,{...t});return u=>m.format(u)})},this.init(n)}init(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=o.interpolation.formatSeparator||","}add(n,o){this.formats[n.toLowerCase().trim()]=o}addCached(n,o){this.formats[n.toLowerCase().trim()]=Xo(o)}format(n,o,t){let m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const u=o.split(this.formatSeparator);if(u.length>1&&u[0].indexOf("(")>1&&u[0].indexOf(")")<0&&u.find(p=>p.indexOf(")")>-1)){const p=u.findIndex(s=>s.indexOf(")")>-1);u[0]=[u[0],...u.splice(1,p)].join(this.formatSeparator)}return u.reduce((p,s)=>{const{formatName:h,formatOptions:b}=RS(s);if(this.formats[h]){let v=p;try{const i=m&&m.formatParams&&m.formatParams[m.interpolationkey]||{},d=i.locale||i.lng||m.locale||m.lng||t;v=this.formats[h](p,d,{...b,...m,...i})}catch(i){this.logger.warn(i)}return v}else this.logger.warn(`there was no format function for ${h}`);return p},n)}}const IS=(r,n)=>{r.pending[n]!==void 0&&(delete r.pending[n],r.pendingCount--)};class DS extends Xl{constructor(n,o,t){let m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=n,this.store=o,this.services=t,this.languageUtils=t.languageUtils,this.options=m,this.logger=yn.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=m.maxParallelReads||10,this.readingCalls=0,this.maxRetries=m.maxRetries>=0?m.maxRetries:5,this.retryTimeout=m.retryTimeout>=1?m.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(t,m.backend,m)}queueLoad(n,o,t,m){const u={},a={},p={},s={};return n.forEach(h=>{let b=!0;o.forEach(v=>{const i=`${h}|${v}`;!t.reload&&this.store.hasResourceBundle(h,v)?this.state[i]=2:this.state[i]<0||(this.state[i]===1?a[i]===void 0&&(a[i]=!0):(this.state[i]=1,b=!1,a[i]===void 0&&(a[i]=!0),u[i]===void 0&&(u[i]=!0),s[v]===void 0&&(s[v]=!0)))}),b||(p[h]=!0)}),(Object.keys(u).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:m}),{toLoad:Object.keys(u),pending:Object.keys(a),toLoadLanguages:Object.keys(p),toLoadNamespaces:Object.keys(s)}}loaded(n,o,t){const m=n.split("|"),u=m[0],a=m[1];o&&this.emit("failedLoading",u,a,o),!o&&t&&this.store.addResourceBundle(u,a,t,void 0,void 0,{skipCopy:!0}),this.state[n]=o?-1:2,o&&t&&(this.state[n]=0);const p={};this.queue.forEach(s=>{vS(s.loaded,[u],a),IS(s,n),o&&s.errors.push(o),s.pendingCount===0&&!s.done&&(Object.keys(s.loaded).forEach(h=>{p[h]||(p[h]={});const b=s.loaded[h];b.length&&b.forEach(v=>{p[h][v]===void 0&&(p[h][v]=!0)})}),s.done=!0,s.errors.length?s.callback(s.errors):s.callback())}),this.emit("loaded",p),this.queue=this.queue.filter(s=>!s.done)}read(n,o,t){let m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!n.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:n,ns:o,fcName:t,tried:m,wait:u,callback:a});return}this.readingCalls++;const p=(h,b)=>{if(this.readingCalls--,this.waitingReads.length>0){const v=this.waitingReads.shift();this.read(v.lng,v.ns,v.fcName,v.tried,v.wait,v.callback)}if(h&&b&&m<this.maxRetries){setTimeout(()=>{this.read.call(this,n,o,t,m+1,u*2,a)},u);return}a(h,b)},s=this.backend[t].bind(this.backend);if(s.length===2){try{const h=s(n,o);h&&typeof h.then=="function"?h.then(b=>p(null,b)).catch(p):p(null,h)}catch(h){p(h)}return}return s(n,o,p)}prepareLoading(n,o){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},m=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),m&&m();dt(n)&&(n=this.languageUtils.toResolveHierarchy(n)),dt(o)&&(o=[o]);const u=this.queueLoad(n,o,t,m);if(!u.toLoad.length)return u.pending.length||m(),null;u.toLoad.forEach(a=>{this.loadOne(a)})}load(n,o,t){this.prepareLoading(n,o,{},t)}reload(n,o,t){this.prepareLoading(n,o,{reload:!0},t)}loadOne(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const t=n.split("|"),m=t[0],u=t[1];this.read(m,u,"read",void 0,void 0,(a,p)=>{a&&this.logger.warn(`${o}loading namespace ${u} for language ${m} failed`,a),!a&&p&&this.logger.log(`${o}loaded namespace ${u} for language ${m}`,p),this.loaded(n,a,p)})}saveMissing(n,o,t,m,u){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},p=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(o)){this.logger.warn(`did not save key "${t}" as the namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(t==null||t==="")){if(this.backend&&this.backend.create){const s={...a,isUpdate:u},h=this.backend.create.bind(this.backend);if(h.length<6)try{let b;h.length===5?b=h(n,o,t,m,s):b=h(n,o,t,m),b&&typeof b.then=="function"?b.then(v=>p(null,v)).catch(p):p(null,b)}catch(b){p(b)}else h(n,o,t,m,p,s)}!n||!n[0]||this.store.addResource(n[0],o,t,m)}}}const tm=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:r=>{let n={};if(typeof r[1]=="object"&&(n=r[1]),dt(r[1])&&(n.defaultValue=r[1]),dt(r[2])&&(n.tDescription=r[2]),typeof r[2]=="object"||typeof r[3]=="object"){const o=r[3]||r[2];Object.keys(o).forEach(t=>{n[t]=o[t]})}return n},interpolation:{escapeValue:!0,format:r=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),rm=r=>(dt(r.ns)&&(r.ns=[r.ns]),dt(r.fallbackLng)&&(r.fallbackLng=[r.fallbackLng]),dt(r.fallbackNS)&&(r.fallbackNS=[r.fallbackNS]),r.supportedLngs&&r.supportedLngs.indexOf("cimode")<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),r),Mi=()=>{},FS=r=>{Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(o=>{typeof r[o]=="function"&&(r[o]=r[o].bind(r))})};class Ga extends Xl{constructor(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;if(super(),this.options=rm(n),this.services={},this.logger=yn,this.modules={external:[]},FS(this),o&&!this.isInitialized&&!n.isClone){if(!this.options.initImmediate)return this.init(n,o),this;setTimeout(()=>{this.init(n,o)},0)}}init(){var n=this;let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof o=="function"&&(t=o,o={}),!o.defaultNS&&o.defaultNS!==!1&&o.ns&&(dt(o.ns)?o.defaultNS=o.ns:o.ns.indexOf("translation")<0&&(o.defaultNS=o.ns[0]));const m=tm();this.options={...m,...this.options,...rm(o)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...m.interpolation,...this.options.interpolation}),o.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=o.keySeparator),o.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=o.nsSeparator);const u=b=>b?typeof b=="function"?new b:b:null;if(!this.options.isClone){this.modules.logger?yn.init(u(this.modules.logger),this.options):yn.init(null,this.options);let b;this.modules.formatter?b=this.modules.formatter:typeof Intl<"u"&&(b=AS);const v=new Zp(this.options);this.store=new Kp(this.options.resources,this.options);const i=this.services;i.logger=yn,i.resourceStore=this.store,i.languageUtils=v,i.pluralResolver=new LS(v,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),b&&(!this.options.interpolation.format||this.options.interpolation.format===m.interpolation.format)&&(i.formatter=u(b),i.formatter.init(i,this.options),this.options.interpolation.format=i.formatter.format.bind(i.formatter)),i.interpolator=new NS(this.options),i.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},i.backendConnector=new DS(u(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on("*",function(d){for(var f=arguments.length,y=new Array(f>1?f-1:0),g=1;g<f;g++)y[g-1]=arguments[g];n.emit(d,...y)}),this.modules.languageDetector&&(i.languageDetector=u(this.modules.languageDetector),i.languageDetector.init&&i.languageDetector.init(i,this.options.detection,this.options)),this.modules.i18nFormat&&(i.i18nFormat=u(this.modules.i18nFormat),i.i18nFormat.init&&i.i18nFormat.init(this)),this.translator=new _l(this.services,this.options),this.translator.on("*",function(d){for(var f=arguments.length,y=new Array(f>1?f-1:0),g=1;g<f;g++)y[g-1]=arguments[g];n.emit(d,...y)}),this.modules.external.forEach(d=>{d.init&&d.init(this)})}if(this.format=this.options.interpolation.format,t||(t=Mi),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const b=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);b.length>0&&b[0]!=="dev"&&(this.options.lng=b[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(b=>{this[b]=function(){return n.store[b](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(b=>{this[b]=function(){return n.store[b](...arguments),n}});const s=ea(),h=()=>{const b=(v,i)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),s.resolve(i),t(v,i)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return b(null,this.t.bind(this));this.changeLanguage(this.options.lng,b)};return this.options.resources||!this.options.initImmediate?h():setTimeout(h,0),s}loadResources(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Mi;const m=dt(n)?n:this.language;if(typeof n=="function"&&(t=n),!this.options.resources||this.options.partialBundledLanguages){if(m&&m.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return t();const u=[],a=p=>{if(!p||p==="cimode")return;this.services.languageUtils.toResolveHierarchy(p).forEach(h=>{h!=="cimode"&&u.indexOf(h)<0&&u.push(h)})};m?a(m):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(s=>a(s)),this.options.preload&&this.options.preload.forEach(p=>a(p)),this.services.backendConnector.load(u,this.options.ns,p=>{!p&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),t(p)})}else t(null)}reloadResources(n,o,t){const m=ea();return typeof n=="function"&&(t=n,n=void 0),typeof o=="function"&&(t=o,o=void 0),n||(n=this.languages),o||(o=this.options.ns),t||(t=Mi),this.services.backendConnector.reload(n,o,u=>{m.resolve(),t(u)}),m}use(n){if(!n)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!n.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return n.type==="backend"&&(this.modules.backend=n),(n.type==="logger"||n.log&&n.warn&&n.error)&&(this.modules.logger=n),n.type==="languageDetector"&&(this.modules.languageDetector=n),n.type==="i18nFormat"&&(this.modules.i18nFormat=n),n.type==="postProcessor"&&sv.addPostProcessor(n),n.type==="formatter"&&(this.modules.formatter=n),n.type==="3rdParty"&&this.modules.external.push(n),this}setResolvedLanguage(n){if(!(!n||!this.languages)&&!(["cimode","dev"].indexOf(n)>-1))for(let o=0;o<this.languages.length;o++){const t=this.languages[o];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}}changeLanguage(n,o){var t=this;this.isLanguageChangingTo=n;const m=ea();this.emit("languageChanging",n);const u=s=>{this.language=s,this.languages=this.services.languageUtils.toResolveHierarchy(s),this.resolvedLanguage=void 0,this.setResolvedLanguage(s)},a=(s,h)=>{h?(u(h),this.translator.changeLanguage(h),this.isLanguageChangingTo=void 0,this.emit("languageChanged",h),this.logger.log("languageChanged",h)):this.isLanguageChangingTo=void 0,m.resolve(function(){return t.t(...arguments)}),o&&o(s,function(){return t.t(...arguments)})},p=s=>{!n&&!s&&this.services.languageDetector&&(s=[]);const h=dt(s)?s:this.services.languageUtils.getBestMatchFromCodes(s);h&&(this.language||u(h),this.translator.language||this.translator.changeLanguage(h),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(h)),this.loadResources(h,b=>{a(b,h)})};return!n&&this.services.languageDetector&&!this.services.languageDetector.async?p(this.services.languageDetector.detect()):!n&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(p):this.services.languageDetector.detect(p):p(n),m}getFixedT(n,o,t){var m=this;const u=function(a,p){let s;if(typeof p!="object"){for(var h=arguments.length,b=new Array(h>2?h-2:0),v=2;v<h;v++)b[v-2]=arguments[v];s=m.options.overloadTranslationOptionHandler([a,p].concat(b))}else s={...p};s.lng=s.lng||u.lng,s.lngs=s.lngs||u.lngs,s.ns=s.ns||u.ns,s.keyPrefix!==""&&(s.keyPrefix=s.keyPrefix||t||u.keyPrefix);const i=m.options.keySeparator||".";let d;return s.keyPrefix&&Array.isArray(a)?d=a.map(f=>`${s.keyPrefix}${i}${f}`):d=s.keyPrefix?`${s.keyPrefix}${i}${a}`:a,m.t(d,s)};return dt(n)?u.lng=n:u.lngs=n,u.ns=o,u.keyPrefix=t,u}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(n){this.options.defaultNS=n}hasLoadedNamespace(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const t=o.lng||this.resolvedLanguage||this.languages[0],m=this.options?this.options.fallbackLng:!1,u=this.languages[this.languages.length-1];if(t.toLowerCase()==="cimode")return!0;const a=(p,s)=>{const h=this.services.backendConnector.state[`${p}|${s}`];return h===-1||h===0||h===2};if(o.precheck){const p=o.precheck(this,a);if(p!==void 0)return p}return!!(this.hasResourceBundle(t,n)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(t,n)&&(!m||a(u,n)))}loadNamespaces(n,o){const t=ea();return this.options.ns?(dt(n)&&(n=[n]),n.forEach(m=>{this.options.ns.indexOf(m)<0&&this.options.ns.push(m)}),this.loadResources(m=>{t.resolve(),o&&o(m)}),t):(o&&o(),Promise.resolve())}loadLanguages(n,o){const t=ea();dt(n)&&(n=[n]);const m=this.options.preload||[],u=n.filter(a=>m.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return u.length?(this.options.preload=m.concat(u),this.loadResources(a=>{t.resolve(),o&&o(a)}),t):(o&&o(),Promise.resolve())}dir(n){if(n||(n=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!n)return"rtl";const o=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],t=this.services&&this.services.languageUtils||new Zp(tm());return o.indexOf(t.getLanguagePartFromCode(n))>-1||n.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return new Ga(n,o)}cloneInstance(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Mi;const t=n.forkResourceStore;t&&delete n.forkResourceStore;const m={...this.options,...n,isClone:!0},u=new Ga(m);return(n.debug!==void 0||n.prefix!==void 0)&&(u.logger=u.logger.clone(n)),["store","services","language"].forEach(p=>{u[p]=this[p]}),u.services={...this.services},u.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},t&&(u.store=new Kp(this.store.data,m),u.services.resourceStore=u.store),u.translator=new _l(u.services,m),u.translator.on("*",function(p){for(var s=arguments.length,h=new Array(s>1?s-1:0),b=1;b<s;b++)h[b-1]=arguments[b];u.emit(p,...h)}),u.init(m,o),u.translator.options=m,u.translator.backendConnector.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const vr=Ga.createInstance();vr.createInstance=Ga.createInstance;vr.createInstance;vr.dir;vr.init;vr.loadResources;vr.reloadResources;vr.use;vr.changeLanguage;vr.getFixedT;vr.t;vr.exists;vr.setDefaultNamespace;vr.hasLoadedNamespace;vr.loadNamespaces;vr.loadLanguages;const US={title:"DR",play:"Gioca Demo",settings:"Impostazioni",saves:"Salvataggi",credits:"Crediti"},BS={title:"Impostazioni",back:"Torna al menu"},zS={title:"Salvataggi",subtitle:"Gestisci gli slot locali",new:"Nuovo slot",duplicate:"Duplica",load:"Carica",delete:"Elimina",active:"Attivo",empty:"Nessun salvataggio disponibile. Creane uno nuovo!"},GS={loading:"Caricamento..."},VS={menu:US,settings:BS,saves:zS,common:GS},HS={title:"Cute Little Game",play:"Play Demo",settings:"Settings",saves:"Saves",credits:"Credits"},WS={title:"Settings",back:"Back to menu"},qS={title:"Saves",subtitle:"Manage local slots",new:"New slot",duplicate:"Duplicate",load:"Load",delete:"Delete",active:"Active",empty:"No saves yet. Create a new slot!"},$S={loading:"Loading..."},YS={menu:HS,settings:WS,saves:qS,common:$S},XS=(()=>{var n,o;if(typeof window>"u")return"it";const r=localStorage.getItem("gc:settings");if(r)try{const t=JSON.parse(r);if((n=t==null?void 0:t.state)!=null&&n.language)return t.state.language}catch{}return((o=navigator.language)==null?void 0:o.split("-")[0])??"it"})();vr.use(k2).init({resources:{it:{translation:VS},en:{translation:YS}},lng:XS,fallbackLng:"it",interpolation:{escapeValue:!1}});const av=document.getElementById("root");if(!av)throw new Error("Root element #root not found");Vu.createRoot(av).render(H.jsx(ud.StrictMode,{children:H.jsx(ex,{children:H.jsx(mS,{})})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").catch(()=>{})});
